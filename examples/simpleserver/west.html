<@
var test="bla";
for(var i=0;i<1;i++) {
    print("<h2>",(i+1),"</h2>");
try{
    var r=dbms.QuerySettings({alias:"psgrmt",query:"select @@VAL@@::int as col from test.tbltest limit 1",script:script,success:function(r){
        @><table><@
        r.OnColumns=function(rdr) {
            @><tr><@
            rdr.Columns().forEach(function(val){
                @><th><@print(val);@></th><@
            });
            @></tr><@
        };
        r.OnRow=function(rdr,rn) {
            @><tr><@
                rdr.Data().forEach(function(val){
                @><td><@print(rn,":",val);@></td><@
            });
            @></tr><@
        };
        r.OnFinalize=function(){
            @></table><@
        };
    },"error":function(err){
        @><tr><th><@print(err.Error());@></th></tr><@
    },args:{"VAL":42}});
    while(r.Next());
    r.Close();
}catch(e){
    println(e.message);
}
}
@>