package sip

import (
	"encoding/base64"
	"io"
	"strings"

	"github.com/evocert/kwe/resources"
)

// embedded https://cdn.jsdelivr.net/npm/sip.js/dist/sip.min.js v 0.16.1 at the time
func SipJS() io.Reader {
	return base64.NewDecoder(base64.StdEncoding, strings.NewReader(sipjs))
}

func init() {
	gblrs := resources.GLOBALRSNG()
	gblrs.FS().MKDIR("/sip/js", "")
	gblrs.FS().SET("/sip/js/sip.js", SipJS())
	gblrs.FS().MKDIR("/sip/html", "")
	gblrs.FS().SET("/sip/html/head.html", `<script type="appliaction/javascript" src="/sip/js/sip.js"></script>`)
}

const sipjs string = `LyohIEZvciBsaWNlbnNlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUgc2lwLm1pbi5qcy5MSUNFTlNFLnR4dCAqLwohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5TSVA9dCgpOmUuU0lQPXQoKX0odGhpcywoZnVuY3Rpb24oKXtyZXR1cm4oKCk9PnsidXNlIHN0cmljdCI7dmFyIGU9e2Q6KHQscyk9Pntmb3IodmFyIGkgaW4gcyllLm8ocyxpKSYmIWUubyh0LGkpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLHtlbnVtZXJhYmxlOiEwLGdldDpzW2ldfSl9LG86KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpLHI6ZT0+eyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9fSx0PXt9O2Uucih0KSxlLmQodCx7QWNrOigpPT5sLEJ5ZTooKT0+ZyxDb250ZW50VHlwZVVuc3VwcG9ydGVkRXJyb3I6KCk9Pm8sQ29yZTooKT0+cyxFbWl0dGVySW1wbDooKT0+dSxHcmFtbWFyOigpPT55LEluZm86KCk9PnAsSW52aXRhdGlvbjooKT0+eixJbnZpdGVyOigpPT5YLE1lc3NhZ2U6KCk9PkcsTWVzc2FnZXI6KCk9PlEsTmFtZUFkZHJIZWFkZXI6KCk9Pm0sTm90aWZpY2F0aW9uOigpPT5WLFBhcmFtZXRlcnM6KCk9PmYsUHVibGlzaGVyOigpPT5jZSxQdWJsaXNoZXJTdGF0ZTooKT0+ZWUsUmVmZXJyYWw6KCk9PkssUmVnaXN0ZXJlcjooKT0+aGUsUmVnaXN0ZXJlclN0YXRlOigpPT50ZSxSZXF1ZXN0UGVuZGluZ0Vycm9yOigpPT5hLFNJUEV4dGVuc2lvbjooKT0+WSxTZXNzaW9uOigpPT5aLFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJFcnJvcjooKT0+YyxTZXNzaW9uU3RhdGU6KCk9PlcsU2Vzc2lvblRlcm1pbmF0ZWRFcnJvcjooKT0+aCxTdGF0ZVRyYW5zaXRpb25FcnJvcjooKT0+ZCxTdWJzY3JpYmVyOigpPT5sZSxTdWJzY3JpcHRpb246KCk9PmRlLFN1YnNjcmlwdGlvblN0YXRlOigpPT5pZSxUcmFuc3BvcnRTdGF0ZTooKT0+cmUsVVJJOigpPT52LFVzZXJBZ2VudDooKT0+Y3QsVXNlckFnZW50UmVnaXN0ZXJlZE9wdGlvblRhZ3M6KCk9PkosVXNlckFnZW50U3RhdGU6KCk9Pm5lLFdlYjooKT0+aSxlcXVpdmFsZW50VVJJOigpPT53LG5hbWU6KCk9PlN0LHZlcnNpb246KCk9Pnl0fSk7dmFyIHM9e307ZS5yKHMpLGUuZChzLHtCeWVVc2VyQWdlbnRDbGllbnQ6KCk9PkFlLEJ5ZVVzZXJBZ2VudFNlcnZlcjooKT0+a2UsQzooKT0+TCxDYW5jZWxVc2VyQWdlbnRDbGllbnQ6KCk9Pmh0LENsaWVudFRyYW5zYWN0aW9uOigpPT55ZSxEaWFsb2c6KCk9PiRlLERpZ2VzdEF1dGhlbnRpY2F0aW9uOigpPT52ZSxFeGNlcHRpb246KCk9Pm4sR3JhbW1hcjooKT0+eSxJbmNvbWluZ01lc3NhZ2U6KCk9PkEsSW5jb21pbmdSZXF1ZXN0TWVzc2FnZTooKT0+RCxJbmNvbWluZ1Jlc3BvbnNlTWVzc2FnZTooKT0+SCxJbmZvVXNlckFnZW50Q2xpZW50OigpPT5fZSxJbmZvVXNlckFnZW50U2VydmVyOigpPT5QZSxJbnZpdGVDbGllbnRUcmFuc2FjdGlvbjooKT0+SWUsSW52aXRlU2VydmVyVHJhbnNhY3Rpb246KCk9PkVlLEludml0ZVVzZXJBZ2VudENsaWVudDooKT0+VmUsSW52aXRlVXNlckFnZW50U2VydmVyOigpPT56ZSxMZXZlbHM6KCk9Pm9lLExvZ2dlcjooKT0+dWUsTG9nZ2VyRmFjdG9yeTooKT0+cGUsTWVzc2FnZVVzZXJBZ2VudENsaWVudDooKT0+cWUsTWVzc2FnZVVzZXJBZ2VudFNlcnZlcjooKT0+eGUsTmFtZUFkZHJIZWFkZXI6KCk9Pm0sTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb246KCk9PlNlLE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uOigpPT5EZSxOb3RpZnlVc2VyQWdlbnRDbGllbnQ6KCk9Pk5lLE5vdGlmeVVzZXJBZ2VudFNlcnZlcjooKT0+TWUsT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZTooKT0+ayxQYXJhbWV0ZXJzOigpPT5mLFBhcnNlcjooKT0+c3QsUHJhY2tVc2VyQWdlbnRDbGllbnQ6KCk9Pk9lLFByYWNrVXNlckFnZW50U2VydmVyOigpPT5VZSxQdWJsaXNoVXNlckFnZW50Q2xpZW50OigpPT5LZSxSZUludml0ZVVzZXJBZ2VudENsaWVudDooKT0+amUsUmVJbnZpdGVVc2VyQWdlbnRTZXJ2ZXI6KCk9PkZlLFJlU3Vic2NyaWJlVXNlckFnZW50Q2xpZW50OigpPT5ZZSxSZVN1YnNjcmliZVVzZXJBZ2VudFNlcnZlcjooKT0+ZHQsUmVmZXJVc2VyQWdlbnRDbGllbnQ6KCk9PkxlLFJlZmVyVXNlckFnZW50U2VydmVyOigpPT5CZSxSZWdpc3RlclVzZXJBZ2VudENsaWVudDooKT0+V2UsUmVnaXN0ZXJVc2VyQWdlbnRTZXJ2ZXI6KCk9PlhlLFNlcnZlclRyYW5zYWN0aW9uOigpPT5SZSxTZXNzaW9uRGlhbG9nOigpPT5HZSxTZXNzaW9uU3RhdGU6KCk9Pk4sU2lnbmFsaW5nU3RhdGU6KCk9Pk0sU3Vic2NyaWJlVXNlckFnZW50Q2xpZW50OigpPT5KZSxTdWJzY3JpYmVVc2VyQWdlbnRTZXJ2ZXI6KCk9PlFlLFN1YnNjcmlwdGlvbkRpYWxvZzooKT0+WmUsU3Vic2NyaXB0aW9uU3RhdGU6KCk9PnNlLFRpbWVyczooKT0+RixUcmFuc2FjdGlvbjooKT0+VGUsVHJhbnNhY3Rpb25TdGF0ZTooKT0+YWUsVHJhbnNhY3Rpb25TdGF0ZUVycm9yOigpPT5PLFRyYW5zcG9ydEVycm9yOigpPT5iZSxVUkk6KCk9PnYsVXNlckFnZW50Q2xpZW50OigpPT5DZSxVc2VyQWdlbnRDb3JlOigpPT50dCxVc2VyQWdlbnRTZXJ2ZXI6KCk9PkhlLGNvbnN0cnVjdE91dGdvaW5nUmVzcG9uc2U6KCk9PndlLGVxdWl2YWxlbnRVUkk6KCk9PncsZnJvbUJvZHlMZWdhY3k6KCk9PlAsZ2V0Qm9keTooKT0+eCxpc0JvZHk6KCk9PnF9KTt2YXIgaT17fTtlLnIoaSksZS5kKGkse1Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI6KCk9Pm50LFNpbXBsZVVzZXI6KCk9PlR0LFRyYW5zcG9ydDooKT0+YXQsYWRkTWlkTGluZXM6KCk9Pnd0LGNsZWFuSml0c2lTZHBJbWFnZWF0dHI6KCk9PnB0LGRlZmF1bHRNZWRpYVN0cmVhbUZhY3Rvcnk6KCk9Pml0LGRlZmF1bHRQZWVyQ29ubmVjdGlvbkNvbmZpZ3VyYXRpb246KCk9PnJ0LGRlZmF1bHRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeTooKT0+b3QsaG9sZE1vZGlmaWVyOigpPT5idCxzdHJpcEc3MjI6KCk9PmZ0LHN0cmlwUnRwUGF5bG9hZDooKT0+bXQsc3RyaXBUY3BDYW5kaWRhdGVzOigpPT5ndCxzdHJpcFRlbGVwaG9uZUV2ZW50OigpPT51dCxzdHJpcFZpZGVvOigpPT52dH0pO2NvbnN0IHI9IjAuMjAuMCI7Y2xhc3MgbiBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLG5ldy50YXJnZXQucHJvdG90eXBlKX19Y2xhc3MgbyBleHRlbmRzIG57Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8IlVuc3VwcG9ydGVkIGNvbnRlbnQgdHlwZS4iKX19Y2xhc3MgYSBleHRlbmRzIG57Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8IlJlcXVlc3QgcGVuZGluZy4iKX19Y2xhc3MgYyBleHRlbmRzIG57Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8IlVuc3BlY2lmaWVkIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBlcnJvci4iKX19Y2xhc3MgaCBleHRlbmRzIG57Y29uc3RydWN0b3IoKXtzdXBlcigiVGhlIHNlc3Npb24gaGFzIHRlcm1pbmF0ZWQuIil9fWNsYXNzIGQgZXh0ZW5kcyBue2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fCJBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgc3RhdGUgdHJhbnNpdGlvbi4iKX19Y2xhc3MgbHtjb25zdHJ1Y3RvcihlKXt0aGlzLmluY29taW5nQWNrUmVxdWVzdD1lfWdldCByZXF1ZXN0KCl7cmV0dXJuIHRoaXMuaW5jb21pbmdBY2tSZXF1ZXN0Lm1lc3NhZ2V9fWNsYXNzIGd7Y29uc3RydWN0b3IoZSl7dGhpcy5pbmNvbWluZ0J5ZVJlcXVlc3Q9ZX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLmluY29taW5nQnllUmVxdWVzdC5tZXNzYWdlfWFjY2VwdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ0J5ZVJlcXVlc3QuYWNjZXB0KGUpLFByb21pc2UucmVzb2x2ZSgpfXJlamVjdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ0J5ZVJlcXVlc3QucmVqZWN0KGUpLFByb21pc2UucmVzb2x2ZSgpfX1jbGFzcyB1e2NvbnN0cnVjdG9yKCl7dGhpcy5saXN0ZW5lcnM9bmV3IEFycmF5fWFkZExpc3RlbmVyKGUsdCl7Y29uc3Qgcz10PT57dGhpcy5yZW1vdmVMaXN0ZW5lcihzKSxlKHQpfTshMD09PShudWxsPT10P3ZvaWQgMDp0Lm9uY2UpP3RoaXMubGlzdGVuZXJzLnB1c2gocyk6dGhpcy5saXN0ZW5lcnMucHVzaChlKX1lbWl0KGUpe3RoaXMubGlzdGVuZXJzLnNsaWNlKCkuZm9yRWFjaCgodD0+dChlKSkpfXJlbW92ZUFsbExpc3RlbmVycygpe3RoaXMubGlzdGVuZXJzPVtdfXJlbW92ZUxpc3RlbmVyKGUpe3RoaXMubGlzdGVuZXJzPXRoaXMubGlzdGVuZXJzLmZpbHRlcigodD0+dCE9PWUpKX1vbihlKXtyZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihlKX1vZmYoZSl7cmV0dXJuIHRoaXMucmVtb3ZlTGlzdGVuZXIoZSl9b25jZShlKXtyZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihlLHtvbmNlOiEwfSl9fWNsYXNzIHB7Y29uc3RydWN0b3IoZSl7dGhpcy5pbmNvbWluZ0luZm9SZXF1ZXN0PWV9Z2V0IHJlcXVlc3QoKXtyZXR1cm4gdGhpcy5pbmNvbWluZ0luZm9SZXF1ZXN0Lm1lc3NhZ2V9YWNjZXB0KGUpe3JldHVybiB0aGlzLmluY29taW5nSW5mb1JlcXVlc3QuYWNjZXB0KGUpLFByb21pc2UucmVzb2x2ZSgpfXJlamVjdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ0luZm9SZXF1ZXN0LnJlamVjdChlKSxQcm9taXNlLnJlc29sdmUoKX19Y2xhc3MgZntjb25zdHJ1Y3RvcihlKXt0aGlzLnBhcmFtZXRlcnM9e307Zm9yKGNvbnN0IHQgaW4gZSllLmhhc093blByb3BlcnR5KHQpJiZ0aGlzLnNldFBhcmFtKHQsZVt0XSl9c2V0UGFyYW0oZSx0KXtlJiYodGhpcy5wYXJhbWV0ZXJzW2UudG9Mb3dlckNhc2UoKV09bnVsbD09dD9udWxsOnQudG9TdHJpbmcoKSl9Z2V0UGFyYW0oZSl7aWYoZSlyZXR1cm4gdGhpcy5wYXJhbWV0ZXJzW2UudG9Mb3dlckNhc2UoKV19aGFzUGFyYW0oZSl7cmV0dXJuISghZXx8dm9pZCAwPT09dGhpcy5wYXJhbWV0ZXJzW2UudG9Mb3dlckNhc2UoKV0pfWRlbGV0ZVBhcmFtKGUpe2lmKGU9ZS50b0xvd2VyQ2FzZSgpLHRoaXMuaGFzUGFyYW0oZSkpe2NvbnN0IHQ9dGhpcy5wYXJhbWV0ZXJzW2VdO3JldHVybiBkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW2VdLHR9fWNsZWFyUGFyYW1zKCl7dGhpcy5wYXJhbWV0ZXJzPXt9fX1jbGFzcyBtIGV4dGVuZHMgZntjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIocyksdGhpcy51cmk9ZSx0aGlzLl9kaXNwbGF5TmFtZT10fWdldCBmcmllbmRseU5hbWUoKXtyZXR1cm4gdGhpcy5kaXNwbGF5TmFtZXx8dGhpcy51cmkuYW9yfWdldCBkaXNwbGF5TmFtZSgpe3JldHVybiB0aGlzLl9kaXNwbGF5TmFtZX1zZXQgZGlzcGxheU5hbWUoZSl7dGhpcy5fZGlzcGxheU5hbWU9ZX1jbG9uZSgpe3JldHVybiBuZXcgbSh0aGlzLnVyaS5jbG9uZSgpLHRoaXMuX2Rpc3BsYXlOYW1lLEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJhbWV0ZXJzKSkpfXRvU3RyaW5nKCl7bGV0IGU9dGhpcy5kaXNwbGF5TmFtZXx8IjAiPT09dGhpcy5kaXNwbGF5TmFtZT8nIicrdGhpcy5kaXNwbGF5TmFtZSsnIiAnOiIiO2UrPSI8Iit0aGlzLnVyaS50b1N0cmluZygpKyI+Ijtmb3IoY29uc3QgdCBpbiB0aGlzLnBhcmFtZXRlcnMpdGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KHQpJiYoZSs9IjsiK3QsbnVsbCE9PXRoaXMucGFyYW1ldGVyc1t0XSYmKGUrPSI9Iit0aGlzLnBhcmFtZXRlcnNbdF0pKTtyZXR1cm4gZX19Y2xhc3MgdiBleHRlbmRzIGZ7Y29uc3RydWN0b3IoZT0ic2lwIix0LHMsaSxyLG4pe2lmKHN1cGVyKHJ8fHt9KSx0aGlzLmhlYWRlcnM9e30sIXMpdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyBvciBpbnZhbGlkICJob3N0IiBwYXJhbWV0ZXInKTtmb3IoY29uc3QgZSBpbiBuKW4uaGFzT3duUHJvcGVydHkoZSkmJnRoaXMuc2V0SGVhZGVyKGUsbltlXSk7dGhpcy5yYXc9e3NjaGVtZTplLHVzZXI6dCxob3N0OnMscG9ydDppfSx0aGlzLm5vcm1hbD17c2NoZW1lOmUudG9Mb3dlckNhc2UoKSx1c2VyOnQsaG9zdDpzLnRvTG93ZXJDYXNlKCkscG9ydDppfX1nZXQgc2NoZW1lKCl7cmV0dXJuIHRoaXMubm9ybWFsLnNjaGVtZX1zZXQgc2NoZW1lKGUpe3RoaXMucmF3LnNjaGVtZT1lLHRoaXMubm9ybWFsLnNjaGVtZT1lLnRvTG93ZXJDYXNlKCl9Z2V0IHVzZXIoKXtyZXR1cm4gdGhpcy5ub3JtYWwudXNlcn1zZXQgdXNlcihlKXt0aGlzLm5vcm1hbC51c2VyPXRoaXMucmF3LnVzZXI9ZX1nZXQgaG9zdCgpe3JldHVybiB0aGlzLm5vcm1hbC5ob3N0fXNldCBob3N0KGUpe3RoaXMucmF3Lmhvc3Q9ZSx0aGlzLm5vcm1hbC5ob3N0PWUudG9Mb3dlckNhc2UoKX1nZXQgYW9yKCl7cmV0dXJuIHRoaXMubm9ybWFsLnVzZXIrIkAiK3RoaXMubm9ybWFsLmhvc3R9Z2V0IHBvcnQoKXtyZXR1cm4gdGhpcy5ub3JtYWwucG9ydH1zZXQgcG9ydChlKXt0aGlzLm5vcm1hbC5wb3J0PXRoaXMucmF3LnBvcnQ9ZX1zZXRIZWFkZXIoZSx0KXt0aGlzLmhlYWRlcnNbdGhpcy5oZWFkZXJpemUoZSldPXQgaW5zdGFuY2VvZiBBcnJheT90Olt0XX1nZXRIZWFkZXIoZSl7aWYoZSlyZXR1cm4gdGhpcy5oZWFkZXJzW3RoaXMuaGVhZGVyaXplKGUpXX1oYXNIZWFkZXIoZSl7cmV0dXJuISFlJiYhIXRoaXMuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eSh0aGlzLmhlYWRlcml6ZShlKSl9ZGVsZXRlSGVhZGVyKGUpe2lmKGU9dGhpcy5oZWFkZXJpemUoZSksdGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KGUpKXtjb25zdCB0PXRoaXMuaGVhZGVyc1tlXTtyZXR1cm4gZGVsZXRlIHRoaXMuaGVhZGVyc1tlXSx0fX1jbGVhckhlYWRlcnMoKXt0aGlzLmhlYWRlcnM9e319Y2xvbmUoKXtyZXR1cm4gbmV3IHYodGhpcy5fcmF3LnNjaGVtZSx0aGlzLl9yYXcudXNlcnx8IiIsdGhpcy5fcmF3Lmhvc3QsdGhpcy5fcmF3LnBvcnQsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnBhcmFtZXRlcnMpKSxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuaGVhZGVycykpKX10b1Jhdygpe3JldHVybiB0aGlzLl90b1N0cmluZyh0aGlzLl9yYXcpfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuX3RvU3RyaW5nKHRoaXMuX25vcm1hbCl9Z2V0IF9ub3JtYWwoKXtyZXR1cm4gdGhpcy5ub3JtYWx9Z2V0IF9yYXcoKXtyZXR1cm4gdGhpcy5yYXd9X3RvU3RyaW5nKGUpe2xldCB0PWUuc2NoZW1lKyI6IjtlLnNjaGVtZS50b0xvd2VyQ2FzZSgpLm1hdGNoKCJec2lwcz8kIil8fCh0Kz0iLy8iKSxlLnVzZXImJih0Kz10aGlzLmVzY2FwZVVzZXIoZS51c2VyKSsiQCIpLHQrPWUuaG9zdCwoZS5wb3J0fHwwPT09ZS5wb3J0KSYmKHQrPSI6IitlLnBvcnQpO2Zvcihjb25zdCBlIGluIHRoaXMucGFyYW1ldGVycyl0aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoZSkmJih0Kz0iOyIrZSxudWxsIT09dGhpcy5wYXJhbWV0ZXJzW2VdJiYodCs9Ij0iK3RoaXMucGFyYW1ldGVyc1tlXSkpO2NvbnN0IHM9W107Zm9yKGNvbnN0IGUgaW4gdGhpcy5oZWFkZXJzKWlmKHRoaXMuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShlKSlmb3IoY29uc3QgdCBpbiB0aGlzLmhlYWRlcnNbZV0pdGhpcy5oZWFkZXJzW2VdLmhhc093blByb3BlcnR5KHQpJiZzLnB1c2goZSsiPSIrdGhpcy5oZWFkZXJzW2VdW3RdKTtyZXR1cm4gcy5sZW5ndGg+MCYmKHQrPSI/IitzLmpvaW4oIiYiKSksdH1lc2NhcGVVc2VyKGUpe2xldCB0O3RyeXt0PWRlY29kZVVSSUNvbXBvbmVudChlKX1jYXRjaChlKXt0aHJvdyBlfXJldHVybiBlbmNvZGVVUklDb21wb25lbnQodCkucmVwbGFjZSgvJTNBL2dpLCI6IikucmVwbGFjZSgvJTJCL2dpLCIrIikucmVwbGFjZSgvJTNGL2dpLCI/IikucmVwbGFjZSgvJTJGL2dpLCIvIil9aGVhZGVyaXplKGUpe2NvbnN0IHQ9eyJDYWxsLUlkIjoiQ2FsbC1JRCIsQ3NlcToiQ1NlcSIsIk1pbi1TZSI6Ik1pbi1TRSIsUmFjazoiUkFjayIsUnNlcToiUlNlcSIsIld3dy1BdXRoZW50aWNhdGUiOiJXV1ctQXV0aGVudGljYXRlIn0scz1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCItIikuc3BsaXQoIi0iKSxpPXMubGVuZ3RoO2xldCByPSIiO2ZvcihsZXQgZT0wO2U8aTtlKyspMCE9PWUmJihyKz0iLSIpLHIrPXNbZV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrc1tlXS5zdWJzdHJpbmcoMSk7cmV0dXJuIHRbcl0mJihyPXRbcl0pLHJ9fWZ1bmN0aW9uIHcoZSx0KXtpZihlLnNjaGVtZSE9PXQuc2NoZW1lKXJldHVybiExO2lmKGUudXNlciE9PXQudXNlcnx8ZS5ob3N0IT09dC5ob3N0fHxlLnBvcnQhPT10LnBvcnQpcmV0dXJuITE7aWYoIWZ1bmN0aW9uKGUsdCl7Y29uc3Qgcz1PYmplY3Qua2V5cyhlLnBhcmFtZXRlcnMpLGk9T2JqZWN0LmtleXModC5wYXJhbWV0ZXJzKTtyZXR1cm4hIXMuZmlsdGVyKChlPT5pLmluY2x1ZGVzKGUpKSkuZXZlcnkoKHM9PmUucGFyYW1ldGVyc1tzXT09PXQucGFyYW1ldGVyc1tzXSkpJiYoISFbInVzZXIiLCJ0dGwiLCJtZXRob2QiLCJ0cmFuc3BvcnQiXS5ldmVyeSgocz0+ZS5oYXNQYXJhbShzKSYmdC5oYXNQYXJhbShzKXx8IWUuaGFzUGFyYW0ocykmJiF0Lmhhc1BhcmFtKHMpKSkmJiEhWyJtYWRkciJdLmV2ZXJ5KChzPT5lLmhhc1BhcmFtKHMpJiZ0Lmhhc1BhcmFtKHMpfHwhZS5oYXNQYXJhbShzKSYmIXQuaGFzUGFyYW0ocykpKSl9KGUsdCkpcmV0dXJuITE7Y29uc3Qgcz1PYmplY3Qua2V5cyhlLmhlYWRlcnMpLGk9T2JqZWN0LmtleXModC5oZWFkZXJzKTtpZigwIT09cy5sZW5ndGh8fDAhPT1pLmxlbmd0aCl7aWYocy5sZW5ndGghPT1pLmxlbmd0aClyZXR1cm4hMTtjb25zdCByPXMuZmlsdGVyKChlPT5pLmluY2x1ZGVzKGUpKSk7aWYoci5sZW5ndGghPT1pLmxlbmd0aClyZXR1cm4hMTtpZighci5ldmVyeSgocz0+ZS5oZWFkZXJzW3NdLmxlbmd0aCYmdC5oZWFkZXJzW3NdLmxlbmd0aCYmZS5oZWFkZXJzW3NdWzBdPT09dC5oZWFkZXJzW3NdWzBdKSkpcmV0dXJuITF9cmV0dXJuITB9Y2xhc3MgYiBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsdCxzLGkpe3N1cGVyKCksdGhpcy5tZXNzYWdlPWUsdGhpcy5leHBlY3RlZD10LHRoaXMuZm91bmQ9cyx0aGlzLmxvY2F0aW9uPWksdGhpcy5uYW1lPSJTeW50YXhFcnJvciIsImZ1bmN0aW9uIj09dHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLGIpfXN0YXRpYyBidWlsZE1lc3NhZ2UoZSx0KXtmdW5jdGlvbiBzKGUpe3JldHVybiBlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cXC9nLCJcXFxcIikucmVwbGFjZSgvIi9nLCdcXCInKS5yZXBsYWNlKC9cMC9nLCJcXDAiKS5yZXBsYWNlKC9cdC9nLCJcXHQiKS5yZXBsYWNlKC9cbi9nLCJcXG4iKS5yZXBsYWNlKC9cci9nLCJcXHIiKS5yZXBsYWNlKC9bXHgwMC1ceDBGXS9nLChlPT4iXFx4MCIrcyhlKSkpLnJlcGxhY2UoL1tceDEwLVx4MUZceDdGLVx4OUZdL2csKGU9PiJcXHgiK3MoZSkpKX1mdW5jdGlvbiByKGUpe3JldHVybiBlLnJlcGxhY2UoL1xcL2csIlxcXFwiKS5yZXBsYWNlKC9cXS9nLCJcXF0iKS5yZXBsYWNlKC9cXi9nLCJcXF4iKS5yZXBsYWNlKC8tL2csIlxcLSIpLnJlcGxhY2UoL1wwL2csIlxcMCIpLnJlcGxhY2UoL1x0L2csIlxcdCIpLnJlcGxhY2UoL1xuL2csIlxcbiIpLnJlcGxhY2UoL1xyL2csIlxcciIpLnJlcGxhY2UoL1tceDAwLVx4MEZdL2csKGU9PiJcXHgwIitzKGUpKSkucmVwbGFjZSgvW1x4MTAtXHgxRlx4N0YtXHg5Rl0vZywoZT0+IlxceCIrcyhlKSkpfWZ1bmN0aW9uIG4oZSl7c3dpdGNoKGUudHlwZSl7Y2FzZSJsaXRlcmFsIjpyZXR1cm4nIicraShlLnRleHQpKyciJztjYXNlImNsYXNzIjpjb25zdCB0PWUucGFydHMubWFwKChlPT5BcnJheS5pc0FycmF5KGUpP3IoZVswXSkrIi0iK3IoZVsxXSk6cihlKSkpO3JldHVybiJbIisoZS5pbnZlcnRlZD8iXiI6IiIpK3QrIl0iO2Nhc2UiYW55IjpyZXR1cm4iYW55IGNoYXJhY3RlciI7Y2FzZSJlbmQiOnJldHVybiJlbmQgb2YgaW5wdXQiO2Nhc2Uib3RoZXIiOnJldHVybiBlLmRlc2NyaXB0aW9ufX1yZXR1cm4iRXhwZWN0ZWQgIitmdW5jdGlvbihlKXtjb25zdCB0PWUubWFwKG4pO2xldCBzLGk7aWYodC5zb3J0KCksdC5sZW5ndGg+MCl7Zm9yKHM9MSxpPTE7czx0Lmxlbmd0aDtzKyspdFtzLTFdIT09dFtzXSYmKHRbaV09dFtzXSxpKyspO3QubGVuZ3RoPWl9c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDE6cmV0dXJuIHRbMF07Y2FzZSAyOnJldHVybiB0WzBdKyIgb3IgIit0WzFdO2RlZmF1bHQ6cmV0dXJuIHQuc2xpY2UoMCwtMSkuam9pbigiLCAiKSsiLCBvciAiK3RbdC5sZW5ndGgtMV19fShlKSsiIGJ1dCAiKygoKG89dCk/JyInK2kobykrJyInOiJlbmQgb2YgaW5wdXQiKSsiIGZvdW5kLiIpO3ZhciBvfX1jb25zdCBUPWZ1bmN0aW9uKGUsdCl7dD12b2lkIDAhPT10P3Q6e307Y29uc3Qgcz17fSxpPXtDb250YWN0OjExOSxOYW1lX0FkZHJfSGVhZGVyOjE1NixSZWNvcmRfUm91dGU6MTc2LFJlcXVlc3RfUmVzcG9uc2U6ODEsU0lQX1VSSTo0NSxTdWJzY3JpcHRpb25fU3RhdGU6MTg2LFN1cHBvcnRlZDoxOTEsUmVxdWlyZToxODIsVmlhOjE5NCxhYnNvbHV0ZVVSSTo4NCxDYWxsX0lEOjExOCxDb250ZW50X0Rpc3Bvc2l0aW9uOjEzMCxDb250ZW50X0xlbmd0aDoxMzUsQ29udGVudF9UeXBlOjEzNixDU2VxOjE0NixkaXNwbGF5TmFtZToxMjIsRXZlbnQ6MTQ5LEZyb206MTUxLGhvc3Q6NTIsTWF4X0ZvcndhcmRzOjE1NCxNaW5fU0U6MjEzLFByb3h5X0F1dGhlbnRpY2F0ZToxNTcscXVvdGVkX3N0cmluZzo0MCxSZWZlcl9UbzoxNzgsUmVwbGFjZXM6MTc5LFNlc3Npb25fRXhwaXJlczoyMTAsc3R1bl9VUkk6MjE3LFRvOjE5Mix0dXJuX1VSSToyMjMsdXVpZDoyMjYsV1dXX0F1dGhlbnRpY2F0ZToyMDksY2hhbGxlbmdlOjE1OCxzaXBmcmFnOjIzMCxSZWZlcnJlZF9CeToyMzF9O2xldCByPTExOTtjb25zdCBuPVsiXHJcbiIsdygiXHJcbiIsITEpLC9eWzAtOV0vLFQoW1siMCIsIjkiXV0sITEsITEpLC9eW2EtekEtWl0vLFQoW1siYSIsInoiXSxbIkEiLCJaIl1dLCExLCExKSwvXlswLTlhLWZBLUZdLyxUKFtbIjAiLCI5Il0sWyJhIiwiZiJdLFsiQSIsIkYiXV0sITEsITEpLC9eW1wwLVx4RkZdLyxUKFtbIlwwIiwiXHhmZiJdXSwhMSwhMSksL15bIl0vLFQoWyciJ10sITEsITEpLCIgIix3KCIgIiwhMSksIlx0Iix3KCJcdCIsITEpLC9eW2EtekEtWjAtOV0vLFQoW1siYSIsInoiXSxbIkEiLCJaIl0sWyIwIiwiOSJdXSwhMSwhMSksIjsiLHcoIjsiLCExKSwiLyIsdygiLyIsITEpLCI/Iix3KCI/IiwhMSksIjoiLHcoIjoiLCExKSwiQCIsdygiQCIsITEpLCImIix3KCImIiwhMSksIj0iLHcoIj0iLCExKSwiKyIsdygiKyIsITEpLCIkIix3KCIkIiwhMSksIiwiLHcoIiwiLCExKSwiLSIsdygiLSIsITEpLCJfIix3KCJfIiwhMSksIi4iLHcoIi4iLCExKSwiISIsdygiISIsITEpLCJ+Iix3KCJ+IiwhMSksIioiLHcoIioiLCExKSwiJyIsdygiJyIsITEpLCIoIix3KCIoIiwhMSksIikiLHcoIikiLCExKSwiJSIsdygiJSIsITEpLGZ1bmN0aW9uKCl7cmV0dXJuIiAifSxmdW5jdGlvbigpe3JldHVybiI6In0sL15bIS1+XS8sVChbWyIhIiwifiJdXSwhMSwhMSksL15bXHg4MC1cdUZGRkZdLyxUKFtbIlx4ODAiLCJcdWZmZmYiXV0sITEsITEpLC9eW1x4ODAtXHhCRl0vLFQoW1siXHg4MCIsIlx4YmYiXV0sITEsITEpLC9eW2EtZl0vLFQoW1siYSIsImYiXV0sITEsITEpLCJgIix3KCJgIiwhMSksIjwiLHcoIjwiLCExKSwiPiIsdygiPiIsITEpLCJcXCIsdygiXFwiLCExKSwiWyIsdygiWyIsITEpLCJdIix3KCJdIiwhMSksInsiLHcoInsiLCExKSwifSIsdygifSIsITEpLGZ1bmN0aW9uKCl7cmV0dXJuIioifSxmdW5jdGlvbigpe3JldHVybiIvIn0sZnVuY3Rpb24oKXtyZXR1cm4iPSJ9LGZ1bmN0aW9uKCl7cmV0dXJuIigifSxmdW5jdGlvbigpe3JldHVybiIpIn0sZnVuY3Rpb24oKXtyZXR1cm4iPiJ9LGZ1bmN0aW9uKCl7cmV0dXJuIjwifSxmdW5jdGlvbigpe3JldHVybiIsIn0sZnVuY3Rpb24oKXtyZXR1cm4iOyJ9LGZ1bmN0aW9uKCl7cmV0dXJuIjoifSxmdW5jdGlvbigpe3JldHVybiciJ30sL15bIS0nXS8sVChbWyIhIiwiJyJdXSwhMSwhMSksL15bKi1bXS8sVChbWyIqIiwiWyJdXSwhMSwhMSksL15bXF0tfl0vLFQoW1siXSIsIn4iXV0sITEsITEpLGZ1bmN0aW9uKGUpe3JldHVybiBlfSwvXlsjLVtdLyxUKFtbIiMiLCJbIl1dLCExLCExKSwvXltcMC1cdF0vLFQoW1siXDAiLCJcdCJdXSwhMSwhMSksL15bXHgwQi1cZl0vLFQoW1siXHYiLCJcZiJdXSwhMSwhMSksL15bXHgwRS1ceDdGXS8sVChbWyJceDBlIiwiXHg3ZiJdXSwhMSwhMSksZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudXJpPW5ldyB2KHQuZGF0YS5zY2hlbWUsdC5kYXRhLnVzZXIsdC5kYXRhLmhvc3QsdC5kYXRhLnBvcnQpLGRlbGV0ZSB0LmRhdGEuc2NoZW1lLGRlbGV0ZSB0LmRhdGEudXNlcixkZWxldGUgdC5kYXRhLmhvc3QsZGVsZXRlIHQuZGF0YS5ob3N0X3R5cGUsZGVsZXRlIHQuZGF0YS5wb3J0fSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS51cmk9bmV3IHYodC5kYXRhLnNjaGVtZSx0LmRhdGEudXNlcix0LmRhdGEuaG9zdCx0LmRhdGEucG9ydCx0LmRhdGEudXJpX3BhcmFtcyx0LmRhdGEudXJpX2hlYWRlcnMpLGRlbGV0ZSB0LmRhdGEuc2NoZW1lLGRlbGV0ZSB0LmRhdGEudXNlcixkZWxldGUgdC5kYXRhLmhvc3QsZGVsZXRlIHQuZGF0YS5ob3N0X3R5cGUsZGVsZXRlIHQuZGF0YS5wb3J0LGRlbGV0ZSB0LmRhdGEudXJpX3BhcmFtcywiU0lQX1VSSSI9PT10LnN0YXJ0UnVsZSYmKHQuZGF0YT10LmRhdGEudXJpKX0sInNpcHMiLHcoInNpcHMiLCEwKSwic2lwIix3KCJzaXAiLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuc2NoZW1lPWV9LGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnVzZXI9ZGVjb2RlVVJJQ29tcG9uZW50KHAoKS5zbGljZSgwLC0xKSl9LGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnBhc3N3b3JkPXAoKX0sZnVuY3Rpb24oKXtyZXR1cm4odD10fHx7ZGF0YTp7fX0pLmRhdGEuaG9zdD1wKCksdC5kYXRhLmhvc3R9LGZ1bmN0aW9uKCl7cmV0dXJuKHQ9dHx8e2RhdGE6e319KS5kYXRhLmhvc3RfdHlwZT0iZG9tYWluIixwKCl9LC9eW2EtekEtWjAtOV9cLV0vLFQoW1siYSIsInoiXSxbIkEiLCJaIl0sWyIwIiwiOSJdLCJfIiwiLSJdLCExLCExKSwvXlthLXpBLVowLTlcLV0vLFQoW1siYSIsInoiXSxbIkEiLCJaIl0sWyIwIiwiOSJdLCItIl0sITEsITEpLGZ1bmN0aW9uKCl7cmV0dXJuKHQ9dHx8e2RhdGE6e319KS5kYXRhLmhvc3RfdHlwZT0iSVB2NiIscCgpfSwiOjoiLHcoIjo6IiwhMSksZnVuY3Rpb24oKXtyZXR1cm4odD10fHx7ZGF0YTp7fX0pLmRhdGEuaG9zdF90eXBlPSJJUHY2IixwKCl9LGZ1bmN0aW9uKCl7cmV0dXJuKHQ9dHx8e2RhdGE6e319KS5kYXRhLmhvc3RfdHlwZT0iSVB2NCIscCgpfSwiMjUiLHcoIjI1IiwhMSksL15bMC01XS8sVChbWyIwIiwiNSJdXSwhMSwhMSksIjIiLHcoIjIiLCExKSwvXlswLTRdLyxUKFtbIjAiLCI0Il1dLCExLCExKSwiMSIsdygiMSIsITEpLC9eWzEtOV0vLFQoW1siMSIsIjkiXV0sITEsITEpLGZ1bmN0aW9uKGUpe3JldHVybiB0PXR8fHtkYXRhOnt9fSxlPXBhcnNlSW50KGUuam9pbigiIikpLHQuZGF0YS5wb3J0PWUsZX0sInRyYW5zcG9ydD0iLHcoInRyYW5zcG9ydD0iLCEwKSwidWRwIix3KCJ1ZHAiLCEwKSwidGNwIix3KCJ0Y3AiLCEwKSwic2N0cCIsdygic2N0cCIsITApLCJ0bHMiLHcoInRscyIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS51cmlfcGFyYW1zfHwodC5kYXRhLnVyaV9wYXJhbXM9e30pLHQuZGF0YS51cmlfcGFyYW1zLnRyYW5zcG9ydD1lLnRvTG93ZXJDYXNlKCl9LCJ1c2VyPSIsdygidXNlcj0iLCEwKSwicGhvbmUiLHcoInBob25lIiwhMCksImlwIix3KCJpcCIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS51cmlfcGFyYW1zfHwodC5kYXRhLnVyaV9wYXJhbXM9e30pLHQuZGF0YS51cmlfcGFyYW1zLnVzZXI9ZS50b0xvd2VyQ2FzZSgpfSwibWV0aG9kPSIsdygibWV0aG9kPSIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS51cmlfcGFyYW1zfHwodC5kYXRhLnVyaV9wYXJhbXM9e30pLHQuZGF0YS51cmlfcGFyYW1zLm1ldGhvZD1lfSwidHRsPSIsdygidHRsPSIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5wYXJhbXN8fCh0LmRhdGEucGFyYW1zPXt9KSx0LmRhdGEucGFyYW1zLnR0bD1lfSwibWFkZHI9Iix3KCJtYWRkcj0iLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudXJpX3BhcmFtc3x8KHQuZGF0YS51cmlfcGFyYW1zPXt9KSx0LmRhdGEudXJpX3BhcmFtcy5tYWRkcj1lfSwibHIiLHcoImxyIiwhMCksZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudXJpX3BhcmFtc3x8KHQuZGF0YS51cmlfcGFyYW1zPXt9KSx0LmRhdGEudXJpX3BhcmFtcy5scj12b2lkIDB9LGZ1bmN0aW9uKGUscyl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnVyaV9wYXJhbXN8fCh0LmRhdGEudXJpX3BhcmFtcz17fSkscz1udWxsPT09cz92b2lkIDA6c1sxXSx0LmRhdGEudXJpX3BhcmFtc1tlLnRvTG93ZXJDYXNlKCldPXN9LGZ1bmN0aW9uKGUscyl7ZT1lLmpvaW4oIiIpLnRvTG93ZXJDYXNlKCkscz1zLmpvaW4oIiIpLCh0PXR8fHtkYXRhOnt9fSkuZGF0YS51cmlfaGVhZGVyc3x8KHQuZGF0YS51cmlfaGVhZGVycz17fSksdC5kYXRhLnVyaV9oZWFkZXJzW2VdP3QuZGF0YS51cmlfaGVhZGVyc1tlXS5wdXNoKHMpOnQuZGF0YS51cmlfaGVhZGVyc1tlXT1bc119LGZ1bmN0aW9uKCl7IlJlZmVyX1RvIj09PSh0PXR8fHtkYXRhOnt9fSkuc3RhcnRSdWxlJiYodC5kYXRhLnVyaT1uZXcgdih0LmRhdGEuc2NoZW1lLHQuZGF0YS51c2VyLHQuZGF0YS5ob3N0LHQuZGF0YS5wb3J0LHQuZGF0YS51cmlfcGFyYW1zLHQuZGF0YS51cmlfaGVhZGVycyksZGVsZXRlIHQuZGF0YS5zY2hlbWUsZGVsZXRlIHQuZGF0YS51c2VyLGRlbGV0ZSB0LmRhdGEuaG9zdCxkZWxldGUgdC5kYXRhLmhvc3RfdHlwZSxkZWxldGUgdC5kYXRhLnBvcnQsZGVsZXRlIHQuZGF0YS51cmlfcGFyYW1zKX0sIi8vIix3KCIvLyIsITEpLGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnNjaGVtZT1wKCl9LHcoIlNJUCIsITApLGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnNpcF92ZXJzaW9uPXAoKX0sIklOVklURSIsdygiSU5WSVRFIiwhMSksIkFDSyIsdygiQUNLIiwhMSksIlZYQUNIIix3KCJWWEFDSCIsITEpLCJPUFRJT05TIix3KCJPUFRJT05TIiwhMSksIkJZRSIsdygiQllFIiwhMSksIkNBTkNFTCIsdygiQ0FOQ0VMIiwhMSksIlJFR0lTVEVSIix3KCJSRUdJU1RFUiIsITEpLCJTVUJTQ1JJQkUiLHcoIlNVQlNDUklCRSIsITEpLCJOT1RJRlkiLHcoIk5PVElGWSIsITEpLCJSRUZFUiIsdygiUkVGRVIiLCExKSwiUFVCTElTSCIsdygiUFVCTElTSCIsITEpLGZ1bmN0aW9uKCl7cmV0dXJuKHQ9dHx8e2RhdGE6e319KS5kYXRhLm1ldGhvZD1wKCksdC5kYXRhLm1ldGhvZH0sZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnN0YXR1c19jb2RlPXBhcnNlSW50KGUuam9pbigiIikpfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5yZWFzb25fcGhyYXNlPXAoKX0sZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGE9cCgpfSxmdW5jdGlvbigpe3ZhciBlLHM7Zm9yKHM9KHQ9dHx8e2RhdGE6e319KS5kYXRhLm11bHRpX2hlYWRlci5sZW5ndGgsZT0wO2U8cztlKyspaWYobnVsbD09PXQuZGF0YS5tdWx0aV9oZWFkZXJbZV0ucGFyc2VkKXt0LmRhdGE9bnVsbDticmVha31udWxsIT09dC5kYXRhP3QuZGF0YT10LmRhdGEubXVsdGlfaGVhZGVyOnQuZGF0YT0tMX0sZnVuY3Rpb24oKXt2YXIgZTsodD10fHx7ZGF0YTp7fX0pLmRhdGEubXVsdGlfaGVhZGVyfHwodC5kYXRhLm11bHRpX2hlYWRlcj1bXSk7dHJ5e2U9bmV3IG0odC5kYXRhLnVyaSx0LmRhdGEuZGlzcGxheU5hbWUsdC5kYXRhLnBhcmFtcyksZGVsZXRlIHQuZGF0YS51cmksZGVsZXRlIHQuZGF0YS5kaXNwbGF5TmFtZSxkZWxldGUgdC5kYXRhLnBhcmFtc31jYXRjaCh0KXtlPW51bGx9dC5kYXRhLm11bHRpX2hlYWRlci5wdXNoKHtwb3NpdGlvbjphLG9mZnNldDpmKCkuc3RhcnQub2Zmc2V0LHBhcnNlZDplfSl9LGZ1bmN0aW9uKGUpeyciJz09PShlPXAoKS50cmltKCkpWzBdJiYoZT1lLnN1YnN0cmluZygxLGUubGVuZ3RoLTEpKSwodD10fHx7ZGF0YTp7fX0pLmRhdGEuZGlzcGxheU5hbWU9ZX0sInEiLHcoInEiLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEucGFyYW1zfHwodC5kYXRhLnBhcmFtcz17fSksdC5kYXRhLnBhcmFtcy5xPWV9LCJleHBpcmVzIix3KCJleHBpcmVzIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnBhcmFtc3x8KHQuZGF0YS5wYXJhbXM9e30pLHQuZGF0YS5wYXJhbXMuZXhwaXJlcz1lfSxmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZS5qb2luKCIiKSl9LCIwIix3KCIwIiwhMSksZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdChwKCkpfSxmdW5jdGlvbihlLHMpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5wYXJhbXN8fCh0LmRhdGEucGFyYW1zPXt9KSxzPW51bGw9PT1zP3ZvaWQgMDpzWzFdLHQuZGF0YS5wYXJhbXNbZS50b0xvd2VyQ2FzZSgpXT1zfSwicmVuZGVyIix3KCJyZW5kZXIiLCEwKSwic2Vzc2lvbiIsdygic2Vzc2lvbiIsITApLCJpY29uIix3KCJpY29uIiwhMCksImFsZXJ0Iix3KCJhbGVydCIsITApLGZ1bmN0aW9uKCl7IkNvbnRlbnRfRGlzcG9zaXRpb24iPT09KHQ9dHx8e2RhdGE6e319KS5zdGFydFJ1bGUmJih0LmRhdGEudHlwZT1wKCkudG9Mb3dlckNhc2UoKSl9LCJoYW5kbGluZyIsdygiaGFuZGxpbmciLCEwKSwib3B0aW9uYWwiLHcoIm9wdGlvbmFsIiwhMCksInJlcXVpcmVkIix3KCJyZXF1aXJlZCIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT1wYXJzZUludChlLmpvaW4oIiIpKX0sZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGE9cCgpfSwidGV4dCIsdygidGV4dCIsITApLCJpbWFnZSIsdygiaW1hZ2UiLCEwKSwiYXVkaW8iLHcoImF1ZGlvIiwhMCksInZpZGVvIix3KCJ2aWRlbyIsITApLCJhcHBsaWNhdGlvbiIsdygiYXBwbGljYXRpb24iLCEwKSwibWVzc2FnZSIsdygibWVzc2FnZSIsITApLCJtdWx0aXBhcnQiLHcoIm11bHRpcGFydCIsITApLCJ4LSIsdygieC0iLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudmFsdWU9cGFyc2VJbnQoZS5qb2luKCIiKSl9LGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT1lfSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuZXZlbnQ9ZS50b0xvd2VyQ2FzZSgpfSxmdW5jdGlvbigpe3ZhciBlPSh0PXR8fHtkYXRhOnt9fSkuZGF0YS50YWc7dC5kYXRhPW5ldyBtKHQuZGF0YS51cmksdC5kYXRhLmRpc3BsYXlOYW1lLHQuZGF0YS5wYXJhbXMpLGUmJnQuZGF0YS5zZXRQYXJhbSgidGFnIixlKX0sInRhZyIsdygidGFnIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnRhZz1lfSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGE9cGFyc2VJbnQoZS5qb2luKCIiKSl9LGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT1lfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT1uZXcgbSh0LmRhdGEudXJpLHQuZGF0YS5kaXNwbGF5TmFtZSx0LmRhdGEucGFyYW1zKX0sImRpZ2VzdCIsdygiRGlnZXN0IiwhMCksInJlYWxtIix3KCJyZWFsbSIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5yZWFsbT1lfSwiZG9tYWluIix3KCJkb21haW4iLCEwKSwibm9uY2UiLHcoIm5vbmNlIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLm5vbmNlPWV9LCJvcGFxdWUiLHcoIm9wYXF1ZSIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5vcGFxdWU9ZX0sInN0YWxlIix3KCJzdGFsZSIsITApLCJ0cnVlIix3KCJ0cnVlIiwhMCksZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuc3RhbGU9ITB9LCJmYWxzZSIsdygiZmFsc2UiLCEwKSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5zdGFsZT0hMX0sImFsZ29yaXRobSIsdygiYWxnb3JpdGhtIiwhMCksIm1kNSIsdygiTUQ1IiwhMCksIm1kNS1zZXNzIix3KCJNRDUtc2VzcyIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5hbGdvcml0aG09ZS50b1VwcGVyQ2FzZSgpfSwicW9wIix3KCJxb3AiLCEwKSwiYXV0aC1pbnQiLHcoImF1dGgtaW50IiwhMCksImF1dGgiLHcoImF1dGgiLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEucW9wfHwodC5kYXRhLnFvcD1bXSksdC5kYXRhLnFvcC5wdXNoKGUudG9Mb3dlckNhc2UoKSl9LGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS52YWx1ZT1wYXJzZUludChlLmpvaW4oIiIpKX0sZnVuY3Rpb24oKXt2YXIgZSxzO2ZvcihzPSh0PXR8fHtkYXRhOnt9fSkuZGF0YS5tdWx0aV9oZWFkZXIubGVuZ3RoLGU9MDtlPHM7ZSsrKWlmKG51bGw9PT10LmRhdGEubXVsdGlfaGVhZGVyW2VdLnBhcnNlZCl7dC5kYXRhPW51bGw7YnJlYWt9bnVsbCE9PXQuZGF0YT90LmRhdGE9dC5kYXRhLm11bHRpX2hlYWRlcjp0LmRhdGE9LTF9LGZ1bmN0aW9uKCl7dmFyIGU7KHQ9dHx8e2RhdGE6e319KS5kYXRhLm11bHRpX2hlYWRlcnx8KHQuZGF0YS5tdWx0aV9oZWFkZXI9W10pO3RyeXtlPW5ldyBtKHQuZGF0YS51cmksdC5kYXRhLmRpc3BsYXlOYW1lLHQuZGF0YS5wYXJhbXMpLGRlbGV0ZSB0LmRhdGEudXJpLGRlbGV0ZSB0LmRhdGEuZGlzcGxheU5hbWUsZGVsZXRlIHQuZGF0YS5wYXJhbXN9Y2F0Y2godCl7ZT1udWxsfXQuZGF0YS5tdWx0aV9oZWFkZXIucHVzaCh7cG9zaXRpb246YSxvZmZzZXQ6ZigpLnN0YXJ0Lm9mZnNldCxwYXJzZWQ6ZX0pfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT1uZXcgbSh0LmRhdGEudXJpLHQuZGF0YS5kaXNwbGF5TmFtZSx0LmRhdGEucGFyYW1zKX0sZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEucmVwbGFjZXNfZnJvbV90YWcmJnQuZGF0YS5yZXBsYWNlc190b190YWd8fCh0LmRhdGE9LTEpfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT17Y2FsbF9pZDp0LmRhdGF9fSwiZnJvbS10YWciLHcoImZyb20tdGFnIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnJlcGxhY2VzX2Zyb21fdGFnPWV9LCJ0by10YWciLHcoInRvLXRhZyIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5yZXBsYWNlc190b190YWc9ZX0sImVhcmx5LW9ubHkiLHcoImVhcmx5LW9ubHkiLCEwKSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5lYXJseV9vbmx5PSEwfSxmdW5jdGlvbihlLHQpe3JldHVybiB0fSxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybltlXS5jb25jYXQodCl9KGUsdCl9LGZ1bmN0aW9uKGUpeyJSZXF1aXJlIj09PSh0PXR8fHtkYXRhOnt9fSkuc3RhcnRSdWxlJiYodC5kYXRhPWV8fFtdKX0sZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnZhbHVlPXBhcnNlSW50KGUuam9pbigiIikpfSwiYWN0aXZlIix3KCJhY3RpdmUiLCEwKSwicGVuZGluZyIsdygicGVuZGluZyIsITApLCJ0ZXJtaW5hdGVkIix3KCJ0ZXJtaW5hdGVkIiwhMCksZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuc3RhdGU9cCgpfSwicmVhc29uIix3KCJyZWFzb24iLCEwKSxmdW5jdGlvbihlKXt0PXR8fHtkYXRhOnt9fSx2b2lkIDAhPT1lJiYodC5kYXRhLnJlYXNvbj1lKX0sZnVuY3Rpb24oZSl7dD10fHx7ZGF0YTp7fX0sdm9pZCAwIT09ZSYmKHQuZGF0YS5leHBpcmVzPWUpfSwicmV0cnlfYWZ0ZXIiLHcoInJldHJ5X2FmdGVyIiwhMCksZnVuY3Rpb24oZSl7dD10fHx7ZGF0YTp7fX0sdm9pZCAwIT09ZSYmKHQuZGF0YS5yZXRyeV9hZnRlcj1lKX0sImRlYWN0aXZhdGVkIix3KCJkZWFjdGl2YXRlZCIsITApLCJwcm9iYXRpb24iLHcoInByb2JhdGlvbiIsITApLCJyZWplY3RlZCIsdygicmVqZWN0ZWQiLCEwKSwidGltZW91dCIsdygidGltZW91dCIsITApLCJnaXZldXAiLHcoImdpdmV1cCIsITApLCJub3Jlc291cmNlIix3KCJub3Jlc291cmNlIiwhMCksImludmFyaWFudCIsdygiaW52YXJpYW50IiwhMCksZnVuY3Rpb24oZSl7IlN1cHBvcnRlZCI9PT0odD10fHx7ZGF0YTp7fX0pLnN0YXJ0UnVsZSYmKHQuZGF0YT1lfHxbXSl9LGZ1bmN0aW9uKCl7dmFyIGU9KHQ9dHx8e2RhdGE6e319KS5kYXRhLnRhZzt0LmRhdGE9bmV3IG0odC5kYXRhLnVyaSx0LmRhdGEuZGlzcGxheU5hbWUsdC5kYXRhLnBhcmFtcyksZSYmdC5kYXRhLnNldFBhcmFtKCJ0YWciLGUpfSwidHRsIix3KCJ0dGwiLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudHRsPWV9LCJtYWRkciIsdygibWFkZHIiLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEubWFkZHI9ZX0sInJlY2VpdmVkIix3KCJyZWNlaXZlZCIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5yZWNlaXZlZD1lfSwiYnJhbmNoIix3KCJicmFuY2giLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuYnJhbmNoPWV9LCJycG9ydCIsdygicnBvcnQiLCEwKSxmdW5jdGlvbihlKXt0PXR8fHtkYXRhOnt9fSx2b2lkIDAhPT1lJiYodC5kYXRhLnJwb3J0PWUuam9pbigiIikpfSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEucHJvdG9jb2w9ZX0sdygiVURQIiwhMCksdygiVENQIiwhMCksdygiVExTIiwhMCksdygiU0NUUCIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS50cmFuc3BvcnQ9ZX0sZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuaG9zdD1wKCl9LGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5wb3J0PXBhcnNlSW50KGUuam9pbigiIikpfSxmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZS5qb2luKCIiKSl9LGZ1bmN0aW9uKGUpeyJTZXNzaW9uX0V4cGlyZXMiPT09KHQ9dHx8e2RhdGE6e319KS5zdGFydFJ1bGUmJih0LmRhdGEuZGVsdGFTZWNvbmRzPWUpfSwicmVmcmVzaGVyIix3KCJyZWZyZXNoZXIiLCExKSwidWFzIix3KCJ1YXMiLCExKSwidWFjIix3KCJ1YWMiLCExKSxmdW5jdGlvbihlKXsiU2Vzc2lvbl9FeHBpcmVzIj09PSh0PXR8fHtkYXRhOnt9fSkuc3RhcnRSdWxlJiYodC5kYXRhLnJlZnJlc2hlcj1lKX0sZnVuY3Rpb24oZSl7Ik1pbl9TRSI9PT0odD10fHx7ZGF0YTp7fX0pLnN0YXJ0UnVsZSYmKHQuZGF0YT1lKX0sInN0dW5zIix3KCJzdHVucyIsITApLCJzdHVuIix3KCJzdHVuIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnNjaGVtZT1lfSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuaG9zdD1lfSwiP3RyYW5zcG9ydD0iLHcoIj90cmFuc3BvcnQ9IiwhMSksInR1cm5zIix3KCJ0dXJucyIsITApLCJ0dXJuIix3KCJ0dXJuIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnRyYW5zcG9ydD1lfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT1wKCl9LCJSZWZlcnJlZC1CeSIsdygiUmVmZXJyZWQtQnkiLCExKSwiYiIsdygiYiIsITEpLCJjaWQiLHcoImNpZCIsITEpXSxvPVskKCcyICIiNiA3IScpLCQoJzQiIiI1ITcjJyksJCgnNCQiIjUhNyUnKSwkKCc0JiIiNSE3XCcnKSwkKCI7Jy4jICY7KCIpLCQoJzQoIiI1ITcpJyksJCgnNCoiIjUhNysnKSwkKCcyLCIiNiw3LScpLCQoJzIuIiI2LjcvJyksJCgnNDAiIjUhNzEnKSwkKCcyMiIiNjI3My5ceDg5ICYyNCIiNjQ3NS59ICYyNiIiNjY3Ny5xICYyOCIiNjg3OS5lICYyOiIiNjo3Oy5ZICYyPCIiNjw3PS5NICYyPiIiNj43Py5BICYyQCIiNkA3QS41ICYyQiIiNkI3Qy4pICYyRCIiNkQ3RScpLCQoIjspLiMgJjssIiksJCgnMkYiIjZGN0cufSAmMkgiIjZIN0kucSAmMkoiIjZKN0suZSAmMkwiIjZMN00uWSAmMk4iIjZON08uTSAmMlAiIjZQN1EuQSAmMlIiIjZSN1MuNSAmMlQiIjZUN1UuKSAmMlYiIjZWN1cnKSwkKCclJTJYIiI2WDdZLzUjOyMvLCQ7Iy8jJCsjKSgjXCcjKCJcJyMmXCcjLyIhJiwpJyksJCgnJSUkOyQwIyo7JCYvLCM7IC8jJCsiKSgiXCcjJlwnIy4iICYiLz0jJDskLyYjMCMqOyQmJiYjL1wnJDgiOloiICkoIlwnIyZcJyMnKSwkKCc7Li4iICYiJyksJCgiJSQ7Jy4jICY7KDApKjsnLiMgJjsoJi8/IzI4XCJcIjY4NzkvMCQ7Ly8nJDgjOlsjICkoIycjKFwiJyMmJyMiKSwkKCclJSQ7Mi8mIzAjKjsyJiYmIy9nIyQlJDsuMCMqOy4mLywjOzIvIyQrIikoIlwnIyZcJyMwPSolJDsuMCMqOy4mLywjOzIvIyQrIikoIlwnIyZcJyMmLyMkKyIpKCJcJyMmXCcjLyIhJiwpJyksJCgnNFxcIiI1ITddLiMgJjszJyksJCgnNF4iIjUhN18nKSwkKCc0YCIiNSE3YScpLCQoJzshLikgJjRiIiI1ITdjJyksJCgnJSQ7KS5ceDk1ICYyRiIiNkY3Ry5ceDg5ICYySiIiNko3Sy59ICYyTCIiNkw3TS5xICYyWCIiNlg3WS5lICYyUCIiNlA3US5ZICYySCIiNkg3SS5NICYyQCIiNkA3QS5BICYyZCIiNmQ3ZS41ICYyUiIiNlI3Uy4pICYyTiIiNk43Ty9ceDllIzBceDliKjspLlx4OTUgJjJGIiI2RjdHLlx4ODkgJjJKIiI2SjdLLn0gJjJMIiI2TDdNLnEgJjJYIiI2WDdZLmUgJjJQIiI2UDdRLlkgJjJIIiI2SDdJLk0gJjJAIiI2QDdBLkEgJjJkIiI2ZDdlLjUgJjJSIiI2UjdTLikgJjJOIiI2TjdPJiYmIy8iISYsKScpLCQoJyUkOykuXHg4OSAmMkYiIjZGN0cufSAmMkwiIjZMN00ucSAmMlgiIjZYN1kuZSAmMlAiIjZQN1EuWSAmMkgiIjZIN0kuTSAmMkAiIjZAN0EuQSAmMmQiIjZkN2UuNSAmMlIiIjZSN1MuKSAmMk4iIjZON08vXHg5MiMwXHg4Zio7KS5ceDg5ICYyRiIiNkY3Ry59ICYyTCIiNkw3TS5xICYyWCIiNlg3WS5lICYyUCIiNlA3US5ZICYySCIiNkg3SS5NICYyQCIiNkA3QS5BICYyZCIiNmQ3ZS41ICYyUiIiNlI3Uy4pICYyTiIiNk43TyYmJiMvIiEmLCknKSwkKCcyVCIiNlQ3VS5ceGUzICYyViIiNlY3Vy5ceGQ3ICYyZiIiNmY3Zy5ceGNiICYyaCIiNmg3aS5ceGJmICYyOiIiNjo3Oy5ceGIzICYyRCIiNkQ3RS5ceGE3ICYyMiIiNjI3My5ceDliICYyOCIiNjg3OS5ceDhmICYyaiIiNmo3ay5ceDgzICY7Ji59ICYyNCIiNjQ3NS5xICYybCIiNmw3bS5lICYybiIiNm43by5ZICYyNiIiNjY3Ny5NICYyPiIiNj43Py5BICYycCIiNnA3cS41ICYyciIiNnI3cy4pICY7XCcuIyAmOygnKSwkKCclJDspLlx1MDEyYiAmMkYiIjZGN0cuXHUwMTFmICYySiIiNko3Sy5cdTAxMTMgJjJMIiI2TDdNLlx1MDEwNyAmMlgiIjZYN1kuXHhmYiAmMlAiIjZQN1EuXHhlZiAmMkgiIjZIN0kuXHhlMyAmMkAiIjZAN0EuXHhkNyAmMmQiIjZkN2UuXHhjYiAmMlIiIjZSN1MuXHhiZiAmMk4iIjZON08uXHhiMyAmMlQiIjZUN1UuXHhhNyAmMlYiIjZWN1cuXHg5YiAmMmYiIjZmN2cuXHg4ZiAmMmgiIjZoN2kuXHg4MyAmMjgiIjY4NzkudyAmMmoiIjZqN2suayAmOyYuZSAmMjQiIjY0NzUuWSAmMmwiIjZsN20uTSAmMm4iIjZuN28uQSAmMjYiIjY2NzcuNSAmMnAiIjZwN3EuKSAmMnIiIjZyN3MvXHUwMTM0IzBcdTAxMzEqOykuXHUwMTJiICYyRiIiNkY3Ry5cdTAxMWYgJjJKIiI2SjdLLlx1MDExMyAmMkwiIjZMN00uXHUwMTA3ICYyWCIiNlg3WS5ceGZiICYyUCIiNlA3US5ceGVmICYySCIiNkg3SS5ceGUzICYyQCIiNkA3QS5ceGQ3ICYyZCIiNmQ3ZS5ceGNiICYyUiIiNlI3Uy5ceGJmICYyTiIiNk43Ty5ceGIzICYyVCIiNlQ3VS5ceGE3ICYyViIiNlY3Vy5ceDliICYyZiIiNmY3Zy5ceDhmICYyaCIiNmg3aS5ceDgzICYyOCIiNjg3OS53ICYyaiIiNmo3ay5rICY7Ji5lICYyNCIiNjQ3NS5ZICYybCIiNmw3bS5NICYybiIiNm43by5BICYyNiIiNjY3Ny41ICYycCIiNnA3cS4pICYyciIiNnI3cyYmJiMvIiEmLCknKSwkKCIlOy8vPyMyUFwiXCI2UDdRLzAkOy8vJyQ4Izp0IyApKCMnIyhcIicjJicjIiksJCgiJTsvLz8jMjRcIlwiNjQ3NS8wJDsvLyckOCM6dSMgKSgjJyMoXCInIyYnIyIpLCQoIiU7Ly8/IzI+XCJcIjY+Nz8vMCQ7Ly8nJDgjOnYjICkoIycjKFwiJyMmJyMiKSwkKCIlOy8vPyMyVFwiXCI2VDdVLzAkOy8vJyQ4Izp3IyApKCMnIyhcIicjJicjIiksJCgiJTsvLz8jMlZcIlwiNlY3Vy8wJDsvLyckOCM6eCMgKSgjJyMoXCInIyYnIyIpLCQoJyUyaCIiNmg3aS8wIzsvL1wnJDgiOnkiICkoIlwnIyZcJyMnKSwkKCclOy8vNiMyZiIiNmY3Zy9cJyQ4Ijp6IiApKCJcJyMmXCcjJyksJCgiJTsvLz8jMkRcIlwiNkQ3RS8wJDsvLyckOCM6eyMgKSgjJyMoXCInIyYnIyIpLCQoIiU7Ly8/IzIyXCJcIjYyNzMvMCQ7Ly8nJDgjOnwjICkoIycjKFwiJyMmJyMiKSwkKCIlOy8vPyMyOFwiXCI2ODc5LzAkOy8vJyQ4Izp9IyApKCMnIyhcIicjJicjIiksJCgiJTsvLzAjOyYvJyQ4XCI6flwiICkoXCInIyYnIyIpLCQoIiU7Ji8wIzsvLyckOFwiOn5cIiApKFwiJyMmJyMiKSwkKCIlOz0vVCMkO0cuKSAmO0suIyAmO0YwLyo7Ry4pICY7Sy4jICY7RiYvLCQ7Pi8jJCsjKSgjJyMoXCInIyYnIyIpLCQoJzRceDdmIiI1ITdceDgwLkEgJjRceDgxIiI1ITdceDgyLjUgJjRceDgzIiI1ITdceDg0LikgJjszLiMgJjsuJyksJCgiJSU7Ly9RIzsmL0gkJDtKLiMgJjtLMCkqO0ouIyAmO0smLywkOyYvIyQrJCkoJCcjKCMnIyhcIicjJicjL1wiISYsKSIpLCQoIiU7Ly9dIzsmL1QkJSQ7Si4jICY7SzApKjtKLiMgJjtLJi9cIiEmLCkvMSQ7Ji8oJDgkOlx4ODUkISEpKCQnIygjJyMoXCInIyYnIyIpLCQoJzsuLkcgJjJMIiI2TDdNLjsgJjRceDg2IiI1ITdceDg3Li8gJjRceDgzIiI1ITdceDg0LiMgJjszJyksJCgnJTJqIiI2ajdrL0ojNFx4ODgiIjUhN1x4ODkuNSAmNFx4OGEiIjUhN1x4OGIuKSAmNFx4OGMiIjUhN1x4OGQvIyQrIikoIlwnIyZcJyMnKSwkKCIlO04vTSMyOFwiXCI2ODc5Lz4kO08uXCIgJlwiLzAkO1MvJyQ4JDpceDhlJCApKCQnIygjJyMoXCInIyYnIyIpLCQoIiU7Ti9kIzI4XCJcIjY4NzkvVSQ7Ty5cIiAmXCIvRyQ7Uy8+JDtfLzUkO2wuXCIgJlwiLyckOCY6XHg4ZiYgKSgmJyMoJScjKCQnIygjJyMoXCInIyYnIyIpLCQoJyUzXHg5MCIiNSQ3XHg5MS4pICYzXHg5MiIiNSM3XHg5My9cJyA4ITpceDk0ISEgKScpLCQoJyU7UC9dIyUyOCIiNjg3OS8sIztSLyMkKyIpKCJcJyMmXCcjLiIgJiIvNiQyOiIiNjo3Oy9cJyQ4IzpceDk1IyApKCNcJyMoIlwnIyZcJyMnKSwkKCIkOysuKSAmOy0uIyAmO1EvMiMwLyo7Ky4pICY7LS4jICY7USYmJiMiKSwkKCcyPCIiNjw3PS5xICYyPiIiNj43Py5lICYyQCIiNkA3QS5ZICYyQiIiNkI3Qy5NICYyRCIiNkQ3RS5BICYyMiIiNjI3My41ICYyNiIiNjY3Ny4pICYyNCIiNjQ3NScpLCQoJyUkOysuXyAmOy0uWSAmMjwiIjY8Nz0uTSAmMj4iIjY+Nz8uQSAmMkAiIjZAN0EuNSAmMkIiIjZCN0MuKSAmMkQiIjZEN0UwZSo7Ky5fICY7LS5ZICYyPCIiNjw3PS5NICYyPiIiNj43Py5BICYyQCIiNkA3QS41ICYyQiIiNkI3Qy4pICYyRCIiNkQ3RSYvJiA4ITpceDk2ISApJyksJCgnJTtUL0ojJTI4IiI2ODc5LywjO14vIyQrIikoIlwnIyZcJyMuIiAmIi8jJCsiKSgiXCcjJlwnIycpLCQoIiU7VS4pICY7XFwuIyAmO1gvJiA4ITpceDk3ISApIiksJCgnJSQlO1YvMiMySiIiNko3Sy8jJCsiKSgiXCcjJlwnIzA8KiU7Vi8yIzJKIiI2SjdLLyMkKyIpKCJcJyMmXCcjJi9EIztXLzskMkoiIjZKN0suIiAmIi9cJyQ4IzpceDk4IyApKCNcJyMoIlwnIyZcJyMnKSwkKCckNFx4OTkiIjUhN1x4OWEvLCMwKSo0XHg5OSIiNSE3XHg5YSYmJiMnKSwkKCclNCQiIjUhNyUvPyMkNFx4OWIiIjUhN1x4OWMwKSo0XHg5YiIiNSE3XHg5YyYvIyQrIikoIlwnIyZcJyMnKSwkKCclMmwiIjZsN20vPyM7WS82JDJuIiI2bjdvL1wnJDgjOlx4OWQjICkoI1wnIygiXCcjJlwnIycpLCQoJyUlO1ovXHhiMyMyOCIiNjg3OS9ceGE0JDtaL1x4OWIkMjgiIjY4NzkvXHg4YyQ7Wi9ceDgzJDI4IiI2ODc5L3QkO1ovayQyOCIiNjg3OS9cXCQ7Wi9TJDI4IiI2ODc5L0QkO1ovOyQyOCIiNjg3OS8sJDtbLyMkKy0pKC1cJyMoLFwnIygrXCcjKCpcJyMoKVwnIygoXCcjKFwnXCcjKCZcJyMoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMuXHUwNzkwICYlMlx4OWUiIjZceDllN1x4OWYvXHhhNCM7Wi9ceDliJDI4IiI2ODc5L1x4OGMkO1ovXHg4MyQyOCIiNjg3OS90JDtaL2skMjgiIjY4NzkvXFwkO1ovUyQyOCIiNjg3OS9EJDtaLzskMjgiIjY4NzkvLCQ7Wy8jJCssKSgsXCcjKCtcJyMoKlwnIygpXCcjKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTA2ZjkgJiUyXHg5ZSIiNlx4OWU3XHg5Zi9ceDhjIztaL1x4ODMkMjgiIjY4NzkvdCQ7Wi9rJDI4IiI2ODc5L1xcJDtaL1MkMjgiIjY4NzkvRCQ7Wi87JDI4IiI2ODc5LywkO1svIyQrKikoKlwnIygpXCcjKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTA2N2EgJiUyXHg5ZSIiNlx4OWU3XHg5Zi90IztaL2skMjgiIjY4NzkvXFwkO1ovUyQyOCIiNjg3OS9EJDtaLzskMjgiIjY4NzkvLCQ7Wy8jJCsoKSgoXCcjKFwnXCcjKCZcJyMoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMuXHUwNjEzICYlMlx4OWUiIjZceDllN1x4OWYvXFwjO1ovUyQyOCIiNjg3OS9EJDtaLzskMjgiIjY4NzkvLCQ7Wy8jJCsmKSgmXCcjKCVcJyMoJFwnIygjXCcjKCJcJyMmXCcjLlx1MDVjNCAmJTJceDllIiI2XHg5ZTdceDlmL0QjO1ovOyQyOCIiNjg3OS8sJDtbLyMkKyQpKCRcJyMoI1wnIygiXCcjJlwnIy5cdTA1OGQgJiUyXHg5ZSIiNlx4OWU3XHg5Zi8sIztbLyMkKyIpKCJcJyMmXCcjLlx1MDU2ZSAmJTJceDllIiI2XHg5ZTdceDlmLywjO1ovIyQrIikoIlwnIyZcJyMuXHUwNTRmICYlO1ovXHg5YiMyXHg5ZSIiNlx4OWU3XHg5Zi9ceDhjJDtaL1x4ODMkMjgiIjY4NzkvdCQ7Wi9rJDI4IiI2ODc5L1xcJDtaL1MkMjgiIjY4NzkvRCQ7Wi87JDI4IiI2ODc5LywkO1svIyQrKykoK1wnIygqXCcjKClcJyMoKFwnIyhcJ1wnIygmXCcjKCVcJyMoJFwnIygjXCcjKCJcJyMmXCcjLlx1MDRjNyAmJTtaL1x4YWEjJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9ceDgzJDJceDllIiI2XHg5ZTdceDlmL3QkO1ovayQyOCIiNjg3OS9cXCQ7Wi9TJDI4IiI2ODc5L0QkO1ovOyQyOCIiNjg3OS8sJDtbLyMkKyopKCpcJyMoKVwnIygoXCcjKFwnXCcjKCZcJyMoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMuXHUwNDMwICYlO1ovXHhiOSMlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4OTIkJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9rJDJceDllIiI2XHg5ZTdceDlmL1xcJDtaL1MkMjgiIjY4NzkvRCQ7Wi87JDI4IiI2ODc5LywkO1svIyQrKSkoKVwnIygoXCcjKFwnXCcjKCZcJyMoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMuXHUwMzhhICYlO1ovXHhjOCMlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4YTEkJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi96JCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvUyQyXHg5ZSIiNlx4OWU3XHg5Zi9EJDtaLzskMjgiIjY4NzkvLCQ7Wy8jJCsoKSgoXCcjKFwnXCcjKCZcJyMoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMuXHUwMmQ1ICYlO1ovXHhkNyMlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4YjAkJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9ceDg5JCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvYiQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiLzskMlx4OWUiIjZceDllN1x4OWYvLCQ7Wy8jJCtcJykoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTAyMTEgJiU7Wi9ceGZlIyUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvXHhkNyQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4YjAkJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9ceDg5JCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvYiQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiLzskMlx4OWUiIjZceDllN1x4OWYvLCQ7Wi8jJCsoKSgoXCcjKFwnXCcjKCZcJyMoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMuXHUwMTI2ICYlO1ovXHUwMTFjIyUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvXHhmNSQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4Y2UkJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9ceGE3JCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvXHg4MCQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1kkJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi8yJDJceDllIiI2XHg5ZTdceDlmLyMkKygpKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy8mIDghOlx4YTAhICknKSwkKCclOyMvTSM7Iy4iICYiLz8kOyMuIiAmIi8xJDsjLiIgJiIvIyQrJCkoJFwnIygjXCcjKCJcJyMmXCcjJyksJCgiJTtaLzsjMjhcIlwiNjg3OS8sJDtaLyMkKyMpKCMnIyhcIicjJicjLiMgJjtcXCIpLCQoIiU7XS9vIzJKXCJcIjZKN0svYCQ7XS9XJDJKXCJcIjZKN0svSCQ7XS8/JDJKXCJcIjZKN0svMCQ7XS8nJDgnOlx4YTEnICkoJycjKCYnIyglJyMoJCcjKCMnIyhcIicjJicjIiksJCgnJTJceGEyIiI2XHhhMjdceGEzLzIjNFx4YTQiIjUhN1x4YTUvIyQrIikoIlwnIyZcJyMuXHg5OCAmJTJceGE2IiI2XHhhNjdceGE3LzsjNFx4YTgiIjUhN1x4YTkvLCQ7IS8jJCsjKSgjXCcjKCJcJyMmXCcjLmogJiUyXHhhYSIiNlx4YWE3XHhhYi81IzshLywkOyEvIyQrIykoI1wnIygiXCcjJlwnIy5CICYlNFx4YWMiIjUhN1x4YWQvLCM7IS8jJCsiKSgiXCcjJlwnIy4jICY7IScpLCQoJyUlOyEuIiAmIi9bIzshLiIgJiIvTSQ7IS4iICYiLz8kOyEuIiAmIi8xJDshLiIgJiIvIyQrJSkoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMvXCcgOCE6XHhhZSEhICknKSwkKCckJTIyIiI2MjczLywjO2AvIyQrIikoIlwnIyZcJyMwPColMjIiIjYyNzMvLCM7YC8jJCsiKSgiXCcjJlwnIyYnKSwkKCI7YS5BICY7Yi47ICY7Yy41ICY7ZC4vICY7ZS4pICY7Zi4jICY7ZyIpLCQoJyUzXHhhZiIiNSo3XHhiMC9hIzNceGIxIiI1IzdceGIyLkcgJjNceGIzIiI1IzdceGI0LjsgJjNceGI1IiI1JDdceGI2Li8gJjNceGI3IiI1IzdceGI4LiMgJjs2LygkOCI6XHhiOSIhICkoIlwnIyZcJyMnKSwkKCclM1x4YmEiIjUlN1x4YmIvSSMzXHhiYyIiNSU3XHhiZC4vICYzXHhiZSIiNSI3XHhiZi4jICY7Ni8oJDgiOlx4YzAiISApKCJcJyMmXCcjJyksJCgnJTNceGMxIiI1XCc3XHhjMi8xIztceDkwLygkOCI6XHhjMyIhICkoIlwnIyZcJyMnKSwkKCclM1x4YzQiIjUkN1x4YzUvMSM7XHhmMC8oJDgiOlx4YzYiISApKCJcJyMmXCcjJyksJCgnJTNceGM3IiI1JjdceGM4LzEjO1QvKCQ4IjpceGM5IiEgKSgiXCcjJlwnIycpLCQoJyUzXHhjYSIiNSI3XHhjYi9OIyUyPiIiNj43Py8sIzs2LyMkKyIpKCJcJyMmXCcjLiIgJiIvXCckOCI6XHhjYyIgKSgiXCcjJlwnIycpLCQoJyU7aC9QIyUyPiIiNj43Py8sIztpLyMkKyIpKCJcJyMmXCcjLiIgJiIvKSQ4IjpceGNkIiIhICkoIlwnIyZcJyMnKSwkKCclJDtqLyYjMCMqO2omJiYjLyIhJiwpJyksJCgnJSQ7ai8mIzAjKjtqJiYmIy8iISYsKScpLCQoIjtrLikgJjsrLiMgJjstIiksJCgnMmwiIjZsN20uZSAmMm4iIjZuN28uWSAmMjQiIjY0NzUuTSAmMjgiIjY4NzkuQSAmMjwiIjY8Nz0uNSAmMkAiIjZAN0EuKSAmMkIiIjZCN0MnKSwkKCclMjYiIjY2NzcvbiM7bS9lJCQlMjwiIjY8Nz0vLCM7bS8jJCsiKSgiXCcjJlwnIzA8KiUyPCIiNjw3PS8sIzttLyMkKyIpKCJcJyMmXCcjJi8jJCsjKSgjXCcjKCJcJyMmXCcjJyksJCgnJTtuL0EjMj4iIjY+Nz8vMiQ7by8pJDgjOlx4Y2UjIiIgKSgjXCcjKCJcJyMmXCcjJyksJCgiJDtwLikgJjsrLiMgJjstLzIjMC8qO3AuKSAmOysuIyAmOy0mJiYjIiksJCgiJDtwLikgJjsrLiMgJjstMC8qO3AuKSAmOysuIyAmOy0mIiksJCgnMmwiIjZsN20uZSAmMm4iIjZuN28uWSAmMjQiIjY0NzUuTSAmMjYiIjY2NzcuQSAmMjgiIjY4NzkuNSAmMkAiIjZAN0EuKSAmMkIiIjZCN0MnKSwkKCI7XHg5MS4jICY7ciIpLCQoIiU7XHg5MC9HIzsnLz4kO3MvNSQ7Jy8sJDtceDg0LyMkKyUpKCUnIygkJyMoIycjKFwiJyMmJyMiKSwkKCI7TS4jICY7dCIpLCQoIiU7XHg3Zi9FIzI4XCJcIjY4NzkvNiQ7dS4jICY7eC8nJDgjOlx4Y2YjICkoIycjKFwiJyMmJyMiKSwkKCclO3YuIyAmO3cvSiMlMjYiIjY2NzcvLCM7XHg4My8jJCsiKSgiXCcjJlwnIy4iICYiLyMkKyIpKCJcJyMmXCcjJyksJCgnJTJceGQwIiI2XHhkMDdceGQxLzojO1x4ODAvMSQ7dy4iICYiLyMkKyMpKCNcJyMoIlwnIyZcJyMnKSwkKCclMjQiIjY0NzUvLCM7ey8jJCsiKSgiXCcjJlwnIycpLCQoIiU7ei8zIyQ7eTAjKjt5Ji8jJCtcIikoXCInIyYnIyIpLCQoIjsqLikgJjsrLiMgJjstIiksJCgnOysuXHg4ZiAmOy0uXHg4OSAmMjIiIjYyNzMufSAmMjYiIjY2NzcucSAmMjgiIjY4NzkuZSAmMjoiIjY6NzsuWSAmMjwiIjY8Nz0uTSAmMj4iIjY+Nz8uQSAmMkAiIjZAN0EuNSAmMkIiIjZCN0MuKSAmMkQiIjZEN0UnKSwkKCclO3wvZSMkJTI0IiI2NDc1LywjO3wvIyQrIikoIlwnIyZcJyMwPColMjQiIjY0NzUvLCM7fC8jJCsiKSgiXCcjJlwnIyYvIyQrIikoIlwnIyZcJyMnKSwkKCclJDt+MCMqO34mL2UjJCUyMiIiNjI3My8sIzt9LyMkKyIpKCJcJyMmXCcjMDwqJTIyIiI2MjczLywjO30vIyQrIikoIlwnIyZcJyMmLyMkKyIpKCJcJyMmXCcjJyksJCgiJDt+MCMqO34mIiksJCgnOysudyAmOy0ucSAmMjgiIjY4NzkuZSAmMjoiIjY6NzsuWSAmMjwiIjY8Nz0uTSAmMj4iIjY+Nz8uQSAmMkAiIjZAN0EuNSAmMkIiIjZCN0MuKSAmMkQiIjZEN0UnKSwkKCclJTsiL1x4ODcjJDsiLkcgJjshLkEgJjJAIiI2QDdBLjUgJjJGIiI2RjdHLikgJjJKIiI2SjdLME0qOyIuRyAmOyEuQSAmMkAiIjZAN0EuNSAmMkYiIjZGN0cuKSAmMkoiIjZKN0smLyMkKyIpKCJcJyMmXCcjLyYgOCE6XHhkMiEgKScpLCQoIjtceDgxLiMgJjtceDgyIiksJCgnJSU7Ty8yIzI6IiI2Ojc7LyMkKyIpKCJcJyMmXCcjLiIgJiIvLCM7Uy8jJCsiKSgiXCcjJlwnIy4iICYiJyksJCgnJDsrLlx4ODMgJjstLn0gJjJCIiI2QjdDLnEgJjJEIiI2RDdFLmUgJjIyIiI2MjczLlkgJjI4IiI2ODc5Lk0gJjI6IiI2Ojc7LkEgJjI8IiI2PDc9LjUgJjI+IiI2Pjc/LikgJjJAIiI2QDdBL1x4OGMjMFx4ODkqOysuXHg4MyAmOy0ufSAmMkIiIjZCN0MucSAmMkQiIjZEN0UuZSAmMjIiIjYyNzMuWSAmMjgiIjY4NzkuTSAmMjoiIjY6NzsuQSAmMjwiIjY8Nz0uNSAmMj4iIjY+Nz8uKSAmMkAiIjZAN0EmJiYjJyksJCgiJDt5MCMqO3kmIiksJCgnJTNceDkyIiI1IzdceGQzL3EjMjQiIjY0NzUvYiQkOyEvJiMwIyo7ISYmJiMvTCQySiIiNko3Sy89JCQ7IS8mIzAjKjshJiYmIy9cJyQ4JTpceGQ0JSApKCVcJyMoJFwnIygjXCcjKCJcJyMmXCcjJyksJCgnMlx4ZDUiIjZceGQ1N1x4ZDYnKSwkKCcyXHhkNyIiNlx4ZDc3XHhkOCcpLCQoJzJceGQ5IiI2XHhkOTdceGRhJyksJCgnMlx4ZGIiIjZceGRiN1x4ZGMnKSwkKCcyXHhkZCIiNlx4ZGQ3XHhkZScpLCQoJzJceGRmIiI2XHhkZjdceGUwJyksJCgnMlx4ZTEiIjZceGUxN1x4ZTInKSwkKCcyXHhlMyIiNlx4ZTM3XHhlNCcpLCQoJzJceGU1IiI2XHhlNTdceGU2JyksJCgnMlx4ZTciIjZceGU3N1x4ZTgnKSwkKCcyXHhlOSIiNlx4ZTk3XHhlYScpLCQoIiU7XHg4NS5ZICY7XHg4Ni5TICY7XHg4OC5NICY7XHg4OS5HICY7XHg4YS5BICY7XHg4Yi47ICY7XHg4Yy41ICY7XHg4Zi4vICY7XHg4ZC4pICY7XHg4ZS4jICY7Ni8mIDghOlx4ZWIhICkiKSwkKCIlO1x4ODQvRyM7Jy8+JDtceDkyLzUkOycvLCQ7XHg5NC8jJCslKSglJyMoJCcjKCMnIyhcIicjJicjIiksJCgiJTtceDkzLycgOCE6XHhlYyEhICkiKSwkKCIlOyEvNSM7IS8sJDshLyMkKyMpKCMnIyhcIicjJicjIiksJCgiJSQ7Ki5BICY7Ky47ICY7LS41ICY7My4vICY7NC4pICY7Jy4jICY7KDBHKjsqLkEgJjsrLjsgJjstLjUgJjszLi8gJjs0LikgJjsnLiMgJjsoJi8mIDghOlx4ZWQhICkiKSwkKCIlO1x4YjYvWSMkJTtBLywjO1x4YjYvIyQrXCIpKFwiJyMmJyMwNiolO0EvLCM7XHhiNi8jJCtcIikoXCInIyYnIyYvIyQrXCIpKFwiJyMmJyMiKSwkKCclOzkvTiMlMjoiIjY6NzsvLCM7OS8jJCsiKSgiXCcjJlwnIy4iICYiL1wnJDgiOlx4ZWUiICkoIlwnIyZcJyMnKSwkKCIlOzouYyAmJTtceDk4L1kjJCU7QS8sIztceDk4LyMkK1wiKShcIicjJicjMDYqJTtBLywjO1x4OTgvIyQrXCIpKFwiJyMmJyMmLyMkK1wiKShcIicjJicjLyYgOCE6XHhlZiEgKSIpLCQoIiU7TC4jICY7XHg5OS9dIyQlO0IvLCM7XHg5Yi8jJCtcIikoXCInIyYnIzA2KiU7Qi8sIztceDliLyMkK1wiKShcIicjJicjJi8nJDhcIjpceGYwXCIgKShcIicjJicjIiksJCgiJTtceDlhLlwiICZcIi8+IztALzUkO00vLCQ7Py8jJCskKSgkJyMoIycjKFwiJyMmJyMiKSwkKCIlJTs2L1kjJCU7Li8sIzs2LyMkK1wiKShcIicjJicjMDYqJTsuLywjOzYvIyQrXCIpKFwiJyMmJyMmLyMkK1wiKShcIicjJicjLiMgJjtILycgOCE6XHhmMSEhICkiKSwkKCI7XHg5Yy4pICY7XHg5ZC4jICY7XHhhMCIpLCQoIiUzXHhmMlwiXCI1ITdceGYzLzojOzwvMSQ7XHg5Zi8oJDgjOlx4ZjQjISApKCMnIyhcIicjJicjIiksJCgiJTNceGY1XCJcIjUnN1x4ZjYvOiM7PC8xJDtceDllLygkOCM6XHhmNyMhICkoIycjKFwiJyMmJyMiKSwkKCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XHhmOCEhICkiKSwkKCclMlx4ZjkiIjZceGY5N1x4ZmEvbyMlMkoiIjZKN0svTSM7IS4iICYiLz8kOyEuIiAmIi8xJDshLiIgJiIvIyQrJCkoJFwnIygjXCcjKCJcJyMmXCcjLiIgJiIvXCckOCI6XHhmYiIgKSgiXCcjJlwnIycpLCQoJyU7Ni9KIyU7PC8sIztceGExLyMkKyIpKCJcJyMmXCcjLiIgJiIvKSQ4IjpceGZjIiIhICkoIlwnIyZcJyMnKSwkKCI7Ni4pICY7VC4jICY7SCIpLCQoIiU7XHhhMy9ZIyQlO0IvLCM7XHhhNC8jJCtcIikoXCInIyYnIzA2KiU7Qi8sIztceGE0LyMkK1wiKShcIicjJicjJi8jJCtcIikoXCInIyYnIyIpLCQoJyUzXHhmZCIiNSY3XHhmZS5HICYzXHhmZiIiNVwnN1x1MDEwMC47ICYzXHUwMTAxIiI1JDdcdTAxMDIuLyAmM1x1MDEwMyIiNSU3XHUwMTA0LiMgJjs2LyYgOCE6XHUwMTA1ISApJyksJCgiO1x4YTUuIyAmO1x4YTAiKSwkKCclM1x1MDEwNiIiNSg3XHUwMTA3L00jOzwvRCQzXHUwMTA4IiI1KDdcdTAxMDkuLyAmM1x1MDEwYSIiNSg3XHUwMTBiLiMgJjs2LyMkKyMpKCNcJyMoIlwnIyZcJyMnKSwkKCIlOzYvWSMkJTtBLywjOzYvIyQrXCIpKFwiJyMmJyMwNiolO0EvLCM7Ni8jJCtcIikoXCInIyYnIyYvIyQrXCIpKFwiJyMmJyMiKSwkKCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XHUwMTBjISEgKSIpLCQoIiU7XHhhOS8mIDghOlx1MDEwZCEgKSIpLCQoIiU7XHhhYS9rIzs7L2IkO1x4YWYvWSQkJTtCLywjO1x4YjAvIyQrXCIpKFwiJyMmJyMwNiolO0IvLCM7XHhiMC8jJCtcIikoXCInIyYnIyYvIyQrJCkoJCcjKCMnIyhcIicjJicjIiksJCgiO1x4YWIuIyAmO1x4YWMiKSwkKCczXHUwMTBlIiI1JDdcdTAxMGYuUyAmM1x1MDExMCIiNSU3XHUwMTExLkcgJjNcdTAxMTIiIjUlN1x1MDExMy47ICYzXHUwMTE0IiI1JTdcdTAxMTUuLyAmM1x1MDExNiIiNSs3XHUwMTE3LiMgJjtceGFkJyksJCgnM1x1MDExOCIiNVwnN1x1MDExOS4vICYzXHUwMTFhIiI1KTdcdTAxMWIuIyAmO1x4YWQnKSwkKCI7Ni4jICY7XHhhZSIpLCQoJyUzXHUwMTFjIiI1IjdcdTAxMWQvLCM7Ni8jJCsiKSgiXCcjJlwnIycpLCQoIjtceGFkLiMgJjs2IiksJCgiJTs2LzUjOzwvLCQ7XHhiMS8jJCsjKSgjJyMoXCInIyYnIyIpLCQoIjs2LiMgJjtIIiksJCgiJTtceGIzLzUjOy4vLCQ7XHg5MC8jJCsjKSgjJyMoXCInIyYnIyIpLCQoIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpcdTAxMWUhISApIiksJCgiJTtceDllLycgOCE6XHUwMTFmISEgKSIpLCQoJyU7XHhiNi9eIyQlO0IvLCM7XHhhMC8jJCsiKSgiXCcjJlwnIzA2KiU7Qi8sIztceGEwLyMkKyIpKCJcJyMmXCcjJi8oJDgiOlx1MDEyMCIhISkoIlwnIyZcJyMnKSwkKCclJTs3L2UjJCUySiIiNko3Sy8sIzs3LyMkKyIpKCJcJyMmXCcjMDwqJTJKIiI2SjdLLywjOzcvIyQrIikoIlwnIyZcJyMmLyMkKyIpKCJcJyMmXCcjLyIhJiwpJyksJCgiJTtMLiMgJjtceDk5L10jJCU7Qi8sIztceGI4LyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4YjgvIyQrXCIpKFwiJyMmJyMmLyckOFwiOlx1MDEyMVwiICkoXCInIyYnIyIpLCQoIjtceGI5LiMgJjtceGEwIiksJCgiJTNcdTAxMjJcIlwiNSM3XHUwMTIzLzojOzwvMSQ7Ni8oJDgjOlx1MDEyNCMhICkoIycjKFwiJyMmJyMiKSwkKCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XHUwMTI1ISEgKSIpLCQoIiU7XHg5ZS8nIDghOlx1MDEyNiEhICkiKSwkKCIlJDtceDlhMCMqO1x4OWEmL3gjO0AvbyQ7TS9mJDs/L10kJCU7Qi8sIztceGEwLyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4YTAvIyQrXCIpKFwiJyMmJyMmLyckOCU6XHUwMTI3JSApKCUnIygkJyMoIycjKFwiJyMmJyMiKSwkKCI7XHhiZSIpLCQoIiUzXHUwMTI4XCJcIjUmN1x1MDEyOS9rIzsuL2IkO1x4YzEvWSQkJTtBLywjO1x4YzEvIyQrXCIpKFwiJyMmJyMwNiolO0EvLCM7XHhjMS8jJCtcIikoXCInIyYnIyYvIyQrJCkoJCcjKCMnIyhcIicjJicjLiMgJjtceGJmIiksJCgiJTs2L2sjOy4vYiQ7XHhjMC9ZJCQlO0EvLCM7XHhjMC8jJCtcIikoXCInIyYnIzA2KiU7QS8sIztceGMwLyMkK1wiKShcIicjJicjJi8jJCskKSgkJyMoIycjKFwiJyMmJyMiKSwkKCIlOzYvOyM7PC8yJDs2LiMgJjtILyMkKyMpKCMnIyhcIicjJicjIiksJCgiO1x4YzIuRyAmO1x4YzQuQSAmO1x4YzYuOyAmO1x4YzguNSAmO1x4YzkuLyAmO1x4Y2EuKSAmO1x4Y2IuIyAmO1x4YzAiKSwkKCIlM1x1MDEyYVwiXCI1JTdcdTAxMmIvNSM7PC8sJDtceGMzLyMkKyMpKCMnIyhcIicjJicjIiksJCgiJTtJLycgOCE6XHUwMTJjISEgKSIpLCQoIiUzXHUwMTJkXCJcIjUmN1x1MDEyZS9ceDk3Izs8L1x4OGUkO0QvXHg4NSQ7XHhjNS98JCQlJDsnLyYjMCMqOycmJiYjLywjO1x4YzUvIyQrXCIpKFwiJyMmJyMwQyolJDsnLyYjMCMqOycmJiYjLywjO1x4YzUvIyQrXCIpKFwiJyMmJyMmLywkO0UvIyQrJikoJicjKCUnIygkJyMoIycjKFwiJyMmJyMiKSwkKCI7dC4jICY7dyIpLCQoIiUzXHUwMTJmXCJcIjUlN1x1MDEzMC81Izs8LywkO1x4YzcvIyQrIykoIycjKFwiJyMmJyMiKSwkKCIlO0kvJyA4ITpcdTAxMzEhISApIiksJCgiJTNcdTAxMzJcIlwiNSY3XHUwMTMzLzojOzwvMSQ7SS8oJDgjOlx1MDEzNCMhICkoIycjKFwiJyMmJyMiKSwkKCclM1x1MDEzNSIiNSU3XHUwMTM2L10jOzwvVCQlM1x1MDEzNyIiNSQ3XHUwMTM4LyYgOCE6XHUwMTM5ISApLjQgJiUzXHUwMTNhIiI1JTdcdTAxM2IvJiA4ITpcdTAxM2MhICkvIyQrIykoI1wnIygiXCcjJlwnIycpLCQoJyUzXHUwMTNkIiI1KTdcdTAxM2UvUiM7PC9JJDNcdTAxM2YiIjUjN1x1MDE0MC4vICYzXHUwMTQxIiI1KDdcdTAxNDIuIyAmOzYvKCQ4IzpcdTAxNDMjISApKCNcJyMoIlwnIyZcJyMnKSwkKCclM1x1MDE0NCIiNSM3XHUwMTQ1L1x4OTMjOzwvXHg4YSQ7RC9ceDgxJCU7XHhjYy9lIyQlMkQiIjZEN0UvLCM7XHhjYy8jJCsiKSgiXCcjJlwnIzA8KiUyRCIiNkQ3RS8sIztceGNjLyMkKyIpKCJcJyMmXCcjJi8jJCsiKSgiXCcjJlwnIy8sJDtFLyMkKyUpKCVcJyMoJFwnIygjXCcjKCJcJyMmXCcjJyksJCgnJTNcdTAxNDYiIjUoN1x1MDE0Ny4vICYzXHUwMTQ4IiI1JDdcdTAxNDkuIyAmOzYvXCcgOCE6XHUwMTRhISEgKScpLCQoIiU7Ni9ZIyQlO0EvLCM7Ni8jJCtcIikoXCInIyYnIzA2KiU7QS8sIzs2LyMkK1wiKShcIicjJicjJi8jJCtcIikoXCInIyYnIyIpLCQoIiU7XHhjZi9HIzsuLz4kO1x4Y2YvNSQ7Li8sJDtceDkwLyMkKyUpKCUnIygkJyMoIycjKFwiJyMmJyMiKSwkKCIlJDshLyYjMCMqOyEmJiYjLycgOCE6XHUwMTRiISEgKSIpLCQoIiU7XHhkMS9dIyQlO0EvLCM7XHhkMS8jJCtcIikoXCInIyYnIzA2KiU7QS8sIztceGQxLyMkK1wiKShcIicjJicjJi8nJDhcIjpcdTAxNGNcIiApKFwiJyMmJyMiKSwkKCIlO1x4OTkvXSMkJTtCLywjO1x4YTAvIyQrXCIpKFwiJyMmJyMwNiolO0IvLCM7XHhhMC8jJCtcIikoXCInIyYnIyYvJyQ4XCI6XHUwMTRkXCIgKShcIicjJicjIiksJCgnJTtMLk8gJjtceDk5LkkgJiU7QC4iICYiLzojO3QvMSQ7Py4iICYiLyMkKyMpKCNcJyMoIlwnIyZcJyMvXSMkJTtCLywjO1x4YTAvIyQrIikoIlwnIyZcJyMwNiolO0IvLCM7XHhhMC8jJCsiKSgiXCcjJlwnIyYvXCckOCI6XHUwMTRlIiApKCJcJyMmXCcjJyksJCgiJTtceGQ0L10jJCU7Qi8sIztceGQ1LyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4ZDUvIyQrXCIpKFwiJyMmJyMmLyckOFwiOlx1MDE0ZlwiICkoXCInIyYnIyIpLCQoIiU7XHg5Ni8mIDghOlx1MDE1MCEgKSIpLCQoJyUzXHUwMTUxIiI1KDdcdTAxNTIvOiM7PC8xJDs2LygkOCM6XHUwMTUzIyEgKSgjXCcjKCJcJyMmXCcjLmcgJiUzXHUwMTU0IiI1JjdcdTAxNTUvOiM7PC8xJDs2LygkOCM6XHUwMTU2IyEgKSgjXCcjKCJcJyMmXCcjLjogJiUzXHUwMTU3IiI1KjdcdTAxNTgvJiA4ITpcdTAxNTkhICkuIyAmO1x4YTAnKSwkKCclJTs2L2sjJCU7QS8yIzs2LykkOCI6XHUwMTVhIiIkICkoIlwnIyZcJyMwPColO0EvMiM7Ni8pJDgiOlx1MDE1YSIiJCApKCJcJyMmXCcjJi8pJDgiOlx1MDE1YiIiISApKCJcJyMmXCcjLiIgJiIvXCcgOCE6XHUwMTVjISEgKScpLCQoIiU7XHhkOC9ZIyQlO0EvLCM7XHhkOC8jJCtcIikoXCInIyYnIzA2KiU7QS8sIztceGQ4LyMkK1wiKShcIicjJicjJi8jJCtcIikoXCInIyYnIyIpLCQoIiU7XHg5OS9ZIyQlO0IvLCM7XHhhMC8jJCtcIikoXCInIyYnIzA2KiU7Qi8sIztceGEwLyMkK1wiKShcIicjJicjJi8jJCtcIikoXCInIyYnIyIpLCQoIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpcdTAxNWQhISApIiksJCgiJTtceGRiL1kjJCU7Qi8sIztceGRjLyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4ZGMvIyQrXCIpKFwiJyMmJyMmLyMkK1wiKShcIicjJicjIiksJCgnJTNcdTAxNWUiIjUmN1x1MDE1Zi47ICYzXHUwMTYwIiI1XCc3XHUwMTYxLi8gJjNcdTAxNjIiIjUqN1x1MDE2My4jICY7Ni8mIDghOlx1MDE2NCEgKScpLCQoIiUzXHUwMTY1XCJcIjUmN1x1MDE2Ni86Izs8LzEkO1x4ZGQvKCQ4IzpcdTAxNjcjISApKCMnIyhcIicjJicjLn0gJiUzXHhmNVwiXCI1JzdceGY2LzojOzwvMSQ7XHg5ZS8oJDgjOlx1MDE2OCMhICkoIycjKFwiJyMmJyMuUCAmJTNcdTAxNjlcIlwiNSs3XHUwMTZhLzojOzwvMSQ7XHg5ZS8oJDgjOlx1MDE2YiMhICkoIycjKFwiJyMmJyMuIyAmO1x4YTAiKSwkKCczXHUwMTZjIiI1KzdcdTAxNmQuayAmM1x1MDE2ZSIiNSk3XHUwMTZmLl8gJjNcdTAxNzAiIjUoN1x1MDE3MS5TICYzXHUwMTcyIiI1XCc3XHUwMTczLkcgJjNcdTAxNzQiIjUmN1x1MDE3NS47ICYzXHUwMTc2IiI1KjdcdTAxNzcuLyAmM1x1MDE3OCIiNSk3XHUwMTc5LiMgJjs2JyksJCgnOzEuIiAmIicpLCQoJyUlOzYvayMkJTtBLzIjOzYvKSQ4IjpcdTAxNWEiIiQgKSgiXCcjJlwnIzA8KiU7QS8yIzs2LykkOCI6XHUwMTVhIiIkICkoIlwnIyZcJyMmLykkOCI6XHUwMTViIiIhICkoIlwnIyZcJyMuIiAmIi9cJyA4ITpcdTAxN2EhISApJyksJCgiJTtMLiMgJjtceDk5L10jJCU7Qi8sIztceGUxLyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4ZTEvIyQrXCIpKFwiJyMmJyMmLyckOFwiOlx1MDE3YlwiICkoXCInIyYnIyIpLCQoIjtceGI5LiMgJjtceGEwIiksJCgiJTtceGUzL1kjJCU7QS8sIztceGUzLyMkK1wiKShcIicjJicjMDYqJTtBLywjO1x4ZTMvIyQrXCIpKFwiJyMmJyMmLyMkK1wiKShcIicjJicjIiksJCgiJTtceGVhL2sjOy4vYiQ7XHhlZC9ZJCQlO0IvLCM7XHhlNC8jJCtcIikoXCInIyYnIzA2KiU7Qi8sIztceGU0LyMkK1wiKShcIicjJicjJi8jJCskKSgkJyMoIycjKFwiJyMmJyMiKSwkKCI7XHhlNS47ICY7XHhlNi41ICY7XHhlNy4vICY7XHhlOC4pICY7XHhlOS4jICY7XHhhMCIpLCQoIiUzXHUwMTdjXCJcIjUjN1x1MDE3ZC86Izs8LzEkO1x4ZjAvKCQ4IzpcdTAxN2UjISApKCMnIyhcIicjJicjIiksJCgiJTNcdTAxN2ZcIlwiNSU3XHUwMTgwLzojOzwvMSQ7VC8oJDgjOlx1MDE4MSMhICkoIycjKFwiJyMmJyMiKSwkKCIlM1x1MDE4MlwiXCI1KDdcdTAxODMvRiM7PC89JDtcXC4pICY7WS4jICY7WC8oJDgjOlx1MDE4NCMhICkoIycjKFwiJyMmJyMiKSwkKCIlM1x1MDE4NVwiXCI1JjdcdTAxODYvOiM7PC8xJDs2LygkOCM6XHUwMTg3IyEgKSgjJyMoXCInIyYnIyIpLCQoIiUzXHUwMTg4XCJcIjUlN1x1MDE4OS9BIzs8LzgkJDshMCMqOyEmLygkOCM6XHUwMThhIyEgKSgjJyMoXCInIyYnIyIpLCQoIiU7XHhlYi9HIzs7Lz4kOzYvNSQ7Oy8sJDtceGVjLyMkKyUpKCUnIygkJyMoIycjKFwiJyMmJyMiKSwkKCclM1x4OTIiIjUjN1x4ZDMuIyAmOzYvXCcgOCE6XHUwMThiISEgKScpLCQoJyUzXHhiMSIiNSM3XHUwMThjLkcgJjNceGIzIiI1IzdcdTAxOGQuOyAmM1x4YjciIjUjN1x1MDE4ZS4vICYzXHhiNSIiNSQ3XHUwMThmLiMgJjs2L1wnIDghOlx1MDE5MCEhICknKSwkKCclO1x4ZWUvRCMlO0MvLCM7XHhlZi8jJCsiKSgiXCcjJlwnIy4iICYiLyMkKyIpKCJcJyMmXCcjJyksJCgiJTtVLikgJjtcXC4jICY7WC8mIDghOlx1MDE5MSEgKSIpLCQoJyUlOyEuIiAmIi9bIzshLiIgJiIvTSQ7IS4iICYiLz8kOyEuIiAmIi8xJDshLiIgJiIvIyQrJSkoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMvXCcgOCE6XHUwMTkyISEgKScpLCQoJyUlOyEvPyM7IS4iICYiLzEkOyEuIiAmIi8jJCsjKSgjXCcjKCJcJyMmXCcjL1wnIDghOlx1MDE5MyEhICknKSwkKCI7XHhiZSIpLCQoJyU7XHg5ZS9eIyQlO0IvLCM7XHhmMy8jJCsiKSgiXCcjJlwnIzA2KiU7Qi8sIztceGYzLyMkKyIpKCJcJyMmXCcjJi8oJDgiOlx1MDE5NCIhISkoIlwnIyZcJyMnKSwkKCI7XHhmNC4jICY7XHhhMCIpLCQoJyUyXHUwMTk1IiI2XHUwMTk1N1x1MDE5Ni9MIzs8L0MkMlx1MDE5NyIiNlx1MDE5NzdcdTAxOTguKSAmMlx1MDE5OSIiNlx1MDE5OTdcdTAxOWEvKCQ4IzpcdTAxOWIjISApKCNcJyMoIlwnIyZcJyMnKSwkKCclO1x4OWUvXiMkJTtCLywjO1x4YTAvIyQrIikoIlwnIyZcJyMwNiolO0IvLCM7XHhhMC8jJCsiKSgiXCcjJlwnIyYvKCQ4IjpcdTAxOWMiISEpKCJcJyMmXCcjJyksJCgiJTs2LzUjOzAvLCQ7XHhmNy8jJCsjKSgjJyMoXCInIyYnIyIpLCQoIiQ7Mi4pICY7NC4jICY7LjAvKjsyLikgJjs0LiMgJjsuJiIpLCQoIiQ7JTAjKjslJiIpLCQoIiU7XHhmYS87IzI4XCJcIjY4NzkvLCQ7XHhmYi8jJCsjKSgjJyMoXCInIyYnIyIpLCQoJyUzXHUwMTlkIiI1JTdcdTAxOWUuKSAmM1x1MDE5ZiIiNSQ3XHUwMWEwL1wnIDghOlx1MDFhMSEhICknKSwkKCclO1x4ZmMvSiMlMjgiIjY4NzkvLCM7Xi8jJCsiKSgiXCcjJlwnIy4iICYiLyMkKyIpKCJcJyMmXCcjJyksJCgiJTtcXC4pICY7WC4jICY7XHg4Mi8nIDghOlx1MDFhMiEhICkiKSwkKCc7Ii5TICY7IS5NICYyRiIiNkY3Ry5BICYySiIiNko3Sy41ICYySCIiNkg3SS4pICYyTiIiNk43TycpLCQoJzJMIiI2TDdNLlx4OTUgJjJCIiI2QjdDLlx4ODkgJjI8IiI2PDc9Ln0gJjJSIiI2UjdTLnEgJjJUIiI2VDdVLmUgJjJWIiI2VjdXLlkgJjJQIiI2UDdRLk0gJjJAIiI2QDdBLkEgJjJEIiI2RDdFLjUgJjIyIiI2MjczLikgJjI+IiI2Pjc/JyksJCgnJTtcdTAxMDAvYiMyOCIiNjg3OS9TJDtceGZiL0okJTJcdTAxYTMiIjZcdTAxYTM3XHUwMWE0LywjO1x4ZWMvIyQrIikoIlwnIyZcJyMuIiAmIi8jJCskKSgkXCcjKCNcJyMoIlwnIyZcJyMnKSwkKCclM1x1MDFhNSIiNSU3XHUwMWE2LikgJjNcdTAxYTciIjUkN1x1MDFhOC9cJyA4ITpcdTAxYTEhISApJyksJCgnJTNceGIxIiI1IzdceGIyLjYgJjNceGIzIiI1IzdceGI0LiogJiQ7KzAjKjsrJi9cJyA4ITpcdTAxYTkhISApJyksJCgiJTtcdTAxMDQvXHg4NyMyRlwiXCI2RjdHL3gkO1x1MDEwMy9vJDJGXCJcIjZGN0cvYCQ7XHUwMTAzL1ckMkZcIlwiNkY3Ry9IJDtcdTAxMDMvPyQyRlwiXCI2RjdHLzAkO1x1MDEwNS8nJDgpOlx1MDFhYSkgKSgpJyMoKCcjKCcnIygmJyMoJScjKCQnIygjJyMoXCInIyYnIyIpLCQoIiU7Iy8+IzsjLzUkOyMvLCQ7Iy8jJCskKSgkJyMoIycjKFwiJyMmJyMiKSwkKCIlO1x1MDEwMy8sIztcdTAxMDMvIyQrXCIpKFwiJyMmJyMiKSwkKCIlO1x1MDEwMy81IztcdTAxMDMvLCQ7XHUwMTAzLyMkKyMpKCMnIyhcIicjJicjIiksJCgiJTtxL1QjJDttMCMqO20mL0QkJTsgLywjO1x4ZjgvIyQrXCIpKFwiJyMmJyMuXCIgJlwiLyMkKyMpKCMnIyhcIicjJicjIiksJCgnJTJcdTAxYWIiIjZcdTAxYWI3XHUwMWFjLikgJjJcdTAxYWQiIjZcdTAxYWQ3XHUwMWFlL3cjOzAvbiQ7XHUwMTA4L2UkJCU7Qi8yIztcdTAxMDkuIyAmO1x4YTAvIyQrIikoIlwnIyZcJyMwPColO0IvMiM7XHUwMTA5LiMgJjtceGEwLyMkKyIpKCJcJyMmXCcjJi8jJCskKSgkXCcjKCNcJyMoIlwnIyZcJyMnKSwkKCI7XHg5OS4jICY7TCIpLCQoIiUyXHUwMWFmXCJcIjZcdTAxYWY3XHUwMWIwLzUjOzwvLCQ7XHUwMTBhLyMkKyMpKCMnIyhcIicjJicjIiksJCgiJTtEL1MjOywvSiQyOlwiXCI2Ojc7LzskOywuIyAmO1QvLCQ7RS8jJCslKSglJyMoJCcjKCMnIyhcIicjJicjIildO2xldCBhPTAsYz0wO2NvbnN0IGg9W3tsaW5lOjEsY29sdW1uOjF9XTtsZXQgZCxsPTAsZz1bXSx1PTA7aWYodm9pZCAwIT09dC5zdGFydFJ1bGUpe2lmKCEodC5zdGFydFJ1bGUgaW4gaSkpdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBzdGFydCBwYXJzaW5nIGZyb20gcnVsZSBcIiIrdC5zdGFydFJ1bGUrJyIuJyk7cj1pW3Quc3RhcnRSdWxlXX1mdW5jdGlvbiBwKCl7cmV0dXJuIGUuc3Vic3RyaW5nKGMsYSl9ZnVuY3Rpb24gZigpe3JldHVybiBTKGMsYSl9ZnVuY3Rpb24gdyhlLHQpe3JldHVybnt0eXBlOiJsaXRlcmFsIix0ZXh0OmUsaWdub3JlQ2FzZTp0fX1mdW5jdGlvbiBUKGUsdCxzKXtyZXR1cm57dHlwZToiY2xhc3MiLHBhcnRzOmUsaW52ZXJ0ZWQ6dCxpZ25vcmVDYXNlOnN9fWZ1bmN0aW9uIHkodCl7bGV0IHMsaT1oW3RdO2lmKGkpcmV0dXJuIGk7Zm9yKHM9dC0xOyFoW3NdOylzLS07Zm9yKGk9aFtzXSxpPXtsaW5lOmkubGluZSxjb2x1bW46aS5jb2x1bW59O3M8dDspMTA9PT1lLmNoYXJDb2RlQXQocyk/KGkubGluZSsrLGkuY29sdW1uPTEpOmkuY29sdW1uKysscysrO3JldHVybiBoW3RdPWksaX1mdW5jdGlvbiBTKGUsdCl7Y29uc3Qgcz15KGUpLGk9eSh0KTtyZXR1cm57c3RhcnQ6e29mZnNldDplLGxpbmU6cy5saW5lLGNvbHVtbjpzLmNvbHVtbn0sZW5kOntvZmZzZXQ6dCxsaW5lOmkubGluZSxjb2x1bW46aS5jb2x1bW59fX1mdW5jdGlvbiBSKGUpe2E8bHx8KGE+bCYmKGw9YSxnPVtdKSxnLnB1c2goZSkpfWZ1bmN0aW9uIEUoZSx0LHMpe3JldHVybiBuZXcgYihiLmJ1aWxkTWVzc2FnZShlLHQpLGUsdCxzKX1mdW5jdGlvbiAkKGUpe3JldHVybiBlLnNwbGl0KCIiKS5tYXAoKGU9PmUuY2hhckNvZGVBdCgwKS0zMikpfWlmKHQuZGF0YT17fSxkPWZ1bmN0aW9uIHQoaSl7Y29uc3Qgcj1vW2ldO2xldCBoPTA7Y29uc3QgZD1bXTtsZXQgbD1yLmxlbmd0aDtjb25zdCBnPVtdLHA9W107bGV0IGY7Zm9yKDs7KXtmb3IoO2g8bDspc3dpdGNoKHJbaF0pe2Nhc2UgMDpwLnB1c2gobltyW2grMV1dKSxoKz0yO2JyZWFrO2Nhc2UgMTpwLnB1c2godm9pZCAwKSxoKys7YnJlYWs7Y2FzZSAyOnAucHVzaChudWxsKSxoKys7YnJlYWs7Y2FzZSAzOnAucHVzaChzKSxoKys7YnJlYWs7Y2FzZSA0OnAucHVzaChbXSksaCsrO2JyZWFrO2Nhc2UgNTpwLnB1c2goYSksaCsrO2JyZWFrO2Nhc2UgNjpwLnBvcCgpLGgrKzticmVhaztjYXNlIDc6YT1wLnBvcCgpLGgrKzticmVhaztjYXNlIDg6cC5sZW5ndGgtPXJbaCsxXSxoKz0yO2JyZWFrO2Nhc2UgOTpwLnNwbGljZSgtMiwxKSxoKys7YnJlYWs7Y2FzZSAxMDpwW3AubGVuZ3RoLTJdLnB1c2gocC5wb3AoKSksaCsrO2JyZWFrO2Nhc2UgMTE6cC5wdXNoKHAuc3BsaWNlKHAubGVuZ3RoLXJbaCsxXSxyW2grMV0pKSxoKz0yO2JyZWFrO2Nhc2UgMTI6cC5wdXNoKGUuc3Vic3RyaW5nKHAucG9wKCksYSkpLGgrKzticmVhaztjYXNlIDEzOmcucHVzaChsKSxkLnB1c2goaCszK3JbaCsxXStyW2grMl0pLHBbcC5sZW5ndGgtMV0/KGw9aCszK3JbaCsxXSxoKz0zKToobD1oKzMrcltoKzFdK3JbaCsyXSxoKz0zK3JbaCsxXSk7YnJlYWs7Y2FzZSAxNDpnLnB1c2gobCksZC5wdXNoKGgrMytyW2grMV0rcltoKzJdKSxwW3AubGVuZ3RoLTFdPT09cz8obD1oKzMrcltoKzFdLGgrPTMpOihsPWgrMytyW2grMV0rcltoKzJdLGgrPTMrcltoKzFdKTticmVhaztjYXNlIDE1OmcucHVzaChsKSxkLnB1c2goaCszK3JbaCsxXStyW2grMl0pLHBbcC5sZW5ndGgtMV0hPT1zPyhsPWgrMytyW2grMV0saCs9Myk6KGw9aCszK3JbaCsxXStyW2grMl0saCs9MytyW2grMV0pO2JyZWFrO2Nhc2UgMTY6cFtwLmxlbmd0aC0xXSE9PXM/KGcucHVzaChsKSxkLnB1c2goaCksbD1oKzIrcltoKzFdLGgrPTIpOmgrPTIrcltoKzFdO2JyZWFrO2Nhc2UgMTc6Zy5wdXNoKGwpLGQucHVzaChoKzMrcltoKzFdK3JbaCsyXSksZS5sZW5ndGg+YT8obD1oKzMrcltoKzFdLGgrPTMpOihsPWgrMytyW2grMV0rcltoKzJdLGgrPTMrcltoKzFdKTticmVhaztjYXNlIDE4OmcucHVzaChsKSxkLnB1c2goaCs0K3JbaCsyXStyW2grM10pLGUuc3Vic3RyKGEsbltyW2grMV1dLmxlbmd0aCk9PT1uW3JbaCsxXV0/KGw9aCs0K3JbaCsyXSxoKz00KToobD1oKzQrcltoKzJdK3JbaCszXSxoKz00K3JbaCsyXSk7YnJlYWs7Y2FzZSAxOTpnLnB1c2gobCksZC5wdXNoKGgrNCtyW2grMl0rcltoKzNdKSxlLnN1YnN0cihhLG5bcltoKzFdXS5sZW5ndGgpLnRvTG93ZXJDYXNlKCk9PT1uW3JbaCsxXV0/KGw9aCs0K3JbaCsyXSxoKz00KToobD1oKzQrcltoKzJdK3JbaCszXSxoKz00K3JbaCsyXSk7YnJlYWs7Y2FzZSAyMDpnLnB1c2gobCksZC5wdXNoKGgrNCtyW2grMl0rcltoKzNdKSxuW3JbaCsxXV0udGVzdChlLmNoYXJBdChhKSk/KGw9aCs0K3JbaCsyXSxoKz00KToobD1oKzQrcltoKzJdK3JbaCszXSxoKz00K3JbaCsyXSk7YnJlYWs7Y2FzZSAyMTpwLnB1c2goZS5zdWJzdHIoYSxyW2grMV0pKSxhKz1yW2grMV0saCs9MjticmVhaztjYXNlIDIyOnAucHVzaChuW3JbaCsxXV0pLGErPW5bcltoKzFdXS5sZW5ndGgsaCs9MjticmVhaztjYXNlIDIzOnAucHVzaChzKSwwPT09dSYmUihuW3JbaCsxXV0pLGgrPTI7YnJlYWs7Y2FzZSAyNDpjPXBbcC5sZW5ndGgtMS1yW2grMV1dLGgrPTI7YnJlYWs7Y2FzZSAyNTpjPWEsaCsrO2JyZWFrO2Nhc2UgMjY6Zj1yLnNsaWNlKGgrNCxoKzQrcltoKzNdKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBwW3AubGVuZ3RoLTEtZV19KSkscC5zcGxpY2UocC5sZW5ndGgtcltoKzJdLHJbaCsyXSxuW3JbaCsxXV0uYXBwbHkobnVsbCxmKSksaCs9NCtyW2grM107YnJlYWs7Y2FzZSAyNzpwLnB1c2godChyW2grMV0pKSxoKz0yO2JyZWFrO2Nhc2UgMjg6dSsrLGgrKzticmVhaztjYXNlIDI5OnUtLSxoKys7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgb3Bjb2RlOiAiK3JbaF0rIi4iKX1pZighKGcubGVuZ3RoPjApKWJyZWFrO2w9Zy5wb3AoKSxoPWQucG9wKCl9cmV0dXJuIHBbMF19KHIpLGQhPT1zJiZhPT09ZS5sZW5ndGgpcmV0dXJuIGQ7dGhyb3cgZCE9PXMmJmE8ZS5sZW5ndGgmJlIoe3R5cGU6ImVuZCJ9KSxFKGcsbDxlLmxlbmd0aD9lLmNoYXJBdChsKTpudWxsLGw8ZS5sZW5ndGg/UyhsLGwrMSk6UyhsLGwpKX07dmFyIHk7IWZ1bmN0aW9uKGUpe2UucGFyc2U9ZnVuY3Rpb24oZSx0KXtjb25zdCBzPXtzdGFydFJ1bGU6dH07dHJ5e1QoZSxzKX1jYXRjaChlKXtzLmRhdGE9LTF9cmV0dXJuIHMuZGF0YX0sZS5uYW1lQWRkckhlYWRlclBhcnNlPWZ1bmN0aW9uKHQpe2NvbnN0IHM9ZS5wYXJzZSh0LCJOYW1lX0FkZHJfSGVhZGVyIik7cmV0dXJuLTEhPT1zP3M6dm9pZCAwfSxlLlVSSVBhcnNlPWZ1bmN0aW9uKHQpe2NvbnN0IHM9ZS5wYXJzZSh0LCJTSVBfVVJJIik7cmV0dXJuLTEhPT1zP3M6dm9pZCAwfX0oeXx8KHk9e30pKTtjb25zdCBTPXsxMDA6IlRyeWluZyIsMTgwOiJSaW5naW5nIiwxODE6IkNhbGwgSXMgQmVpbmcgRm9yd2FyZGVkIiwxODI6IlF1ZXVlZCIsMTgzOiJTZXNzaW9uIFByb2dyZXNzIiwxOTk6IkVhcmx5IERpYWxvZyBUZXJtaW5hdGVkIiwyMDA6Ik9LIiwyMDI6IkFjY2VwdGVkIiwyMDQ6Ik5vIE5vdGlmaWNhdGlvbiIsMzAwOiJNdWx0aXBsZSBDaG9pY2VzIiwzMDE6Ik1vdmVkIFBlcm1hbmVudGx5IiwzMDI6Ik1vdmVkIFRlbXBvcmFyaWx5IiwzMDU6IlVzZSBQcm94eSIsMzgwOiJBbHRlcm5hdGl2ZSBTZXJ2aWNlIiw0MDA6IkJhZCBSZXF1ZXN0Iiw0MDE6IlVuYXV0aG9yaXplZCIsNDAyOiJQYXltZW50IFJlcXVpcmVkIiw0MDM6IkZvcmJpZGRlbiIsNDA0OiJOb3QgRm91bmQiLDQwNToiTWV0aG9kIE5vdCBBbGxvd2VkIiw0MDY6Ik5vdCBBY2NlcHRhYmxlIiw0MDc6IlByb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkIiw0MDg6IlJlcXVlc3QgVGltZW91dCIsNDEwOiJHb25lIiw0MTI6IkNvbmRpdGlvbmFsIFJlcXVlc3QgRmFpbGVkIiw0MTM6IlJlcXVlc3QgRW50aXR5IFRvbyBMYXJnZSIsNDE0OiJSZXF1ZXN0LVVSSSBUb28gTG9uZyIsNDE1OiJVbnN1cHBvcnRlZCBNZWRpYSBUeXBlIiw0MTY6IlVuc3VwcG9ydGVkIFVSSSBTY2hlbWUiLDQxNzoiVW5rbm93biBSZXNvdXJjZS1Qcmlvcml0eSIsNDIwOiJCYWQgRXh0ZW5zaW9uIiw0MjE6IkV4dGVuc2lvbiBSZXF1aXJlZCIsNDIyOiJTZXNzaW9uIEludGVydmFsIFRvbyBTbWFsbCIsNDIzOiJJbnRlcnZhbCBUb28gQnJpZWYiLDQyODoiVXNlIElkZW50aXR5IEhlYWRlciIsNDI5OiJQcm92aWRlIFJlZmVycmVyIElkZW50aXR5Iiw0MzA6IkZsb3cgRmFpbGVkIiw0MzM6IkFub255bWl0eSBEaXNhbGxvd2VkIiw0MzY6IkJhZCBJZGVudGl0eS1JbmZvIiw0Mzc6IlVuc3VwcG9ydGVkIENlcnRpZmljYXRlIiw0Mzg6IkludmFsaWQgSWRlbnRpdHkgSGVhZGVyIiw0Mzk6IkZpcnN0IEhvcCBMYWNrcyBPdXRib3VuZCBTdXBwb3J0Iiw0NDA6Ik1heC1CcmVhZHRoIEV4Y2VlZGVkIiw0Njk6IkJhZCBJbmZvIFBhY2thZ2UiLDQ3MDoiQ29uc2VudCBOZWVkZWQiLDQ3ODoiVW5yZXNvbHZhYmxlIERlc3RpbmF0aW9uIiw0ODA6IlRlbXBvcmFyaWx5IFVuYXZhaWxhYmxlIiw0ODE6IkNhbGwvVHJhbnNhY3Rpb24gRG9lcyBOb3QgRXhpc3QiLDQ4MjoiTG9vcCBEZXRlY3RlZCIsNDgzOiJUb28gTWFueSBIb3BzIiw0ODQ6IkFkZHJlc3MgSW5jb21wbGV0ZSIsNDg1OiJBbWJpZ3VvdXMiLDQ4NjoiQnVzeSBIZXJlIiw0ODc6IlJlcXVlc3QgVGVybWluYXRlZCIsNDg4OiJOb3QgQWNjZXB0YWJsZSBIZXJlIiw0ODk6IkJhZCBFdmVudCIsNDkxOiJSZXF1ZXN0IFBlbmRpbmciLDQ5MzoiVW5kZWNpcGhlcmFibGUiLDQ5NDoiU2VjdXJpdHkgQWdyZWVtZW50IFJlcXVpcmVkIiw1MDA6IkludGVybmFsIFNlcnZlciBFcnJvciIsNTAxOiJOb3QgSW1wbGVtZW50ZWQiLDUwMjoiQmFkIEdhdGV3YXkiLDUwMzoiU2VydmljZSBVbmF2YWlsYWJsZSIsNTA0OiJTZXJ2ZXIgVGltZS1vdXQiLDUwNToiVmVyc2lvbiBOb3QgU3VwcG9ydGVkIiw1MTM6Ik1lc3NhZ2UgVG9vIExhcmdlIiw1ODA6IlByZWNvbmRpdGlvbiBGYWlsdXJlIiw2MDA6IkJ1c3kgRXZlcnl3aGVyZSIsNjAzOiJEZWNsaW5lIiw2MDQ6IkRvZXMgTm90IEV4aXN0IEFueXdoZXJlIiw2MDY6Ik5vdCBBY2NlcHRhYmxlIn07ZnVuY3Rpb24gUihlLHQ9MzIpe2xldCBzPSIiO2ZvcihsZXQgaT0wO2k8ZTtpKyspe3MrPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp0KS50b1N0cmluZyh0KX1yZXR1cm4gc31mdW5jdGlvbiBFKGUpe3JldHVybiBTW2VdfHwiIn1mdW5jdGlvbiAkKCl7cmV0dXJuIFIoMTApfWZ1bmN0aW9uIEkoZSl7Y29uc3QgdD17IkNhbGwtSWQiOiJDYWxsLUlEIixDc2VxOiJDU2VxIiwiTWluLVNlIjoiTWluLVNFIixSYWNrOiJSQWNrIixSc2VxOiJSU2VxIiwiV3d3LUF1dGhlbnRpY2F0ZSI6IldXVy1BdXRoZW50aWNhdGUifSxzPWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIi0iKS5zcGxpdCgiLSIpLGk9cy5sZW5ndGg7bGV0IHI9IiI7Zm9yKGxldCBlPTA7ZTxpO2UrKykwIT09ZSYmKHIrPSItIikscis9c1tlXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzW2VdLnN1YnN0cmluZygxKTtyZXR1cm4gdFtyXSYmKHI9dFtyXSkscn1mdW5jdGlvbiBDKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZSkucmVwbGFjZSgvJVtBLUZcZF17Mn0vZywiVSIpLmxlbmd0aH1jbGFzcyBBe2NvbnN0cnVjdG9yKCl7dGhpcy5oZWFkZXJzPXt9fWFkZEhlYWRlcihlLHQpe2NvbnN0IHM9e3Jhdzp0fTtlPUkoZSksdGhpcy5oZWFkZXJzW2VdP3RoaXMuaGVhZGVyc1tlXS5wdXNoKHMpOnRoaXMuaGVhZGVyc1tlXT1bc119Z2V0SGVhZGVyKGUpe2NvbnN0IHQ9dGhpcy5oZWFkZXJzW0koZSldO2lmKHQpcmV0dXJuIHRbMF0/dFswXS5yYXc6dm9pZCAwfWdldEhlYWRlcnMoZSl7Y29uc3QgdD10aGlzLmhlYWRlcnNbSShlKV0scz1bXTtpZighdClyZXR1cm5bXTtmb3IoY29uc3QgZSBvZiB0KXMucHVzaChlLnJhdyk7cmV0dXJuIHN9aGFzSGVhZGVyKGUpe3JldHVybiEhdGhpcy5oZWFkZXJzW0koZSldfXBhcnNlSGVhZGVyKGUsdD0wKXtpZihlPUkoZSksIXRoaXMuaGVhZGVyc1tlXSlyZXR1cm47aWYodD49dGhpcy5oZWFkZXJzW2VdLmxlbmd0aClyZXR1cm47Y29uc3Qgcz10aGlzLmhlYWRlcnNbZV1bdF0saT1zLnJhdztpZihzLnBhcnNlZClyZXR1cm4gcy5wYXJzZWQ7Y29uc3Qgcj15LnBhcnNlKGksZS5yZXBsYWNlKC8tL2csIl8iKSk7cmV0dXJuLTE9PT1yP3ZvaWQgdGhpcy5oZWFkZXJzW2VdLnNwbGljZSh0LDEpOihzLnBhcnNlZD1yLHIpfXMoZSx0PTApe3JldHVybiB0aGlzLnBhcnNlSGVhZGVyKGUsdCl9c2V0SGVhZGVyKGUsdCl7dGhpcy5oZWFkZXJzW0koZSldPVt7cmF3OnR9XX10b1N0cmluZygpe3JldHVybiB0aGlzLmRhdGF9fWNsYXNzIEQgZXh0ZW5kcyBBe2NvbnN0cnVjdG9yKCl7c3VwZXIoKX19Y2xhc3MgSCBleHRlbmRzIEF7Y29uc3RydWN0b3IoKXtzdXBlcigpfX1jbGFzcyBre2NvbnN0cnVjdG9yKGUsdCxzLGkscixuLG8pe3RoaXMuaGVhZGVycz17fSx0aGlzLmV4dHJhSGVhZGVycz1bXSx0aGlzLm9wdGlvbnM9ay5nZXREZWZhdWx0T3B0aW9ucygpLHImJih0aGlzLm9wdGlvbnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMub3B0aW9ucyksciksdGhpcy5vcHRpb25zLm9wdGlvblRhZ3MmJnRoaXMub3B0aW9ucy5vcHRpb25UYWdzLmxlbmd0aCYmKHRoaXMub3B0aW9ucy5vcHRpb25UYWdzPXRoaXMub3B0aW9ucy5vcHRpb25UYWdzLnNsaWNlKCkpLHRoaXMub3B0aW9ucy5yb3V0ZVNldCYmdGhpcy5vcHRpb25zLnJvdXRlU2V0Lmxlbmd0aCYmKHRoaXMub3B0aW9ucy5yb3V0ZVNldD10aGlzLm9wdGlvbnMucm91dGVTZXQuc2xpY2UoKSkpLG4mJm4ubGVuZ3RoJiYodGhpcy5leHRyYUhlYWRlcnM9bi5zbGljZSgpKSxvJiYodGhpcy5ib2R5PXtib2R5Om8uY29udGVudCxjb250ZW50VHlwZTpvLmNvbnRlbnRUeXBlfSksdGhpcy5tZXRob2Q9ZSx0aGlzLnJ1cmk9dC5jbG9uZSgpLHRoaXMuZnJvbVVSST1zLmNsb25lKCksdGhpcy5mcm9tVGFnPXRoaXMub3B0aW9ucy5mcm9tVGFnP3RoaXMub3B0aW9ucy5mcm9tVGFnOiQoKSx0aGlzLmZyb209ay5tYWtlTmFtZUFkZHJIZWFkZXIodGhpcy5mcm9tVVJJLHRoaXMub3B0aW9ucy5mcm9tRGlzcGxheU5hbWUsdGhpcy5mcm9tVGFnKSx0aGlzLnRvVVJJPWkuY2xvbmUoKSx0aGlzLnRvVGFnPXRoaXMub3B0aW9ucy50b1RhZyx0aGlzLnRvPWsubWFrZU5hbWVBZGRySGVhZGVyKHRoaXMudG9VUkksdGhpcy5vcHRpb25zLnRvRGlzcGxheU5hbWUsdGhpcy50b1RhZyksdGhpcy5jYWxsSWQ9dGhpcy5vcHRpb25zLmNhbGxJZD90aGlzLm9wdGlvbnMuY2FsbElkOnRoaXMub3B0aW9ucy5jYWxsSWRQcmVmaXgrUigxNSksdGhpcy5jc2VxPXRoaXMub3B0aW9ucy5jc2VxLHRoaXMuc2V0SGVhZGVyKCJyb3V0ZSIsdGhpcy5vcHRpb25zLnJvdXRlU2V0KSx0aGlzLnNldEhlYWRlcigidmlhIiwiIiksdGhpcy5zZXRIZWFkZXIoInRvIix0aGlzLnRvLnRvU3RyaW5nKCkpLHRoaXMuc2V0SGVhZGVyKCJmcm9tIix0aGlzLmZyb20udG9TdHJpbmcoKSksdGhpcy5zZXRIZWFkZXIoImNzZXEiLHRoaXMuY3NlcSsiICIrdGhpcy5tZXRob2QpLHRoaXMuc2V0SGVhZGVyKCJjYWxsLWlkIix0aGlzLmNhbGxJZCksdGhpcy5zZXRIZWFkZXIoIm1heC1mb3J3YXJkcyIsIjcwIil9c3RhdGljIGdldERlZmF1bHRPcHRpb25zKCl7cmV0dXJue2NhbGxJZDoiIixjYWxsSWRQcmVmaXg6IiIsY3NlcToxLHRvRGlzcGxheU5hbWU6IiIsdG9UYWc6IiIsZnJvbURpc3BsYXlOYW1lOiIiLGZyb21UYWc6IiIsZm9yY2VScG9ydDohMSxoYWNrVmlhVGNwOiExLG9wdGlvblRhZ3M6WyJvdXRib3VuZCJdLHJvdXRlU2V0OltdLHVzZXJBZ2VudFN0cmluZzoic2lwLmpzIix2aWFIb3N0OiIifX1zdGF0aWMgbWFrZU5hbWVBZGRySGVhZGVyKGUsdCxzKXtjb25zdCBpPXt9O3JldHVybiBzJiYoaS50YWc9cyksbmV3IG0oZSx0LGkpfWdldEhlYWRlcihlKXtjb25zdCB0PXRoaXMuaGVhZGVyc1tJKGUpXTtpZih0KXtpZih0WzBdKXJldHVybiB0WzBdfWVsc2V7Y29uc3QgdD1uZXcgUmVnRXhwKCJeXFxzKiIrZSsiXFxzKjoiLCJpIik7Zm9yKGNvbnN0IGUgb2YgdGhpcy5leHRyYUhlYWRlcnMpaWYodC50ZXN0KGUpKXJldHVybiBlLnN1YnN0cmluZyhlLmluZGV4T2YoIjoiKSsxKS50cmltKCl9fWdldEhlYWRlcnMoZSl7Y29uc3QgdD1bXSxzPXRoaXMuaGVhZGVyc1tJKGUpXTtpZihzKWZvcihjb25zdCBlIG9mIHMpdC5wdXNoKGUpO2Vsc2V7Y29uc3Qgcz1uZXcgUmVnRXhwKCJeXFxzKiIrZSsiXFxzKjoiLCJpIik7Zm9yKGNvbnN0IGUgb2YgdGhpcy5leHRyYUhlYWRlcnMpcy50ZXN0KGUpJiZ0LnB1c2goZS5zdWJzdHJpbmcoZS5pbmRleE9mKCI6IikrMSkudHJpbSgpKX1yZXR1cm4gdH1oYXNIZWFkZXIoZSl7aWYodGhpcy5oZWFkZXJzW0koZSldKXJldHVybiEwO3tjb25zdCB0PW5ldyBSZWdFeHAoIl5cXHMqIitlKyJcXHMqOiIsImkiKTtmb3IoY29uc3QgZSBvZiB0aGlzLmV4dHJhSGVhZGVycylpZih0LnRlc3QoZSkpcmV0dXJuITB9cmV0dXJuITF9c2V0SGVhZGVyKGUsdCl7dGhpcy5oZWFkZXJzW0koZSldPXQgaW5zdGFuY2VvZiBBcnJheT90Olt0XX1zZXRWaWFIZWFkZXIoZSx0KXt0aGlzLm9wdGlvbnMuaGFja1ZpYVRjcCYmKHQ9IlRDUCIpO2xldCBzPSJTSVAvMi4wLyIrdDtzKz0iICIrdGhpcy5vcHRpb25zLnZpYUhvc3QrIjticmFuY2g9IitlLHRoaXMub3B0aW9ucy5mb3JjZVJwb3J0JiYocys9IjtycG9ydCIpLHRoaXMuc2V0SGVhZGVyKCJ2aWEiLHMpLHRoaXMuYnJhbmNoPWV9dG9TdHJpbmcoKXtsZXQgZT0iIjtlKz10aGlzLm1ldGhvZCsiICIrdGhpcy5ydXJpLnRvUmF3KCkrIiBTSVAvMi4wXHJcbiI7Zm9yKGNvbnN0IHQgaW4gdGhpcy5oZWFkZXJzKWlmKHRoaXMuaGVhZGVyc1t0XSlmb3IoY29uc3QgcyBvZiB0aGlzLmhlYWRlcnNbdF0pZSs9dCsiOiAiK3MrIlxyXG4iO2Zvcihjb25zdCB0IG9mIHRoaXMuZXh0cmFIZWFkZXJzKWUrPXQudHJpbSgpKyJcclxuIjtyZXR1cm4gZSs9IlN1cHBvcnRlZDogIit0aGlzLm9wdGlvbnMub3B0aW9uVGFncy5qb2luKCIsICIpKyJcclxuIixlKz0iVXNlci1BZ2VudDogIit0aGlzLm9wdGlvbnMudXNlckFnZW50U3RyaW5nKyJcclxuIix0aGlzLmJvZHk/InN0cmluZyI9PXR5cGVvZiB0aGlzLmJvZHk/KGUrPSJDb250ZW50LUxlbmd0aDogIitDKHRoaXMuYm9keSkrIlxyXG5cclxuIixlKz10aGlzLmJvZHkpOnRoaXMuYm9keS5ib2R5JiZ0aGlzLmJvZHkuY29udGVudFR5cGU/KGUrPSJDb250ZW50LVR5cGU6ICIrdGhpcy5ib2R5LmNvbnRlbnRUeXBlKyJcclxuIixlKz0iQ29udGVudC1MZW5ndGg6ICIrQyh0aGlzLmJvZHkuYm9keSkrIlxyXG5cclxuIixlKz10aGlzLmJvZHkuYm9keSk6ZSs9IkNvbnRlbnQtTGVuZ3RoOiAwXHJcblxyXG4iOmUrPSJDb250ZW50LUxlbmd0aDogMFxyXG5cclxuIixlfX1mdW5jdGlvbiBfKGUpe3JldHVybiJhcHBsaWNhdGlvbi9zZHAiPT09ZT8ic2Vzc2lvbiI6InJlbmRlciJ9ZnVuY3Rpb24gUChlKXtjb25zdCB0PSJzdHJpbmciPT10eXBlb2YgZT9lOmUuYm9keSxzPSJzdHJpbmciPT10eXBlb2YgZT8iYXBwbGljYXRpb24vc2RwIjplLmNvbnRlbnRUeXBlO3JldHVybntjb250ZW50RGlzcG9zaXRpb246XyhzKSxjb250ZW50VHlwZTpzLGNvbnRlbnQ6dH19ZnVuY3Rpb24gcShlKXtyZXR1cm4hKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUuY29udGVudHx8InN0cmluZyIhPXR5cGVvZiBlLmNvbnRlbnRUeXBlfHx2b2lkIDAhPT1lLmNvbnRlbnREaXNwb3NpdGlvbil8fCJzdHJpbmciPT10eXBlb2YgZS5jb250ZW50RGlzcG9zaXRpb259ZnVuY3Rpb24geChlKXtsZXQgdCxzLGk7aWYoZSBpbnN0YW5jZW9mIEQmJmUuYm9keSl7Y29uc3Qgcj1lLnBhcnNlSGVhZGVyKCJDb250ZW50LURpc3Bvc2l0aW9uIik7dD1yP3IudHlwZTp2b2lkIDAscz1lLnBhcnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSxpPWUuYm9keX1pZihlIGluc3RhbmNlb2YgSCYmZS5ib2R5KXtjb25zdCByPWUucGFyc2VIZWFkZXIoIkNvbnRlbnQtRGlzcG9zaXRpb24iKTt0PXI/ci50eXBlOnZvaWQgMCxzPWUucGFyc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpLGk9ZS5ib2R5fWlmKGUgaW5zdGFuY2VvZiBrJiZlLmJvZHkpaWYodD1lLmdldEhlYWRlcigiQ29udGVudC1EaXNwb3NpdGlvbiIpLHM9ZS5nZXRIZWFkZXIoIkNvbnRlbnQtVHlwZSIpLCJzdHJpbmciPT10eXBlb2YgZS5ib2R5KXtpZighcyl0aHJvdyBuZXcgRXJyb3IoIkhlYWRlciBjb250ZW50IHR5cGUgaGVhZGVyIGRvZXMgbm90IGVxdWFsIGJvZHkgY29udGVudCB0eXBlLiIpO2k9ZS5ib2R5fWVsc2V7aWYocyYmcyE9PWUuYm9keS5jb250ZW50VHlwZSl0aHJvdyBuZXcgRXJyb3IoIkhlYWRlciBjb250ZW50IHR5cGUgaGVhZGVyIGRvZXMgbm90IGVxdWFsIGJvZHkgY29udGVudCB0eXBlLiIpO3M9ZS5ib2R5LmNvbnRlbnRUeXBlLGk9ZS5ib2R5LmJvZHl9aWYocShlKSYmKHQ9ZS5jb250ZW50RGlzcG9zaXRpb24scz1lLmNvbnRlbnRUeXBlLGk9ZS5jb250ZW50KSxpKXtpZihzJiYhdCYmKHQ9XyhzKSksIXQpdGhyb3cgbmV3IEVycm9yKCJDb250ZW50IGRpc3Bvc2l0aW9uIHVuZGVmaW5lZC4iKTtpZighcyl0aHJvdyBuZXcgRXJyb3IoIkNvbnRlbnQgdHlwZSB1bmRlZmluZWQuIik7cmV0dXJue2NvbnRlbnREaXNwb3NpdGlvbjp0LGNvbnRlbnRUeXBlOnMsY29udGVudDppfX19dmFyIE4sTTshZnVuY3Rpb24oZSl7ZS5Jbml0aWFsPSJJbml0aWFsIixlLkVhcmx5PSJFYXJseSIsZS5BY2tXYWl0PSJBY2tXYWl0IixlLkNvbmZpcm1lZD0iQ29uZmlybWVkIixlLlRlcm1pbmF0ZWQ9IlRlcm1pbmF0ZWQifShOfHwoTj17fSkpLGZ1bmN0aW9uKGUpe2UuSW5pdGlhbD0iSW5pdGlhbCIsZS5IYXZlTG9jYWxPZmZlcj0iSGF2ZUxvY2FsT2ZmZXIiLGUuSGF2ZVJlbW90ZU9mZmVyPSJIYXZlUmVtb3RlT2ZmZXIiLGUuU3RhYmxlPSJTdGFibGUiLGUuQ2xvc2VkPSJDbG9zZWQifShNfHwoTT17fSkpO2NsYXNzIE8gZXh0ZW5kcyBue2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fCJUcmFuc2FjdGlvbiBzdGF0ZSBlcnJvci4iKX19Y29uc3QgVT01MDAsaj01ZTMsRj17VDE6VSxUMjo0ZTMsVDQ6aixUSU1FUl9COjMyZTMsVElNRVJfRDowLFRJTUVSX0Y6MzJlMyxUSU1FUl9IOjMyZTMsVElNRVJfSTowLFRJTUVSX0o6MCxUSU1FUl9LOjAsVElNRVJfTDozMmUzLFRJTUVSX006MzJlMyxUSU1FUl9OOjMyZTMsUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUw6NmU0fTt2YXIgTDshZnVuY3Rpb24oZSl7ZS5BQ0s9IkFDSyIsZS5CWUU9IkJZRSIsZS5DQU5DRUw9IkNBTkNFTCIsZS5JTkZPPSJJTkZPIixlLklOVklURT0iSU5WSVRFIixlLk1FU1NBR0U9Ik1FU1NBR0UiLGUuTk9USUZZPSJOT1RJRlkiLGUuT1BUSU9OUz0iT1BUSU9OUyIsZS5SRUdJU1RFUj0iUkVHSVNURVIiLGUuVVBEQVRFPSJVUERBVEUiLGUuU1VCU0NSSUJFPSJTVUJTQ1JJQkUiLGUuUFVCTElTSD0iUFVCTElTSCIsZS5SRUZFUj0iUkVGRVIiLGUuUFJBQ0s9IlBSQUNLIn0oTHx8KEw9e30pKTtjb25zdCBCPVtMLkFDSyxMLkJZRSxMLkNBTkNFTCxMLklORk8sTC5JTlZJVEUsTC5NRVNTQUdFLEwuTk9USUZZLEwuT1BUSU9OUyxMLlBSQUNLLEwuUkVGRVIsTC5SRUdJU1RFUixMLlNVQlNDUklCRV07Y2xhc3MgR3tjb25zdHJ1Y3RvcihlKXt0aGlzLmluY29taW5nTWVzc2FnZVJlcXVlc3Q9ZX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLmluY29taW5nTWVzc2FnZVJlcXVlc3QubWVzc2FnZX1hY2NlcHQoZSl7cmV0dXJuIHRoaXMuaW5jb21pbmdNZXNzYWdlUmVxdWVzdC5hY2NlcHQoZSksUHJvbWlzZS5yZXNvbHZlKCl9cmVqZWN0KGUpe3JldHVybiB0aGlzLmluY29taW5nTWVzc2FnZVJlcXVlc3QucmVqZWN0KGUpLFByb21pc2UucmVzb2x2ZSgpfX1jbGFzcyBWe2NvbnN0cnVjdG9yKGUpe3RoaXMuaW5jb21pbmdOb3RpZnlSZXF1ZXN0PWV9Z2V0IHJlcXVlc3QoKXtyZXR1cm4gdGhpcy5pbmNvbWluZ05vdGlmeVJlcXVlc3QubWVzc2FnZX1hY2NlcHQoZSl7cmV0dXJuIHRoaXMuaW5jb21pbmdOb3RpZnlSZXF1ZXN0LmFjY2VwdChlKSxQcm9taXNlLnJlc29sdmUoKX1yZWplY3QoZSl7cmV0dXJuIHRoaXMuaW5jb21pbmdOb3RpZnlSZXF1ZXN0LnJlamVjdChlKSxQcm9taXNlLnJlc29sdmUoKX19Y2xhc3MgS3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuaW5jb21pbmdSZWZlclJlcXVlc3Q9ZSx0aGlzLnNlc3Npb249dH1nZXQgcmVmZXJUbygpe2NvbnN0IGU9dGhpcy5pbmNvbWluZ1JlZmVyUmVxdWVzdC5tZXNzYWdlLnBhcnNlSGVhZGVyKCJyZWZlci10byIpO2lmKCEoZSBpbnN0YW5jZW9mIG0pKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIHBhcnNlIFJlZmVyLVRvIGhlYWRlci4iKTtyZXR1cm4gZX1nZXQgcmVmZXJyZWRCeSgpe3JldHVybiB0aGlzLmluY29taW5nUmVmZXJSZXF1ZXN0Lm1lc3NhZ2UuZ2V0SGVhZGVyKCJyZWZlcnJlZC1ieSIpfWdldCByZXBsYWNlcygpe2NvbnN0IGU9dGhpcy5yZWZlclRvLnVyaS5nZXRIZWFkZXIoInJlcGxhY2VzIik7cmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheT9lWzBdOmV9Z2V0IHJlcXVlc3QoKXtyZXR1cm4gdGhpcy5pbmNvbWluZ1JlZmVyUmVxdWVzdC5tZXNzYWdlfWFjY2VwdChlPXtzdGF0dXNDb2RlOjIwMn0pe3JldHVybiB0aGlzLmluY29taW5nUmVmZXJSZXF1ZXN0LmFjY2VwdChlKSxQcm9taXNlLnJlc29sdmUoKX1yZWplY3QoZSl7cmV0dXJuIHRoaXMuaW5jb21pbmdSZWZlclJlcXVlc3QucmVqZWN0KGUpLFByb21pc2UucmVzb2x2ZSgpfW1ha2VJbnZpdGVyKGUpe2lmKHRoaXMuaW52aXRlcilyZXR1cm4gdGhpcy5pbnZpdGVyO2NvbnN0IHQ9dGhpcy5yZWZlclRvLnVyaS5jbG9uZSgpO3QuY2xlYXJIZWFkZXJzKCk7Y29uc3Qgcz0oKGU9ZXx8e30pLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksaT10aGlzLnJlcGxhY2VzO2kmJnMucHVzaCgiUmVwbGFjZXM6ICIrZGVjb2RlVVJJQ29tcG9uZW50KGkpKTtjb25zdCByPXRoaXMucmVmZXJyZWRCeTtyZXR1cm4gciYmcy5wdXNoKCJSZWZlcnJlZC1CeTogIityKSxlLmV4dHJhSGVhZGVycz1zLHRoaXMuaW52aXRlcj10aGlzLnNlc3Npb24udXNlckFnZW50Ll9tYWtlSW52aXRlcih0LGUpLHRoaXMuaW52aXRlci5fcmVmZXJyZWQ9dGhpcy5zZXNzaW9uLHRoaXMuc2Vzc2lvbi5fcmVmZXJyYWw9dGhpcy5pbnZpdGVyLHRoaXMuaW52aXRlcn19dmFyIFcsWTshZnVuY3Rpb24oZSl7ZS5Jbml0aWFsPSJJbml0aWFsIixlLkVzdGFibGlzaGluZz0iRXN0YWJsaXNoaW5nIixlLkVzdGFibGlzaGVkPSJFc3RhYmxpc2hlZCIsZS5UZXJtaW5hdGluZz0iVGVybWluYXRpbmciLGUuVGVybWluYXRlZD0iVGVybWluYXRlZCJ9KFd8fChXPXt9KSk7Y2xhc3MgWntjb25zdHJ1Y3RvcihlLHQ9e30pe3RoaXMucGVuZGluZ1JlaW52aXRlPSExLHRoaXMucGVuZGluZ1JlaW52aXRlQWNrPSExLHRoaXMuX3N0YXRlPVcuSW5pdGlhbCx0aGlzLmRlbGVnYXRlPXQuZGVsZWdhdGUsdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXI9bmV3IHUsdGhpcy5fdXNlckFnZW50PWV9ZGlzcG9zZSgpe3N3aXRjaCh0aGlzLmxvZ2dlci5sb2coYFNlc3Npb24gJHt0aGlzLmlkfSBpbiBzdGF0ZSAke3RoaXMuX3N0YXRlfSBpcyBiZWluZyBkaXNwb3NlZGApLGRlbGV0ZSB0aGlzLnVzZXJBZ2VudC5fc2Vzc2lvbnNbdGhpcy5pZF0sdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciYmdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5jbG9zZSgpLHRoaXMuc3RhdGUpe2Nhc2UgVy5Jbml0aWFsOmNhc2UgVy5Fc3RhYmxpc2hpbmc6YnJlYWs7Y2FzZSBXLkVzdGFibGlzaGVkOnJldHVybiBuZXcgUHJvbWlzZSgoZT0+e3RoaXMuX2J5ZSh7b25BY2NlcHQ6KCk9PmUoKSxvblJlZGlyZWN0OigpPT5lKCksb25SZWplY3Q6KCk9PmUoKX0pfSkpO2Nhc2UgVy5UZXJtaW5hdGluZzpjYXNlIFcuVGVybWluYXRlZDpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biBzdGF0ZS4iKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9Z2V0IGFzc2VydGVkSWRlbnRpdHkoKXtyZXR1cm4gdGhpcy5fYXNzZXJ0ZWRJZGVudGl0eX1nZXQgZGlhbG9nKCl7cmV0dXJuIHRoaXMuX2RpYWxvZ31nZXQgaWQoKXtyZXR1cm4gdGhpcy5faWR9Z2V0IHJlcGxhY2VlKCl7cmV0dXJuIHRoaXMuX3JlcGxhY2VlfWdldCBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCl7cmV0dXJuIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJ9Z2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5KCl7cmV0dXJuIHRoaXMudXNlckFnZW50LmNvbmZpZ3VyYXRpb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3Rvcnl9Z2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMoKXtyZXR1cm4gdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc3x8W119c2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMoZSl7dGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycz1lLnNsaWNlKCl9Z2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zKCl7cmV0dXJuIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zfHx7fX1zZXQgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMoZSl7dGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM9T2JqZWN0LmFzc2lnbih7fSxlKX1nZXQgc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlKCl7cmV0dXJuIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNSZUludml0ZXx8W119c2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNSZUludml0ZShlKXt0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGU9ZS5zbGljZSgpfWdldCBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlKCl7cmV0dXJuIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGV8fHt9fXNldCBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlKGUpe3RoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGU9T2JqZWN0LmFzc2lnbih7fSxlKX1nZXQgc3RhdGUoKXtyZXR1cm4gdGhpcy5fc3RhdGV9Z2V0IHN0YXRlQ2hhbmdlKCl7cmV0dXJuIHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyfWdldCB1c2VyQWdlbnQoKXtyZXR1cm4gdGhpcy5fdXNlckFnZW50fWJ5ZShlPXt9KXtsZXQgdD0iU2Vzc2lvbi5ieWUoKSBtYXkgb25seSBiZSBjYWxsZWQgaWYgZXN0YWJsaXNoZWQgc2Vzc2lvbi4iO3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIFcuSW5pdGlhbDoiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5jYW5jZWw/KHQrPSIgSG93ZXZlciBJbnZpdGVyLmludml0ZSgpIGhhcyBub3QgeWV0IGJlZW4gY2FsbGVkLiIsdCs9IiBQZXJoYXBzIHlvdSBzaG91bGQgaGF2ZSBjYWxsZWQgSW52aXRlci5jYW5jZWwoKT8iKToiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZWplY3QmJih0Kz0iIEhvd2V2ZXIgSW52aXRhdGlvbi5hY2NlcHQoKSBoYXMgbm90IHlldCBiZWVuIGNhbGxlZC4iLHQrPSIgUGVyaGFwcyB5b3Ugc2hvdWxkIGhhdmUgY2FsbGVkIEludml0YXRpb24ucmVqZWN0KCk/Iik7YnJlYWs7Y2FzZSBXLkVzdGFibGlzaGluZzoiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5jYW5jZWw/KHQrPSIgSG93ZXZlciBhIGRpYWxvZyBkb2VzIG5vdCB5ZXQgZXhpc3QuIix0Kz0iIFBlcmhhcHMgeW91IHNob3VsZCBoYXZlIGNhbGxlZCBJbnZpdGVyLmNhbmNlbCgpPyIpOiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlamVjdCYmKHQrPSIgSG93ZXZlciBJbnZpdGF0aW9uLmFjY2VwdCgpIGhhcyBub3QgeWV0IGJlZW4gY2FsbGVkIChvciBub3QgeWV0IHJlc29sdmVkKS4iLHQrPSIgUGVyaGFwcyB5b3Ugc2hvdWxkIGhhdmUgY2FsbGVkIEludml0YXRpb24ucmVqZWN0KCk/Iik7YnJlYWs7Y2FzZSBXLkVzdGFibGlzaGVkOntjb25zdCB0PWUucmVxdWVzdERlbGVnYXRlLHM9dGhpcy5jb3B5UmVxdWVzdE9wdGlvbnMoZS5yZXF1ZXN0T3B0aW9ucyk7cmV0dXJuIHRoaXMuX2J5ZSh0LHMpfWNhc2UgVy5UZXJtaW5hdGluZzp0Kz0iIEhvd2V2ZXIgdGhpcyBzZXNzaW9uIGlzIGFscmVhZHkgdGVybWluYXRpbmcuIiwiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5jYW5jZWw/dCs9IiBQZXJoYXBzIHlvdSBoYXZlIGFscmVhZHkgY2FsbGVkIEludml0ZXIuY2FuY2VsKCk/IjoiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZWplY3QmJih0Kz0iIFBlcmhhcHMgeW91IGhhdmUgYWxyZWFkeSBjYWxsZWQgU2Vzc2lvbi5ieWUoKT8iKTticmVhaztjYXNlIFcuVGVybWluYXRlZDp0Kz0iIEhvd2V2ZXIgdGhpcyBzZXNzaW9uIGlzIGFscmVhZHkgdGVybWluYXRlZC4iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlIil9cmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKHQpLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgSW52YWxpZCBzZXNzaW9uIHN0YXRlICR7dGhpcy5zdGF0ZX1gKSl9aW5mbyhlPXt9KXtpZih0aGlzLnN0YXRlIT09Vy5Fc3RhYmxpc2hlZCl7Y29uc3QgZT0iU2Vzc2lvbi5pbmZvKCkgbWF5IG9ubHkgYmUgY2FsbGVkIGlmIGVzdGFibGlzaGVkIHNlc3Npb24uIjtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZSksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBJbnZhbGlkIHNlc3Npb24gc3RhdGUgJHt0aGlzLnN0YXRlfWApKX1jb25zdCB0PWUucmVxdWVzdERlbGVnYXRlLHM9dGhpcy5jb3B5UmVxdWVzdE9wdGlvbnMoZS5yZXF1ZXN0T3B0aW9ucyk7cmV0dXJuIHRoaXMuX2luZm8odCxzKX1pbnZpdGUoZT17fSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLmludml0ZSIpLHRoaXMuc3RhdGUhPT1XLkVzdGFibGlzaGVkKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEludmFsaWQgc2Vzc2lvbiBzdGF0ZSAke3RoaXMuc3RhdGV9YCkpO2lmKHRoaXMucGVuZGluZ1JlaW52aXRlKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgYSgiUmVpbnZpdGUgaW4gcHJvZ3Jlc3MuIFBsZWFzZSB3YWl0IHVudGlsIGNvbXBsZXRlLCB0aGVuIHRyeSBhZ2Fpbi4iKSk7dGhpcy5wZW5kaW5nUmVpbnZpdGU9ITAsZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzJiYodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGU9ZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzKSxlLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zJiYodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlPWUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMpO2NvbnN0IHQ9e29uQWNjZXB0OnQ9Pntjb25zdCBzPXgodC5tZXNzYWdlKTtpZighcylyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoIlJlY2VpdmVkIDJ4eCByZXNwb25zZSB0byByZS1JTlZJVEUgd2l0aG91dCBhIHNlc3Npb24gZGVzY3JpcHRpb24iKSx0aGlzLmFja0FuZEJ5ZSh0LDQwMCwiTWlzc2luZyBzZXNzaW9uIGRlc2NyaXB0aW9uIiksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSx2b2lkKHRoaXMucGVuZGluZ1JlaW52aXRlPSExKTtpZihlLndpdGhvdXRTZHApe2NvbnN0IGk9e3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZSxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlfTt0aGlzLnNldE9mZmVyQW5kR2V0QW5zd2VyKHMsaSkudGhlbigoZT0+e3QuYWNrKHtib2R5OmV9KX0pKS5jYXRjaCgoZT0+e3RoaXMubG9nZ2VyLmVycm9yKCJGYWlsZWQgdG8gaGFuZGxlIG9mZmVyIGluIDJ4eCByZXNwb25zZSB0byByZS1JTlZJVEUiKSx0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLHRoaXMuc3RhdGU9PT1XLlRlcm1pbmF0ZWQ/dC5hY2soKToodGhpcy5hY2tBbmRCeWUodCw0ODgsIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuVGVybWluYXRlZCkpfSkpLnRoZW4oKCgpPT57dGhpcy5wZW5kaW5nUmVpbnZpdGU9ITEsZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCh0KX0pKX1lbHNle2NvbnN0IGk9e3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZSxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc1JlSW52aXRlfTt0aGlzLnNldEFuc3dlcihzLGkpLnRoZW4oKCgpPT57dC5hY2soKX0pKS5jYXRjaCgoZT0+e3RoaXMubG9nZ2VyLmVycm9yKCJGYWlsZWQgdG8gaGFuZGxlIGFuc3dlciBpbiAyeHggcmVzcG9uc2UgdG8gcmUtSU5WSVRFIiksdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSx0aGlzLnN0YXRlIT09Vy5UZXJtaW5hdGVkPyh0aGlzLmFja0FuZEJ5ZSh0LDQ4OCwiQmFkIE1lZGlhIERlc2NyaXB0aW9uIiksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSk6dC5hY2soKX0pKS50aGVuKCgoKT0+e3RoaXMucGVuZGluZ1JlaW52aXRlPSExLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCYmZS5yZXF1ZXN0RGVsZWdhdGUub25BY2NlcHQodCl9KSl9fSxvblByb2dyZXNzOmU9Pnt9LG9uUmVkaXJlY3Q6ZT0+e30sb25SZWplY3Q6dD0+e3RoaXMubG9nZ2VyLndhcm4oIlJlY2VpdmVkIGEgbm9uLTJ4eCByZXNwb25zZSB0byByZS1JTlZJVEUiKSx0aGlzLnBlbmRpbmdSZWludml0ZT0hMSxlLndpdGhvdXRTZHA/ZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlamVjdCh0KTp0aGlzLnJvbGxiYWNrT2ZmZXIoKS5jYXRjaCgoZT0+e2lmKHRoaXMubG9nZ2VyLmVycm9yKCJGYWlsZWQgdG8gcm9sbGJhY2sgb2ZmZXIgb24gbm9uLTJ4eCByZXNwb25zZSB0byByZS1JTlZJVEUiKSx0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLHRoaXMuc3RhdGUhPT1XLlRlcm1pbmF0ZWQpe2lmKCF0aGlzLmRpYWxvZyl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7Y29uc3QgZT1bXTtlLnB1c2goIlJlYXNvbjogIit0aGlzLmdldFJlYXNvbkhlYWRlclZhbHVlKDUwMCwiSW50ZXJuYWwgU2VydmVyIEVycm9yIikpLHRoaXMuZGlhbG9nLmJ5ZSh2b2lkIDAse2V4dHJhSGVhZGVyczplfSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKX19KSkudGhlbigoKCk9PntlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KHQpfSkpfSxvblRyeWluZzplPT57fX0scz1lLnJlcXVlc3RPcHRpb25zfHx7fTtpZihzLmV4dHJhSGVhZGVycz0ocy5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLHMuZXh0cmFIZWFkZXJzLnB1c2goIkFsbG93OiAiK0IudG9TdHJpbmcoKSkscy5leHRyYUhlYWRlcnMucHVzaCgiQ29udGFjdDogIit0aGlzLl9jb250YWN0KSxlLndpdGhvdXRTZHApe2lmKCF0aGlzLmRpYWxvZyl0aHJvdyB0aGlzLnBlbmRpbmdSZWludml0ZT0hMSxuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmRpYWxvZy5pbnZpdGUodCxzKSl9Y29uc3QgaT17c2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGV9O3JldHVybiB0aGlzLmdldE9mZmVyKGkpLnRoZW4oKGU9PntpZighdGhpcy5kaWFsb2cpdGhyb3cgdGhpcy5wZW5kaW5nUmVpbnZpdGU9ITEsbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO3JldHVybiBzLmJvZHk9ZSx0aGlzLmRpYWxvZy5pbnZpdGUodCxzKX0pKS5jYXRjaCgoZT0+e3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSksdGhpcy5sb2dnZXIuZXJyb3IoIkZhaWxlZCB0byBzZW5kIHJlLUlOVklURSIpLHRoaXMucGVuZGluZ1JlaW52aXRlPSExLGV9KSl9bWVzc2FnZShlPXt9KXtpZih0aGlzLnN0YXRlIT09Vy5Fc3RhYmxpc2hlZCl7Y29uc3QgZT0iU2Vzc2lvbi5tZXNzYWdlKCkgbWF5IG9ubHkgYmUgY2FsbGVkIGlmIGVzdGFibGlzaGVkIHNlc3Npb24uIjtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZSksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBJbnZhbGlkIHNlc3Npb24gc3RhdGUgJHt0aGlzLnN0YXRlfWApKX1jb25zdCB0PWUucmVxdWVzdERlbGVnYXRlLHM9dGhpcy5jb3B5UmVxdWVzdE9wdGlvbnMoZS5yZXF1ZXN0T3B0aW9ucyk7cmV0dXJuIHRoaXMuX21lc3NhZ2UodCxzKX1yZWZlcihlLHQ9e30pe2lmKHRoaXMuc3RhdGUhPT1XLkVzdGFibGlzaGVkKXtjb25zdCBlPSJTZXNzaW9uLnJlZmVyKCkgbWF5IG9ubHkgYmUgY2FsbGVkIGlmIGVzdGFibGlzaGVkIHNlc3Npb24uIjtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZSksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBJbnZhbGlkIHNlc3Npb24gc3RhdGUgJHt0aGlzLnN0YXRlfWApKX1jb25zdCBzPXQucmVxdWVzdERlbGVnYXRlLGk9dGhpcy5jb3B5UmVxdWVzdE9wdGlvbnModC5yZXF1ZXN0T3B0aW9ucyk7cmV0dXJuIGkuZXh0cmFIZWFkZXJzPWkuZXh0cmFIZWFkZXJzP2kuZXh0cmFIZWFkZXJzLmNvbmNhdCh0aGlzLnJlZmVyRXh0cmFIZWFkZXJzKHRoaXMucmVmZXJUb1N0cmluZyhlKSkpOnRoaXMucmVmZXJFeHRyYUhlYWRlcnModGhpcy5yZWZlclRvU3RyaW5nKGUpKSx0aGlzLl9yZWZlcih0Lm9uTm90aWZ5LHMsaSl9X2J5ZShlLHQpe2lmKCF0aGlzLmRpYWxvZylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTZXNzaW9uIGRpYWxvZyB1bmRlZmluZWQuIikpO2NvbnN0IHM9dGhpcy5kaWFsb2c7c3dpdGNoKHMuc2Vzc2lvblN0YXRlKXtjYXNlIE4uSW5pdGlhbDpjYXNlIE4uRWFybHk6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGRpYWxvZyBzdGF0ZSAke3Muc2Vzc2lvblN0YXRlfWApO2Nhc2UgTi5BY2tXYWl0OnJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0aW5nKSxuZXcgUHJvbWlzZSgoaT0+e3MuZGVsZWdhdGU9e29uQWNrOigpPT57Y29uc3Qgcj1zLmJ5ZShlLHQpO3JldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0ZWQpLGkociksUHJvbWlzZS5yZXNvbHZlKCl9LG9uQWNrVGltZW91dDooKT0+e2NvbnN0IHI9cy5ieWUoZSx0KTt0aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0ZWQpLGkocil9fX0pKTtjYXNlIE4uQ29uZmlybWVkOntjb25zdCBpPXMuYnllKGUsdCk7cmV0dXJuIHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuVGVybWluYXRlZCksUHJvbWlzZS5yZXNvbHZlKGkpfWNhc2UgTi5UZXJtaW5hdGVkOnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkaWFsb2cgc3RhdGUgJHtzLnNlc3Npb25TdGF0ZX1gKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHN0YXRlLiIpfX1faW5mbyhlLHQpe3JldHVybiB0aGlzLmRpYWxvZz9Qcm9taXNlLnJlc29sdmUodGhpcy5kaWFsb2cuaW5mbyhlLHQpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gZGlhbG9nIHVuZGVmaW5lZC4iKSl9X21lc3NhZ2UoZSx0KXtyZXR1cm4gdGhpcy5kaWFsb2c/UHJvbWlzZS5yZXNvbHZlKHRoaXMuZGlhbG9nLm1lc3NhZ2UoZSx0KSk6UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTZXNzaW9uIGRpYWxvZyB1bmRlZmluZWQuIikpfV9yZWZlcihlLHQscyl7cmV0dXJuIHRoaXMuZGlhbG9nPyh0aGlzLm9uTm90aWZ5PWUsUHJvbWlzZS5yZXNvbHZlKHRoaXMuZGlhbG9nLnJlZmVyKHQscykpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gZGlhbG9nIHVuZGVmaW5lZC4iKSl9YWNrQW5kQnllKGUsdCxzKXtlLmFjaygpO2NvbnN0IGk9W107dCYmaS5wdXNoKCJSZWFzb246ICIrdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSh0LHMpKSxlLnNlc3Npb24uYnllKHZvaWQgMCx7ZXh0cmFIZWFkZXJzOml9KX1vbkFja1JlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uQWNrUmVxdWVzdCIpLHRoaXMuc3RhdGUhPT1XLkVzdGFibGlzaGVkJiZ0aGlzLnN0YXRlIT09Vy5UZXJtaW5hdGluZylyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoYEFDSyByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCksUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3QgdD10aGlzLmRpYWxvZztpZighdCl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7Y29uc3Qgcz17c2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6dGhpcy5wZW5kaW5nUmVpbnZpdGVBY2s/dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczp0aGlzLnBlbmRpbmdSZWludml0ZUFjaz90aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGU6dGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyc307aWYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkFjayl7Y29uc3QgdD1uZXcgbChlKTt0aGlzLmRlbGVnYXRlLm9uQWNrKHQpfXN3aXRjaCh0aGlzLnBlbmRpbmdSZWludml0ZUFjaz0hMSx0LnNpZ25hbGluZ1N0YXRlKXtjYXNlIE0uSW5pdGlhbDp7dGhpcy5sb2dnZXIuZXJyb3IoYEludmFsaWQgc2lnbmFsaW5nIHN0YXRlICR7dC5zaWduYWxpbmdTdGF0ZX0uYCk7Y29uc3QgZT1bIlJlYXNvbjogIit0aGlzLmdldFJlYXNvbkhlYWRlclZhbHVlKDQ4OCwiQmFkIE1lZGlhIERlc2NyaXB0aW9uIildO3JldHVybiB0LmJ5ZSh2b2lkIDAse2V4dHJhSGVhZGVyczplfSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSxQcm9taXNlLnJlc29sdmUoKX1jYXNlIE0uU3RhYmxlOntjb25zdCBpPXgoZS5tZXNzYWdlKTtyZXR1cm4gaT8icmVuZGVyIj09PWkuY29udGVudERpc3Bvc2l0aW9uPyh0aGlzLl9yZW5kZXJib2R5PWkuY29udGVudCx0aGlzLl9yZW5kZXJ0eXBlPWkuY29udGVudFR5cGUsUHJvbWlzZS5yZXNvbHZlKCkpOiJzZXNzaW9uIiE9PWkuY29udGVudERpc3Bvc2l0aW9uP1Byb21pc2UucmVzb2x2ZSgpOnRoaXMuc2V0QW5zd2VyKGkscykuY2F0Y2goKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpO2NvbnN0IHM9WyJSZWFzb246ICIrdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg0ODgsIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpXTt0LmJ5ZSh2b2lkIDAse2V4dHJhSGVhZGVyczpzfSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKX0pKTpQcm9taXNlLnJlc29sdmUoKX1jYXNlIE0uSGF2ZUxvY2FsT2ZmZXI6e3RoaXMubG9nZ2VyLmVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke3Quc2lnbmFsaW5nU3RhdGV9LmApO2NvbnN0IGU9WyJSZWFzb246ICIrdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg0ODgsIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpXTtyZXR1cm4gdC5ieWUodm9pZCAwLHtleHRyYUhlYWRlcnM6ZX0pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuVGVybWluYXRlZCksUHJvbWlzZS5yZXNvbHZlKCl9Y2FzZSBNLkhhdmVSZW1vdGVPZmZlcjp7dGhpcy5sb2dnZXIuZXJyb3IoYEludmFsaWQgc2lnbmFsaW5nIHN0YXRlICR7dC5zaWduYWxpbmdTdGF0ZX0uYCk7Y29uc3QgZT1bIlJlYXNvbjogIit0aGlzLmdldFJlYXNvbkhlYWRlclZhbHVlKDQ4OCwiQmFkIE1lZGlhIERlc2NyaXB0aW9uIildO3JldHVybiB0LmJ5ZSh2b2lkIDAse2V4dHJhSGVhZGVyczplfSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSxQcm9taXNlLnJlc29sdmUoKX1jYXNlIE0uQ2xvc2VkOmRlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke3Quc2lnbmFsaW5nU3RhdGV9LmApfX1vbkJ5ZVJlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uQnllUmVxdWVzdCIpLHRoaXMuc3RhdGU9PT1XLkVzdGFibGlzaGVkKXtpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQnllKXtjb25zdCB0PW5ldyBnKGUpO3RoaXMuZGVsZWdhdGUub25CeWUodCl9ZWxzZSBlLmFjY2VwdCgpO3RoaXMuc3RhdGVUcmFuc2l0aW9uKFcuVGVybWluYXRlZCl9ZWxzZSB0aGlzLmxvZ2dlci5lcnJvcihgQllFIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlcXVlc3RgKX1vbkluZm9SZXF1ZXN0KGUpe2lmKHRoaXMubG9nZ2VyLmxvZygiU2Vzc2lvbi5vbkluZm9SZXF1ZXN0IiksdGhpcy5zdGF0ZT09PVcuRXN0YWJsaXNoZWQpaWYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkluZm8pe2NvbnN0IHQ9bmV3IHAoZSk7dGhpcy5kZWxlZ2F0ZS5vbkluZm8odCl9ZWxzZSBlLmFjY2VwdCgpO2Vsc2UgdGhpcy5sb2dnZXIuZXJyb3IoYElORk8gcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVxdWVzdGApfW9uSW52aXRlUmVxdWVzdChlKXtpZih0aGlzLmxvZ2dlci5sb2coIlNlc3Npb24ub25JbnZpdGVSZXF1ZXN0IiksdGhpcy5zdGF0ZSE9PVcuRXN0YWJsaXNoZWQpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIuZXJyb3IoYElOVklURSByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCk7dGhpcy5wZW5kaW5nUmVpbnZpdGVBY2s9ITA7Y29uc3QgdD1bIkNvbnRhY3Q6ICIrdGhpcy5fY29udGFjdF07aWYoZS5tZXNzYWdlLmhhc0hlYWRlcigiUC1Bc3NlcnRlZC1JZGVudGl0eSIpKXtjb25zdCB0PWUubWVzc2FnZS5nZXRIZWFkZXIoIlAtQXNzZXJ0ZWQtSWRlbnRpdHkiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIkhlYWRlciB1bmRlZmluZWQuIik7dGhpcy5fYXNzZXJ0ZWRJZGVudGl0eT15Lm5hbWVBZGRySGVhZGVyUGFyc2UodCl9Y29uc3Qgcz17c2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGV9O3RoaXMuZ2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VySW5EaWFsb2cocykudGhlbigocz0+e2NvbnN0IGk9ZS5hY2NlcHQoe3N0YXR1c0NvZGU6MjAwLGV4dHJhSGVhZGVyczp0LGJvZHk6c30pO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25JbnZpdGUmJnRoaXMuZGVsZWdhdGUub25JbnZpdGUoZS5tZXNzYWdlLGkubWVzc2FnZSwyMDApfSkpLmNhdGNoKChzPT57aWYodGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcigiRmFpbGVkIHRvIGhhbmRsZSB0byByZS1JTlZJVEUgcmVxdWVzdCIpLCF0aGlzLmRpYWxvZyl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7aWYodGhpcy5sb2dnZXIuZXJyb3IodGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGUpLHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlIT09TS5TdGFibGUpdGhpcy5yb2xsYmFja09mZmVyKCkudGhlbigoKCk9Pntjb25zdCB0PWUucmVqZWN0KHtzdGF0dXNDb2RlOjQ4OH0pO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25JbnZpdGUmJnRoaXMuZGVsZWdhdGUub25JbnZpdGUoZS5tZXNzYWdlLHQubWVzc2FnZSw0ODgpfSkpLmNhdGNoKChzPT57dGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcigiRmFpbGVkIHRvIHJvbGxiYWNrIG9mZmVyIG9uIHJlLUlOVklURSByZXF1ZXN0Iik7Y29uc3QgaT1lLnJlamVjdCh7c3RhdHVzQ29kZTo0ODh9KTtpZih0aGlzLnN0YXRlIT09Vy5UZXJtaW5hdGVkKXtpZighdGhpcy5kaWFsb2cpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO1tdLnB1c2goIlJlYXNvbjogIit0aGlzLmdldFJlYXNvbkhlYWRlclZhbHVlKDUwMCwiSW50ZXJuYWwgU2VydmVyIEVycm9yIikpLHRoaXMuZGlhbG9nLmJ5ZSh2b2lkIDAse2V4dHJhSGVhZGVyczp0fSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKX10aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uSW52aXRlJiZ0aGlzLmRlbGVnYXRlLm9uSW52aXRlKGUubWVzc2FnZSxpLm1lc3NhZ2UsNDg4KX0pKTtlbHNle2NvbnN0IHQ9ZS5yZWplY3Qoe3N0YXR1c0NvZGU6NDg4fSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkludml0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkludml0ZShlLm1lc3NhZ2UsdC5tZXNzYWdlLDQ4OCl9fSkpfW9uTWVzc2FnZVJlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uTWVzc2FnZVJlcXVlc3QiKSx0aGlzLnN0YXRlPT09Vy5Fc3RhYmxpc2hlZClpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZSl7Y29uc3QgdD1uZXcgRyhlKTt0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZSh0KX1lbHNlIGUuYWNjZXB0KCk7ZWxzZSB0aGlzLmxvZ2dlci5lcnJvcihgTUVTU0FHRSByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCl9b25Ob3RpZnlSZXF1ZXN0KGUpe2lmKHRoaXMubG9nZ2VyLmxvZygiU2Vzc2lvbi5vbk5vdGlmeVJlcXVlc3QiKSx0aGlzLnN0YXRlPT09Vy5Fc3RhYmxpc2hlZClpZih0aGlzLm9uTm90aWZ5KXtjb25zdCB0PW5ldyBWKGUpO3RoaXMub25Ob3RpZnkodCl9ZWxzZSBpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KXtjb25zdCB0PW5ldyBWKGUpO3RoaXMuZGVsZWdhdGUub25Ob3RpZnkodCl9ZWxzZSBlLmFjY2VwdCgpO2Vsc2UgdGhpcy5sb2dnZXIuZXJyb3IoYE5PVElGWSByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCl9b25QcmFja1JlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uUHJhY2tSZXF1ZXN0IiksdGhpcy5zdGF0ZT09PVcuRXN0YWJsaXNoZWQpdGhyb3cgbmV3IEVycm9yKCJVbmltcGxlbWVudGVkLiIpO3RoaXMubG9nZ2VyLmVycm9yKGBQUkFDSyByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCl9b25SZWZlclJlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uUmVmZXJSZXF1ZXN0IiksdGhpcy5zdGF0ZSE9PVcuRXN0YWJsaXNoZWQpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIuZXJyb3IoYFJFRkVSIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlcXVlc3RgKTtpZighZS5tZXNzYWdlLmhhc0hlYWRlcigicmVmZXItdG8iKSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiSW52YWxpZCBSRUZFUiBwYWNrZXQuIEEgcmVmZXItdG8gaGVhZGVyIGlzIHJlcXVpcmVkLiBSZWplY3RpbmcuIiksdm9pZCBlLnJlamVjdCgpO2NvbnN0IHQ9bmV3IEsoZSx0aGlzKTt0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVmZXI/dGhpcy5kZWxlZ2F0ZS5vblJlZmVyKHQpOih0aGlzLmxvZ2dlci5sb2coIk5vIGRlbGVnYXRlIGF2YWlsYWJsZSB0byBoYW5kbGUgUkVGRVIsIGF1dG9tYXRpY2FsbHkgYWNjZXB0aW5nIGFuZCBmb2xsb3dpbmcuIiksdC5hY2NlcHQoKS50aGVuKCgoKT0+dC5tYWtlSW52aXRlcih0aGlzLl9yZWZlcnJhbEludml0ZXJPcHRpb25zKS5pbnZpdGUoKSkpLmNhdGNoKChlPT57dGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKX0pKSl9Z2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VyKGUsdCl7aWYodGhpcy5kaWFsb2cpcmV0dXJuIHRoaXMuZ2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VySW5EaWFsb2codCk7Y29uc3Qgcz14KGUubWVzc2FnZSk7cmV0dXJuIHMmJiJzZXNzaW9uIj09PXMuY29udGVudERpc3Bvc2l0aW9uP3RoaXMuc2V0T2ZmZXJBbmRHZXRBbnN3ZXIocyx0KTp0aGlzLmdldE9mZmVyKHQpfWdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlckluRGlhbG9nKGUpe2lmKCF0aGlzLmRpYWxvZyl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7c3dpdGNoKHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlKXtjYXNlIE0uSW5pdGlhbDpyZXR1cm4gdGhpcy5nZXRPZmZlcihlKTtjYXNlIE0uSGF2ZUxvY2FsT2ZmZXI6cmV0dXJuIFByb21pc2UucmVzb2x2ZSh2b2lkIDApO2Nhc2UgTS5IYXZlUmVtb3RlT2ZmZXI6aWYoIXRoaXMuZGlhbG9nLm9mZmVyKXRocm93IG5ldyBFcnJvcihgU2Vzc2lvbiBvZmZlciB1bmRlZmluZWQgaW4gc2lnbmFsaW5nIHN0YXRlICR7dGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGV9LmApO3JldHVybiB0aGlzLnNldE9mZmVyQW5kR2V0QW5zd2VyKHRoaXMuZGlhbG9nLm9mZmVyLGUpO2Nhc2UgTS5TdGFibGU6cmV0dXJuIHRoaXMuc3RhdGUhPT1XLkVzdGFibGlzaGVkP1Byb21pc2UucmVzb2x2ZSh2b2lkIDApOnRoaXMuZ2V0T2ZmZXIoZSk7Y2FzZSBNLkNsb3NlZDpkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCl9fWdldE9mZmVyKGUpe2NvbnN0IHQ9dGhpcy5zZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoKSxzPWUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsaT1lLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM7dHJ5e3JldHVybiB0LmdldERlc2NyaXB0aW9uKHMsaSkudGhlbigoZT0+UChlKSkpLmNhdGNoKChlPT57dGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb24uZ2V0T2ZmZXI6IFNESCBnZXREZXNjcmlwdGlvbiByZWplY3RlZC4uLiIpO2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVycm9yP2U6bmV3IEVycm9yKCJTZXNzaW9uLmdldE9mZmVyIHVua25vd24gZXJyb3IuIik7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSx0fSkpfWNhdGNoKGUpe3RoaXMubG9nZ2VyLmVycm9yKCJTZXNzaW9uLmdldE9mZmVyOiBTREggZ2V0RGVzY3JpcHRpb24gdGhyZXcuLi4iKTtjb25zdCB0PWUgaW5zdGFuY2VvZiBFcnJvcj9lOm5ldyBFcnJvcihlKTtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSxQcm9taXNlLnJlamVjdCh0KX19cm9sbGJhY2tPZmZlcigpe2NvbnN0IGU9dGhpcy5zZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoKTtpZih2b2lkIDA9PT1lLnJvbGxiYWNrRGVzY3JpcHRpb24pcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO3RyeXtyZXR1cm4gZS5yb2xsYmFja0Rlc2NyaXB0aW9uKCkuY2F0Y2goKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5yb2xsYmFja09mZmVyOiBTREggcm9sbGJhY2tEZXNjcmlwdGlvbiByZWplY3RlZC4uLiIpO2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVycm9yP2U6bmV3IEVycm9yKCJTZXNzaW9uLnJvbGxiYWNrT2ZmZXIgdW5rbm93biBlcnJvci4iKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHR9KSl9Y2F0Y2goZSl7dGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb24ucm9sbGJhY2tPZmZlcjogU0RIIHJvbGxiYWNrRGVzY3JpcHRpb24gdGhyZXcuLi4iKTtjb25zdCB0PWUgaW5zdGFuY2VvZiBFcnJvcj9lOm5ldyBFcnJvcihlKTtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSxQcm9taXNlLnJlamVjdCh0KX19c2V0QW5zd2VyKGUsdCl7Y29uc3Qgcz10aGlzLnNldHVwU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcigpLGk9dC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyxyPXQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczt0cnl7aWYoIXMuaGFzRGVzY3JpcHRpb24oZS5jb250ZW50VHlwZSkpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBvKX1jYXRjaChlKXt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5zZXRBbnN3ZXI6IFNESCBoYXNEZXNjcmlwdGlvbiB0aHJldy4uLiIpO2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVycm9yP2U6bmV3IEVycm9yKGUpO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLFByb21pc2UucmVqZWN0KHQpfXRyeXtyZXR1cm4gcy5zZXREZXNjcmlwdGlvbihlLmNvbnRlbnQsaSxyKS5jYXRjaCgoZT0+e3RoaXMubG9nZ2VyLmVycm9yKCJTZXNzaW9uLnNldEFuc3dlcjogU0RIIHNldERlc2NyaXB0aW9uIHJlamVjdGVkLi4uIik7Y29uc3QgdD1lIGluc3RhbmNlb2YgRXJyb3I/ZTpuZXcgRXJyb3IoIlNlc3Npb24uc2V0QW5zd2VyIHVua25vd24gZXJyb3IuIik7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSx0fSkpfWNhdGNoKGUpe3RoaXMubG9nZ2VyLmVycm9yKCJTZXNzaW9uLnNldEFuc3dlcjogU0RIIHNldERlc2NyaXB0aW9uIHRocmV3Li4uIik7Y29uc3QgdD1lIGluc3RhbmNlb2YgRXJyb3I/ZTpuZXcgRXJyb3IoZSk7cmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksUHJvbWlzZS5yZWplY3QodCl9fXNldE9mZmVyQW5kR2V0QW5zd2VyKGUsdCl7Y29uc3Qgcz10aGlzLnNldHVwU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcigpLGk9dC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyxyPXQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczt0cnl7aWYoIXMuaGFzRGVzY3JpcHRpb24oZS5jb250ZW50VHlwZSkpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBvKX1jYXRjaChlKXt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5zZXRPZmZlckFuZEdldEFuc3dlcjogU0RIIGhhc0Rlc2NyaXB0aW9uIHRocmV3Li4uIik7Y29uc3QgdD1lIGluc3RhbmNlb2YgRXJyb3I/ZTpuZXcgRXJyb3IoZSk7cmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksUHJvbWlzZS5yZWplY3QodCl9dHJ5e3JldHVybiBzLnNldERlc2NyaXB0aW9uKGUuY29udGVudCxpLHIpLnRoZW4oKCgpPT5zLmdldERlc2NyaXB0aW9uKGkscikpKS50aGVuKChlPT5QKGUpKSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5zZXRPZmZlckFuZEdldEFuc3dlcjogU0RIIHNldERlc2NyaXB0aW9uIG9yIGdldERlc2NyaXB0aW9uIHJlamVjdGVkLi4uIik7Y29uc3QgdD1lIGluc3RhbmNlb2YgRXJyb3I/ZTpuZXcgRXJyb3IoIlNlc3Npb24uc2V0T2ZmZXJBbmRHZXRBbnN3ZXIgdW5rbm93biBlcnJvci4iKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHR9KSl9Y2F0Y2goZSl7dGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb24uc2V0T2ZmZXJBbmRHZXRBbnN3ZXI6IFNESCBzZXREZXNjcmlwdGlvbiBvciBnZXREZXNjcmlwdGlvbiB0aHJldy4uLiIpO2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVycm9yP2U6bmV3IEVycm9yKGUpO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLFByb21pc2UucmVqZWN0KHQpfX1zZXRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKGUpe2lmKHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpdGhyb3cgbmV3IEVycm9yKCJTZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgZGVmaW5lZC4iKTt0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyPWV9c2V0dXBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCl7dmFyIGU7cmV0dXJuIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJ8fCh0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyPXRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnkodGhpcyx0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5T3B0aW9ucyksKG51bGw9PT0oZT10aGlzLmRlbGVnYXRlKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5vblNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIpJiZ0aGlzLmRlbGVnYXRlLm9uU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcih0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLCExKSksdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcn1zdGF0ZVRyYW5zaXRpb24oZSl7Y29uc3QgdD0oKT0+e3Rocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLl9zdGF0ZX0gdG8gJHtlfWApfTtzd2l0Y2godGhpcy5fc3RhdGUpe2Nhc2UgVy5Jbml0aWFsOmUhPT1XLkVzdGFibGlzaGluZyYmZSE9PVcuRXN0YWJsaXNoZWQmJmUhPT1XLlRlcm1pbmF0aW5nJiZlIT09Vy5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBXLkVzdGFibGlzaGluZzplIT09Vy5Fc3RhYmxpc2hlZCYmZSE9PVcuVGVybWluYXRpbmcmJmUhPT1XLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIFcuRXN0YWJsaXNoZWQ6ZSE9PVcuVGVybWluYXRpbmcmJmUhPT1XLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIFcuVGVybWluYXRpbmc6ZSE9PVcuVGVybWluYXRlZCYmdCgpO2JyZWFrO2Nhc2UgVy5UZXJtaW5hdGVkOnQoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHN0YXRlLiIpfXRoaXMuX3N0YXRlPWUsdGhpcy5sb2dnZXIubG9nKGBTZXNzaW9uICR7dGhpcy5pZH0gdHJhbnNpdGlvbmVkIHRvIHN0YXRlICR7dGhpcy5fc3RhdGV9YCksdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXIuZW1pdCh0aGlzLl9zdGF0ZSksZT09PVcuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCl9Y29weVJlcXVlc3RPcHRpb25zKGU9e30pe3JldHVybntleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnM/ZS5leHRyYUhlYWRlcnMuc2xpY2UoKTp2b2lkIDAsYm9keTplLmJvZHk/e2NvbnRlbnREaXNwb3NpdGlvbjplLmJvZHkuY29udGVudERpc3Bvc2l0aW9ufHwicmVuZGVyIixjb250ZW50VHlwZTplLmJvZHkuY29udGVudFR5cGV8fCJ0ZXh0L3BsYWluIixjb250ZW50OmUuYm9keS5jb250ZW50fHwiIn06dm9pZCAwfX1nZXRSZWFzb25IZWFkZXJWYWx1ZShlLHQpe2NvbnN0IHM9ZTtsZXQgaT1FKGUpO3JldHVybiFpJiZ0JiYoaT10KSwiU0lQO2NhdXNlPSIrcysnO3RleHQ9IicraSsnIid9cmVmZXJFeHRyYUhlYWRlcnMoZSl7Y29uc3QgdD1bXTtyZXR1cm4gdC5wdXNoKCJSZWZlcnJlZC1CeTogPCIrdGhpcy51c2VyQWdlbnQuY29uZmlndXJhdGlvbi51cmkrIj4iKSx0LnB1c2goIkNvbnRhY3Q6ICIrdGhpcy5fY29udGFjdCksdC5wdXNoKCJBbGxvdzogIitbIkFDSyIsIkNBTkNFTCIsIklOVklURSIsIk1FU1NBR0UiLCJCWUUiLCJPUFRJT05TIiwiSU5GTyIsIk5PVElGWSIsIlJFRkVSIl0udG9TdHJpbmcoKSksdC5wdXNoKCJSZWZlci1UbzogIitlKSx0fXJlZmVyVG9TdHJpbmcoZSl7bGV0IHQ7aWYoZSBpbnN0YW5jZW9mIHYpdD1lLnRvU3RyaW5nKCk7ZWxzZXtpZighZS5kaWFsb2cpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO2NvbnN0IHM9ZS5yZW1vdGVJZGVudGl0eS5mcmllbmRseU5hbWUsaT1lLmRpYWxvZy5yZW1vdGVUYXJnZXQudG9TdHJpbmcoKSxyPWUuZGlhbG9nLmNhbGxJZCxuPWUuZGlhbG9nLnJlbW90ZVRhZyxvPWUuZGlhbG9nLmxvY2FsVGFnO3Q9YCIke3N9IiA8JHtpfT9SZXBsYWNlcz0ke2VuY29kZVVSSUNvbXBvbmVudChgJHtyfTt0by10YWc9JHtufTtmcm9tLXRhZz0ke299YCl9PmB9cmV0dXJuIHR9fSFmdW5jdGlvbihlKXtlLlJlcXVpcmVkPSJSZXF1aXJlZCIsZS5TdXBwb3J0ZWQ9IlN1cHBvcnRlZCIsZS5VbnN1cHBvcnRlZD0iVW5zdXBwb3J0ZWQifShZfHwoWT17fSkpO2NvbnN0IEo9eyIxMDByZWwiOiEwLDE5OTohMCxhbnN3ZXJtb2RlOiEwLCJlYXJseS1zZXNzaW9uIjohMCxldmVudGxpc3Q6ITAsZXhwbGljaXRzdWI6ITAsImZyb20tY2hhbmdlIjohMCwiZ2VvbG9jYXRpb24taHR0cCI6ITAsImdlb2xvY2F0aW9uLXNpcCI6ITAsZ2luOiEwLGdydXU6ITAsaGlzdGluZm86ITAsaWNlOiEwLGpvaW46ITAsIm11bHRpcGxlLXJlZmVyIjohMCxub3JlZmVyc3ViOiEwLG5vc3ViOiEwLG91dGJvdW5kOiEwLHBhdGg6ITAscG9saWN5OiEwLHByZWNvbmRpdGlvbjohMCxwcmVmOiEwLHByaXZhY3k6ITAsInJlY2lwaWVudC1saXN0LWludml0ZSI6ITAsInJlY2lwaWVudC1saXN0LW1lc3NhZ2UiOiEwLCJyZWNpcGllbnQtbGlzdC1zdWJzY3JpYmUiOiEwLHJlcGxhY2VzOiEwLCJyZXNvdXJjZS1wcmlvcml0eSI6ITAsInNkcC1hbmF0IjohMCwic2VjLWFncmVlIjohMCx0ZGlhbG9nOiEwLHRpbWVyOiEwLHV1aTohMH07Y2xhc3MgeiBleHRlbmRzIFp7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdD10LHRoaXMuZGlzcG9zZWQ9ITEsdGhpcy5leHBpcmVzVGltZXI9dm9pZCAwLHRoaXMuaXNDYW5jZWxlZD0hMSx0aGlzLnJlbDEwMD0ibm9uZSIsdGhpcy5yc2VxPU1hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpLHRoaXMudXNlck5vQW5zd2VyVGltZXI9dm9pZCAwLHRoaXMud2FpdGluZ0ZvclByYWNrPSExLHRoaXMubG9nZ2VyPWUuZ2V0TG9nZ2VyKCJzaXAuSW52aXRhdGlvbiIpO2NvbnN0IHM9dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QubWVzc2FnZSxpPXMuZ2V0SGVhZGVyKCJyZXF1aXJlIik7aSYmaS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCIxMDByZWwiKSYmKHRoaXMucmVsMTAwPSJyZXF1aXJlZCIpO2NvbnN0IHI9cy5nZXRIZWFkZXIoInN1cHBvcnRlZCIpO2lmKHImJnIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygiMTAwcmVsIikmJih0aGlzLnJlbDEwMD0ic3VwcG9ydGVkIikscy50b1RhZz10LnRvVGFnLCJzdHJpbmciIT10eXBlb2Ygcy50b1RhZyl0aHJvdyBuZXcgVHlwZUVycm9yKCJ0b1RhZyBzaG91bGQgaGF2ZSBiZWVuIGEgc3RyaW5nLiIpO2lmKHRoaXMudXNlck5vQW5zd2VyVGltZXI9c2V0VGltZW91dCgoKCk9Pnt0LnJlamVjdCh7c3RhdHVzQ29kZTo0ODB9KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0ZWQpfSksdGhpcy51c2VyQWdlbnQuY29uZmlndXJhdGlvbi5ub0Fuc3dlclRpbWVvdXQ/MWUzKnRoaXMudXNlckFnZW50LmNvbmZpZ3VyYXRpb24ubm9BbnN3ZXJUaW1lb3V0OjZlNCkscy5oYXNIZWFkZXIoImV4cGlyZXMiKSl7Y29uc3QgZT0xZTMqTnVtYmVyKHMuZ2V0SGVhZGVyKCJleHBpcmVzIil8fDApO3RoaXMuZXhwaXJlc1RpbWVyPXNldFRpbWVvdXQoKCgpPT57dGhpcy5zdGF0ZT09PVcuSW5pdGlhbCYmKHQucmVqZWN0KHtzdGF0dXNDb2RlOjQ4N30pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuVGVybWluYXRlZCkpfSksZSl9Y29uc3Qgbj10aGlzLnJlcXVlc3QuZ2V0SGVhZGVyKCJQLUFzc2VydGVkLUlkZW50aXR5Iik7biYmKHRoaXMuX2Fzc2VydGVkSWRlbnRpdHk9eS5uYW1lQWRkckhlYWRlclBhcnNlKG4pKSx0aGlzLl9jb250YWN0PXRoaXMudXNlckFnZW50LmNvbnRhY3QudG9TdHJpbmcoKTtjb25zdCBvPXMucGFyc2VIZWFkZXIoIkNvbnRlbnQtRGlzcG9zaXRpb24iKTtvJiYicmVuZGVyIj09PW8udHlwZSYmKHRoaXMuX3JlbmRlcmJvZHk9cy5ib2R5LHRoaXMuX3JlbmRlcnR5cGU9cy5nZXRIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKSx0aGlzLl9pZD1zLmNhbGxJZCtzLmZyb21UYWcsdGhpcy51c2VyQWdlbnQuX3Nlc3Npb25zW3RoaXMuX2lkXT10aGlzfWRpc3Bvc2UoKXtpZih0aGlzLmRpc3Bvc2VkKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtzd2l0Y2godGhpcy5kaXNwb3NlZD0hMCx0aGlzLmV4cGlyZXNUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLmV4cGlyZXNUaW1lciksdGhpcy5leHBpcmVzVGltZXI9dm9pZCAwKSx0aGlzLnVzZXJOb0Fuc3dlclRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMudXNlck5vQW5zd2VyVGltZXIpLHRoaXMudXNlck5vQW5zd2VyVGltZXI9dm9pZCAwKSx0aGlzLnByYWNrTmV2ZXJBcnJpdmVkKCksdGhpcy5zdGF0ZSl7Y2FzZSBXLkluaXRpYWw6Y2FzZSBXLkVzdGFibGlzaGluZzpyZXR1cm4gdGhpcy5yZWplY3QoKS50aGVuKCgoKT0+c3VwZXIuZGlzcG9zZSgpKSk7Y2FzZSBXLkVzdGFibGlzaGVkOmNhc2UgVy5UZXJtaW5hdGluZzpjYXNlIFcuVGVybWluYXRlZDpyZXR1cm4gc3VwZXIuZGlzcG9zZSgpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlLiIpfX1nZXQgYXV0b1NlbmRBbkluaXRpYWxQcm92aXNpb25hbFJlc3BvbnNlKCl7cmV0dXJuInJlcXVpcmVkIiE9PXRoaXMucmVsMTAwJiZ0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNlbmRJbml0aWFsUHJvdmlzaW9uYWxSZXNwb25zZX1nZXQgYm9keSgpe3JldHVybiB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5tZXNzYWdlLmJvZHl9Z2V0IGxvY2FsSWRlbnRpdHkoKXtyZXR1cm4gdGhpcy5yZXF1ZXN0LnRvfWdldCByZW1vdGVJZGVudGl0eSgpe3JldHVybiB0aGlzLnJlcXVlc3QuZnJvbX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5tZXNzYWdlfWFjY2VwdChlPXt9KXtpZih0aGlzLmxvZ2dlci5sb2coIkludml0YXRpb24uYWNjZXB0IiksdGhpcy5zdGF0ZSE9PVcuSW5pdGlhbCl7Y29uc3QgZT1uZXcgRXJyb3IoYEludmFsaWQgc2Vzc2lvbiBzdGF0ZSAke3RoaXMuc3RhdGV9YCk7cmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSksUHJvbWlzZS5yZWplY3QoZSl9cmV0dXJuIGUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyYmKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycz1lLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMpLGUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMmJih0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zPWUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuRXN0YWJsaXNoaW5nKSx0aGlzLnNlbmRBY2NlcHQoZSkudGhlbigoKHttZXNzYWdlOmUsc2Vzc2lvbjp0fSk9Pnt0LmRlbGVnYXRlPXtvbkFjazplPT50aGlzLm9uQWNrUmVxdWVzdChlKSxvbkFja1RpbWVvdXQ6KCk9PnRoaXMub25BY2tUaW1lb3V0KCksb25CeWU6ZT0+dGhpcy5vbkJ5ZVJlcXVlc3QoZSksb25JbmZvOmU9PnRoaXMub25JbmZvUmVxdWVzdChlKSxvbkludml0ZTplPT50aGlzLm9uSW52aXRlUmVxdWVzdChlKSxvbk1lc3NhZ2U6ZT0+dGhpcy5vbk1lc3NhZ2VSZXF1ZXN0KGUpLG9uTm90aWZ5OmU9PnRoaXMub25Ob3RpZnlSZXF1ZXN0KGUpLG9uUHJhY2s6ZT0+dGhpcy5vblByYWNrUmVxdWVzdChlKSxvblJlZmVyOmU9PnRoaXMub25SZWZlclJlcXVlc3QoZSl9LHRoaXMuX2RpYWxvZz10LHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuRXN0YWJsaXNoZWQpLHRoaXMuX3JlcGxhY2VlJiZ0aGlzLl9yZXBsYWNlZS5fYnllKCl9KSkuY2F0Y2goKGU9PnRoaXMuaGFuZGxlUmVzcG9uc2VFcnJvcihlKSkpfXByb2dyZXNzKGU9e30pe2lmKHRoaXMubG9nZ2VyLmxvZygiSW52aXRhdGlvbi5wcm9ncmVzcyIpLHRoaXMuc3RhdGUhPT1XLkluaXRpYWwpe2NvbnN0IGU9bmV3IEVycm9yKGBJbnZhbGlkIHNlc3Npb24gc3RhdGUgJHt0aGlzLnN0YXRlfWApO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLFByb21pc2UucmVqZWN0KGUpfWNvbnN0IHQ9ZS5zdGF0dXNDb2RlfHwxODA7aWYodDwxMDB8fHQ+MTk5KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgc3RhdHVzQ29kZTogIit0KTtyZXR1cm4gZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzJiYodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzPWUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyksZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyYmKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM9ZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyksdGhpcy53YWl0aW5nRm9yUHJhY2s/KHRoaXMubG9nZ2VyLndhcm4oIlVuZXhwZWN0ZWQgY2FsbCBmb3IgcHJvZ3Jlc3Mgd2hpbGUgd2FpdGluZyBmb3IgcHJhY2ssIGlnbm9yaW5nIiksUHJvbWlzZS5yZXNvbHZlKCkpOjEwMD09PWUuc3RhdHVzQ29kZT90aGlzLnNlbmRQcm9ncmVzc1RyeWluZygpLnRoZW4oKCgpPT57fSkpLmNhdGNoKChlPT50aGlzLmhhbmRsZVJlc3BvbnNlRXJyb3IoZSkpKToicmVxdWlyZWQiPT09dGhpcy5yZWwxMDB8fCJzdXBwb3J0ZWQiPT09dGhpcy5yZWwxMDAmJmUucmVsMTAwfHwic3VwcG9ydGVkIj09PXRoaXMucmVsMTAwJiZ0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNpcEV4dGVuc2lvbjEwMHJlbD09PVkuUmVxdWlyZWQ/dGhpcy5zZW5kUHJvZ3Jlc3NSZWxpYWJsZVdhaXRGb3JQcmFjayhlKS50aGVuKCgoKT0+e30pKS5jYXRjaCgoZT0+dGhpcy5oYW5kbGVSZXNwb25zZUVycm9yKGUpKSk6dGhpcy5zZW5kUHJvZ3Jlc3MoZSkudGhlbigoKCk9Pnt9KSkuY2F0Y2goKGU9PnRoaXMuaGFuZGxlUmVzcG9uc2VFcnJvcihlKSkpfXJlamVjdChlPXt9KXtpZih0aGlzLmxvZ2dlci5sb2coIkludml0YXRpb24ucmVqZWN0IiksdGhpcy5zdGF0ZSE9PVcuSW5pdGlhbCYmdGhpcy5zdGF0ZSE9PVcuRXN0YWJsaXNoaW5nKXtjb25zdCBlPW5ldyBFcnJvcihgSW52YWxpZCBzZXNzaW9uIHN0YXRlICR7dGhpcy5zdGF0ZX1gKTtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSxQcm9taXNlLnJlamVjdChlKX1jb25zdCB0PWUuc3RhdHVzQ29kZXx8NDgwLHM9ZS5yZWFzb25QaHJhc2U/ZS5yZWFzb25QaHJhc2U6RSh0KSxpPWUuZXh0cmFIZWFkZXJzfHxbXTtpZih0PDMwMHx8dD42OTkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBzdGF0dXNDb2RlOiAiK3QpO2NvbnN0IHI9ZS5ib2R5P1AoZS5ib2R5KTp2b2lkIDA7cmV0dXJuIHQ8NDAwP3RoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LnJlZGlyZWN0KFtdLHtzdGF0dXNDb2RlOnQscmVhc29uUGhyYXNlOnMsZXh0cmFIZWFkZXJzOmksYm9keTpyfSk6dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucmVqZWN0KHtzdGF0dXNDb2RlOnQscmVhc29uUGhyYXNlOnMsZXh0cmFIZWFkZXJzOmksYm9keTpyfSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSxQcm9taXNlLnJlc29sdmUoKX1fb25DYW5jZWwoZSl7dGhpcy5sb2dnZXIubG9nKCJJbnZpdGF0aW9uLl9vbkNhbmNlbCIpLHRoaXMuc3RhdGU9PT1XLkluaXRpYWx8fHRoaXMuc3RhdGU9PT1XLkVzdGFibGlzaGluZz8odGhpcy5pc0NhbmNlbGVkPSEwLHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LnJlamVjdCh7c3RhdHVzQ29kZTo0ODd9KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0ZWQpKTp0aGlzLmxvZ2dlci5lcnJvcihgQ0FOQ0VMIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlcXVlc3RgKX1oYW5kbGVQcmFja09mZmVyQW5zd2VyKGUpe2lmKCF0aGlzLmRpYWxvZyl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7Y29uc3QgdD14KGUubWVzc2FnZSk7aWYoIXR8fCJzZXNzaW9uIiE9PXQuY29udGVudERpc3Bvc2l0aW9uKXJldHVybiBQcm9taXNlLnJlc29sdmUodm9pZCAwKTtjb25zdCBzPXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczp0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzfTtzd2l0Y2godGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGUpe2Nhc2UgTS5Jbml0aWFsOnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCk7Y2FzZSBNLlN0YWJsZTpyZXR1cm4gdGhpcy5zZXRBbnN3ZXIodCxzKS50aGVuKCgoKT0+e30pKTtjYXNlIE0uSGF2ZUxvY2FsT2ZmZXI6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke3RoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKTtjYXNlIE0uSGF2ZVJlbW90ZU9mZmVyOnJldHVybiB0aGlzLnNldE9mZmVyQW5kR2V0QW5zd2VyKHQscyk7Y2FzZSBNLkNsb3NlZDpkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCl9fWhhbmRsZVJlc3BvbnNlRXJyb3IoZSl7bGV0IHQ9NDgwO2lmKGUgaW5zdGFuY2VvZiBFcnJvcj90aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpOnRoaXMubG9nZ2VyLmVycm9yKGUpLGUgaW5zdGFuY2VvZiBvPyh0aGlzLmxvZ2dlci5lcnJvcigiQSBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgb2NjdXJyZWQgd2hpbGUgc2VuZGluZyByZXNwb25zZSAoY29udGVudCB0eXBlIHVuc3VwcG9ydGVkIiksdD00MTUpOmUgaW5zdGFuY2VvZiBjP3RoaXMubG9nZ2VyLmVycm9yKCJBIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBvY2N1cnJlZCB3aGlsZSBzZW5kaW5nIHJlc3BvbnNlIik6ZSBpbnN0YW5jZW9mIGg/dGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb24gZW5kZWQgYmVmb3JlIHJlc3BvbnNlIGNvdWxkIGJlIGZvcm11bGF0ZWQgYW5kIHNlbnQgKHdoaWxlIHdhaXRpbmcgZm9yIFBSQUNLKSIpOmUgaW5zdGFuY2VvZiBPJiZ0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbiBjaGFuZ2VkIHN0YXRlIGJlZm9yZSByZXNwb25zZSBjb3VsZCBiZSBmb3JtdWxhdGVkIGFuZCBzZW50IiksdGhpcy5zdGF0ZT09PVcuSW5pdGlhbHx8dGhpcy5zdGF0ZT09PVcuRXN0YWJsaXNoaW5nKXRyeXt0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5yZWplY3Qoe3N0YXR1c0NvZGU6dH0pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuVGVybWluYXRlZCl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoIkFuIGVycm9yIG9jY3VycmVkIGF0dGVtcHRpbmcgdG8gcmVqZWN0IHRoZSByZXF1ZXN0IHdoaWxlIGhhbmRsaW5nIGFub3RoZXIgZXJyb3IiKSxlfWlmKCF0aGlzLmlzQ2FuY2VsZWQpdGhyb3cgZTt0aGlzLmxvZ2dlci53YXJuKCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBhdHRlbXB0aW5nIHRvIGZvcm11bGF0ZSBhbmQgc2VuZCBhIHJlc3BvbnNlIHRvIGFuIGluY29taW5nIElOVklURS4gSG93ZXZlciBhIENBTkNFTCB3YXMgcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZCB3aGlsZSBkb2luZyBzbyB3aGljaCBjYW4gKGFuZCBvZnRlbiBkb2VzKSByZXN1bHQgaW4gZXJyb3JzIG9jY3VycmluZyBhcyB0aGUgc2Vzc2lvbiB0ZXJtaW5hdGVzIGluIHRoZSBtZWFudGltZS4gU2FpZCBlcnJvciBpcyBiZWluZyBpZ25vcmVkLiIpfW9uQWNrVGltZW91dCgpe2lmKHRoaXMubG9nZ2VyLmxvZygiSW52aXRhdGlvbi5vbkFja1RpbWVvdXQiKSwhdGhpcy5kaWFsb2cpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO3RoaXMubG9nZ2VyLmxvZygiTm8gQUNLIHJlY2VpdmVkIGZvciBhbiBleHRlbmRlZCBwZXJpb2Qgb2YgdGltZSwgdGVybWluYXRpbmcgc2Vzc2lvbiIpLHRoaXMuZGlhbG9nLmJ5ZSgpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuVGVybWluYXRlZCl9c2VuZEFjY2VwdChlPXt9KXtjb25zdCB0PXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczp0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzfSxzPWUuZXh0cmFIZWFkZXJzfHxbXTtyZXR1cm4gdGhpcy53YWl0aW5nRm9yUHJhY2s/dGhpcy53YWl0Rm9yQXJyaXZhbE9mUHJhY2soKS50aGVuKCgoKT0+Y2xlYXJUaW1lb3V0KHRoaXMudXNlck5vQW5zd2VyVGltZXIpKSkudGhlbigoKCk9PnRoaXMuZ2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VyKHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LHQpKSkudGhlbigoZT0+dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QuYWNjZXB0KHtzdGF0dXNDb2RlOjIwMCxib2R5OmUsZXh0cmFIZWFkZXJzOnN9KSkpOihjbGVhclRpbWVvdXQodGhpcy51c2VyTm9BbnN3ZXJUaW1lciksdGhpcy5nZW5lcmF0ZVJlc3BvbnNlT2ZmZXJBbnN3ZXIodGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QsdCkudGhlbigoZT0+dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QuYWNjZXB0KHtzdGF0dXNDb2RlOjIwMCxib2R5OmUsZXh0cmFIZWFkZXJzOnN9KSkpKX1zZW5kUHJvZ3Jlc3MoZT17fSl7Y29uc3QgdD1lLnN0YXR1c0NvZGV8fDE4MCxzPWUucmVhc29uUGhyYXNlLGk9KGUuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSxyPWUuYm9keT9QKGUuYm9keSk6dm9pZCAwO2lmKDE4Mz09PXQmJiFyKXJldHVybiB0aGlzLnNlbmRQcm9ncmVzc1dpdGhTRFAoZSk7dHJ5e2NvbnN0IGU9dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucHJvZ3Jlc3Moe3N0YXR1c0NvZGU6dCxyZWFzb25QaHJhc2U6cyxleHRyYUhlYWRlcnM6aSxib2R5OnJ9KTtyZXR1cm4gdGhpcy5fZGlhbG9nPWUuc2Vzc2lvbixQcm9taXNlLnJlc29sdmUoZSl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfX1zZW5kUHJvZ3Jlc3NXaXRoU0RQKGU9e30pe2NvbnN0IHQ9e3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczp0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnN9LHM9ZS5zdGF0dXNDb2RlfHwxODMsaT1lLnJlYXNvblBocmFzZSxyPShlLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7cmV0dXJuIHRoaXMuZ2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VyKHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LHQpLnRoZW4oKGU9PnRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LnByb2dyZXNzKHtzdGF0dXNDb2RlOnMscmVhc29uUGhyYXNlOmksZXh0cmFIZWFkZXJzOnIsYm9keTplfSkpKS50aGVuKChlPT4odGhpcy5fZGlhbG9nPWUuc2Vzc2lvbixlKSkpfXNlbmRQcm9ncmVzc1JlbGlhYmxlKGU9e30pe3JldHVybiBlLmV4dHJhSGVhZGVycz0oZS5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLGUuZXh0cmFIZWFkZXJzLnB1c2goIlJlcXVpcmU6IDEwMHJlbCIpLGUuZXh0cmFIZWFkZXJzLnB1c2goIlJTZXE6ICIrTWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSkpLHRoaXMuc2VuZFByb2dyZXNzV2l0aFNEUChlKX1zZW5kUHJvZ3Jlc3NSZWxpYWJsZVdhaXRGb3JQcmFjayhlPXt9KXtjb25zdCB0PXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczp0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzfSxzPWUuc3RhdHVzQ29kZXx8MTgzLGk9ZS5yZWFzb25QaHJhc2Uscj0oZS5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpO2xldCBuO3JldHVybiByLnB1c2goIlJlcXVpcmU6IDEwMHJlbCIpLHIucHVzaCgiUlNlcTogIit0aGlzLnJzZXErKyksbmV3IFByb21pc2UoKChlLG8pPT57dGhpcy53YWl0aW5nRm9yUHJhY2s9ITAsdGhpcy5nZW5lcmF0ZVJlc3BvbnNlT2ZmZXJBbnN3ZXIodGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QsdCkudGhlbigoZT0+KG49ZSx0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5wcm9ncmVzcyh7c3RhdHVzQ29kZTpzLHJlYXNvblBocmFzZTppLGV4dHJhSGVhZGVyczpyLGJvZHk6bn0pKSkpLnRoZW4oKHQ9PntsZXQgYSxjO3RoaXMuX2RpYWxvZz10LnNlc3Npb24sdC5zZXNzaW9uLmRlbGVnYXRlPXtvblByYWNrOnM9PnthPXMsY2xlYXJUaW1lb3V0KGQpLGNsZWFyVGltZW91dCh1KSx0aGlzLndhaXRpbmdGb3JQcmFjayYmKHRoaXMud2FpdGluZ0ZvclByYWNrPSExLHRoaXMuaGFuZGxlUHJhY2tPZmZlckFuc3dlcihhKS50aGVuKChzPT57dHJ5e2M9YS5hY2NlcHQoe3N0YXR1c0NvZGU6MjAwLGJvZHk6c30pLHRoaXMucHJhY2tBcnJpdmVkKCksZSh7cHJhY2tSZXF1ZXN0OmEscHJhY2tSZXNwb25zZTpjLHByb2dyZXNzUmVzcG9uc2U6dH0pfWNhdGNoKGUpe28oZSl9fSkpLmNhdGNoKChlPT5vKGUpKSkpfX07Y29uc3QgZD1zZXRUaW1lb3V0KCgoKT0+e3RoaXMud2FpdGluZ0ZvclByYWNrJiYodGhpcy53YWl0aW5nRm9yUHJhY2s9ITEsdGhpcy5sb2dnZXIud2FybigiTm8gUFJBQ0sgcmVjZWl2ZWQsIHJlamVjdGluZyBJTlZJVEUuIiksY2xlYXJUaW1lb3V0KHUpLHRoaXMucmVqZWN0KHtzdGF0dXNDb2RlOjUwNH0pLnRoZW4oKCgpPT5vKG5ldyBoKSkpLmNhdGNoKChlPT5vKGUpKSkpfSksNjQqRi5UMSksbD0oKT0+e3RyeXt0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5wcm9ncmVzcyh7c3RhdHVzQ29kZTpzLHJlYXNvblBocmFzZTppLGV4dHJhSGVhZGVyczpyLGJvZHk6bn0pfWNhdGNoKGUpe3JldHVybiB0aGlzLndhaXRpbmdGb3JQcmFjaz0hMSx2b2lkIG8oZSl9dT1zZXRUaW1lb3V0KGwsZyo9Mil9O2xldCBnPUYuVDEsdT1zZXRUaW1lb3V0KGwsZyl9KSkuY2F0Y2goKGU9Pnt0aGlzLndhaXRpbmdGb3JQcmFjaz0hMSxvKGUpfSkpfSkpfXNlbmRQcm9ncmVzc1RyeWluZygpe3RyeXtjb25zdCBlPXRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LnRyeWluZygpO3JldHVybiBQcm9taXNlLnJlc29sdmUoZSl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfX13YWl0Rm9yQXJyaXZhbE9mUHJhY2soKXtpZih0aGlzLndhaXRpbmdGb3JQcmFja1Byb21pc2UpdGhyb3cgbmV3IEVycm9yKCJBbHJlYWR5IHdhaXRpbmcgZm9yIFBSQUNLIik7cmV0dXJuIHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZT1uZXcgUHJvbWlzZSgoKGUsdCk9Pnt0aGlzLndhaXRpbmdGb3JQcmFja1Jlc29sdmU9ZSx0aGlzLndhaXRpbmdGb3JQcmFja1JlamVjdD10fSkpLHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZX1wcmFja0Fycml2ZWQoKXt0aGlzLndhaXRpbmdGb3JQcmFja1Jlc29sdmUmJnRoaXMud2FpdGluZ0ZvclByYWNrUmVzb2x2ZSgpLHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZT12b2lkIDAsdGhpcy53YWl0aW5nRm9yUHJhY2tSZXNvbHZlPXZvaWQgMCx0aGlzLndhaXRpbmdGb3JQcmFja1JlamVjdD12b2lkIDB9cHJhY2tOZXZlckFycml2ZWQoKXt0aGlzLndhaXRpbmdGb3JQcmFja1JlamVjdCYmdGhpcy53YWl0aW5nRm9yUHJhY2tSZWplY3QobmV3IGgpLHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZT12b2lkIDAsdGhpcy53YWl0aW5nRm9yUHJhY2tSZXNvbHZlPXZvaWQgMCx0aGlzLndhaXRpbmdGb3JQcmFja1JlamVjdD12b2lkIDB9fWNsYXNzIFggZXh0ZW5kcyBae2NvbnN0cnVjdG9yKGUsdCxzPXt9KXtzdXBlcihlLHMpLHRoaXMuZGlzcG9zZWQ9ITEsdGhpcy5lYXJseU1lZGlhPSExLHRoaXMuZWFybHlNZWRpYVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJzPW5ldyBNYXAsdGhpcy5pc0NhbmNlbGVkPSExLHRoaXMuaW52aXRlV2l0aG91dFNkcD0hMSx0aGlzLmxvZ2dlcj1lLmdldExvZ2dlcigic2lwLkludml0ZXIiKSx0aGlzLmVhcmx5TWVkaWE9dm9pZCAwIT09cy5lYXJseU1lZGlhP3MuZWFybHlNZWRpYTp0aGlzLmVhcmx5TWVkaWEsdGhpcy5mcm9tVGFnPSQoKSx0aGlzLmludml0ZVdpdGhvdXRTZHA9dm9pZCAwIT09cy5pbnZpdGVXaXRob3V0U2RwP3MuaW52aXRlV2l0aG91dFNkcDp0aGlzLmludml0ZVdpdGhvdXRTZHA7Y29uc3QgaT1PYmplY3QuYXNzaWduKHt9LHMpO2kucGFyYW1zPU9iamVjdC5hc3NpZ24oe30scy5wYXJhbXMpO2NvbnN0IHI9cy5hbm9ueW1vdXN8fCExLG49ZS5jb250YWN0LnRvU3RyaW5nKHthbm9ueW1vdXM6cixvdXRib3VuZDpyPyFlLmNvbnRhY3QudGVtcEdydXU6IWUuY29udGFjdC5wdWJHcnV1fSk7ciYmZS5jb25maWd1cmF0aW9uLnVyaSYmKGkucGFyYW1zLmZyb21EaXNwbGF5TmFtZT0iQW5vbnltb3VzIixpLnBhcmFtcy5mcm9tVXJpPSJzaXA6YW5vbnltb3VzQGFub255bW91cy5pbnZhbGlkIik7bGV0IG89ZS51c2VyQWdlbnRDb3JlLmNvbmZpZ3VyYXRpb24uYW9yO2lmKGkucGFyYW1zLmZyb21VcmkmJihvPSJzdHJpbmciPT10eXBlb2YgaS5wYXJhbXMuZnJvbVVyaT95LlVSSVBhcnNlKGkucGFyYW1zLmZyb21VcmkpOmkucGFyYW1zLmZyb21VcmkpLCFvKXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgZnJvbSBVUkk6ICIraS5wYXJhbXMuZnJvbVVyaSk7bGV0IGE9dDtpZihpLnBhcmFtcy50b1VyaSYmKGE9InN0cmluZyI9PXR5cGVvZiBpLnBhcmFtcy50b1VyaT95LlVSSVBhcnNlKGkucGFyYW1zLnRvVXJpKTppLnBhcmFtcy50b1VyaSksIWEpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCB0byBVUkk6ICIraS5wYXJhbXMudG9VcmkpO2NvbnN0IGM9T2JqZWN0LmFzc2lnbih7fSxpLnBhcmFtcyk7Yy5mcm9tVGFnPXRoaXMuZnJvbVRhZztjb25zdCBoPShpLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7ciYmZS5jb25maWd1cmF0aW9uLnVyaSYmKGgucHVzaCgiUC1QcmVmZXJyZWQtSWRlbnRpdHk6ICIrZS5jb25maWd1cmF0aW9uLnVyaS50b1N0cmluZygpKSxoLnB1c2goIlByaXZhY3k6IGlkIikpLGgucHVzaCgiQ29udGFjdDogIituKSxoLnB1c2goIkFsbG93OiAiK1siQUNLIiwiQ0FOQ0VMIiwiSU5WSVRFIiwiTUVTU0FHRSIsIkJZRSIsIk9QVElPTlMiLCJJTkZPIiwiTk9USUZZIiwiUkVGRVIiXS50b1N0cmluZygpKSxlLmNvbmZpZ3VyYXRpb24uc2lwRXh0ZW5zaW9uMTAwcmVsPT09WS5SZXF1aXJlZCYmaC5wdXNoKCJSZXF1aXJlOiAxMDByZWwiKSxlLmNvbmZpZ3VyYXRpb24uc2lwRXh0ZW5zaW9uUmVwbGFjZXM9PT1ZLlJlcXVpcmVkJiZoLnB1c2goIlJlcXVpcmU6IHJlcGxhY2VzIiksaS5leHRyYUhlYWRlcnM9aDt0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2U9ZS51c2VyQWdlbnRDb3JlLm1ha2VPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKEwuSU5WSVRFLHQsbyxhLGMsaCx1bmRlZmluZWQpLHRoaXMuX2NvbnRhY3Q9bix0aGlzLl9yZWZlcnJhbEludml0ZXJPcHRpb25zPWksdGhpcy5fcmVuZGVyYm9keT1zLnJlbmRlcmJvZHksdGhpcy5fcmVuZGVydHlwZT1zLnJlbmRlcnR5cGUscy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzJiYodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzPXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycykscy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyYmKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM9cy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucykscy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzUmVJbnZpdGUmJih0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNSZUludml0ZT1zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnNSZUludml0ZSkscy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlJiYodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlPXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnNSZUludml0ZSksdGhpcy5faWQ9dGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmNhbGxJZCt0aGlzLmZyb21UYWcsdGhpcy51c2VyQWdlbnQuX3Nlc3Npb25zW3RoaXMuX2lkXT10aGlzfWRpc3Bvc2UoKXtpZih0aGlzLmRpc3Bvc2VkKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtzd2l0Y2godGhpcy5kaXNwb3NlZD0hMCx0aGlzLmRpc3Bvc2VFYXJseU1lZGlhKCksdGhpcy5zdGF0ZSl7Y2FzZSBXLkluaXRpYWw6Y2FzZSBXLkVzdGFibGlzaGluZzpyZXR1cm4gdGhpcy5jYW5jZWwoKS50aGVuKCgoKT0+c3VwZXIuZGlzcG9zZSgpKSk7Y2FzZSBXLkVzdGFibGlzaGVkOmNhc2UgVy5UZXJtaW5hdGluZzpjYXNlIFcuVGVybWluYXRlZDpyZXR1cm4gc3VwZXIuZGlzcG9zZSgpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlLiIpfX1nZXQgYm9keSgpe3JldHVybiB0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2UuYm9keX1nZXQgbG9jYWxJZGVudGl0eSgpe3JldHVybiB0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2UuZnJvbX1nZXQgcmVtb3RlSWRlbnRpdHkoKXtyZXR1cm4gdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLnRvfWdldCByZXF1ZXN0KCl7cmV0dXJuIHRoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZX1jYW5jZWwoZT17fSl7aWYodGhpcy5sb2dnZXIubG9nKCJJbnZpdGVyLmNhbmNlbCIpLHRoaXMuc3RhdGUhPT1XLkluaXRpYWwmJnRoaXMuc3RhdGUhPT1XLkVzdGFibGlzaGluZyl7Y29uc3QgZT1uZXcgRXJyb3IoYEludmFsaWQgc2Vzc2lvbiBzdGF0ZSAke3RoaXMuc3RhdGV9YCk7cmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSksUHJvbWlzZS5yZWplY3QoZSl9aWYodGhpcy5pc0NhbmNlbGVkPSEwLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuVGVybWluYXRpbmcpLHRoaXMub3V0Z29pbmdJbnZpdGVSZXF1ZXN0KXtsZXQgdDtlLnN0YXR1c0NvZGUmJmUucmVhc29uUGhyYXNlJiYodD1mdW5jdGlvbihlLHQpe2lmKGUmJmU8MjAwfHxlPjY5OSl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIHN0YXR1c0NvZGU6ICIrZSk7aWYoZSlyZXR1cm4iU0lQO2NhdXNlPSIrZSsnO3RleHQ9IicrKEUoZSl8fHQpKyciJ30oZS5zdGF0dXNDb2RlLGUucmVhc29uUGhyYXNlKSksdGhpcy5vdXRnb2luZ0ludml0ZVJlcXVlc3QuY2FuY2VsKHQsZSl9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKCJDYW5jZWxlZCBzZXNzaW9uIGJlZm9yZSBJTlZJVEUgd2FzIHNlbnQiKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0ZWQpO3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1pbnZpdGUoZT17fSl7aWYodGhpcy5sb2dnZXIubG9nKCJJbnZpdGVyLmludml0ZSIpLHRoaXMuc3RhdGUhPT1XLkluaXRpYWwpcmV0dXJuIHN1cGVyLmludml0ZShlKTtpZihlLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMmJih0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM9ZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzKSxlLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zJiYodGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucz1lLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zKSxlLndpdGhvdXRTZHB8fHRoaXMuaW52aXRlV2l0aG91dFNkcClyZXR1cm4gdGhpcy5fcmVuZGVyYm9keSYmdGhpcy5fcmVuZGVydHlwZSYmKHRoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5ib2R5PXtjb250ZW50VHlwZTp0aGlzLl9yZW5kZXJ0eXBlLGJvZHk6dGhpcy5fcmVuZGVyYm9keX0pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuRXN0YWJsaXNoaW5nKSxQcm9taXNlLnJlc29sdmUodGhpcy5zZW5kSW52aXRlKGUpKTtjb25zdCB0PXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczp0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zfTtyZXR1cm4gdGhpcy5nZXRPZmZlcih0KS50aGVuKCh0PT4odGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmJvZHk9e2JvZHk6dC5jb250ZW50LGNvbnRlbnRUeXBlOnQuY29udGVudFR5cGV9LHRoaXMuc3RhdGVUcmFuc2l0aW9uKFcuRXN0YWJsaXNoaW5nKSx0aGlzLnNlbmRJbnZpdGUoZSkpKSkuY2F0Y2goKGU9Pnt0aHJvdyB0aGlzLmxvZ2dlci5sb2coZS5tZXNzYWdlKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0ZWQpLGV9KSl9c2VuZEludml0ZShlPXt9KXtyZXR1cm4gdGhpcy5vdXRnb2luZ0ludml0ZVJlcXVlc3Q9dGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5pbnZpdGUodGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLHtvbkFjY2VwdDp0PT50aGlzLmRpYWxvZz8odGhpcy5sb2dnZXIubG9nKCJBZGRpdGlvbmFsIGNvbmZpcm1lZCBkaWFsb2csIHNlbmRpbmcgQUNLIGFuZCBCWUUiKSx2b2lkIHRoaXMuYWNrQW5kQnllKHQpKTp0aGlzLmlzQ2FuY2VsZWQ/KHRoaXMubG9nZ2VyLmxvZygiQ2FuY2VsZWQgc2Vzc2lvbiBhY2NlcHRlZCwgc2VuZGluZyBBQ0sgYW5kIEJZRSIpLHRoaXMuYWNrQW5kQnllKHQpLHZvaWQgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSk6KHRoaXMubm90aWZ5UmVmZXJlcih0KSx2b2lkIHRoaXMub25BY2NlcHQodCkudGhlbigoKCk9Pnt0aGlzLmRpc3Bvc2VFYXJseU1lZGlhKCl9KSkuY2F0Y2goKCgpPT57dGhpcy5kaXNwb3NlRWFybHlNZWRpYSgpfSkpLnRoZW4oKCgpPT57ZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCh0KX0pKSksb25Qcm9ncmVzczp0PT57dGhpcy5pc0NhbmNlbGVkfHwodGhpcy5ub3RpZnlSZWZlcmVyKHQpLHRoaXMub25Qcm9ncmVzcyh0KS5jYXRjaCgoKCk9Pnt0aGlzLmRpc3Bvc2VFYXJseU1lZGlhKCl9KSkudGhlbigoKCk9PntlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25Qcm9ncmVzcyYmZS5yZXF1ZXN0RGVsZWdhdGUub25Qcm9ncmVzcyh0KX0pKSl9LG9uUmVkaXJlY3Q6dD0+e3RoaXMubm90aWZ5UmVmZXJlcih0KSx0aGlzLm9uUmVkaXJlY3QodCksZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVkaXJlY3QmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVkaXJlY3QodCl9LG9uUmVqZWN0OnQ9Pnt0aGlzLm5vdGlmeVJlZmVyZXIodCksdGhpcy5vblJlamVjdCh0KSxlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KHQpfSxvblRyeWluZzp0PT57dGhpcy5ub3RpZnlSZWZlcmVyKHQpLHRoaXMub25UcnlpbmcodCksZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uVHJ5aW5nJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblRyeWluZyh0KX19KSx0aGlzLm91dGdvaW5nSW52aXRlUmVxdWVzdH1kaXNwb3NlRWFybHlNZWRpYSgpe3RoaXMuZWFybHlNZWRpYVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJzLmZvckVhY2goKGU9PntlLmNsb3NlKCl9KSksdGhpcy5lYXJseU1lZGlhU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcnMuY2xlYXIoKX1ub3RpZnlSZWZlcmVyKGUpe2lmKCF0aGlzLl9yZWZlcnJlZClyZXR1cm47aWYoISh0aGlzLl9yZWZlcnJlZCBpbnN0YW5jZW9mIFopKXRocm93IG5ldyBFcnJvcigiUmVmZXJyZWQgc2Vzc2lvbiBub3QgaW5zdGFuY2Ugb2Ygc2Vzc2lvbiIpO2lmKCF0aGlzLl9yZWZlcnJlZC5kaWFsb2cpcmV0dXJuO2lmKCFlLm1lc3NhZ2Uuc3RhdHVzQ29kZSl0aHJvdyBuZXcgRXJyb3IoIlN0YXR1cyBjb2RlIHVuZGVmaW5lZC4iKTtpZighZS5tZXNzYWdlLnJlYXNvblBocmFzZSl0aHJvdyBuZXcgRXJyb3IoIlJlYXNvbiBwaHJhc2UgdW5kZWZpbmVkLiIpO2NvbnN0IHQ9YFNJUC8yLjAgJHtlLm1lc3NhZ2Uuc3RhdHVzQ29kZX0gJHtlLm1lc3NhZ2UucmVhc29uUGhyYXNlfWAudHJpbSgpO3RoaXMuX3JlZmVycmVkLmRpYWxvZy5ub3RpZnkodm9pZCAwLHtleHRyYUhlYWRlcnM6WyJFdmVudDogcmVmZXIiLCJTdWJzY3JpcHRpb24tU3RhdGU6IHRlcm1pbmF0ZWQiXSxib2R5Ontjb250ZW50RGlzcG9zaXRpb246InJlbmRlciIsY29udGVudFR5cGU6Im1lc3NhZ2Uvc2lwZnJhZyIsY29udGVudDp0fX0pLmRlbGVnYXRlPXtvblJlamVjdDooKT0+e3RoaXMuX3JlZmVycmVkPXZvaWQgMH19fW9uQWNjZXB0KGUpe2lmKHRoaXMubG9nZ2VyLmxvZygiSW52aXRlci5vbkFjY2VwdCIpLHRoaXMuc3RhdGUhPT1XLkVzdGFibGlzaGluZylyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoYEFjY2VwdCByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXNwb25zZWApLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgSW52YWxpZCBzZXNzaW9uIHN0YXRlICR7dGhpcy5zdGF0ZX1gKSk7Y29uc3QgdD1lLm1lc3NhZ2Uscz1lLnNlc3Npb247c3dpdGNoKHQuaGFzSGVhZGVyKCJQLUFzc2VydGVkLUlkZW50aXR5IikmJih0aGlzLl9hc3NlcnRlZElkZW50aXR5PXkubmFtZUFkZHJIZWFkZXJQYXJzZSh0LmdldEhlYWRlcigiUC1Bc3NlcnRlZC1JZGVudGl0eSIpKSkscy5kZWxlZ2F0ZT17b25BY2s6ZT0+dGhpcy5vbkFja1JlcXVlc3QoZSksb25CeWU6ZT0+dGhpcy5vbkJ5ZVJlcXVlc3QoZSksb25JbmZvOmU9PnRoaXMub25JbmZvUmVxdWVzdChlKSxvbkludml0ZTplPT50aGlzLm9uSW52aXRlUmVxdWVzdChlKSxvbk1lc3NhZ2U6ZT0+dGhpcy5vbk1lc3NhZ2VSZXF1ZXN0KGUpLG9uTm90aWZ5OmU9PnRoaXMub25Ob3RpZnlSZXF1ZXN0KGUpLG9uUHJhY2s6ZT0+dGhpcy5vblByYWNrUmVxdWVzdChlKSxvblJlZmVyOmU9PnRoaXMub25SZWZlclJlcXVlc3QoZSl9LHRoaXMuX2RpYWxvZz1zLHMuc2lnbmFsaW5nU3RhdGUpe2Nhc2UgTS5Jbml0aWFsOmNhc2UgTS5IYXZlTG9jYWxPZmZlcjpyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoIlJlY2VpdmVkIDJ4eCByZXNwb25zZSB0byBJTlZJVEUgd2l0aG91dCBhIHNlc3Npb24gZGVzY3JpcHRpb24iKSx0aGlzLmFja0FuZEJ5ZShlLDQwMCwiTWlzc2luZyBzZXNzaW9uIGRlc2NyaXB0aW9uIiksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpKTtjYXNlIE0uSGF2ZVJlbW90ZU9mZmVyOntpZighdGhpcy5fZGlhbG9nLm9mZmVyKXRocm93IG5ldyBFcnJvcihgU2Vzc2lvbiBvZmZlciB1bmRlZmluZWQgaW4gc2lnbmFsaW5nIHN0YXRlICR7dGhpcy5fZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKTtjb25zdCB0PXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczp0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zfTtyZXR1cm4gdGhpcy5zZXRPZmZlckFuZEdldEFuc3dlcih0aGlzLl9kaWFsb2cub2ZmZXIsdCkudGhlbigodD0+e2UuYWNrKHtib2R5OnR9KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihXLkVzdGFibGlzaGVkKX0pKS5jYXRjaCgodD0+e3Rocm93IHRoaXMuYWNrQW5kQnllKGUsNDg4LCJJbnZhbGlkIHNlc3Npb24gZGVzY3JpcHRpb24iKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0ZWQpLHR9KSl9Y2FzZSBNLlN0YWJsZTp7aWYodGhpcy5lYXJseU1lZGlhU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcnMuc2l6ZT4wKXtjb25zdCB0PXRoaXMuZWFybHlNZWRpYVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJzLmdldChzLmlkKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIlNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciB1bmRlZmluZWQuIik7cmV0dXJuIHRoaXMuc2V0U2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcih0KSx0aGlzLmVhcmx5TWVkaWFTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVycy5kZWxldGUocy5pZCksZS5hY2soKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihXLkVzdGFibGlzaGVkKSxQcm9taXNlLnJlc29sdmUoKX1pZih0aGlzLmVhcmx5TWVkaWFEaWFsb2cpe2lmKHRoaXMuZWFybHlNZWRpYURpYWxvZyE9PXMpe2lmKHRoaXMuZWFybHlNZWRpYSl7Y29uc3QgZT0iWW91IGhhdmUgc2V0IHRoZSAnZWFybHlNZWRpYScgb3B0aW9uIHRvICd0cnVlJyB3aGljaCByZXF1aXJlcyB0aGF0IHlvdXIgSU5WSVRFIHJlcXVlc3RzIGRvIG5vdCBmb3JrIGFuZCB5ZXQgdGhpcyBJTlZJVEUgcmVxdWVzdCBkaWQgaW4gZmFjdCBmb3JrLiBDb25zZXF1ZW50aWFsbHkgYW5kIG5vdCBzdXJwcmlzaW5nbHkgdGhlIGVuZCBwb2ludCB3aGljaCBhY2NlcHRlZCB0aGUgSU5WSVRFIChjb25maXJtZWQgZGlhbG9nKSBkb2VzIG5vdCBtYXRjaCB0aGUgZW5kIHBvaW50IHdpdGggd2hpY2ggZWFybHkgbWVkaWEgaGFzIGJlZW4gc2V0dXAgKGVhcmx5IGRpYWxvZykgYW5kIHRodXMgdGhpcyBzZXNzaW9uIGlzIHVuYWJsZSB0byBwcm9jZWVkLiBJbiBhY2NvcmRhbmNlIHdpdGggdGhlIFNJUCBzcGVjaWZpY2F0aW9ucywgdGhlIFNJUCBzZXJ2ZXJzIHlvdXIgZW5kIHBvaW50IGlzIGNvbm5lY3RlZCB0byBkZXRlcm1pbmUgaWYgYW4gSU5WSVRFIGZvcmtzIGFuZCB0aGUgZm9ya2luZyBiZWhhdmlvciBvZiB0aG9zZSBzZXJ2ZXJzIGNhbm5vdCBiZSBjb250cm9sbGVkIGJ5IHRoaXMgbGlicmFyeS4gSWYgeW91IHdpc2ggdG8gdXNlIGVhcmx5IG1lZGlhIHdpdGggdGhpcyBsaWJyYXJ5IHlvdSBtdXN0IGNvbmZpZ3VyZSB0aG9zZSBzZXJ2ZXJzIGFjY29yZGluZ2x5LiBBbHRlcm5hdGl2ZWx5IHlvdSBtYXkgc2V0IHRoZSAnZWFybHlNZWRpYScgdG8gJ2ZhbHNlJyB3aGljaCB3aWxsIGFsbG93IHRoaXMgbGlicmFyeSB0byBmdW5jdGlvbiB3aXRoIGFueSBJTlZJVEUgcmVxdWVzdHMgd2hpY2ggZG8gZm9yay4iO3RoaXMubG9nZ2VyLmVycm9yKGUpfWNvbnN0IHQ9bmV3IEVycm9yKCJFYXJseSBtZWRpYSBkaWFsb2cgZG9lcyBub3QgZXF1YWwgY29uZmlybWVkIGRpYWxvZywgdGVybWluYXRpbmcgc2Vzc2lvbiIpO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHRoaXMuYWNrQW5kQnllKGUsNDg4LCJOb3QgQWNjZXB0YWJsZSBIZXJlIiksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSxQcm9taXNlLnJlamVjdCh0KX1yZXR1cm4gZS5hY2soKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihXLkVzdGFibGlzaGVkKSxQcm9taXNlLnJlc29sdmUoKX1jb25zdCB0PXMuYW5zd2VyO2lmKCF0KXRocm93IG5ldyBFcnJvcigiQW5zd2VyIGlzIHVuZGVmaW5lZC4iKTtjb25zdCBpPXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczp0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zfTtyZXR1cm4gdGhpcy5zZXRBbnN3ZXIodCxpKS50aGVuKCgoKT0+e2xldCB0O3RoaXMuX3JlbmRlcmJvZHkmJnRoaXMuX3JlbmRlcnR5cGUmJih0PXtib2R5Ontjb250ZW50RGlzcG9zaXRpb246InJlbmRlciIsY29udGVudFR5cGU6dGhpcy5fcmVuZGVydHlwZSxjb250ZW50OnRoaXMuX3JlbmRlcmJvZHl9fSksZS5hY2sodCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5Fc3RhYmxpc2hlZCl9KSkuY2F0Y2goKHQ9Pnt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHRoaXMuYWNrQW5kQnllKGUsNDg4LCJOb3QgQWNjZXB0YWJsZSBIZXJlIiksdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSx0fSkpfWNhc2UgTS5DbG9zZWQ6cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiVGVybWluYXRlZC4iKSk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc2Vzc2lvbiBzaWduYWxpbmcgc3RhdGUuIil9fW9uUHJvZ3Jlc3MoZSl7dmFyIHQ7aWYodGhpcy5sb2dnZXIubG9nKCJJbnZpdGVyLm9uUHJvZ3Jlc3MiKSx0aGlzLnN0YXRlIT09Vy5Fc3RhYmxpc2hpbmcpcmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKGBQcm9ncmVzcyByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXNwb25zZWApLFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgSW52YWxpZCBzZXNzaW9uIHN0YXRlICR7dGhpcy5zdGF0ZX1gKSk7aWYoIXRoaXMub3V0Z29pbmdJbnZpdGVSZXF1ZXN0KXRocm93IG5ldyBFcnJvcigiT3V0Z29pbmcgSU5WSVRFIHJlcXVlc3QgdW5kZWZpbmVkLiIpO2NvbnN0IHM9ZS5tZXNzYWdlLGk9ZS5zZXNzaW9uO3MuaGFzSGVhZGVyKCJQLUFzc2VydGVkLUlkZW50aXR5IikmJih0aGlzLl9hc3NlcnRlZElkZW50aXR5PXkubmFtZUFkZHJIZWFkZXJQYXJzZShzLmdldEhlYWRlcigiUC1Bc3NlcnRlZC1JZGVudGl0eSIpKSk7Y29uc3Qgcj1zLmdldEhlYWRlcigicmVxdWlyZSIpLG49cy5nZXRIZWFkZXIoInJzZXEiKSxvPSEhKHImJnIuaW5jbHVkZXMoIjEwMHJlbCIpJiZuP051bWJlcihuKTp2b2lkIDApLGE9W107c3dpdGNoKG8mJmEucHVzaCgiUkFjazogIitzLmdldEhlYWRlcigicnNlcSIpKyIgIitzLmdldEhlYWRlcigiY3NlcSIpKSxpLnNpZ25hbGluZ1N0YXRlKXtjYXNlIE0uSW5pdGlhbDpyZXR1cm4gbyYmKHRoaXMubG9nZ2VyLndhcm4oIkZpcnN0IHJlbGlhYmxlIHByb3Zpc2lvbmFsIHJlc3BvbnNlIHJlY2VpdmVkIE1VU1QgY29udGFpbiBhbiBvZmZlciB3aGVuIElOVklURSBkb2VzIG5vdCBjb250YWluIGFuIG9mZmVyLiIpLGUucHJhY2soe2V4dHJhSGVhZGVyczphfSkpLFByb21pc2UucmVzb2x2ZSgpO2Nhc2UgTS5IYXZlTG9jYWxPZmZlcjpyZXR1cm4gbyYmZS5wcmFjayh7ZXh0cmFIZWFkZXJzOmF9KSxQcm9taXNlLnJlc29sdmUoKTtjYXNlIE0uSGF2ZVJlbW90ZU9mZmVyOmlmKCFvKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJOb24tcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2UgTVVTVCBOT1QgY29udGFpbiBhbiBpbml0aWFsIG9mZmVyLCBkaXNjYXJkaW5nIHJlc3BvbnNlLiIpLFByb21pc2UucmVzb2x2ZSgpO3tjb25zdCByPXRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnkodGhpcyx0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5T3B0aW9uc3x8e30pO3JldHVybihudWxsPT09KHQ9dGhpcy5kZWxlZ2F0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKSYmdGhpcy5kZWxlZ2F0ZS5vblNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIociwhMCksdGhpcy5lYXJseU1lZGlhU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcnMuc2V0KGkuaWQsciksci5zZXREZXNjcmlwdGlvbihzLmJvZHksdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyx0aGlzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnMpLnRoZW4oKCgpPT5yLmdldERlc2NyaXB0aW9uKHRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzKSkpLnRoZW4oKHQ9Pntjb25zdCBzPXtjb250ZW50RGlzcG9zaXRpb246InNlc3Npb24iLGNvbnRlbnRUeXBlOnQuY29udGVudFR5cGUsY29udGVudDp0LmJvZHl9O2UucHJhY2soe2V4dHJhSGVhZGVyczphLGJvZHk6c30pfSkpLmNhdGNoKChlPT57dGhyb3cgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSxlfSkpfWNhc2UgTS5TdGFibGU6aWYobyYmZS5wcmFjayh7ZXh0cmFIZWFkZXJzOmF9KSx0aGlzLmVhcmx5TWVkaWEmJiF0aGlzLmVhcmx5TWVkaWFEaWFsb2cpe3RoaXMuZWFybHlNZWRpYURpYWxvZz1pO2NvbnN0IGU9aS5hbnN3ZXI7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJBbnN3ZXIgaXMgdW5kZWZpbmVkLiIpO2NvbnN0IHQ9e3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOnRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnN9O3JldHVybiB0aGlzLnNldEFuc3dlcihlLHQpLmNhdGNoKChlPT57dGhyb3cgdGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKSxlfSkpfXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtjYXNlIE0uQ2xvc2VkOnJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlRlcm1pbmF0ZWQuIikpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHNlc3Npb24gc2lnbmFsaW5nIHN0YXRlLiIpfX1vblJlZGlyZWN0KGUpe3RoaXMubG9nZ2VyLmxvZygiSW52aXRlci5vblJlZGlyZWN0IiksdGhpcy5zdGF0ZT09PVcuRXN0YWJsaXNoaW5nfHx0aGlzLnN0YXRlPT09Vy5UZXJtaW5hdGluZz90aGlzLnN0YXRlVHJhbnNpdGlvbihXLlRlcm1pbmF0ZWQpOnRoaXMubG9nZ2VyLmVycm9yKGBSZWRpcmVjdCByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXNwb25zZWApfW9uUmVqZWN0KGUpe3RoaXMubG9nZ2VyLmxvZygiSW52aXRlci5vblJlamVjdCIpLHRoaXMuc3RhdGU9PT1XLkVzdGFibGlzaGluZ3x8dGhpcy5zdGF0ZT09PVcuVGVybWluYXRpbmc/dGhpcy5zdGF0ZVRyYW5zaXRpb24oVy5UZXJtaW5hdGVkKTp0aGlzLmxvZ2dlci5lcnJvcihgUmVqZWN0IHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlc3BvbnNlYCl9b25UcnlpbmcoZSl7dGhpcy5sb2dnZXIubG9nKCJJbnZpdGVyLm9uVHJ5aW5nIiksdGhpcy5zdGF0ZT09PVcuRXN0YWJsaXNoaW5nfHx0aGlzLmxvZ2dlci5lcnJvcihgVHJ5aW5nIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlc3BvbnNlYCl9fWNsYXNzIFF7Y29uc3RydWN0b3IoZSx0LHMsaT0idGV4dC9wbGFpbiIscj17fSl7dGhpcy5sb2dnZXI9ZS5nZXRMb2dnZXIoInNpcC5NZXNzYWdlciIpLHIucGFyYW1zPXIucGFyYW1zfHx7fTtsZXQgbj1lLnVzZXJBZ2VudENvcmUuY29uZmlndXJhdGlvbi5hb3I7aWYoci5wYXJhbXMuZnJvbVVyaSYmKG49InN0cmluZyI9PXR5cGVvZiByLnBhcmFtcy5mcm9tVXJpP3kuVVJJUGFyc2Uoci5wYXJhbXMuZnJvbVVyaSk6ci5wYXJhbXMuZnJvbVVyaSksIW4pdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBmcm9tIFVSSTogIityLnBhcmFtcy5mcm9tVXJpKTtsZXQgbz10O2lmKHIucGFyYW1zLnRvVXJpJiYobz0ic3RyaW5nIj09dHlwZW9mIHIucGFyYW1zLnRvVXJpP3kuVVJJUGFyc2Uoci5wYXJhbXMudG9VcmkpOnIucGFyYW1zLnRvVXJpKSwhbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIHRvIFVSSTogIityLnBhcmFtcy50b1VyaSk7Y29uc3QgYT1yLnBhcmFtcz9PYmplY3QuYXNzaWduKHt9LHIucGFyYW1zKTp7fSxjPShyLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksaD17Y29udGVudERpc3Bvc2l0aW9uOiJyZW5kZXIiLGNvbnRlbnRUeXBlOmksY29udGVudDpzfTt0aGlzLnJlcXVlc3Q9ZS51c2VyQWdlbnRDb3JlLm1ha2VPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKEwuTUVTU0FHRSx0LG4sbyxhLGMsaCksdGhpcy51c2VyQWdlbnQ9ZX1tZXNzYWdlKGU9e30pe3JldHVybiB0aGlzLnVzZXJBZ2VudC51c2VyQWdlbnRDb3JlLnJlcXVlc3QodGhpcy5yZXF1ZXN0LGUucmVxdWVzdERlbGVnYXRlKSxQcm9taXNlLnJlc29sdmUoKX19dmFyIGVlLHRlLHNlLGllLHJlLG5lLG9lLGFlOyFmdW5jdGlvbihlKXtlLkluaXRpYWw9IkluaXRpYWwiLGUuUHVibGlzaGVkPSJQdWJsaXNoZWQiLGUuVW5wdWJsaXNoZWQ9IlVucHVibGlzaGVkIixlLlRlcm1pbmF0ZWQ9IlRlcm1pbmF0ZWQifShlZXx8KGVlPXt9KSk7Y2xhc3MgY2V7Y29uc3RydWN0b3IoZSx0LHMsaT17fSl7dGhpcy5kaXNwb3NlZD0hMSx0aGlzLl9zdGF0ZT1lZS5Jbml0aWFsLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyPW5ldyB1LHRoaXMudXNlckFnZW50PWUsaS5leHRyYUhlYWRlcnM9KGkuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSxpLmNvbnRlbnRUeXBlPWkuY29udGVudFR5cGV8fCJ0ZXh0L3BsYWluIiwibnVtYmVyIiE9dHlwZW9mIGkuZXhwaXJlc3x8aS5leHBpcmVzJTEhPTA/aS5leHBpcmVzPTM2MDA6aS5leHBpcmVzPU51bWJlcihpLmV4cGlyZXMpLCJib29sZWFuIiE9dHlwZW9mIGkudW5wdWJsaXNoT25DbG9zZSYmKGkudW5wdWJsaXNoT25DbG9zZT0hMCksdGhpcy50YXJnZXQ9dCx0aGlzLmV2ZW50PXMsdGhpcy5vcHRpb25zPWksdGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz1pLmV4cGlyZXMsdGhpcy5sb2dnZXI9ZS5nZXRMb2dnZXIoInNpcC5QdWJsaXNoZXIiKTtjb25zdCByPWkucGFyYW1zfHx7fSxuPXIuZnJvbVVyaT9yLmZyb21Vcmk6ZS51c2VyQWdlbnRDb3JlLmNvbmZpZ3VyYXRpb24uYW9yLG89ci50b1VyaT9yLnRvVXJpOnQ7bGV0IGE7aWYoaS5ib2R5JiZpLmNvbnRlbnRUeXBlKXthPXtjb250ZW50RGlzcG9zaXRpb246InJlbmRlciIsY29udGVudFR5cGU6aS5jb250ZW50VHlwZSxjb250ZW50OmkuYm9keX19Y29uc3QgYz0oaS5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpO3RoaXMucmVxdWVzdD1lLnVzZXJBZ2VudENvcmUubWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoTC5QVUJMSVNILHQsbixvLHIsYyxhKSx0aGlzLmlkPXRoaXMudGFyZ2V0LnRvU3RyaW5nKCkrIjoiK3RoaXMuZXZlbnQsdGhpcy51c2VyQWdlbnQuX3B1Ymxpc2hlcnNbdGhpcy5pZF09dGhpc31kaXNwb3NlKCl7cmV0dXJuIHRoaXMuZGlzcG9zZWQ/UHJvbWlzZS5yZXNvbHZlKCk6KHRoaXMuZGlzcG9zZWQ9ITAsdGhpcy5sb2dnZXIubG9nKGBQdWJsaXNoZXIgJHt0aGlzLmlkfSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9IGlzIGJlaW5nIGRpc3Bvc2VkYCksZGVsZXRlIHRoaXMudXNlckFnZW50Ll9wdWJsaXNoZXJzW3RoaXMuaWRdLHRoaXMub3B0aW9ucy51bnB1Ymxpc2hPbkNsb3NlJiZ0aGlzLnN0YXRlPT09ZWUuUHVibGlzaGVkP3RoaXMudW5wdWJsaXNoKCk6KHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnB1Ymxpc2hSZWZyZXNoVGltZXIpLHRoaXMucHVibGlzaFJlZnJlc2hUaW1lcj12b2lkIDApLHRoaXMucHViUmVxdWVzdEJvZHk9dm9pZCAwLHRoaXMucHViUmVxdWVzdEV4cGlyZXM9MCx0aGlzLnB1YlJlcXVlc3RFdGFnPXZvaWQgMCxQcm9taXNlLnJlc29sdmUoKSkpfWdldCBzdGF0ZSgpe3JldHVybiB0aGlzLl9zdGF0ZX1nZXQgc3RhdGVDaGFuZ2UoKXtyZXR1cm4gdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXJ9cHVibGlzaChlLHQ9e30pe2lmKHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnB1Ymxpc2hSZWZyZXNoVGltZXIpLHRoaXMucHVibGlzaFJlZnJlc2hUaW1lcj12b2lkIDApLHRoaXMub3B0aW9ucy5ib2R5PWUsdGhpcy5wdWJSZXF1ZXN0Qm9keT10aGlzLm9wdGlvbnMuYm9keSwwPT09dGhpcy5wdWJSZXF1ZXN0RXhwaXJlcyl7aWYodm9pZCAwPT09dGhpcy5vcHRpb25zLmV4cGlyZXMpdGhyb3cgbmV3IEVycm9yKCJFeHBpcmVzIHVuZGVmaW5lZC4iKTt0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPXRoaXMub3B0aW9ucy5leHBpcmVzLHRoaXMucHViUmVxdWVzdEV0YWc9dm9pZCAwfXJldHVybiB0aGlzLnNlbmRQdWJsaXNoUmVxdWVzdCgpLFByb21pc2UucmVzb2x2ZSgpfXVucHVibGlzaChlPXt9KXtyZXR1cm4gdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciksdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXZvaWQgMCksdGhpcy5wdWJSZXF1ZXN0Qm9keT12b2lkIDAsdGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz0wLHZvaWQgMCE9PXRoaXMucHViUmVxdWVzdEV0YWcmJnRoaXMuc2VuZFB1Ymxpc2hSZXF1ZXN0KCksUHJvbWlzZS5yZXNvbHZlKCl9cmVjZWl2ZVJlc3BvbnNlKGUpe2NvbnN0IHQ9ZS5zdGF0dXNDb2RlfHwwO3N3aXRjaCghMCl7Y2FzZS9eMVswLTldezJ9JC8udGVzdCh0LnRvU3RyaW5nKCkpOmJyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QodC50b1N0cmluZygpKTppZihlLmhhc0hlYWRlcigiU0lQLUVUYWciKT90aGlzLnB1YlJlcXVlc3RFdGFnPWUuZ2V0SGVhZGVyKCJTSVAtRVRhZyIpOnRoaXMubG9nZ2VyLndhcm4oIlNJUC1FVGFnIGhlYWRlciBtaXNzaW5nIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFBVQkxJU0giKSxlLmhhc0hlYWRlcigiRXhwaXJlcyIpKXtjb25zdCB0PU51bWJlcihlLmdldEhlYWRlcigiRXhwaXJlcyIpKTsibnVtYmVyIj09dHlwZW9mIHQmJnQ+PTAmJnQ8PXRoaXMucHViUmVxdWVzdEV4cGlyZXM/dGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz10OnRoaXMubG9nZ2VyLndhcm4oIkJhZCBFeHBpcmVzIGhlYWRlciBpbiBhIDIwMC1jbGFzcyByZXNwb25zZSB0byBQVUJMSVNIIil9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKCJFeHBpcmVzIGhlYWRlciBtaXNzaW5nIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFBVQkxJU0giKTswIT09dGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz8odGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXNldFRpbWVvdXQoKCgpPT50aGlzLnJlZnJlc2hSZXF1ZXN0KCkpLDkwMCp0aGlzLnB1YlJlcXVlc3RFeHBpcmVzKSx0aGlzLl9zdGF0ZSE9PWVlLlB1Ymxpc2hlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24oZWUuUHVibGlzaGVkKSk6dGhpcy5zdGF0ZVRyYW5zaXRpb24oZWUuVW5wdWJsaXNoZWQpO2JyZWFrO2Nhc2UvXjQxMiQvLnRlc3QodC50b1N0cmluZygpKTppZih2b2lkIDAhPT10aGlzLnB1YlJlcXVlc3RFdGFnJiYwIT09dGhpcy5wdWJSZXF1ZXN0RXhwaXJlcyl7aWYodGhpcy5sb2dnZXIud2FybigiNDEyIHJlc3BvbnNlIHRvIFBVQkxJU0gsIHJlY292ZXJpbmciKSx0aGlzLnB1YlJlcXVlc3RFdGFnPXZvaWQgMCx2b2lkIDA9PT10aGlzLm9wdGlvbnMuYm9keSl0aHJvdyBuZXcgRXJyb3IoIkJvZHkgdW5kZWZpbmVkLiIpO3RoaXMucHVibGlzaCh0aGlzLm9wdGlvbnMuYm9keSl9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKCI0MTIgcmVzcG9uc2UgdG8gUFVCTElTSCwgcmVjb3ZlcnkgZmFpbGVkIiksdGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz0wLHRoaXMuc3RhdGVUcmFuc2l0aW9uKGVlLlVucHVibGlzaGVkKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihlZS5UZXJtaW5hdGVkKTticmVhaztjYXNlL140MjMkLy50ZXN0KHQudG9TdHJpbmcoKSk6aWYoMCE9PXRoaXMucHViUmVxdWVzdEV4cGlyZXMmJmUuaGFzSGVhZGVyKCJNaW4tRXhwaXJlcyIpKXtjb25zdCB0PU51bWJlcihlLmdldEhlYWRlcigiTWluLUV4cGlyZXMiKSk7aWYoIm51bWJlciI9PXR5cGVvZiB0fHx0PnRoaXMucHViUmVxdWVzdEV4cGlyZXMpe2lmKHRoaXMubG9nZ2VyLndhcm4oIjQyMyBjb2RlIGluIHJlc3BvbnNlIHRvIFBVQkxJU0gsIGFkanVzdGluZyB0aGUgRXhwaXJlcyB2YWx1ZSBhbmQgdHJ5aW5nIHRvIHJlY292ZXIiKSx0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPXQsdm9pZCAwPT09dGhpcy5vcHRpb25zLmJvZHkpdGhyb3cgbmV3IEVycm9yKCJCb2R5IHVuZGVmaW5lZC4iKTt0aGlzLnB1Ymxpc2godGhpcy5vcHRpb25zLmJvZHkpfWVsc2UgdGhpcy5sb2dnZXIud2FybigiQmFkIDQyMyByZXNwb25zZSBNaW4tRXhwaXJlcyBoZWFkZXIgcmVjZWl2ZWQgZm9yIFBVQkxJU0giKSx0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPTAsdGhpcy5zdGF0ZVRyYW5zaXRpb24oZWUuVW5wdWJsaXNoZWQpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKGVlLlRlcm1pbmF0ZWQpfWVsc2UgdGhpcy5sb2dnZXIud2FybigiNDIzIHJlc3BvbnNlIHRvIFBVQkxJU0gsIHJlY292ZXJ5IGZhaWxlZCIpLHRoaXMucHViUmVxdWVzdEV4cGlyZXM9MCx0aGlzLnN0YXRlVHJhbnNpdGlvbihlZS5VbnB1Ymxpc2hlZCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oZWUuVGVybWluYXRlZCk7YnJlYWs7ZGVmYXVsdDp0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPTAsdGhpcy5zdGF0ZVRyYW5zaXRpb24oZWUuVW5wdWJsaXNoZWQpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKGVlLlRlcm1pbmF0ZWQpfTA9PT10aGlzLnB1YlJlcXVlc3RFeHBpcmVzJiYodGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciksdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXZvaWQgMCksdGhpcy5wdWJSZXF1ZXN0Qm9keT12b2lkIDAsdGhpcy5wdWJSZXF1ZXN0RXRhZz12b2lkIDApfXNlbmQoKXtyZXR1cm4gdGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5wdWJsaXNoKHRoaXMucmVxdWVzdCx7b25BY2NlcHQ6ZT0+dGhpcy5yZWNlaXZlUmVzcG9uc2UoZS5tZXNzYWdlKSxvblByb2dyZXNzOmU9PnRoaXMucmVjZWl2ZVJlc3BvbnNlKGUubWVzc2FnZSksb25SZWRpcmVjdDplPT50aGlzLnJlY2VpdmVSZXNwb25zZShlLm1lc3NhZ2UpLG9uUmVqZWN0OmU9PnRoaXMucmVjZWl2ZVJlc3BvbnNlKGUubWVzc2FnZSksb25Ucnlpbmc6ZT0+dGhpcy5yZWNlaXZlUmVzcG9uc2UoZS5tZXNzYWdlKX0pfXJlZnJlc2hSZXF1ZXN0KCl7aWYodGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciksdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXZvaWQgMCksdGhpcy5wdWJSZXF1ZXN0Qm9keT12b2lkIDAsdm9pZCAwPT09dGhpcy5wdWJSZXF1ZXN0RXRhZyl0aHJvdyBuZXcgRXJyb3IoIkV0YWcgdW5kZWZpbmVkIik7aWYoMD09PXRoaXMucHViUmVxdWVzdEV4cGlyZXMpdGhyb3cgbmV3IEVycm9yKCJFeHBpcmVzIHplcm8iKTt0aGlzLnNlbmRQdWJsaXNoUmVxdWVzdCgpfXNlbmRQdWJsaXNoUmVxdWVzdCgpe2NvbnN0IGU9T2JqZWN0LmFzc2lnbih7fSx0aGlzLm9wdGlvbnMpO2UuZXh0cmFIZWFkZXJzPSh0aGlzLm9wdGlvbnMuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSxlLmV4dHJhSGVhZGVycy5wdXNoKCJFdmVudDogIit0aGlzLmV2ZW50KSxlLmV4dHJhSGVhZGVycy5wdXNoKCJFeHBpcmVzOiAiK3RoaXMucHViUmVxdWVzdEV4cGlyZXMpLHZvaWQgMCE9PXRoaXMucHViUmVxdWVzdEV0YWcmJmUuZXh0cmFIZWFkZXJzLnB1c2goIlNJUC1JZi1NYXRjaDogIit0aGlzLnB1YlJlcXVlc3RFdGFnKTtjb25zdCB0PXRoaXMudGFyZ2V0LHM9dGhpcy5vcHRpb25zLnBhcmFtc3x8e307bGV0IGkscjtpZih2b2lkIDAhPT10aGlzLnB1YlJlcXVlc3RCb2R5KXtpZih2b2lkIDA9PT10aGlzLm9wdGlvbnMuY29udGVudFR5cGUpdGhyb3cgbmV3IEVycm9yKCJDb250ZW50IHR5cGUgdW5kZWZpbmVkLiIpO2k9e2JvZHk6dGhpcy5wdWJSZXF1ZXN0Qm9keSxjb250ZW50VHlwZTp0aGlzLm9wdGlvbnMuY29udGVudFR5cGV9fXJldHVybiBpJiYocj1QKGkpKSx0aGlzLnJlcXVlc3Q9dGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShMLlBVQkxJU0gsdCxzLmZyb21Vcmk/cy5mcm9tVXJpOnRoaXMudXNlckFnZW50LnVzZXJBZ2VudENvcmUuY29uZmlndXJhdGlvbi5hb3Iscy50b1VyaT9zLnRvVXJpOnRoaXMudGFyZ2V0LHMsZS5leHRyYUhlYWRlcnMsciksdGhpcy5zZW5kKCl9c3RhdGVUcmFuc2l0aW9uKGUpe2NvbnN0IHQ9KCk9Pnt0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fc3RhdGV9IHRvICR7ZX1gKX07c3dpdGNoKHRoaXMuX3N0YXRlKXtjYXNlIGVlLkluaXRpYWw6ZSE9PWVlLlB1Ymxpc2hlZCYmZSE9PWVlLlVucHVibGlzaGVkJiZlIT09ZWUuVGVybWluYXRlZCYmdCgpO2JyZWFrO2Nhc2UgZWUuUHVibGlzaGVkOmUhPT1lZS5VbnB1Ymxpc2hlZCYmZSE9PWVlLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIGVlLlVucHVibGlzaGVkOmUhPT1lZS5QdWJsaXNoZWQmJmUhPT1lZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBlZS5UZXJtaW5hdGVkOnQoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHN0YXRlLiIpfXRoaXMuX3N0YXRlPWUsdGhpcy5sb2dnZXIubG9nKGBQdWJsaWNhdGlvbiB0cmFuc2l0aW9uZWQgdG8gc3RhdGUgJHt0aGlzLl9zdGF0ZX1gKSx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlci5lbWl0KHRoaXMuX3N0YXRlKSxlPT09ZWUuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCl9fSFmdW5jdGlvbihlKXtlLkluaXRpYWw9IkluaXRpYWwiLGUuUmVnaXN0ZXJlZD0iUmVnaXN0ZXJlZCIsZS5VbnJlZ2lzdGVyZWQ9IlVucmVnaXN0ZXJlZCIsZS5UZXJtaW5hdGVkPSJUZXJtaW5hdGVkIn0odGV8fCh0ZT17fSkpO2NsYXNzIGhle2NvbnN0cnVjdG9yKGUsdD17fSl7dGhpcy5kaXNwb3NlZD0hMSx0aGlzLl9jb250YWN0cz1bXSx0aGlzLl9yZXRyeUFmdGVyPXZvaWQgMCx0aGlzLl9zdGF0ZT10ZS5Jbml0aWFsLHRoaXMuX3dhaXRpbmc9ITEsdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXI9bmV3IHUsdGhpcy5fd2FpdGluZ0V2ZW50RW1pdHRlcj1uZXcgdSx0aGlzLnVzZXJBZ2VudD1lO2NvbnN0IHM9ZS5jb25maWd1cmF0aW9uLnVyaS5jbG9uZSgpO2lmKHMudXNlcj12b2lkIDAsdGhpcy5vcHRpb25zPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGhlLmRlZmF1bHRPcHRpb25zKCkpLHtyZWdpc3RyYXI6c30pLGhlLnN0cmlwVW5kZWZpbmVkUHJvcGVydGllcyh0KSksdGhpcy5vcHRpb25zLmV4dHJhQ29udGFjdEhlYWRlclBhcmFtcz0odGhpcy5vcHRpb25zLmV4dHJhQ29udGFjdEhlYWRlclBhcmFtc3x8W10pLnNsaWNlKCksdGhpcy5vcHRpb25zLmV4dHJhSGVhZGVycz0odGhpcy5vcHRpb25zLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksIXRoaXMub3B0aW9ucy5yZWdpc3RyYXIpdGhyb3cgbmV3IEVycm9yKCJSZWdpc3RyYXIgdW5kZWZpbmVkLiIpO2lmKHRoaXMub3B0aW9ucy5yZWdpc3RyYXI9dGhpcy5vcHRpb25zLnJlZ2lzdHJhci5jbG9uZSgpLHRoaXMub3B0aW9ucy5yZWdJZCYmIXRoaXMub3B0aW9ucy5pbnN0YW5jZUlkP3RoaXMub3B0aW9ucy5pbnN0YW5jZUlkPWhlLm5ld1VVSUQoKTohdGhpcy5vcHRpb25zLnJlZ0lkJiZ0aGlzLm9wdGlvbnMuaW5zdGFuY2VJZCYmKHRoaXMub3B0aW9ucy5yZWdJZD0xKSx0aGlzLm9wdGlvbnMuaW5zdGFuY2VJZCYmLTE9PT15LnBhcnNlKHRoaXMub3B0aW9ucy5pbnN0YW5jZUlkLCJ1dWlkIikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGluc3RhbmNlSWQuIik7aWYodGhpcy5vcHRpb25zLnJlZ0lkJiZ0aGlzLm9wdGlvbnMucmVnSWQ8MCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcmVnSWQuIik7Y29uc3QgaT10aGlzLm9wdGlvbnMucmVnaXN0cmFyLHI9dGhpcy5vcHRpb25zLnBhcmFtcyYmdGhpcy5vcHRpb25zLnBhcmFtcy5mcm9tVXJpfHxlLnVzZXJBZ2VudENvcmUuY29uZmlndXJhdGlvbi5hb3Isbj10aGlzLm9wdGlvbnMucGFyYW1zJiZ0aGlzLm9wdGlvbnMucGFyYW1zLnRvVXJpfHxlLmNvbmZpZ3VyYXRpb24udXJpLG89dGhpcy5vcHRpb25zLnBhcmFtc3x8e30sYT0odC5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpO2lmKHRoaXMucmVxdWVzdD1lLnVzZXJBZ2VudENvcmUubWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoTC5SRUdJU1RFUixpLHIsbixvLGEsdm9pZCAwKSx0aGlzLmV4cGlyZXM9dGhpcy5vcHRpb25zLmV4cGlyZXN8fGhlLmRlZmF1bHRFeHBpcmVzLHRoaXMuZXhwaXJlczwwKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBleHBpcmVzLiIpO2lmKHRoaXMucmVmcmVzaEZyZXF1ZW5jeT10aGlzLm9wdGlvbnMucmVmcmVzaEZyZXF1ZW5jeXx8aGUuZGVmYXVsdFJlZnJlc2hGcmVxdWVuY3ksdGhpcy5yZWZyZXNoRnJlcXVlbmN5PDUwfHx0aGlzLnJlZnJlc2hGcmVxdWVuY3k+OTkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHJlZnJlc2ggZnJlcXVlbmN5LiBUaGUgdmFsdWUgcmVwcmVzZW50cyBhIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4cGlyYXRpb24gdGltZSBhbmQgc2hvdWxkIGJlIGJldHdlZW4gNTAgYW5kIDk5LiIpO3RoaXMubG9nZ2VyPWUuZ2V0TG9nZ2VyKCJzaXAuUmVnaXN0ZXJlciIpLHRoaXMub3B0aW9ucy5sb2dDb25maWd1cmF0aW9uJiYodGhpcy5sb2dnZXIubG9nKCJDb25maWd1cmF0aW9uOiIpLE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucykuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9dGhpcy5vcHRpb25zW2VdO3N3aXRjaChlKXtjYXNlInJlZ2lzdHJhciI6dGhpcy5sb2dnZXIubG9nKCJceGI3ICIrZSsiOiAiK3QpO2JyZWFrO2RlZmF1bHQ6dGhpcy5sb2dnZXIubG9nKCJceGI3ICIrZSsiOiAiK0pTT04uc3RyaW5naWZ5KHQpKX19KSkpLHRoaXMuaWQ9dGhpcy5yZXF1ZXN0LmNhbGxJZCt0aGlzLnJlcXVlc3QuZnJvbS5wYXJhbWV0ZXJzLnRhZyx0aGlzLnVzZXJBZ2VudC5fcmVnaXN0ZXJlcnNbdGhpcy5pZF09dGhpc31zdGF0aWMgZGVmYXVsdE9wdGlvbnMoKXtyZXR1cm57ZXhwaXJlczpoZS5kZWZhdWx0RXhwaXJlcyxleHRyYUNvbnRhY3RIZWFkZXJQYXJhbXM6W10sZXh0cmFIZWFkZXJzOltdLGxvZ0NvbmZpZ3VyYXRpb246ITAsaW5zdGFuY2VJZDoiIixwYXJhbXM6e30scmVnSWQ6MCxyZWdpc3RyYXI6bmV3IHYoInNpcCIsImFub255bW91cyIsImFub255bW91cy5pbnZhbGlkIikscmVmcmVzaEZyZXF1ZW5jeTpoZS5kZWZhdWx0UmVmcmVzaEZyZXF1ZW5jeX19c3RhdGljIG5ld1VVSUQoKXtyZXR1cm4ieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Ii5yZXBsYWNlKC9beHldL2csKGU9Pntjb25zdCB0PU1hdGguZmxvb3IoMTYqTWF0aC5yYW5kb20oKSk7cmV0dXJuKCJ4Ij09PWU/dDp0JTQrOCkudG9TdHJpbmcoMTYpfSkpfXN0YXRpYyBzdHJpcFVuZGVmaW5lZFByb3BlcnRpZXMoZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZSgoKHQscyk9Pih2b2lkIDAhPT1lW3NdJiYodFtzXT1lW3NdKSx0KSkse30pfWdldCBjb250YWN0cygpe3JldHVybiB0aGlzLl9jb250YWN0cy5zbGljZSgpfWdldCByZXRyeUFmdGVyKCl7cmV0dXJuIHRoaXMuX3JldHJ5QWZ0ZXJ9Z2V0IHN0YXRlKCl7cmV0dXJuIHRoaXMuX3N0YXRlfWdldCBzdGF0ZUNoYW5nZSgpe3JldHVybiB0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcn1kaXNwb3NlKCl7cmV0dXJuIHRoaXMuZGlzcG9zZWQ/UHJvbWlzZS5yZXNvbHZlKCk6KHRoaXMuZGlzcG9zZWQ9ITAsdGhpcy5sb2dnZXIubG9nKGBSZWdpc3RlcmVyICR7dGhpcy5pZH0gaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSBpcyBiZWluZyBkaXNwb3NlZGApLGRlbGV0ZSB0aGlzLnVzZXJBZ2VudC5fcmVnaXN0ZXJlcnNbdGhpcy5pZF0sbmV3IFByb21pc2UoKGU9Pntjb25zdCB0PSgpPT57aWYoIXRoaXMud2FpdGluZyYmdGhpcy5fc3RhdGU9PT10ZS5SZWdpc3RlcmVkKXJldHVybiB0aGlzLnN0YXRlQ2hhbmdlLmFkZExpc3RlbmVyKCgoKT0+e3RoaXMudGVybWluYXRlZCgpLGUoKX0pLHtvbmNlOiEwfSksdm9pZCB0aGlzLnVucmVnaXN0ZXIoKTt0aGlzLnRlcm1pbmF0ZWQoKSxlKCl9O3RoaXMud2FpdGluZz90aGlzLndhaXRpbmdDaGFuZ2UuYWRkTGlzdGVuZXIoKCgpPT57dCgpfSkse29uY2U6ITB9KTp0KCl9KSkpfXJlZ2lzdGVyKGU9e30pe2lmKHRoaXMuc3RhdGU9PT10ZS5UZXJtaW5hdGVkKXRocm93IHRoaXMuc3RhdGVFcnJvcigpLG5ldyBFcnJvcigiUmVnaXN0ZXJlciB0ZXJtaW5hdGVkLiBVbmFibGUgdG8gcmVnaXN0ZXIuIik7aWYodGhpcy5kaXNwb3NlZCl0aHJvdyB0aGlzLnN0YXRlRXJyb3IoKSxuZXcgRXJyb3IoIlJlZ2lzdGVyZXIgZGlzcG9zZWQuIFVuYWJsZSB0byByZWdpc3Rlci4iKTtpZih0aGlzLndhaXRpbmcpe3RoaXMud2FpdGluZ1dhcm5pbmcoKTtjb25zdCBlPW5ldyBhKCJSRUdJU1RFUiByZXF1ZXN0IGFscmVhZHkgaW4gcHJvZ3Jlc3MsIHdhaXRpbmcgZm9yIGZpbmFsIHJlc3BvbnNlIik7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfWUucmVxdWVzdE9wdGlvbnMmJih0aGlzLm9wdGlvbnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMub3B0aW9ucyksZS5yZXF1ZXN0T3B0aW9ucykpO2NvbnN0IHQ9KHRoaXMub3B0aW9ucy5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpO3QucHVzaCgiQ29udGFjdDogIit0aGlzLmdlbmVyYXRlQ29udGFjdEhlYWRlcih0aGlzLmV4cGlyZXMpKSx0LnB1c2goIkFsbG93OiAiK1siQUNLIiwiQ0FOQ0VMIiwiSU5WSVRFIiwiTUVTU0FHRSIsIkJZRSIsIk9QVElPTlMiLCJJTkZPIiwiTk9USUZZIiwiUkVGRVIiXS50b1N0cmluZygpKSx0aGlzLnJlcXVlc3QuY3NlcSsrLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoImNzZXEiLHRoaXMucmVxdWVzdC5jc2VxKyIgUkVHSVNURVIiKSx0aGlzLnJlcXVlc3QuZXh0cmFIZWFkZXJzPXQsdGhpcy53YWl0aW5nVG9nZ2xlKCEwKTtjb25zdCBzPXRoaXMudXNlckFnZW50LnVzZXJBZ2VudENvcmUucmVnaXN0ZXIodGhpcy5yZXF1ZXN0LHtvbkFjY2VwdDp0PT57bGV0IHM7dC5tZXNzYWdlLmhhc0hlYWRlcigiZXhwaXJlcyIpJiYocz1OdW1iZXIodC5tZXNzYWdlLmdldEhlYWRlcigiZXhwaXJlcyIpKSksdGhpcy5fY29udGFjdHM9dC5tZXNzYWdlLmdldEhlYWRlcnMoImNvbnRhY3QiKTtsZXQgaSxyPXRoaXMuX2NvbnRhY3RzLmxlbmd0aDtpZighcilyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoIk5vIENvbnRhY3QgaGVhZGVyIGluIHJlc3BvbnNlIHRvIFJFR0lTVEVSLCBkcm9wcGluZyByZXNwb25zZS4iKSx2b2lkIHRoaXMudW5yZWdpc3RlcmVkKCk7Zm9yKDtyLS07KXtpZihpPXQubWVzc2FnZS5wYXJzZUhlYWRlcigiY29udGFjdCIsciksIWkpdGhyb3cgbmV3IEVycm9yKCJDb250YWN0IHVuZGVmaW5lZCIpO2lmKHRoaXMudXNlckFnZW50LmNvbnRhY3QucHViR3J1dSYmdyhpLnVyaSx0aGlzLnVzZXJBZ2VudC5jb250YWN0LnB1YkdydXUpKXtzPU51bWJlcihpLmdldFBhcmFtKCJleHBpcmVzIikpO2JyZWFrfWlmKCIiPT09dGhpcy51c2VyQWdlbnQuY29uZmlndXJhdGlvbi5jb250YWN0TmFtZSl7aWYoaS51cmkudXNlcj09PXRoaXMudXNlckFnZW50LmNvbnRhY3QudXJpLnVzZXIpe3M9TnVtYmVyKGkuZ2V0UGFyYW0oImV4cGlyZXMiKSk7YnJlYWt9fWVsc2UgaWYodyhpLnVyaSx0aGlzLnVzZXJBZ2VudC5jb250YWN0LnVyaSkpe3M9TnVtYmVyKGkuZ2V0UGFyYW0oImV4cGlyZXMiKSk7YnJlYWt9aT12b2lkIDB9aWYodm9pZCAwPT09aSlyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoIk5vIENvbnRhY3QgaGVhZGVyIHBvaW50aW5nIHRvIHVzLCBkcm9wcGluZyByZXNwb25zZSIpLHRoaXMudW5yZWdpc3RlcmVkKCksdm9pZCB0aGlzLndhaXRpbmdUb2dnbGUoITEpO2lmKHZvaWQgMD09PXMpcmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKCJDb250YWN0IHBvaW50aW5nIHRvIHVzIGlzIG1pc3NpbmcgZXhwaXJlcyBwYXJhbWV0ZXIsIGRyb3BwaW5nIHJlc3BvbnNlIiksdGhpcy51bnJlZ2lzdGVyZWQoKSx2b2lkIHRoaXMud2FpdGluZ1RvZ2dsZSghMSk7aWYoaS5oYXNQYXJhbSgidGVtcC1ncnV1Iikpe2NvbnN0IGU9aS5nZXRQYXJhbSgidGVtcC1ncnV1Iik7ZSYmKHRoaXMudXNlckFnZW50LmNvbnRhY3QudGVtcEdydXU9eS5VUklQYXJzZShlLnJlcGxhY2UoLyIvZywiIikpKX1pZihpLmhhc1BhcmFtKCJwdWItZ3J1dSIpKXtjb25zdCBlPWkuZ2V0UGFyYW0oInB1Yi1ncnV1Iik7ZSYmKHRoaXMudXNlckFnZW50LmNvbnRhY3QucHViR3J1dT15LlVSSVBhcnNlKGUucmVwbGFjZSgvIi9nLCIiKSkpfXRoaXMucmVnaXN0ZXJlZChzKSxlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25BY2NlcHQmJmUucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0KHQpLHRoaXMud2FpdGluZ1RvZ2dsZSghMSl9LG9uUHJvZ3Jlc3M6dD0+e2UucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblByb2dyZXNzJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblByb2dyZXNzKHQpfSxvblJlZGlyZWN0OnQ9Pnt0aGlzLmxvZ2dlci5lcnJvcigiUmVkaXJlY3QgcmVjZWl2ZWQuIE5vdCBzdXBwb3J0ZWQuIiksdGhpcy51bnJlZ2lzdGVyZWQoKSxlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWRpcmVjdCYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWRpcmVjdCh0KSx0aGlzLndhaXRpbmdUb2dnbGUoITEpfSxvblJlamVjdDp0PT57aWYoNDIzPT09dC5tZXNzYWdlLnN0YXR1c0NvZGUpcmV0dXJuIHQubWVzc2FnZS5oYXNIZWFkZXIoIm1pbi1leHBpcmVzIik/KHRoaXMuZXhwaXJlcz1OdW1iZXIodC5tZXNzYWdlLmdldEhlYWRlcigibWluLWV4cGlyZXMiKSksdGhpcy53YWl0aW5nVG9nZ2xlKCExKSx2b2lkIHRoaXMucmVnaXN0ZXIoKSk6KHRoaXMubG9nZ2VyLmVycm9yKCI0MjMgcmVzcG9uc2UgcmVjZWl2ZWQgZm9yIFJFR0lTVEVSIHdpdGhvdXQgTWluLUV4cGlyZXMsIGRyb3BwaW5nIHJlc3BvbnNlIiksdGhpcy51bnJlZ2lzdGVyZWQoKSx2b2lkIHRoaXMud2FpdGluZ1RvZ2dsZSghMSkpO3RoaXMubG9nZ2VyLndhcm4oYEZhaWxlZCB0byByZWdpc3Rlciwgc3RhdHVzIGNvZGUgJHt0Lm1lc3NhZ2Uuc3RhdHVzQ29kZX1gKTtsZXQgcz1OYU47aWYoNTAwPT09dC5tZXNzYWdlLnN0YXR1c0NvZGV8fDUwMz09PXQubWVzc2FnZS5zdGF0dXNDb2RlKXtjb25zdCBlPXQubWVzc2FnZS5nZXRIZWFkZXIoInJldHJ5LWFmdGVyIik7ZSYmKHM9TnVtYmVyLnBhcnNlSW50KGUsdm9pZCAwKSl9dGhpcy5fcmV0cnlBZnRlcj1pc05hTihzKT92b2lkIDA6cyx0aGlzLnVucmVnaXN0ZXJlZCgpLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlamVjdCYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QodCksdGhpcy5fcmV0cnlBZnRlcj12b2lkIDAsdGhpcy53YWl0aW5nVG9nZ2xlKCExKX0sb25Ucnlpbmc6dD0+e2UucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblRyeWluZyYmZS5yZXF1ZXN0RGVsZWdhdGUub25UcnlpbmcodCl9fSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShzKX11bnJlZ2lzdGVyKGU9e30pe2lmKHRoaXMuc3RhdGU9PT10ZS5UZXJtaW5hdGVkKXRocm93IHRoaXMuc3RhdGVFcnJvcigpLG5ldyBFcnJvcigiUmVnaXN0ZXJlciB0ZXJtaW5hdGVkLiBVbmFibGUgdG8gcmVnaXN0ZXIuIik7aWYodGhpcy5kaXNwb3NlZCYmdGhpcy5zdGF0ZSE9PXRlLlJlZ2lzdGVyZWQpdGhyb3cgdGhpcy5zdGF0ZUVycm9yKCksbmV3IEVycm9yKCJSZWdpc3RlcmVyIGRpc3Bvc2VkLiBVbmFibGUgdG8gcmVnaXN0ZXIuIik7aWYodGhpcy53YWl0aW5nKXt0aGlzLndhaXRpbmdXYXJuaW5nKCk7Y29uc3QgZT1uZXcgYSgiUkVHSVNURVIgcmVxdWVzdCBhbHJlYWR5IGluIHByb2dyZXNzLCB3YWl0aW5nIGZvciBmaW5hbCByZXNwb25zZSIpO3JldHVybiBQcm9taXNlLnJlamVjdChlKX10aGlzLl9zdGF0ZT09PXRlLlJlZ2lzdGVyZWR8fGUuYWxsfHx0aGlzLmxvZ2dlci53YXJuKCJOb3QgY3VycmVudGx5IHJlZ2lzdGVyZWQsIGJ1dCBzZW5kaW5nIGFuIHVucmVnaXN0ZXIgYW55d2F5LiIpO2NvbnN0IHQ9KGUucmVxdWVzdE9wdGlvbnMmJmUucmVxdWVzdE9wdGlvbnMuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKTt0aGlzLnJlcXVlc3QuZXh0cmFIZWFkZXJzPXQsZS5hbGw/KHQucHVzaCgiQ29udGFjdDogKiIpLHQucHVzaCgiRXhwaXJlczogMCIpKTp0LnB1c2goIkNvbnRhY3Q6ICIrdGhpcy5nZW5lcmF0ZUNvbnRhY3RIZWFkZXIoMCkpLHRoaXMucmVxdWVzdC5jc2VxKyssdGhpcy5yZXF1ZXN0LnNldEhlYWRlcigiY3NlcSIsdGhpcy5yZXF1ZXN0LmNzZXErIiBSRUdJU1RFUiIpLHZvaWQgMCE9PXRoaXMucmVnaXN0cmF0aW9uVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25UaW1lciksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj12b2lkIDApLHRoaXMud2FpdGluZ1RvZ2dsZSghMCk7Y29uc3Qgcz10aGlzLnVzZXJBZ2VudC51c2VyQWdlbnRDb3JlLnJlZ2lzdGVyKHRoaXMucmVxdWVzdCx7b25BY2NlcHQ6dD0+e3RoaXMuX2NvbnRhY3RzPXQubWVzc2FnZS5nZXRIZWFkZXJzKCJjb250YWN0IiksdGhpcy51bnJlZ2lzdGVyZWQoKSxlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25BY2NlcHQmJmUucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0KHQpLHRoaXMud2FpdGluZ1RvZ2dsZSghMSl9LG9uUHJvZ3Jlc3M6dD0+e2UucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblByb2dyZXNzJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblByb2dyZXNzKHQpfSxvblJlZGlyZWN0OnQ9Pnt0aGlzLmxvZ2dlci5lcnJvcigiVW5yZWdpc3RlciByZWRpcmVjdGVkLiBOb3QgY3VycmVudGx5IHN1cHBvcnRlZC4iKSx0aGlzLnVucmVnaXN0ZXJlZCgpLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlZGlyZWN0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlZGlyZWN0KHQpLHRoaXMud2FpdGluZ1RvZ2dsZSghMSl9LG9uUmVqZWN0OnQ9Pnt0aGlzLmxvZ2dlci5lcnJvcihgVW5yZWdpc3RlciByZWplY3RlZCB3aXRoIHN0YXR1cyBjb2RlICR7dC5tZXNzYWdlLnN0YXR1c0NvZGV9YCksdGhpcy51bnJlZ2lzdGVyZWQoKSxlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KHQpLHRoaXMud2FpdGluZ1RvZ2dsZSghMSl9LG9uVHJ5aW5nOnQ9PntlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25UcnlpbmcmJmUucmVxdWVzdERlbGVnYXRlLm9uVHJ5aW5nKHQpfX0pO3JldHVybiBQcm9taXNlLnJlc29sdmUocyl9Y2xlYXJUaW1lcnMoKXt2b2lkIDAhPT10aGlzLnJlZ2lzdHJhdGlvblRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpLHRoaXMucmVnaXN0cmF0aW9uVGltZXI9dm9pZCAwKSx2b2lkIDAhPT10aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciksdGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXI9dm9pZCAwKX1nZW5lcmF0ZUNvbnRhY3RIZWFkZXIoZSl7bGV0IHQ9dGhpcy51c2VyQWdlbnQuY29udGFjdC50b1N0cmluZygpO3JldHVybiB0aGlzLm9wdGlvbnMucmVnSWQmJnRoaXMub3B0aW9ucy5pbnN0YW5jZUlkJiYodCs9IjtyZWctaWQ9Iit0aGlzLm9wdGlvbnMucmVnSWQsdCs9Jzsrc2lwLmluc3RhbmNlPSI8dXJuOnV1aWQ6Jyt0aGlzLm9wdGlvbnMuaW5zdGFuY2VJZCsnPiInKSx0aGlzLm9wdGlvbnMuZXh0cmFDb250YWN0SGVhZGVyUGFyYW1zJiZ0aGlzLm9wdGlvbnMuZXh0cmFDb250YWN0SGVhZGVyUGFyYW1zLmZvckVhY2goKGU9Pnt0Kz0iOyIrZX0pKSx0Kz0iO2V4cGlyZXM9IitlLHR9cmVnaXN0ZXJlZChlKXt0aGlzLmNsZWFyVGltZXJzKCksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1zZXRUaW1lb3V0KCgoKT0+e3RoaXMucmVnaXN0cmF0aW9uVGltZXI9dm9pZCAwLHRoaXMucmVnaXN0ZXIoKX0pLHRoaXMucmVmcmVzaEZyZXF1ZW5jeS8xMDAqZSoxZTMpLHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyPXNldFRpbWVvdXQoKCgpPT57dGhpcy5sb2dnZXIud2FybigiUmVnaXN0cmF0aW9uIGV4cGlyZWQiKSx0aGlzLnVucmVnaXN0ZXJlZCgpfSksMWUzKmUpLHRoaXMuX3N0YXRlIT09dGUuUmVnaXN0ZXJlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24odGUuUmVnaXN0ZXJlZCl9dW5yZWdpc3RlcmVkKCl7dGhpcy5jbGVhclRpbWVycygpLHRoaXMuX3N0YXRlIT09dGUuVW5yZWdpc3RlcmVkJiZ0aGlzLnN0YXRlVHJhbnNpdGlvbih0ZS5VbnJlZ2lzdGVyZWQpfXRlcm1pbmF0ZWQoKXt0aGlzLmNsZWFyVGltZXJzKCksdGhpcy5fc3RhdGUhPT10ZS5UZXJtaW5hdGVkJiZ0aGlzLnN0YXRlVHJhbnNpdGlvbih0ZS5UZXJtaW5hdGVkKX1zdGF0ZVRyYW5zaXRpb24oZSl7Y29uc3QgdD0oKT0+e3Rocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLl9zdGF0ZX0gdG8gJHtlfWApfTtzd2l0Y2godGhpcy5fc3RhdGUpe2Nhc2UgdGUuSW5pdGlhbDplIT09dGUuUmVnaXN0ZXJlZCYmZSE9PXRlLlVucmVnaXN0ZXJlZCYmZSE9PXRlLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIHRlLlJlZ2lzdGVyZWQ6ZSE9PXRlLlVucmVnaXN0ZXJlZCYmZSE9PXRlLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIHRlLlVucmVnaXN0ZXJlZDplIT09dGUuUmVnaXN0ZXJlZCYmZSE9PXRlLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIHRlLlRlcm1pbmF0ZWQ6dCgpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbnJlY29nbml6ZWQgc3RhdGUuIil9dGhpcy5fc3RhdGU9ZSx0aGlzLmxvZ2dlci5sb2coYFJlZ2lzdHJhdGlvbiB0cmFuc2l0aW9uZWQgdG8gc3RhdGUgJHt0aGlzLl9zdGF0ZX1gKSx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlci5lbWl0KHRoaXMuX3N0YXRlKSxlPT09dGUuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCl9Z2V0IHdhaXRpbmcoKXtyZXR1cm4gdGhpcy5fd2FpdGluZ31nZXQgd2FpdGluZ0NoYW5nZSgpe3JldHVybiB0aGlzLl93YWl0aW5nRXZlbnRFbWl0dGVyfXdhaXRpbmdUb2dnbGUoZSl7aWYodGhpcy5fd2FpdGluZz09PWUpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHdhaXRpbmcgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fd2FpdGluZ30gdG8gJHtlfWApO3RoaXMuX3dhaXRpbmc9ZSx0aGlzLmxvZ2dlci5sb2coYFdhaXRpbmcgdG9nZ2xlZCB0byAke3RoaXMuX3dhaXRpbmd9YCksdGhpcy5fd2FpdGluZ0V2ZW50RW1pdHRlci5lbWl0KHRoaXMuX3dhaXRpbmcpfXdhaXRpbmdXYXJuaW5nKCl7bGV0IGU9IkFuIGF0dGVtcHQgd2FzIG1hZGUgdG8gc2VuZCBhIFJFR0lTVEVSIHJlcXVlc3Qgd2hpbGUgYSBwcmlvciBvbmUgd2FzIHN0aWxsIGluIHByb2dyZXNzLiI7ZSs9IiBSRkMgMzI2MSByZXF1aXJlcyBVQXMgTVVTVCBOT1Qgc2VuZCBhIG5ldyByZWdpc3RyYXRpb24gdW50aWwgdGhleSBoYXZlIHJlY2VpdmVkIGEgZmluYWwgcmVzcG9uc2UiLGUrPSIgZnJvbSB0aGUgcmVnaXN0cmFyIGZvciB0aGUgcHJldmlvdXMgb25lIG9yIHRoZSBwcmV2aW91cyBSRUdJU1RFUiByZXF1ZXN0IGhhcyB0aW1lZCBvdXQuIixlKz0iIE5vdGUgdGhhdCBpZiB0aGUgdHJhbnNwb3J0IGRpc2Nvbm5lY3RzLCB5b3Ugc3RpbGwgbXVzdCB3YWl0IGZvciB0aGUgcHJpb3IgcmVxdWVzdCB0byB0aW1lIG91dCBiZWZvcmUiLGUrPSIgc2VuZGluZyBhIG5ldyBSRUdJU1RFUiByZXF1ZXN0IG9yIGFsdGVybmF0aXZlbHkgZGlzcG9zZSBvZiB0aGUgY3VycmVudCBSZWdpc3RlcmVyIGFuZCBjcmVhdGUgYSBuZXcgUmVnaXN0ZXJlci4iLHRoaXMubG9nZ2VyLndhcm4oIkFuIGF0dGVtcHQgd2FzIG1hZGUgdG8gc2VuZCBhIFJFR0lTVEVSIHJlcXVlc3Qgd2hpbGUgYSBwcmlvciBvbmUgd2FzIHN0aWxsIGluIHByb2dyZXNzLiBSRkMgMzI2MSByZXF1aXJlcyBVQXMgTVVTVCBOT1Qgc2VuZCBhIG5ldyByZWdpc3RyYXRpb24gdW50aWwgdGhleSBoYXZlIHJlY2VpdmVkIGEgZmluYWwgcmVzcG9uc2UgZnJvbSB0aGUgcmVnaXN0cmFyIGZvciB0aGUgcHJldmlvdXMgb25lIG9yIHRoZSBwcmV2aW91cyBSRUdJU1RFUiByZXF1ZXN0IGhhcyB0aW1lZCBvdXQuIE5vdGUgdGhhdCBpZiB0aGUgdHJhbnNwb3J0IGRpc2Nvbm5lY3RzLCB5b3Ugc3RpbGwgbXVzdCB3YWl0IGZvciB0aGUgcHJpb3IgcmVxdWVzdCB0byB0aW1lIG91dCBiZWZvcmUgc2VuZGluZyBhIG5ldyBSRUdJU1RFUiByZXF1ZXN0IG9yIGFsdGVybmF0aXZlbHkgZGlzcG9zZSBvZiB0aGUgY3VycmVudCBSZWdpc3RlcmVyIGFuZCBjcmVhdGUgYSBuZXcgUmVnaXN0ZXJlci4iKX1zdGF0ZUVycm9yKCl7bGV0IGU9YEFuIGF0dGVtcHQgd2FzIG1hZGUgdG8gc2VuZCBhIFJFR0lTVEVSIHJlcXVlc3Qgd2hlbiB0aGUgUmVnaXN0ZXJlciAke3RoaXMuc3RhdGU9PT10ZS5UZXJtaW5hdGVkPyJpcyBpbiAnVGVybWluYXRlZCcgc3RhdGUiOiJoYXMgYmVlbiBkaXNwb3NlZCJ9LmA7ZSs9IiBUaGUgUmVnaXN0ZXJlciB0cmFuc2l0aW9ucyB0byAnVGVybWluYXRlZCcgd2hlbiBSZWdpc3RlcmVyLmRpc3Bvc2UoKSBpcyBjYWxsZWQuIixlKz0iIFBlcmhhcHMgeW91IGNhbGxlZCBVc2VyQWdlbnQuc3RvcCgpIHdoaWNoIGRpcHNvc2VzIG9mIGFsbCBSZWdpc3RlcmVycz8iLHRoaXMubG9nZ2VyLmVycm9yKGUpfX1oZS5kZWZhdWx0RXhwaXJlcz02MDAsaGUuZGVmYXVsdFJlZnJlc2hGcmVxdWVuY3k9OTksZnVuY3Rpb24oZSl7ZS5Jbml0aWFsPSJJbml0aWFsIixlLk5vdGlmeVdhaXQ9Ik5vdGlmeVdhaXQiLGUuUGVuZGluZz0iUGVuZGluZyIsZS5BY3RpdmU9IkFjdGl2ZSIsZS5UZXJtaW5hdGVkPSJUZXJtaW5hdGVkIn0oc2V8fChzZT17fSkpLGZ1bmN0aW9uKGUpe2UuSW5pdGlhbD0iSW5pdGlhbCIsZS5Ob3RpZnlXYWl0PSJOb3RpZnlXYWl0IixlLlN1YnNjcmliZWQ9IlN1YnNjcmliZWQiLGUuVGVybWluYXRlZD0iVGVybWluYXRlZCJ9KGllfHwoaWU9e30pKTtjbGFzcyBkZXtjb25zdHJ1Y3RvcihlLHQ9e30pe3RoaXMuX2Rpc3Bvc2VkPSExLHRoaXMuX3N0YXRlPWllLkluaXRpYWwsdGhpcy5fbG9nZ2VyPWUuZ2V0TG9nZ2VyKCJzaXAuU3Vic2NyaXB0aW9uIiksdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXI9bmV3IHUsdGhpcy5fdXNlckFnZW50PWUsdGhpcy5kZWxlZ2F0ZT10LmRlbGVnYXRlfWRpc3Bvc2UoKXtyZXR1cm4gdGhpcy5fZGlzcG9zZWR8fCh0aGlzLl9kaXNwb3NlZD0hMCx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKSksUHJvbWlzZS5yZXNvbHZlKCl9Z2V0IGRpYWxvZygpe3JldHVybiB0aGlzLl9kaWFsb2d9Z2V0IGRpc3Bvc2VkKCl7cmV0dXJuIHRoaXMuX2Rpc3Bvc2VkfWdldCBzdGF0ZSgpe3JldHVybiB0aGlzLl9zdGF0ZX1nZXQgc3RhdGVDaGFuZ2UoKXtyZXR1cm4gdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXJ9c3RhdGVUcmFuc2l0aW9uKGUpe2NvbnN0IHQ9KCk9Pnt0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fc3RhdGV9IHRvICR7ZX1gKX07c3dpdGNoKHRoaXMuX3N0YXRlKXtjYXNlIGllLkluaXRpYWw6ZSE9PWllLk5vdGlmeVdhaXQmJmUhPT1pZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBpZS5Ob3RpZnlXYWl0OmUhPT1pZS5TdWJzY3JpYmVkJiZlIT09aWUuVGVybWluYXRlZCYmdCgpO2JyZWFrO2Nhc2UgaWUuU3Vic2NyaWJlZDplIT09aWUuVGVybWluYXRlZCYmdCgpO2JyZWFrO2Nhc2UgaWUuVGVybWluYXRlZDp0KCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVucmVjb2duaXplZCBzdGF0ZS4iKX10aGlzLl9zdGF0ZSE9PWUmJih0aGlzLl9zdGF0ZT1lLHRoaXMuX2xvZ2dlci5sb2coYFN1YnNjcmlwdGlvbiAke3RoaXMuX2RpYWxvZz90aGlzLl9kaWFsb2cuaWQ6dm9pZCAwfSB0cmFuc2l0aW9uZWQgdG8gJHt0aGlzLl9zdGF0ZX1gKSx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlci5lbWl0KHRoaXMuX3N0YXRlKSxlPT09aWUuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCkpfX1jbGFzcyBsZSBleHRlbmRzIGRle2NvbnN0cnVjdG9yKGUsdCxzLGk9e30pe3N1cGVyKGUsaSksdGhpcy5ib2R5PXZvaWQgMCx0aGlzLmxvZ2dlcj1lLmdldExvZ2dlcigic2lwLlN1YnNjcmliZXIiKSxpLmJvZHkmJih0aGlzLmJvZHk9e2JvZHk6aS5ib2R5LGNvbnRlbnRUeXBlOmkuY29udGVudFR5cGU/aS5jb250ZW50VHlwZToiYXBwbGljYXRpb24vc2RwIn0pLHRoaXMudGFyZ2V0VVJJPXQsdGhpcy5ldmVudD1zLHZvaWQgMD09PWkuZXhwaXJlcz90aGlzLmV4cGlyZXM9MzYwMDoibnVtYmVyIiE9dHlwZW9mIGkuZXhwaXJlcz8odGhpcy5sb2dnZXIud2FybignT3B0aW9uICJleHBpcmVzIiBtdXN0IGJlIGEgbnVtYmVyLiBVc2luZyBkZWZhdWx0IG9mIDM2MDAuJyksdGhpcy5leHBpcmVzPTM2MDApOnRoaXMuZXhwaXJlcz1pLmV4cGlyZXMsdGhpcy5leHRyYUhlYWRlcnM9KGkuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSx0aGlzLnN1YnNjcmliZXJSZXF1ZXN0PXRoaXMuaW5pdFN1YnNjcmliZXJSZXF1ZXN0KCksdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlPXRoaXMuc3Vic2NyaWJlclJlcXVlc3QubWVzc2FnZSx0aGlzLmlkPXRoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5jYWxsSWQrdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmZyb20ucGFyYW1ldGVycy50YWcrdGhpcy5ldmVudCx0aGlzLl91c2VyQWdlbnQuX3N1YnNjcmlwdGlvbnNbdGhpcy5pZF09dGhpc31kaXNwb3NlKCl7cmV0dXJuIHRoaXMuZGlzcG9zZWQ/UHJvbWlzZS5yZXNvbHZlKCk6KHRoaXMubG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uICR7dGhpcy5pZH0gaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSBpcyBiZWluZyBkaXNwb3NlZGApLGRlbGV0ZSB0aGlzLl91c2VyQWdlbnQuX3N1YnNjcmlwdGlvbnNbdGhpcy5pZF0sdGhpcy5yZXRyeUFmdGVyVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5yZXRyeUFmdGVyVGltZXIpLHRoaXMucmV0cnlBZnRlclRpbWVyPXZvaWQgMCksdGhpcy5zdWJzY3JpYmVyUmVxdWVzdC5kaXNwb3NlKCksc3VwZXIuZGlzcG9zZSgpLnRoZW4oKCgpPT57aWYodGhpcy5zdGF0ZT09PWllLlN1YnNjcmliZWQpe2lmKCF0aGlzLl9kaWFsb2cpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO2lmKHRoaXMuX2RpYWxvZy5zdWJzY3JpcHRpb25TdGF0ZT09PXNlLlBlbmRpbmd8fHRoaXMuX2RpYWxvZy5zdWJzY3JpcHRpb25TdGF0ZT09PXNlLkFjdGl2ZSl7Y29uc3QgZT10aGlzLl9kaWFsb2c7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxzKT0+e2UuZGVsZWdhdGU9e29uVGVybWluYXRlZDooKT0+dCgpfSxlLnVuc3Vic2NyaWJlKCl9KSl9fX0pKSl9c3Vic2NyaWJlKGU9e30pe3N3aXRjaCh0aGlzLnN1YnNjcmliZXJSZXF1ZXN0LnN0YXRlKXtjYXNlIHNlLkluaXRpYWw6dGhpcy5zdGF0ZT09PWllLkluaXRpYWwmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKGllLk5vdGlmeVdhaXQpLHRoaXMuc3Vic2NyaWJlclJlcXVlc3Quc3Vic2NyaWJlKCkudGhlbigoZT0+e2Uuc3VjY2Vzcz8oZS5zdWNjZXNzLnN1YnNjcmlwdGlvbiYmKHRoaXMuX2RpYWxvZz1lLnN1Y2Nlc3Muc3Vic2NyaXB0aW9uLHRoaXMuX2RpYWxvZy5kZWxlZ2F0ZT17b25Ob3RpZnk6ZT0+dGhpcy5vbk5vdGlmeShlKSxvblJlZnJlc2g6ZT0+dGhpcy5vblJlZnJlc2goZSksb25UZXJtaW5hdGVkOigpPT57dGhpcy5zdGF0ZSE9PWllLlRlcm1pbmF0ZWQmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKGllLlRlcm1pbmF0ZWQpfX0pLHRoaXMub25Ob3RpZnkoZS5zdWNjZXNzLnJlcXVlc3QpKTplLmZhaWx1cmUmJnRoaXMudW5zdWJzY3JpYmUoKX0pKTticmVhaztjYXNlIHNlLk5vdGlmeVdhaXQ6Y2FzZSBzZS5QZW5kaW5nOmJyZWFrO2Nhc2Ugc2UuQWN0aXZlOmlmKHRoaXMuX2RpYWxvZyl7dGhpcy5fZGlhbG9nLnJlZnJlc2goKS5kZWxlZ2F0ZT17b25BY2NlcHQ6ZT0+dGhpcy5vbkFjY2VwdGVkKGUpLG9uUmVkaXJlY3Q6ZT0+dGhpcy51bnN1YnNjcmliZSgpLG9uUmVqZWN0OmU9PnRoaXMudW5zdWJzY3JpYmUoKX19YnJlYWs7Y2FzZSBzZS5UZXJtaW5hdGVkOn1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9dW5zdWJzY3JpYmUoZT17fSl7aWYodGhpcy5kaXNwb3NlZClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7c3dpdGNoKHRoaXMuc3Vic2NyaWJlclJlcXVlc3Quc3RhdGUpe2Nhc2Ugc2UuSW5pdGlhbDpjYXNlIHNlLk5vdGlmeVdhaXQ6YnJlYWs7Y2FzZSBzZS5QZW5kaW5nOmNhc2Ugc2UuQWN0aXZlOnRoaXMuX2RpYWxvZyYmdGhpcy5fZGlhbG9nLnVuc3Vic2NyaWJlKCk7YnJlYWs7Y2FzZSBzZS5UZXJtaW5hdGVkOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlLiIpfXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihpZS5UZXJtaW5hdGVkKSxQcm9taXNlLnJlc29sdmUoKX1fcmVmcmVzaCgpe3JldHVybiB0aGlzLnN1YnNjcmliZXJSZXF1ZXN0LnN0YXRlPT09c2UuQWN0aXZlP3RoaXMuc3Vic2NyaWJlKCk6UHJvbWlzZS5yZXNvbHZlKCl9b25BY2NlcHRlZChlKXt9b25Ob3RpZnkoZSl7aWYodGhpcy5kaXNwb3NlZClyZXR1cm4gdm9pZCBlLmFjY2VwdCgpO2lmKHRoaXMuc3RhdGUhPT1pZS5TdWJzY3JpYmVkJiZ0aGlzLnN0YXRlVHJhbnNpdGlvbihpZS5TdWJzY3JpYmVkKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KXtjb25zdCB0PW5ldyBWKGUpO3RoaXMuZGVsZWdhdGUub25Ob3RpZnkodCl9ZWxzZSBlLmFjY2VwdCgpO2NvbnN0IHQ9ZS5tZXNzYWdlLnBhcnNlSGVhZGVyKCJTdWJzY3JpcHRpb24tU3RhdGUiKTtpZih0JiZ0LnN0YXRlKXN3aXRjaCh0LnN0YXRlKXtjYXNlInRlcm1pbmF0ZWQiOmlmKHQucmVhc29uKXN3aXRjaCh0aGlzLmxvZ2dlci5sb2coYFRlcm1pbmF0ZWQgc3Vic2NyaXB0aW9uIHdpdGggcmVhc29uICR7dC5yZWFzb259YCksdC5yZWFzb24pe2Nhc2UiZGVhY3RpdmF0ZWQiOmNhc2UidGltZW91dCI6cmV0dXJuIHRoaXMuaW5pdFN1YnNjcmliZXJSZXF1ZXN0KCksdm9pZCB0aGlzLnN1YnNjcmliZSgpO2Nhc2UicHJvYmF0aW9uIjpjYXNlImdpdmV1cCI6cmV0dXJuIHRoaXMuaW5pdFN1YnNjcmliZXJSZXF1ZXN0KCksdm9pZCh0LnBhcmFtcyYmdC5wYXJhbXNbInJldHJ5LWFmdGVyIl0/dGhpcy5yZXRyeUFmdGVyVGltZXI9c2V0VGltZW91dCgoKCk9Pnt0aGlzLnN1YnNjcmliZSgpfSksdC5wYXJhbXNbInJldHJ5LWFmdGVyIl0pOnRoaXMuc3Vic2NyaWJlKCkpfXRoaXMudW5zdWJzY3JpYmUoKX19b25SZWZyZXNoKGUpe2UuZGVsZWdhdGU9e29uQWNjZXB0OmU9PnRoaXMub25BY2NlcHRlZChlKX19aW5pdFN1YnNjcmliZXJSZXF1ZXN0KCl7Y29uc3QgZT17ZXh0cmFIZWFkZXJzOnRoaXMuZXh0cmFIZWFkZXJzLGJvZHk6dGhpcy5ib2R5P1AodGhpcy5ib2R5KTp2b2lkIDB9O3JldHVybiB0aGlzLnN1YnNjcmliZXJSZXF1ZXN0PW5ldyBnZSh0aGlzLl91c2VyQWdlbnQudXNlckFnZW50Q29yZSx0aGlzLnRhcmdldFVSSSx0aGlzLmV2ZW50LHRoaXMuZXhwaXJlcyxlKSx0aGlzLnN1YnNjcmliZXJSZXF1ZXN0LmRlbGVnYXRlPXtvbkFjY2VwdDplPT50aGlzLm9uQWNjZXB0ZWQoZSl9LHRoaXMuc3Vic2NyaWJlclJlcXVlc3R9fWNsYXNzIGdle2NvbnN0cnVjdG9yKGUsdCxzLGkscixuKXt0aGlzLmNvcmU9ZSx0aGlzLnRhcmdldD10LHRoaXMuZXZlbnQ9cyx0aGlzLmV4cGlyZXM9aSx0aGlzLnN1YnNjcmliZWQ9ITEsdGhpcy5sb2dnZXI9ZS5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcigic2lwLlN1YnNjcmliZXIiKSx0aGlzLmRlbGVnYXRlPW47Y29uc3Qgbz0iQWxsb3c6ICIrQi50b1N0cmluZygpLGE9KHImJnIuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKTthLnB1c2gobyksYS5wdXNoKCJFdmVudDogIit0aGlzLmV2ZW50KSxhLnB1c2goIkV4cGlyZXM6ICIrdGhpcy5leHBpcmVzKSxhLnB1c2goIkNvbnRhY3Q6ICIrdGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24uY29udGFjdC50b1N0cmluZygpKTtjb25zdCBjPXImJnIuYm9keTt0aGlzLm1lc3NhZ2U9ZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShMLlNVQlNDUklCRSx0aGlzLnRhcmdldCx0aGlzLmNvcmUuY29uZmlndXJhdGlvbi5hb3IsdGhpcy50YXJnZXQse30sYSxjKX1kaXNwb3NlKCl7dGhpcy5yZXF1ZXN0JiYodGhpcy5yZXF1ZXN0LndhaXROb3RpZnlTdG9wKCksdGhpcy5yZXF1ZXN0LmRpc3Bvc2UoKSx0aGlzLnJlcXVlc3Q9dm9pZCAwKX1nZXQgc3RhdGUoKXtyZXR1cm4gdGhpcy5zdWJzY3JpcHRpb24/dGhpcy5zdWJzY3JpcHRpb24uc3Vic2NyaXB0aW9uU3RhdGU6dGhpcy5zdWJzY3JpYmVkP3NlLk5vdGlmeVdhaXQ6c2UuSW5pdGlhbH1zdWJzY3JpYmUoKXtyZXR1cm4gdGhpcy5zdWJzY3JpYmVkP1Byb21pc2UucmVqZWN0KG5ldyBFcnJvcigiTm90IGluIGluaXRpYWwgc3RhdGUuIERpZCB5b3UgY2FsbCBzdWJzY3JpYmUgbW9yZSB0aGFuIG9uY2U/IikpOih0aGlzLnN1YnNjcmliZWQ9ITAsbmV3IFByb21pc2UoKGU9PntpZighdGhpcy5tZXNzYWdlKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSB1bmRlZmluZWQuIik7dGhpcy5yZXF1ZXN0PXRoaXMuY29yZS5zdWJzY3JpYmUodGhpcy5tZXNzYWdlLHtvbkFjY2VwdDplPT57dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdChlKX0sb25Ob3RpZnk6dD0+e3RoaXMuc3Vic2NyaXB0aW9uPXQuc3Vic2NyaXB0aW9uLHRoaXMuc3Vic2NyaXB0aW9uJiYodGhpcy5zdWJzY3JpcHRpb24uYXV0b1JlZnJlc2g9ITApLGUoe3N1Y2Nlc3M6dH0pfSxvbk5vdGlmeVRpbWVvdXQ6KCk9PntlKHtmYWlsdXJlOnt9fSl9LG9uUmVkaXJlY3Q6dD0+e2Uoe2ZhaWx1cmU6e3Jlc3BvbnNlOnR9fSl9LG9uUmVqZWN0OnQ9PntlKHtmYWlsdXJlOntyZXNwb25zZTp0fX0pfX0pfSkpKX19IWZ1bmN0aW9uKGUpe2UuQ29ubmVjdGluZz0iQ29ubmVjdGluZyIsZS5Db25uZWN0ZWQ9IkNvbm5lY3RlZCIsZS5EaXNjb25uZWN0aW5nPSJEaXNjb25uZWN0aW5nIixlLkRpc2Nvbm5lY3RlZD0iRGlzY29ubmVjdGVkIn0ocmV8fChyZT17fSkpLGZ1bmN0aW9uKGUpe2UuU3RhcnRlZD0iU3RhcnRlZCIsZS5TdG9wcGVkPSJTdG9wcGVkIn0obmV8fChuZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5lcnJvcj0wXT0iZXJyb3IiLGVbZS53YXJuPTFdPSJ3YXJuIixlW2UubG9nPTJdPSJsb2ciLGVbZS5kZWJ1Zz0zXT0iZGVidWcifShvZXx8KG9lPXt9KSk7Y2xhc3MgdWV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMubG9nZ2VyPWUsdGhpcy5jYXRlZ29yeT10LHRoaXMubGFiZWw9c31lcnJvcihlKXt0aGlzLmdlbmVyaWNMb2cob2UuZXJyb3IsZSl9d2FybihlKXt0aGlzLmdlbmVyaWNMb2cob2Uud2FybixlKX1sb2coZSl7dGhpcy5nZW5lcmljTG9nKG9lLmxvZyxlKX1kZWJ1ZyhlKXt0aGlzLmdlbmVyaWNMb2cob2UuZGVidWcsZSl9Z2VuZXJpY0xvZyhlLHQpe3RoaXMubG9nZ2VyLmdlbmVyaWNMb2coZSx0aGlzLmNhdGVnb3J5LHRoaXMubGFiZWwsdCl9Z2V0IGxldmVsKCl7cmV0dXJuIHRoaXMubG9nZ2VyLmxldmVsfXNldCBsZXZlbChlKXt0aGlzLmxvZ2dlci5sZXZlbD1lfX1jbGFzcyBwZXtjb25zdHJ1Y3Rvcigpe3RoaXMuYnVpbHRpbkVuYWJsZWQ9ITAsdGhpcy5fbGV2ZWw9b2UubG9nLHRoaXMubG9nZ2Vycz17fSx0aGlzLmxvZ2dlcj10aGlzLmdldExvZ2dlcigic2lwOmxvZ2dlcmZhY3RvcnkiKX1nZXQgbGV2ZWwoKXtyZXR1cm4gdGhpcy5fbGV2ZWx9c2V0IGxldmVsKGUpe2U+PTAmJmU8PTM/dGhpcy5fbGV2ZWw9ZTplPjM/dGhpcy5fbGV2ZWw9MzpvZS5oYXNPd25Qcm9wZXJ0eShlKT90aGlzLl9sZXZlbD1lOnRoaXMubG9nZ2VyLmVycm9yKCJpbnZhbGlkICdsZXZlbCcgcGFyYW1ldGVyIHZhbHVlOiAiK0pTT04uc3RyaW5naWZ5KGUpKX1nZXQgY29ubmVjdG9yKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rvcn1zZXQgY29ubmVjdG9yKGUpe2U/ImZ1bmN0aW9uIj09dHlwZW9mIGU/dGhpcy5fY29ubmVjdG9yPWU6dGhpcy5sb2dnZXIuZXJyb3IoImludmFsaWQgJ2Nvbm5lY3RvcicgcGFyYW1ldGVyIHZhbHVlOiAiK0pTT04uc3RyaW5naWZ5KGUpKTp0aGlzLl9jb25uZWN0b3I9dm9pZCAwfWdldExvZ2dlcihlLHQpe2lmKHQmJjM9PT10aGlzLmxldmVsKXJldHVybiBuZXcgdWUodGhpcyxlLHQpO2lmKHRoaXMubG9nZ2Vyc1tlXSlyZXR1cm4gdGhpcy5sb2dnZXJzW2VdO3tjb25zdCB0PW5ldyB1ZSh0aGlzLGUpO3JldHVybiB0aGlzLmxvZ2dlcnNbZV09dCx0fX1nZW5lcmljTG9nKGUsdCxzLGkpe3RoaXMubGV2ZWw+PWUmJnRoaXMuYnVpbHRpbkVuYWJsZWQmJnRoaXMucHJpbnQoZSx0LHMsaSksdGhpcy5jb25uZWN0b3ImJnRoaXMuY29ubmVjdG9yKG9lW2VdLHQscyxpKX1wcmludChlLHQscyxpKXtpZigic3RyaW5nIj09dHlwZW9mIGkpe2NvbnN0IGU9W25ldyBEYXRlLHRdO3MmJmUucHVzaChzKSxpPWUuY29uY2F0KGkpLmpvaW4oIiB8ICIpfXN3aXRjaChlKXtjYXNlIG9lLmVycm9yOmNvbnNvbGUuZXJyb3IoaSk7YnJlYWs7Y2FzZSBvZS53YXJuOmNvbnNvbGUud2FybihpKTticmVhaztjYXNlIG9lLmxvZzpjb25zb2xlLmxvZyhpKTticmVhaztjYXNlIG9lLmRlYnVnOmNvbnNvbGUuZGVidWcoaSl9fX1jbGFzcyBmZXtjb25zdHJ1Y3Rvcigpe3RoaXMuX2RhdGFMZW5ndGg9MCx0aGlzLl9idWZmZXJMZW5ndGg9MCx0aGlzLl9zdGF0ZT1uZXcgSW50MzJBcnJheSg0KSx0aGlzLl9idWZmZXI9bmV3IEFycmF5QnVmZmVyKDY4KSx0aGlzLl9idWZmZXI4PW5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZmZlciwwLDY4KSx0aGlzLl9idWZmZXIzMj1uZXcgVWludDMyQXJyYXkodGhpcy5fYnVmZmVyLDAsMTcpLHRoaXMuc3RhcnQoKX1zdGF0aWMgaGFzaFN0cihlLHQ9ITEpe3JldHVybiB0aGlzLm9uZVBhc3NIYXNoZXIuc3RhcnQoKS5hcHBlbmRTdHIoZSkuZW5kKHQpfXN0YXRpYyBoYXNoQXNjaWlTdHIoZSx0PSExKXtyZXR1cm4gdGhpcy5vbmVQYXNzSGFzaGVyLnN0YXJ0KCkuYXBwZW5kQXNjaWlTdHIoZSkuZW5kKHQpfXN0YXRpYyBfaGV4KGUpe2NvbnN0IHQ9ZmUuaGV4Q2hhcnMscz1mZS5oZXhPdXQ7bGV0IGkscixuLG87Zm9yKG89MDtvPDQ7bys9MSlmb3Iocj04Km8saT1lW29dLG49MDtuPDg7bis9MilzW3IrMStuXT10LmNoYXJBdCgxNSZpKSxpPj4+PTQsc1tyKzArbl09dC5jaGFyQXQoMTUmaSksaT4+Pj00O3JldHVybiBzLmpvaW4oIiIpfXN0YXRpYyBfbWQ1Y3ljbGUoZSx0KXtsZXQgcz1lWzBdLGk9ZVsxXSxyPWVbMl0sbj1lWzNdO3MrPShpJnJ8fmkmbikrdFswXS02ODA4NzY5MzZ8MCxzPShzPDw3fHM+Pj4yNSkraXwwLG4rPShzJml8fnMmcikrdFsxXS0zODk1NjQ1ODZ8MCxuPShuPDwxMnxuPj4+MjApK3N8MCxyKz0obiZzfH5uJmkpK3RbMl0rNjA2MTA1ODE5fDAscj0ocjw8MTd8cj4+PjE1KStufDAsaSs9KHImbnx+ciZzKSt0WzNdLTEwNDQ1MjUzMzB8MCxpPShpPDwyMnxpPj4+MTApK3J8MCxzKz0oaSZyfH5pJm4pK3RbNF0tMTc2NDE4ODk3fDAscz0oczw8N3xzPj4+MjUpK2l8MCxuKz0ocyZpfH5zJnIpK3RbNV0rMTIwMDA4MDQyNnwwLG49KG48PDEyfG4+Pj4yMCkrc3wwLHIrPShuJnN8fm4maSkrdFs2XS0xNDczMjMxMzQxfDAscj0ocjw8MTd8cj4+PjE1KStufDAsaSs9KHImbnx+ciZzKSt0WzddLTQ1NzA1OTgzfDAsaT0oaTw8MjJ8aT4+PjEwKStyfDAscys9KGkmcnx+aSZuKSt0WzhdKzE3NzAwMzU0MTZ8MCxzPShzPDw3fHM+Pj4yNSkraXwwLG4rPShzJml8fnMmcikrdFs5XS0xOTU4NDE0NDE3fDAsbj0objw8MTJ8bj4+PjIwKStzfDAscis9KG4mc3x+biZpKSt0WzEwXS00MjA2M3wwLHI9KHI8PDE3fHI+Pj4xNSkrbnwwLGkrPShyJm58fnImcykrdFsxMV0tMTk5MDQwNDE2MnwwLGk9KGk8PDIyfGk+Pj4xMCkrcnwwLHMrPShpJnJ8fmkmbikrdFsxMl0rMTgwNDYwMzY4MnwwLHM9KHM8PDd8cz4+PjI1KStpfDAsbis9KHMmaXx+cyZyKSt0WzEzXS00MDM0MTEwMXwwLG49KG48PDEyfG4+Pj4yMCkrc3wwLHIrPShuJnN8fm4maSkrdFsxNF0tMTUwMjAwMjI5MHwwLHI9KHI8PDE3fHI+Pj4xNSkrbnwwLGkrPShyJm58fnImcykrdFsxNV0rMTIzNjUzNTMyOXwwLGk9KGk8PDIyfGk+Pj4xMCkrcnwwLHMrPShpJm58ciZ+bikrdFsxXS0xNjU3OTY1MTB8MCxzPShzPDw1fHM+Pj4yNykraXwwLG4rPShzJnJ8aSZ+cikrdFs2XS0xMDY5NTAxNjMyfDAsbj0objw8OXxuPj4+MjMpK3N8MCxyKz0obiZpfHMmfmkpK3RbMTFdKzY0MzcxNzcxM3wwLHI9KHI8PDE0fHI+Pj4xOCkrbnwwLGkrPShyJnN8biZ+cykrdFswXS0zNzM4OTczMDJ8MCxpPShpPDwyMHxpPj4+MTIpK3J8MCxzKz0oaSZufHImfm4pK3RbNV0tNzAxNTU4NjkxfDAscz0oczw8NXxzPj4+MjcpK2l8MCxuKz0ocyZyfGkmfnIpK3RbMTBdKzM4MDE2MDgzfDAsbj0objw8OXxuPj4+MjMpK3N8MCxyKz0obiZpfHMmfmkpK3RbMTVdLTY2MDQ3ODMzNXwwLHI9KHI8PDE0fHI+Pj4xOCkrbnwwLGkrPShyJnN8biZ+cykrdFs0XS00MDU1Mzc4NDh8MCxpPShpPDwyMHxpPj4+MTIpK3J8MCxzKz0oaSZufHImfm4pK3RbOV0rNTY4NDQ2NDM4fDAscz0oczw8NXxzPj4+MjcpK2l8MCxuKz0ocyZyfGkmfnIpK3RbMTRdLTEwMTk4MDM2OTB8MCxuPShuPDw5fG4+Pj4yMykrc3wwLHIrPShuJml8cyZ+aSkrdFszXS0xODczNjM5NjF8MCxyPShyPDwxNHxyPj4+MTgpK258MCxpKz0ociZzfG4mfnMpK3RbOF0rMTE2MzUzMTUwMXwwLGk9KGk8PDIwfGk+Pj4xMikrcnwwLHMrPShpJm58ciZ+bikrdFsxM10tMTQ0NDY4MTQ2N3wwLHM9KHM8PDV8cz4+PjI3KStpfDAsbis9KHMmcnxpJn5yKSt0WzJdLTUxNDAzNzg0fDAsbj0objw8OXxuPj4+MjMpK3N8MCxyKz0obiZpfHMmfmkpK3RbN10rMTczNTMyODQ3M3wwLHI9KHI8PDE0fHI+Pj4xOCkrbnwwLGkrPShyJnN8biZ+cykrdFsxMl0tMTkyNjYwNzczNHwwLGk9KGk8PDIwfGk+Pj4xMikrcnwwLHMrPShpXnJebikrdFs1XS0zNzg1NTh8MCxzPShzPDw0fHM+Pj4yOCkraXwwLG4rPShzXmlecikrdFs4XS0yMDIyNTc0NDYzfDAsbj0objw8MTF8bj4+PjIxKStzfDAscis9KG5ec15pKSt0WzExXSsxODM5MDMwNTYyfDAscj0ocjw8MTZ8cj4+PjE2KStufDAsaSs9KHJebl5zKSt0WzE0XS0zNTMwOTU1NnwwLGk9KGk8PDIzfGk+Pj45KStyfDAscys9KGlecl5uKSt0WzFdLTE1MzA5OTIwNjB8MCxzPShzPDw0fHM+Pj4yOCkraXwwLG4rPShzXmlecikrdFs0XSsxMjcyODkzMzUzfDAsbj0objw8MTF8bj4+PjIxKStzfDAscis9KG5ec15pKSt0WzddLTE1NTQ5NzYzMnwwLHI9KHI8PDE2fHI+Pj4xNikrbnwwLGkrPShyXm5ecykrdFsxMF0tMTA5NDczMDY0MHwwLGk9KGk8PDIzfGk+Pj45KStyfDAscys9KGlecl5uKSt0WzEzXSs2ODEyNzkxNzR8MCxzPShzPDw0fHM+Pj4yOCkraXwwLG4rPShzXmlecikrdFswXS0zNTg1MzcyMjJ8MCxuPShuPDwxMXxuPj4+MjEpK3N8MCxyKz0obl5zXmkpK3RbM10tNzIyNTIxOTc5fDAscj0ocjw8MTZ8cj4+PjE2KStufDAsaSs9KHJebl5zKSt0WzZdKzc2MDI5MTg5fDAsaT0oaTw8MjN8aT4+PjkpK3J8MCxzKz0oaV5yXm4pK3RbOV0tNjQwMzY0NDg3fDAscz0oczw8NHxzPj4+MjgpK2l8MCxuKz0oc15pXnIpK3RbMTJdLTQyMTgxNTgzNXwwLG49KG48PDExfG4+Pj4yMSkrc3wwLHIrPShuXnNeaSkrdFsxNV0rNTMwNzQyNTIwfDAscj0ocjw8MTZ8cj4+PjE2KStufDAsaSs9KHJebl5zKSt0WzJdLTk5NTMzODY1MXwwLGk9KGk8PDIzfGk+Pj45KStyfDAscys9KHJeKGl8fm4pKSt0WzBdLTE5ODYzMDg0NHwwLHM9KHM8PDZ8cz4+PjI2KStpfDAsbis9KGleKHN8fnIpKSt0WzddKzExMjY4OTE0MTV8MCxuPShuPDwxMHxuPj4+MjIpK3N8MCxyKz0oc14obnx+aSkpK3RbMTRdLTE0MTYzNTQ5MDV8MCxyPShyPDwxNXxyPj4+MTcpK258MCxpKz0obl4ocnx+cykpK3RbNV0tNTc0MzQwNTV8MCxpPShpPDwyMXxpPj4+MTEpK3J8MCxzKz0ocl4oaXx+bikpK3RbMTJdKzE3MDA0ODU1NzF8MCxzPShzPDw2fHM+Pj4yNikraXwwLG4rPShpXihzfH5yKSkrdFszXS0xODk0OTg2NjA2fDAsbj0objw8MTB8bj4+PjIyKStzfDAscis9KHNeKG58fmkpKSt0WzEwXS0xMDUxNTIzfDAscj0ocjw8MTV8cj4+PjE3KStufDAsaSs9KG5eKHJ8fnMpKSt0WzFdLTIwNTQ5MjI3OTl8MCxpPShpPDwyMXxpPj4+MTEpK3J8MCxzKz0ocl4oaXx+bikpK3RbOF0rMTg3MzMxMzM1OXwwLHM9KHM8PDZ8cz4+PjI2KStpfDAsbis9KGleKHN8fnIpKSt0WzE1XS0zMDYxMTc0NHwwLG49KG48PDEwfG4+Pj4yMikrc3wwLHIrPShzXihufH5pKSkrdFs2XS0xNTYwMTk4MzgwfDAscj0ocjw8MTV8cj4+PjE3KStufDAsaSs9KG5eKHJ8fnMpKSt0WzEzXSsxMzA5MTUxNjQ5fDAsaT0oaTw8MjF8aT4+PjExKStyfDAscys9KHJeKGl8fm4pKSt0WzRdLTE0NTUyMzA3MHwwLHM9KHM8PDZ8cz4+PjI2KStpfDAsbis9KGleKHN8fnIpKSt0WzExXS0xMTIwMjEwMzc5fDAsbj0objw8MTB8bj4+PjIyKStzfDAscis9KHNeKG58fmkpKSt0WzJdKzcxODc4NzI1OXwwLHI9KHI8PDE1fHI+Pj4xNykrbnwwLGkrPShuXihyfH5zKSkrdFs5XS0zNDM0ODU1NTF8MCxpPShpPDwyMXxpPj4+MTEpK3J8MCxlWzBdPXMrZVswXXwwLGVbMV09aStlWzFdfDAsZVsyXT1yK2VbMl18MCxlWzNdPW4rZVszXXwwfXN0YXJ0KCl7cmV0dXJuIHRoaXMuX2RhdGFMZW5ndGg9MCx0aGlzLl9idWZmZXJMZW5ndGg9MCx0aGlzLl9zdGF0ZS5zZXQoZmUuc3RhdGVJZGVudGl0eSksdGhpc31hcHBlbmRTdHIoZSl7Y29uc3QgdD10aGlzLl9idWZmZXI4LHM9dGhpcy5fYnVmZmVyMzI7bGV0IGkscixuPXRoaXMuX2J1ZmZlckxlbmd0aDtmb3Iocj0wO3I8ZS5sZW5ndGg7cis9MSl7aWYoaT1lLmNoYXJDb2RlQXQociksaTwxMjgpdFtuKytdPWk7ZWxzZSBpZihpPDIwNDgpdFtuKytdPTE5MisoaT4+PjYpLHRbbisrXT02MyZpfDEyODtlbHNlIGlmKGk8NTUyOTZ8fGk+NTYzMTkpdFtuKytdPTIyNCsoaT4+PjEyKSx0W24rK109aT4+PjYmNjN8MTI4LHRbbisrXT02MyZpfDEyODtlbHNle2lmKGk9MTAyNCooaS01NTI5NikrKGUuY2hhckNvZGVBdCgrK3IpLTU2MzIwKSs2NTUzNixpPjExMTQxMTEpdGhyb3cgbmV3IEVycm9yKCJVbmljb2RlIHN0YW5kYXJkIHN1cHBvcnRzIGNvZGUgcG9pbnRzIHVwIHRvIFUrMTBGRkZGIik7dFtuKytdPTI0MCsoaT4+PjE4KSx0W24rK109aT4+PjEyJjYzfDEyOCx0W24rK109aT4+PjYmNjN8MTI4LHRbbisrXT02MyZpfDEyOH1uPj02NCYmKHRoaXMuX2RhdGFMZW5ndGgrPTY0LGZlLl9tZDVjeWNsZSh0aGlzLl9zdGF0ZSxzKSxuLT02NCxzWzBdPXNbMTZdKX1yZXR1cm4gdGhpcy5fYnVmZmVyTGVuZ3RoPW4sdGhpc31hcHBlbmRBc2NpaVN0cihlKXtjb25zdCB0PXRoaXMuX2J1ZmZlcjgscz10aGlzLl9idWZmZXIzMjtsZXQgaSxyPXRoaXMuX2J1ZmZlckxlbmd0aCxuPTA7Zm9yKDs7KXtmb3IoaT1NYXRoLm1pbihlLmxlbmd0aC1uLDY0LXIpO2ktLTspdFtyKytdPWUuY2hhckNvZGVBdChuKyspO2lmKHI8NjQpYnJlYWs7dGhpcy5fZGF0YUxlbmd0aCs9NjQsZmUuX21kNWN5Y2xlKHRoaXMuX3N0YXRlLHMpLHI9MH1yZXR1cm4gdGhpcy5fYnVmZmVyTGVuZ3RoPXIsdGhpc31hcHBlbmRCeXRlQXJyYXkoZSl7Y29uc3QgdD10aGlzLl9idWZmZXI4LHM9dGhpcy5fYnVmZmVyMzI7bGV0IGkscj10aGlzLl9idWZmZXJMZW5ndGgsbj0wO2Zvcig7Oyl7Zm9yKGk9TWF0aC5taW4oZS5sZW5ndGgtbiw2NC1yKTtpLS07KXRbcisrXT1lW24rK107aWYocjw2NClicmVhazt0aGlzLl9kYXRhTGVuZ3RoKz02NCxmZS5fbWQ1Y3ljbGUodGhpcy5fc3RhdGUscykscj0wfXJldHVybiB0aGlzLl9idWZmZXJMZW5ndGg9cix0aGlzfWdldFN0YXRlKCl7Y29uc3QgZT10aGlzLHQ9ZS5fc3RhdGU7cmV0dXJue2J1ZmZlcjpTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZS5fYnVmZmVyOCksYnVmbGVuOmUuX2J1ZmZlckxlbmd0aCxsZW5ndGg6ZS5fZGF0YUxlbmd0aCxzdGF0ZTpbdFswXSx0WzFdLHRbMl0sdFszXV19fXNldFN0YXRlKGUpe2NvbnN0IHQ9ZS5idWZmZXIscz1lLnN0YXRlLGk9dGhpcy5fc3RhdGU7bGV0IHI7Zm9yKHRoaXMuX2RhdGFMZW5ndGg9ZS5sZW5ndGgsdGhpcy5fYnVmZmVyTGVuZ3RoPWUuYnVmbGVuLGlbMF09c1swXSxpWzFdPXNbMV0saVsyXT1zWzJdLGlbM109c1szXSxyPTA7cjx0Lmxlbmd0aDtyKz0xKXRoaXMuX2J1ZmZlcjhbcl09dC5jaGFyQ29kZUF0KHIpfWVuZChlPSExKXtjb25zdCB0PXRoaXMuX2J1ZmZlckxlbmd0aCxzPXRoaXMuX2J1ZmZlcjgsaT10aGlzLl9idWZmZXIzMixyPTErKHQ+PjIpO2xldCBuO2lmKHRoaXMuX2RhdGFMZW5ndGgrPXQsc1t0XT0xMjgsc1t0KzFdPXNbdCsyXT1zW3QrM109MCxpLnNldChmZS5idWZmZXIzMklkZW50aXR5LnN1YmFycmF5KHIpLHIpLHQ+NTUmJihmZS5fbWQ1Y3ljbGUodGhpcy5fc3RhdGUsaSksaS5zZXQoZmUuYnVmZmVyMzJJZGVudGl0eSkpLG49OCp0aGlzLl9kYXRhTGVuZ3RoLG48PTQyOTQ5NjcyOTUpaVsxNF09bjtlbHNle2NvbnN0IGU9bi50b1N0cmluZygxNikubWF0Y2goLyguKj8pKC57MCw4fSkkLyk7aWYobnVsbD09PWUpcmV0dXJuO2NvbnN0IHQ9cGFyc2VJbnQoZVsyXSwxNikscz1wYXJzZUludChlWzFdLDE2KXx8MDtpWzE0XT10LGlbMTVdPXN9cmV0dXJuIGZlLl9tZDVjeWNsZSh0aGlzLl9zdGF0ZSxpKSxlP3RoaXMuX3N0YXRlOmZlLl9oZXgodGhpcy5fc3RhdGUpfX1mdW5jdGlvbiBtZShlKXtyZXR1cm4gZmUuaGFzaFN0cihlKX1mZS5zdGF0ZUlkZW50aXR5PW5ldyBJbnQzMkFycmF5KFsxNzMyNTg0MTkzLC0yNzE3MzM4NzksLTE3MzI1ODQxOTQsMjcxNzMzODc4XSksZmUuYnVmZmVyMzJJZGVudGl0eT1uZXcgSW50MzJBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMF0pLGZlLmhleENoYXJzPSIwMTIzNDU2Nzg5YWJjZGVmIixmZS5oZXhPdXQ9W10sZmUub25lUGFzc0hhc2hlcj1uZXcgZmUsIjVkNDE0MDJhYmM0YjJhNzZiOTcxOWQ5MTEwMTdjNTkyIiE9PWZlLmhhc2hTdHIoImhlbGxvIikmJmNvbnNvbGUuZXJyb3IoIk1kNSBzZWxmIHRlc3QgZmFpbGVkLiIpO2NsYXNzIHZle2NvbnN0cnVjdG9yKGUsdCxzLGkpe3RoaXMubG9nZ2VyPWUuZ2V0TG9nZ2VyKCJzaXBqcy5kaWdlc3RhdXRoZW50aWNhdGlvbiIpLHRoaXMudXNlcm5hbWU9cyx0aGlzLnBhc3N3b3JkPWksdGhpcy5oYTE9dCx0aGlzLm5jPTAsdGhpcy5uY0hleD0iMDAwMDAwMDAifWF1dGhlbnRpY2F0ZShlLHQscyl7aWYodGhpcy5hbGdvcml0aG09dC5hbGdvcml0aG0sdGhpcy5yZWFsbT10LnJlYWxtLHRoaXMubm9uY2U9dC5ub25jZSx0aGlzLm9wYXF1ZT10Lm9wYXF1ZSx0aGlzLnN0YWxlPXQuc3RhbGUsdGhpcy5hbGdvcml0aG0pe2lmKCJNRDUiIT09dGhpcy5hbGdvcml0aG0pcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImNoYWxsZW5nZSB3aXRoIERpZ2VzdCBhbGdvcml0aG0gZGlmZmVyZW50IHRoYW4gJ01ENScsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQiKSwhMX1lbHNlIHRoaXMuYWxnb3JpdGhtPSJNRDUiO2lmKCF0aGlzLnJlYWxtKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJjaGFsbGVuZ2Ugd2l0aG91dCBEaWdlc3QgcmVhbG0sIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQiKSwhMTtpZighdGhpcy5ub25jZSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IG5vbmNlLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkIiksITE7aWYodC5xb3ApaWYodC5xb3AuaW5kZXhPZigiYXV0aCIpPi0xKXRoaXMucW9wPSJhdXRoIjtlbHNle2lmKCEodC5xb3AuaW5kZXhPZigiYXV0aC1pbnQiKT4tMSkpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImNoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCBxb3AgZGlmZmVyZW50IHRoYW4gJ2F1dGgnIG9yICdhdXRoLWludCcsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQiKSwhMTt0aGlzLnFvcD0iYXV0aC1pbnQifWVsc2UgdGhpcy5xb3A9dm9pZCAwO3JldHVybiB0aGlzLm1ldGhvZD1lLm1ldGhvZCx0aGlzLnVyaT1lLnJ1cmksdGhpcy5jbm9uY2U9UigxMiksdGhpcy5uYys9MSx0aGlzLnVwZGF0ZU5jSGV4KCksNDI5NDk2NzI5Nj09PXRoaXMubmMmJih0aGlzLm5jPTEsdGhpcy5uY0hleD0iMDAwMDAwMDEiKSx0aGlzLmNhbGN1bGF0ZVJlc3BvbnNlKHMpLCEwfXRvU3RyaW5nKCl7Y29uc3QgZT1bXTtpZighdGhpcy5yZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoInJlc3BvbnNlIGZpZWxkIGRvZXMgbm90IGV4aXN0LCBjYW5ub3QgZ2VuZXJhdGUgQXV0aG9yaXphdGlvbiBoZWFkZXIiKTtyZXR1cm4gZS5wdXNoKCJhbGdvcml0aG09Iit0aGlzLmFsZ29yaXRobSksZS5wdXNoKCd1c2VybmFtZT0iJyt0aGlzLnVzZXJuYW1lKyciJyksZS5wdXNoKCdyZWFsbT0iJyt0aGlzLnJlYWxtKyciJyksZS5wdXNoKCdub25jZT0iJyt0aGlzLm5vbmNlKyciJyksZS5wdXNoKCd1cmk9IicrdGhpcy51cmkrJyInKSxlLnB1c2goJ3Jlc3BvbnNlPSInK3RoaXMucmVzcG9uc2UrJyInKSx0aGlzLm9wYXF1ZSYmZS5wdXNoKCdvcGFxdWU9IicrdGhpcy5vcGFxdWUrJyInKSx0aGlzLnFvcCYmKGUucHVzaCgicW9wPSIrdGhpcy5xb3ApLGUucHVzaCgnY25vbmNlPSInK3RoaXMuY25vbmNlKyciJyksZS5wdXNoKCJuYz0iK3RoaXMubmNIZXgpKSwiRGlnZXN0ICIrZS5qb2luKCIsICIpfXVwZGF0ZU5jSGV4KCl7Y29uc3QgZT1OdW1iZXIodGhpcy5uYykudG9TdHJpbmcoMTYpO3RoaXMubmNIZXg9IjAwMDAwMDAwIi5zdWJzdHIoMCw4LWUubGVuZ3RoKStlfWNhbGN1bGF0ZVJlc3BvbnNlKGUpe2xldCB0LHM7dD10aGlzLmhhMSwiIiE9PXQmJnZvaWQgMCE9PXR8fCh0PW1lKHRoaXMudXNlcm5hbWUrIjoiK3RoaXMucmVhbG0rIjoiK3RoaXMucGFzc3dvcmQpKSwiYXV0aCI9PT10aGlzLnFvcD8ocz1tZSh0aGlzLm1ldGhvZCsiOiIrdGhpcy51cmkpLHRoaXMucmVzcG9uc2U9bWUodCsiOiIrdGhpcy5ub25jZSsiOiIrdGhpcy5uY0hleCsiOiIrdGhpcy5jbm9uY2UrIjphdXRoOiIrcykpOiJhdXRoLWludCI9PT10aGlzLnFvcD8ocz1tZSh0aGlzLm1ldGhvZCsiOiIrdGhpcy51cmkrIjoiK21lKGV8fCIiKSksdGhpcy5yZXNwb25zZT1tZSh0KyI6Iit0aGlzLm5vbmNlKyI6Iit0aGlzLm5jSGV4KyI6Iit0aGlzLmNub25jZSsiOmF1dGgtaW50OiIrcykpOnZvaWQgMD09PXRoaXMucW9wJiYocz1tZSh0aGlzLm1ldGhvZCsiOiIrdGhpcy51cmkpLHRoaXMucmVzcG9uc2U9bWUodCsiOiIrdGhpcy5ub25jZSsiOiIrcykpfX1mdW5jdGlvbiB3ZShlLHQpe2NvbnN0IHM9IlxyXG4iO2lmKHQuc3RhdHVzQ29kZTwxMDB8fHQuc3RhdHVzQ29kZT42OTkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBzdGF0dXNDb2RlOiAiK3Quc3RhdHVzQ29kZSk7Y29uc3QgaT10LnJlYXNvblBocmFzZT90LnJlYXNvblBocmFzZTpFKHQuc3RhdHVzQ29kZSk7bGV0IHI9IlNJUC8yLjAgIit0LnN0YXR1c0NvZGUrIiAiK2krczt0LnN0YXR1c0NvZGU+PTEwMCYmdC5zdGF0dXNDb2RlLHQuc3RhdHVzQ29kZTtjb25zdCBuPSJGcm9tOiAiK2UuZ2V0SGVhZGVyKCJGcm9tIikrcyxvPSJDYWxsLUlEOiAiK2UuY2FsbElkK3MsYT0iQ1NlcTogIitlLmNzZXErIiAiK2UubWV0aG9kK3MsYz1lLmdldEhlYWRlcnMoInZpYSIpLnJlZHVjZSgoKGUsdCk9PmUrIlZpYTogIit0K3MpLCIiKTtsZXQgaD0iVG86ICIrZS5nZXRIZWFkZXIoInRvIik7aWYodC5zdGF0dXNDb2RlPjEwMCYmIWUucGFyc2VIZWFkZXIoInRvIikuaGFzUGFyYW0oInRhZyIpKXtsZXQgZT10LnRvVGFnO2V8fChlPSQoKSksaCs9Ijt0YWc9IitlfWgrPXM7bGV0IGQ9IiI7dC5zdXBwb3J0ZWQmJihkPSJTdXBwb3J0ZWQ6ICIrdC5zdXBwb3J0ZWQuam9pbigiLCAiKStzKTtsZXQgbD0iIjt0LnVzZXJBZ2VudCYmKGw9IlVzZXItQWdlbnQ6ICIrdC51c2VyQWdlbnQrcyk7bGV0IGc9IiI7cmV0dXJuIHQuZXh0cmFIZWFkZXJzJiYoZz10LmV4dHJhSGVhZGVycy5yZWR1Y2UoKChlLHQpPT5lK3QudHJpbSgpK3MpLCIiKSkscis9YyxyKz1uLHIrPWgscis9YSxyKz1vLHIrPWQscis9bCxyKz1nLHQuYm9keT8ocis9IkNvbnRlbnQtVHlwZTogIit0LmJvZHkuY29udGVudFR5cGUrcyxyKz0iQ29udGVudC1MZW5ndGg6ICIrQyh0LmJvZHkuY29udGVudCkrcytzLHIrPXQuYm9keS5jb250ZW50KTpyKz0iQ29udGVudC1MZW5ndGg6IDBcclxuXHJcbiIse21lc3NhZ2U6cn19Y2xhc3MgYmUgZXh0ZW5kcyBue2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fCJVbnNwZWNpZmllZCB0cmFuc3BvcnQgZXJyb3IuIil9fWNsYXNzIFRle2NvbnN0cnVjdG9yKGUsdCxzLGkscil7dGhpcy5fdHJhbnNwb3J0PWUsdGhpcy5fdXNlcj10LHRoaXMuX2lkPXMsdGhpcy5fc3RhdGU9aSx0aGlzLmxpc3RlbmVycz1uZXcgQXJyYXksdGhpcy5sb2dnZXI9dC5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcihyLHMpLHRoaXMubG9nZ2VyLmRlYnVnKGBDb25zdHJ1Y3RpbmcgJHt0aGlzLnR5cGVUb1N0cmluZygpfSB3aXRoIGlkICR7dGhpcy5pZH0uYCl9ZGlzcG9zZSgpe3RoaXMubG9nZ2VyLmRlYnVnKGBEZXN0cm95ZWQgJHt0aGlzLnR5cGVUb1N0cmluZygpfSB3aXRoIGlkICR7dGhpcy5pZH0uYCl9Z2V0IGlkKCl7cmV0dXJuIHRoaXMuX2lkfWdldCBraW5kKCl7dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGtpbmQuIil9Z2V0IHN0YXRlKCl7cmV0dXJuIHRoaXMuX3N0YXRlfWdldCB0cmFuc3BvcnQoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0fWFkZFN0YXRlQ2hhbmdlTGlzdGVuZXIoZSx0KXtjb25zdCBzPSgpPT57dGhpcy5yZW1vdmVTdGF0ZUNoYW5nZUxpc3RlbmVyKHMpLGUoKX07ITA9PT0obnVsbD09dD92b2lkIDA6dC5vbmNlKT90aGlzLmxpc3RlbmVycy5wdXNoKHMpOnRoaXMubGlzdGVuZXJzLnB1c2goZSl9bm90aWZ5U3RhdGVDaGFuZ2VMaXN0ZW5lcnMoKXt0aGlzLmxpc3RlbmVycy5zbGljZSgpLmZvckVhY2goKGU9PmUoKSkpfXJlbW92ZVN0YXRlQ2hhbmdlTGlzdGVuZXIoZSl7dGhpcy5saXN0ZW5lcnM9dGhpcy5saXN0ZW5lcnMuZmlsdGVyKCh0PT50IT09ZSkpfWxvZ1RyYW5zcG9ydEVycm9yKGUsdCl7dGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcihgVHJhbnNwb3J0IGVycm9yIG9jY3VycmVkIGluICR7dGhpcy50eXBlVG9TdHJpbmcoKX0gd2l0aCBpZCAke3RoaXMuaWR9LmApLHRoaXMubG9nZ2VyLmVycm9yKHQpfXNlbmQoZSl7cmV0dXJuIHRoaXMudHJhbnNwb3J0LnNlbmQoZSkuY2F0Y2goKGU9PntpZihlIGluc3RhbmNlb2YgYmUpdGhyb3cgdGhpcy5vblRyYW5zcG9ydEVycm9yKGUpLGU7bGV0IHQ7dGhyb3cgdD1lJiYic3RyaW5nIj09dHlwZW9mIGUubWVzc2FnZT9uZXcgYmUoZS5tZXNzYWdlKTpuZXcgYmUsdGhpcy5vblRyYW5zcG9ydEVycm9yKHQpLHR9KSl9c2V0U3RhdGUoZSl7dGhpcy5sb2dnZXIuZGVidWcoYFN0YXRlIGNoYW5nZSB0byAiJHtlfSIgb24gJHt0aGlzLnR5cGVUb1N0cmluZygpfSB3aXRoIGlkICR7dGhpcy5pZH0uYCksdGhpcy5fc3RhdGU9ZSx0aGlzLl91c2VyLm9uU3RhdGVDaGFuZ2UmJnRoaXMuX3VzZXIub25TdGF0ZUNoYW5nZShlKSx0aGlzLm5vdGlmeVN0YXRlQ2hhbmdlTGlzdGVuZXJzKCl9dHlwZVRvU3RyaW5nKCl7cmV0dXJuIlVua25vd25UeXBlIn19Y2xhc3MgeWUgZXh0ZW5kcyBUZXtjb25zdHJ1Y3RvcihlLHQscyxpLHIpe3N1cGVyKHQscyx5ZS5tYWtlSWQoZSksaSxyKSx0aGlzLl9yZXF1ZXN0PWUsdGhpcy51c2VyPXMsZS5zZXRWaWFIZWFkZXIodGhpcy5pZCx0LnByb3RvY29sKX1zdGF0aWMgbWFrZUlkKGUpe2lmKCJDQU5DRUwiPT09ZS5tZXRob2Qpe2lmKCFlLmJyYW5jaCl0aHJvdyBuZXcgRXJyb3IoIk91dGdvaW5nIENBTkNFTCByZXF1ZXN0IHdpdGhvdXQgYSBicmFuY2guIik7cmV0dXJuIGUuYnJhbmNofXJldHVybiJ6OWhHNGJLIitNYXRoLmZsb29yKDFlNypNYXRoLnJhbmRvbSgpKX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLl9yZXF1ZXN0fW9uUmVxdWVzdFRpbWVvdXQoKXt0aGlzLnVzZXIub25SZXF1ZXN0VGltZW91dCYmdGhpcy51c2VyLm9uUmVxdWVzdFRpbWVvdXQoKX19IWZ1bmN0aW9uKGUpe2UuQWNjZXB0ZWQ9IkFjY2VwdGVkIixlLkNhbGxpbmc9IkNhbGxpbmciLGUuQ29tcGxldGVkPSJDb21wbGV0ZWQiLGUuQ29uZmlybWVkPSJDb25maXJtZWQiLGUuUHJvY2VlZGluZz0iUHJvY2VlZGluZyIsZS5UZXJtaW5hdGVkPSJUZXJtaW5hdGVkIixlLlRyeWluZz0iVHJ5aW5nIn0oYWV8fChhZT17fSkpO2NsYXNzIFNlIGV4dGVuZHMgeWV7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKGUsdCxzLGFlLlRyeWluZywic2lwLnRyYW5zYWN0aW9uLm5pY3QiKSx0aGlzLkY9c2V0VGltZW91dCgoKCk9PnRoaXMudGltZXJGKCkpLEYuVElNRVJfRiksdGhpcy5zZW5kKGUudG9TdHJpbmcoKSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIGluaXRpYWwgb3V0Z29pbmcgcmVxdWVzdC4iKX0pKX1kaXNwb3NlKCl7dGhpcy5GJiYoY2xlYXJUaW1lb3V0KHRoaXMuRiksdGhpcy5GPXZvaWQgMCksdGhpcy5LJiYoY2xlYXJUaW1lb3V0KHRoaXMuSyksdGhpcy5LPXZvaWQgMCksc3VwZXIuZGlzcG9zZSgpfWdldCBraW5kKCl7cmV0dXJuIm5pY3QifXJlY2VpdmVSZXNwb25zZShlKXtjb25zdCB0PWUuc3RhdHVzQ29kZTtpZighdHx8dDwxMDB8fHQ+Njk5KXRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3R9YCk7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYWUuVHJ5aW5nOmlmKHQ+PTEwMCYmdDw9MTk5KXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihhZS5Qcm9jZWVkaW5nKSx2b2lkKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UmJnRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UoZSkpO2lmKHQ+PTIwMCYmdDw9Njk5KXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihhZS5Db21wbGV0ZWQpLDQwOD09PXQ/dm9pZCB0aGlzLm9uUmVxdWVzdFRpbWVvdXQoKTp2b2lkKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UmJnRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UoZSkpO2JyZWFrO2Nhc2UgYWUuUHJvY2VlZGluZzppZih0Pj0xMDAmJnQ8PTE5OSYmdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSlyZXR1cm4gdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShlKTtpZih0Pj0yMDAmJnQ8PTY5OSlyZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuQ29tcGxldGVkKSw0MDg9PT10P3ZvaWQgdGhpcy5vblJlcXVlc3RUaW1lb3V0KCk6dm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTticmVhaztjYXNlIGFlLkNvbXBsZXRlZDpjYXNlIGFlLlRlcm1pbmF0ZWQ6cmV0dXJuO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlICR7dGhpcy5zdGF0ZX1gKX1jb25zdCBzPWBOb24tSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiByZWNlaXZlZCB1bmV4cGVjdGVkICR7dH0gcmVzcG9uc2Ugd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfS5gO3RoaXMubG9nZ2VyLndhcm4ocyl9b25UcmFuc3BvcnRFcnJvcihlKXt0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvciYmdGhpcy51c2VyLm9uVHJhbnNwb3J0RXJyb3IoZSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuVGVybWluYXRlZCwhMCl9dHlwZVRvU3RyaW5nKCl7cmV0dXJuIm5vbi1JTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uIn1zdGF0ZVRyYW5zaXRpb24oZSx0PSExKXtjb25zdCBzPSgpPT57dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuc3RhdGV9IHRvICR7ZX1gKX07c3dpdGNoKGUpe2Nhc2UgYWUuVHJ5aW5nOnMoKTticmVhaztjYXNlIGFlLlByb2NlZWRpbmc6dGhpcy5zdGF0ZSE9PWFlLlRyeWluZyYmcygpO2JyZWFrO2Nhc2UgYWUuQ29tcGxldGVkOnRoaXMuc3RhdGUhPT1hZS5UcnlpbmcmJnRoaXMuc3RhdGUhPT1hZS5Qcm9jZWVkaW5nJiZzKCk7YnJlYWs7Y2FzZSBhZS5UZXJtaW5hdGVkOnRoaXMuc3RhdGUhPT1hZS5UcnlpbmcmJnRoaXMuc3RhdGUhPT1hZS5Qcm9jZWVkaW5nJiZ0aGlzLnN0YXRlIT09YWUuQ29tcGxldGVkJiYodHx8cygpKTticmVhaztkZWZhdWx0OnMoKX1lPT09YWUuQ29tcGxldGVkJiYodGhpcy5GJiYoY2xlYXJUaW1lb3V0KHRoaXMuRiksdGhpcy5GPXZvaWQgMCksdGhpcy5LPXNldFRpbWVvdXQoKCgpPT50aGlzLnRpbWVySygpKSxGLlRJTUVSX0spKSxlPT09YWUuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCksdGhpcy5zZXRTdGF0ZShlKX10aW1lckYoKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgRiBleHBpcmVkIGZvciBub24tSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApLHRoaXMuc3RhdGUhPT1hZS5UcnlpbmcmJnRoaXMuc3RhdGUhPT1hZS5Qcm9jZWVkaW5nfHwodGhpcy5vblJlcXVlc3RUaW1lb3V0KCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuVGVybWluYXRlZCkpfXRpbWVySygpe3RoaXMuc3RhdGU9PT1hZS5Db21wbGV0ZWQmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLlRlcm1pbmF0ZWQpfX1jbGFzcyBSZSBleHRlbmRzIFRle2NvbnN0cnVjdG9yKGUsdCxzLGkscil7c3VwZXIodCxzLGUudmlhQnJhbmNoLGksciksdGhpcy5fcmVxdWVzdD1lLHRoaXMudXNlcj1zfWdldCByZXF1ZXN0KCl7cmV0dXJuIHRoaXMuX3JlcXVlc3R9fWNsYXNzIEVlIGV4dGVuZHMgUmV7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKGUsdCxzLGFlLlByb2NlZWRpbmcsInNpcC50cmFuc2FjdGlvbi5pc3QiKX1kaXNwb3NlKCl7dGhpcy5zdG9wUHJvZ3Jlc3NFeHRlbnNpb25UaW1lcigpLHRoaXMuSCYmKGNsZWFyVGltZW91dCh0aGlzLkgpLHRoaXMuSD12b2lkIDApLHRoaXMuSSYmKGNsZWFyVGltZW91dCh0aGlzLkkpLHRoaXMuST12b2lkIDApLHRoaXMuTCYmKGNsZWFyVGltZW91dCh0aGlzLkwpLHRoaXMuTD12b2lkIDApLHN1cGVyLmRpc3Bvc2UoKX1nZXQga2luZCgpe3JldHVybiJpc3QifXJlY2VpdmVSZXF1ZXN0KGUpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGFlLlByb2NlZWRpbmc6aWYoZS5tZXRob2Q9PT1MLklOVklURSlyZXR1cm4gdm9pZCh0aGlzLmxhc3RQcm92aXNpb25hbFJlc3BvbnNlJiZ0aGlzLnNlbmQodGhpcy5sYXN0UHJvdmlzaW9uYWxSZXNwb25zZSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIHJldHJhbnNtaXNzaW9uIG9mIHByb3Zpc2lvbmFsIHJlc3BvbnNlLiIpfSkpKTticmVhaztjYXNlIGFlLkFjY2VwdGVkOmlmKGUubWV0aG9kPT09TC5JTlZJVEUpcmV0dXJuO2JyZWFrO2Nhc2UgYWUuQ29tcGxldGVkOmlmKGUubWV0aG9kPT09TC5JTlZJVEUpe2lmKCF0aGlzLmxhc3RGaW5hbFJlc3BvbnNlKXRocm93IG5ldyBFcnJvcigiTGFzdCBmaW5hbCByZXNwb25zZSB1bmRlZmluZWQuIik7cmV0dXJuIHZvaWQgdGhpcy5zZW5kKHRoaXMubGFzdEZpbmFsUmVzcG9uc2UpLmNhdGNoKChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCByZXRyYW5zbWlzc2lvbiBvZiBmaW5hbCByZXNwb25zZS4iKX0pKX1pZihlLm1ldGhvZD09PUwuQUNLKXJldHVybiB2b2lkIHRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLkNvbmZpcm1lZCk7YnJlYWs7Y2FzZSBhZS5Db25maXJtZWQ6Y2FzZSBhZS5UZXJtaW5hdGVkOmlmKGUubWV0aG9kPT09TC5JTlZJVEV8fGUubWV0aG9kPT09TC5BQ0spcmV0dXJuO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlICR7dGhpcy5zdGF0ZX1gKX1jb25zdCB0PWBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uIHJlY2VpdmVkIHVuZXhwZWN0ZWQgJHtlLm1ldGhvZH0gcmVxdWVzdCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LmA7dGhpcy5sb2dnZXIud2Fybih0KX1yZWNlaXZlUmVzcG9uc2UoZSx0KXtpZihlPDEwMHx8ZT42OTkpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXR1cyBjb2RlICR7ZX1gKTtzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhZS5Qcm9jZWVkaW5nOmlmKGU+PTEwMCYmZTw9MTk5KXJldHVybiB0aGlzLmxhc3RQcm92aXNpb25hbFJlc3BvbnNlPXQsZT4xMDAmJnRoaXMuc3RhcnRQcm9ncmVzc0V4dGVuc2lvblRpbWVyKCksdm9pZCB0aGlzLnNlbmQodCkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIDF4eCByZXNwb25zZS4iKX0pKTtpZihlPj0yMDAmJmU8PTI5OSlyZXR1cm4gdGhpcy5sYXN0RmluYWxSZXNwb25zZT10LHRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLkFjY2VwdGVkKSx2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaCgoZT0+e3RoaXMubG9nVHJhbnNwb3J0RXJyb3IoZSwiRmFpbGVkIHRvIHNlbmQgMnh4IHJlc3BvbnNlLiIpfSkpO2lmKGU+PTMwMCYmZTw9Njk5KXJldHVybiB0aGlzLmxhc3RGaW5hbFJlc3BvbnNlPXQsdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuQ29tcGxldGVkKSx2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaCgoZT0+e3RoaXMubG9nVHJhbnNwb3J0RXJyb3IoZSwiRmFpbGVkIHRvIHNlbmQgbm9uLTJ4eCBmaW5hbCByZXNwb25zZS4iKX0pKTticmVhaztjYXNlIGFlLkFjY2VwdGVkOmlmKGU+PTIwMCYmZTw9Mjk5KXJldHVybiB2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaCgoZT0+e3RoaXMubG9nVHJhbnNwb3J0RXJyb3IoZSwiRmFpbGVkIHRvIHNlbmQgMnh4IHJlc3BvbnNlLiIpfSkpO2JyZWFrO2Nhc2UgYWUuQ29tcGxldGVkOmNhc2UgYWUuQ29uZmlybWVkOmNhc2UgYWUuVGVybWluYXRlZDpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSAke3RoaXMuc3RhdGV9YCl9Y29uc3Qgcz1gSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiByZWNlaXZlZCB1bmV4cGVjdGVkICR7ZX0gcmVzcG9uc2UgZnJvbSBUVSB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LmA7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IocyksbmV3IEVycm9yKHMpfXJldHJhbnNtaXRBY2NlcHRlZFJlc3BvbnNlKCl7dGhpcy5zdGF0ZT09PWFlLkFjY2VwdGVkJiZ0aGlzLmxhc3RGaW5hbFJlc3BvbnNlJiZ0aGlzLnNlbmQodGhpcy5sYXN0RmluYWxSZXNwb25zZSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIDJ4eCByZXNwb25zZS4iKX0pKX1vblRyYW5zcG9ydEVycm9yKGUpe3RoaXMudXNlci5vblRyYW5zcG9ydEVycm9yJiZ0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvcihlKX10eXBlVG9TdHJpbmcoKXtyZXR1cm4iSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiJ9c3RhdGVUcmFuc2l0aW9uKGUpe2NvbnN0IHQ9KCk9Pnt0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5zdGF0ZX0gdG8gJHtlfWApfTtzd2l0Y2goZSl7Y2FzZSBhZS5Qcm9jZWVkaW5nOnQoKTticmVhaztjYXNlIGFlLkFjY2VwdGVkOmNhc2UgYWUuQ29tcGxldGVkOnRoaXMuc3RhdGUhPT1hZS5Qcm9jZWVkaW5nJiZ0KCk7YnJlYWs7Y2FzZSBhZS5Db25maXJtZWQ6dGhpcy5zdGF0ZSE9PWFlLkNvbXBsZXRlZCYmdCgpO2JyZWFrO2Nhc2UgYWUuVGVybWluYXRlZDp0aGlzLnN0YXRlIT09YWUuQWNjZXB0ZWQmJnRoaXMuc3RhdGUhPT1hZS5Db21wbGV0ZWQmJnRoaXMuc3RhdGUhPT1hZS5Db25maXJtZWQmJnQoKTticmVhaztkZWZhdWx0OnQoKX10aGlzLnN0b3BQcm9ncmVzc0V4dGVuc2lvblRpbWVyKCksZT09PWFlLkFjY2VwdGVkJiYodGhpcy5MPXNldFRpbWVvdXQoKCgpPT50aGlzLnRpbWVyTCgpKSxGLlRJTUVSX0wpKSxlPT09YWUuQ29tcGxldGVkJiYodGhpcy5IPXNldFRpbWVvdXQoKCgpPT50aGlzLnRpbWVySCgpKSxGLlRJTUVSX0gpKSxlPT09YWUuQ29uZmlybWVkJiYodGhpcy5JPXNldFRpbWVvdXQoKCgpPT50aGlzLnRpbWVySSgpKSxGLlRJTUVSX0kpKSxlPT09YWUuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCksdGhpcy5zZXRTdGF0ZShlKX1zdGFydFByb2dyZXNzRXh0ZW5zaW9uVGltZXIoKXt2b2lkIDA9PT10aGlzLnByb2dyZXNzRXh0ZW5zaW9uVGltZXImJih0aGlzLnByb2dyZXNzRXh0ZW5zaW9uVGltZXI9c2V0SW50ZXJ2YWwoKCgpPT57aWYodGhpcy5sb2dnZXIuZGVidWcoYFByb2dyZXNzIGV4dGVuc2lvbiB0aW1lciBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCksIXRoaXMubGFzdFByb3Zpc2lvbmFsUmVzcG9uc2UpdGhyb3cgbmV3IEVycm9yKCJMYXN0IHByb3Zpc2lvbmFsIHJlc3BvbnNlIHVuZGVmaW5lZC4iKTt0aGlzLnNlbmQodGhpcy5sYXN0UHJvdmlzaW9uYWxSZXNwb25zZSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIHJldHJhbnNtaXNzaW9uIG9mIHByb3Zpc2lvbmFsIHJlc3BvbnNlLiIpfSkpfSksRi5QUk9WSVNJT05BTF9SRVNQT05TRV9JTlRFUlZBTCkpfXN0b3BQcm9ncmVzc0V4dGVuc2lvblRpbWVyKCl7dm9pZCAwIT09dGhpcy5wcm9ncmVzc0V4dGVuc2lvblRpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLnByb2dyZXNzRXh0ZW5zaW9uVGltZXIpLHRoaXMucHJvZ3Jlc3NFeHRlbnNpb25UaW1lcj12b2lkIDApfXRpbWVyRygpe310aW1lckgoKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgSCBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCksdGhpcy5zdGF0ZT09PWFlLkNvbXBsZXRlZCYmKHRoaXMubG9nZ2VyLndhcm4oIkFDSyB0byBuZWdhdGl2ZSBmaW5hbCByZXNwb25zZSB3YXMgbmV2ZXIgcmVjZWl2ZWQsIHRlcm1pbmF0aW5nIHRyYW5zYWN0aW9uLiIpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLlRlcm1pbmF0ZWQpKX10aW1lckkoKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgSSBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuVGVybWluYXRlZCl9dGltZXJMKCl7dGhpcy5sb2dnZXIuZGVidWcoYFRpbWVyIEwgZXhwaXJlZCBmb3IgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApLHRoaXMuc3RhdGU9PT1hZS5BY2NlcHRlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuVGVybWluYXRlZCl9fWNsYXNzICRle2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5jb3JlPWUsdGhpcy5kaWFsb2dTdGF0ZT10LHRoaXMuY29yZS5kaWFsb2dzLnNldCh0aGlzLmlkLHRoaXMpfXN0YXRpYyBpbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRDbGllbnQoZSx0KXtjb25zdCBzPXQuZ2V0SGVhZGVycygicmVjb3JkLXJvdXRlIikucmV2ZXJzZSgpLGk9dC5wYXJzZUhlYWRlcigiY29udGFjdCIpO2lmKCFpKXRocm93IG5ldyBFcnJvcigiQ29udGFjdCB1bmRlZmluZWQuIik7aWYoIShpIGluc3RhbmNlb2YgbSkpdGhyb3cgbmV3IEVycm9yKCJDb250YWN0IG5vdCBpbnN0YW5jZSBvZiBOYW1lQWRkckhlYWRlci4iKTtjb25zdCByPWkudXJpLG49ZS5jc2VxLG89ZS5jYWxsSWQsYT1lLmZyb21UYWcsYz10LnRvVGFnO2lmKCFvKXRocm93IG5ldyBFcnJvcigiQ2FsbCBpZCB1bmRlZmluZWQuIik7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJGcm9tIHRhZyB1bmRlZmluZWQuIik7aWYoIWMpdGhyb3cgbmV3IEVycm9yKCJUbyB0YWcgdW5kZWZpbmVkLiIpO2lmKCFlLmZyb20pdGhyb3cgbmV3IEVycm9yKCJGcm9tIHVuZGVmaW5lZC4iKTtpZighZS50byl0aHJvdyBuZXcgRXJyb3IoIlRvIHVuZGVmaW5lZC4iKTtjb25zdCBoPWUuZnJvbS51cmksZD1lLnRvLnVyaTtpZighdC5zdGF0dXNDb2RlKXRocm93IG5ldyBFcnJvcigiSW5jb21pbmcgcmVzcG9uc2Ugc3RhdHVzIGNvZGUgdW5kZWZpbmVkLiIpO3JldHVybntpZDpvK2ErYyxlYXJseTp0LnN0YXR1c0NvZGU8MjAwLGNhbGxJZDpvLGxvY2FsVGFnOmEscmVtb3RlVGFnOmMsbG9jYWxTZXF1ZW5jZU51bWJlcjpuLHJlbW90ZVNlcXVlbmNlTnVtYmVyOnVuZGVmaW5lZCxsb2NhbFVSSTpoLHJlbW90ZVVSSTpkLHJlbW90ZVRhcmdldDpyLHJvdXRlU2V0OnMsc2VjdXJlOiExfX1zdGF0aWMgaW5pdGlhbERpYWxvZ1N0YXRlRm9yVXNlckFnZW50U2VydmVyKGUsdCxzPSExKXtjb25zdCBpPWUuZ2V0SGVhZGVycygicmVjb3JkLXJvdXRlIikscj1lLnBhcnNlSGVhZGVyKCJjb250YWN0Iik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJDb250YWN0IHVuZGVmaW5lZC4iKTtpZighKHIgaW5zdGFuY2VvZiBtKSl0aHJvdyBuZXcgRXJyb3IoIkNvbnRhY3Qgbm90IGluc3RhbmNlIG9mIE5hbWVBZGRySGVhZGVyLiIpO2NvbnN0IG49ci51cmksbz1lLmNzZXEsYT1lLmNhbGxJZCxjPXQsaD1lLmZyb21UYWcsZD1lLmZyb20udXJpO3JldHVybntpZDphK2MraCxlYXJseTpzLGNhbGxJZDphLGxvY2FsVGFnOmMscmVtb3RlVGFnOmgsbG9jYWxTZXF1ZW5jZU51bWJlcjp1bmRlZmluZWQscmVtb3RlU2VxdWVuY2VOdW1iZXI6byxsb2NhbFVSSTplLnRvLnVyaSxyZW1vdGVVUkk6ZCxyZW1vdGVUYXJnZXQ6bixyb3V0ZVNldDppLHNlY3VyZTohMX19ZGlzcG9zZSgpe3RoaXMuY29yZS5kaWFsb2dzLmRlbGV0ZSh0aGlzLmlkKX1nZXQgaWQoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5pZH1nZXQgZWFybHkoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5lYXJseX1nZXQgY2FsbElkKCl7cmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUuY2FsbElkfWdldCBsb2NhbFRhZygpe3JldHVybiB0aGlzLmRpYWxvZ1N0YXRlLmxvY2FsVGFnfWdldCByZW1vdGVUYWcoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5yZW1vdGVUYWd9Z2V0IGxvY2FsU2VxdWVuY2VOdW1iZXIoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFNlcXVlbmNlTnVtYmVyfWdldCByZW1vdGVTZXF1ZW5jZU51bWJlcigpe3JldHVybiB0aGlzLmRpYWxvZ1N0YXRlLnJlbW90ZVNlcXVlbmNlTnVtYmVyfWdldCBsb2NhbFVSSSgpe3JldHVybiB0aGlzLmRpYWxvZ1N0YXRlLmxvY2FsVVJJfWdldCByZW1vdGVVUkkoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5yZW1vdGVVUkl9Z2V0IHJlbW90ZVRhcmdldCgpe3JldHVybiB0aGlzLmRpYWxvZ1N0YXRlLnJlbW90ZVRhcmdldH1nZXQgcm91dGVTZXQoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5yb3V0ZVNldH1nZXQgc2VjdXJlKCl7cmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUuc2VjdXJlfWdldCB1c2VyQWdlbnRDb3JlKCl7cmV0dXJuIHRoaXMuY29yZX1jb25maXJtKCl7dGhpcy5kaWFsb2dTdGF0ZS5lYXJseT0hMX1yZWNlaXZlUmVxdWVzdChlKXtpZihlLm1ldGhvZCE9PUwuQUNLKXtpZih0aGlzLnJlbW90ZVNlcXVlbmNlTnVtYmVyKXtpZihlLmNzZXE8PXRoaXMucmVtb3RlU2VxdWVuY2VOdW1iZXIpdGhyb3cgbmV3IEVycm9yKCJPdXQgb2Ygc2VxdWVuY2UgaW4gZGlhbG9nIHJlcXVlc3QuIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgc2VxdWVuY2VHdWFyZCgpPyIpO3RoaXMuZGlhbG9nU3RhdGUucmVtb3RlU2VxdWVuY2VOdW1iZXI9ZS5jc2VxfXRoaXMucmVtb3RlU2VxdWVuY2VOdW1iZXJ8fCh0aGlzLmRpYWxvZ1N0YXRlLnJlbW90ZVNlcXVlbmNlTnVtYmVyPWUuY3NlcSl9fXJlY29tcHV0ZVJvdXRlU2V0KGUpe3RoaXMuZGlhbG9nU3RhdGUucm91dGVTZXQ9ZS5nZXRIZWFkZXJzKCJyZWNvcmQtcm91dGUiKS5yZXZlcnNlKCl9Y3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShlLHQpe2NvbnN0IHM9dGhpcy5yZW1vdGVVUkksaT10aGlzLnJlbW90ZVRhZyxyPXRoaXMubG9jYWxVUkksbj10aGlzLmxvY2FsVGFnLG89dGhpcy5jYWxsSWQ7bGV0IGE7YT10JiZ0LmNzZXE/dC5jc2VxOnRoaXMuZGlhbG9nU3RhdGUubG9jYWxTZXF1ZW5jZU51bWJlcj90aGlzLmRpYWxvZ1N0YXRlLmxvY2FsU2VxdWVuY2VOdW1iZXIrPTE6dGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFNlcXVlbmNlTnVtYmVyPTE7Y29uc3QgYz10aGlzLnJlbW90ZVRhcmdldCxoPXRoaXMucm91dGVTZXQsZD10JiZ0LmV4dHJhSGVhZGVycyxsPXQmJnQuYm9keTtyZXR1cm4gdGhpcy51c2VyQWdlbnRDb3JlLm1ha2VPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKGUsYyxyLHMse2NhbGxJZDpvLGNzZXE6YSxmcm9tVGFnOm4sdG9UYWc6aSxyb3V0ZVNldDpofSxkLGwpfWluY3JlbWVudExvY2FsU2VxdWVuY2VOdW1iZXIoKXtpZighdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFNlcXVlbmNlTnVtYmVyKXRocm93IG5ldyBFcnJvcigiTG9jYWwgc2VxdWVuY2UgbnVtYmVyIHVuZGVmaW5lZC4iKTt0aGlzLmRpYWxvZ1N0YXRlLmxvY2FsU2VxdWVuY2VOdW1iZXIrPTF9c2VxdWVuY2VHdWFyZChlKXtyZXR1cm4gZS5tZXRob2Q9PT1MLkFDS3x8KCEodGhpcy5yZW1vdGVTZXF1ZW5jZU51bWJlciYmZS5jc2VxPD10aGlzLnJlbW90ZVNlcXVlbmNlTnVtYmVyKXx8KHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjUwMH0pLCExKSl9fWNsYXNzIEllIGV4dGVuZHMgeWV7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKGUsdCxzLGFlLkNhbGxpbmcsInNpcC50cmFuc2FjdGlvbi5pY3QiKSx0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGU9bmV3IE1hcCx0aGlzLkI9c2V0VGltZW91dCgoKCk9PnRoaXMudGltZXJCKCkpLEYuVElNRVJfQiksdGhpcy5zZW5kKGUudG9TdHJpbmcoKSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIGluaXRpYWwgb3V0Z29pbmcgcmVxdWVzdC4iKX0pKX1kaXNwb3NlKCl7dGhpcy5CJiYoY2xlYXJUaW1lb3V0KHRoaXMuQiksdGhpcy5CPXZvaWQgMCksdGhpcy5EJiYoY2xlYXJUaW1lb3V0KHRoaXMuRCksdGhpcy5EPXZvaWQgMCksdGhpcy5NJiYoY2xlYXJUaW1lb3V0KHRoaXMuTSksdGhpcy5NPXZvaWQgMCksc3VwZXIuZGlzcG9zZSgpfWdldCBraW5kKCl7cmV0dXJuImljdCJ9YWNrUmVzcG9uc2UoZSl7Y29uc3QgdD1lLnRvVGFnO2lmKCF0KXRocm93IG5ldyBFcnJvcigiVG8gdGFnIHVuZGVmaW5lZC4iKTtjb25zdCBzPSJ6OWhHNGJLIitNYXRoLmZsb29yKDFlNypNYXRoLnJhbmRvbSgpKTtlLnNldFZpYUhlYWRlcihzLHRoaXMudHJhbnNwb3J0LnByb3RvY29sKSx0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGUuc2V0KHQsZSksdGhpcy5zZW5kKGUudG9TdHJpbmcoKSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIEFDSyB0byAyeHggcmVzcG9uc2UuIil9KSl9cmVjZWl2ZVJlc3BvbnNlKGUpe2NvbnN0IHQ9ZS5zdGF0dXNDb2RlO2lmKCF0fHx0PDEwMHx8dD42OTkpdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXR1cyBjb2RlICR7dH1gKTtzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhZS5DYWxsaW5nOmlmKHQ+PTEwMCYmdDw9MTk5KXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihhZS5Qcm9jZWVkaW5nKSx2b2lkKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UmJnRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UoZSkpO2lmKHQ+PTIwMCYmdDw9Mjk5KXJldHVybiB0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGUuc2V0KGUudG9UYWcsdm9pZCAwKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihhZS5BY2NlcHRlZCksdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTtpZih0Pj0zMDAmJnQ8PTY5OSlyZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuQ29tcGxldGVkKSx0aGlzLmFjayhlKSx2b2lkKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UmJnRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UoZSkpO2JyZWFrO2Nhc2UgYWUuUHJvY2VlZGluZzppZih0Pj0xMDAmJnQ8PTE5OSlyZXR1cm4gdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTtpZih0Pj0yMDAmJnQ8PTI5OSlyZXR1cm4gdGhpcy5hY2tSZXRyYW5zbWlzc2lvbkNhY2hlLnNldChlLnRvVGFnLHZvaWQgMCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuQWNjZXB0ZWQpLHZvaWQodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSYmdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShlKSk7aWYodD49MzAwJiZ0PD02OTkpcmV0dXJuIHRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLkNvbXBsZXRlZCksdGhpcy5hY2soZSksdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTticmVhaztjYXNlIGFlLkFjY2VwdGVkOmlmKHQ+PTIwMCYmdDw9Mjk5KXtpZighdGhpcy5hY2tSZXRyYW5zbWlzc2lvbkNhY2hlLmhhcyhlLnRvVGFnKSlyZXR1cm4gdGhpcy5hY2tSZXRyYW5zbWlzc2lvbkNhY2hlLnNldChlLnRvVGFnLHZvaWQgMCksdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTtjb25zdCB0PXRoaXMuYWNrUmV0cmFuc21pc3Npb25DYWNoZS5nZXQoZS50b1RhZyk7cmV0dXJuIHQ/dm9pZCB0aGlzLnNlbmQodC50b1N0cmluZygpKS5jYXRjaCgoZT0+e3RoaXMubG9nVHJhbnNwb3J0RXJyb3IoZSwiRmFpbGVkIHRvIHNlbmQgcmV0cmFuc21pc3Npb24gb2YgQUNLIHRvIDJ4eCByZXNwb25zZS4iKX0pKTp2b2lkIDB9YnJlYWs7Y2FzZSBhZS5Db21wbGV0ZWQ6aWYodD49MzAwJiZ0PD02OTkpcmV0dXJuIHZvaWQgdGhpcy5hY2soZSk7YnJlYWs7Y2FzZSBhZS5UZXJtaW5hdGVkOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlICR7dGhpcy5zdGF0ZX1gKX1jb25zdCBzPWBSZWNlaXZlZCB1bmV4cGVjdGVkICR7dH0gcmVzcG9uc2Ugd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfS5gO3RoaXMubG9nZ2VyLndhcm4ocyl9b25UcmFuc3BvcnRFcnJvcihlKXt0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvciYmdGhpcy51c2VyLm9uVHJhbnNwb3J0RXJyb3IoZSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oYWUuVGVybWluYXRlZCwhMCl9dHlwZVRvU3RyaW5nKCl7cmV0dXJuIklOVklURSBjbGllbnQgdHJhbnNhY3Rpb24ifWFjayhlKXtjb25zdCB0PXRoaXMucmVxdWVzdC5ydXJpLHM9dGhpcy5yZXF1ZXN0LmNhbGxJZCxpPXRoaXMucmVxdWVzdC5jc2VxLHI9dGhpcy5yZXF1ZXN0LmdldEhlYWRlcigiZnJvbSIpLG49ZS5nZXRIZWFkZXIoInRvIiksbz10aGlzLnJlcXVlc3QuZ2V0SGVhZGVyKCJ2aWEiKSxhPXRoaXMucmVxdWVzdC5nZXRIZWFkZXIoInJvdXRlIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJGcm9tIHVuZGVmaW5lZC4iKTtpZighbil0aHJvdyBuZXcgRXJyb3IoIlRvIHVuZGVmaW5lZC4iKTtpZighbyl0aHJvdyBuZXcgRXJyb3IoIlZpYSB1bmRlZmluZWQuIik7bGV0IGM9YEFDSyAke3R9IFNJUC8yLjBcclxuYDthJiYoYys9YFJvdXRlOiAke2F9XHJcbmApLGMrPWBWaWE6ICR7b31cclxuYCxjKz1gVG86ICR7bn1cclxuYCxjKz1gRnJvbTogJHtyfVxyXG5gLGMrPWBDYWxsLUlEOiAke3N9XHJcbmAsYys9YENTZXE6ICR7aX0gQUNLXHJcbmAsYys9Ik1heC1Gb3J3YXJkczogNzBcclxuIixjKz0iQ29udGVudC1MZW5ndGg6IDBcclxuXHJcbiIsdGhpcy5zZW5kKGMpLmNhdGNoKChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCBBQ0sgdG8gbm9uLTJ4eCByZXNwb25zZS4iKX0pKX1zdGF0ZVRyYW5zaXRpb24oZSx0PSExKXtjb25zdCBzPSgpPT57dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuc3RhdGV9IHRvICR7ZX1gKX07c3dpdGNoKGUpe2Nhc2UgYWUuQ2FsbGluZzpzKCk7YnJlYWs7Y2FzZSBhZS5Qcm9jZWVkaW5nOnRoaXMuc3RhdGUhPT1hZS5DYWxsaW5nJiZzKCk7YnJlYWs7Y2FzZSBhZS5BY2NlcHRlZDpjYXNlIGFlLkNvbXBsZXRlZDp0aGlzLnN0YXRlIT09YWUuQ2FsbGluZyYmdGhpcy5zdGF0ZSE9PWFlLlByb2NlZWRpbmcmJnMoKTticmVhaztjYXNlIGFlLlRlcm1pbmF0ZWQ6dGhpcy5zdGF0ZSE9PWFlLkNhbGxpbmcmJnRoaXMuc3RhdGUhPT1hZS5BY2NlcHRlZCYmdGhpcy5zdGF0ZSE9PWFlLkNvbXBsZXRlZCYmKHR8fHMoKSk7YnJlYWs7ZGVmYXVsdDpzKCl9dGhpcy5CJiYoY2xlYXJUaW1lb3V0KHRoaXMuQiksdGhpcy5CPXZvaWQgMCksYWUuUHJvY2VlZGluZyxlPT09YWUuQ29tcGxldGVkJiYodGhpcy5EPXNldFRpbWVvdXQoKCgpPT50aGlzLnRpbWVyRCgpKSxGLlRJTUVSX0QpKSxlPT09YWUuQWNjZXB0ZWQmJih0aGlzLk09c2V0VGltZW91dCgoKCk9PnRoaXMudGltZXJNKCkpLEYuVElNRVJfTSkpLGU9PT1hZS5UZXJtaW5hdGVkJiZ0aGlzLmRpc3Bvc2UoKSx0aGlzLnNldFN0YXRlKGUpfXRpbWVyQSgpe310aW1lckIoKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgQiBleHBpcmVkIGZvciBJTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCksdGhpcy5zdGF0ZT09PWFlLkNhbGxpbmcmJih0aGlzLm9uUmVxdWVzdFRpbWVvdXQoKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihhZS5UZXJtaW5hdGVkKSl9dGltZXJEKCl7dGhpcy5sb2dnZXIuZGVidWcoYFRpbWVyIEQgZXhwaXJlZCBmb3IgSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApLHRoaXMuc3RhdGU9PT1hZS5Db21wbGV0ZWQmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLlRlcm1pbmF0ZWQpfXRpbWVyTSgpe3RoaXMubG9nZ2VyLmRlYnVnKGBUaW1lciBNIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJHt0aGlzLmlkfS5gKSx0aGlzLnN0YXRlPT09YWUuQWNjZXB0ZWQmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLlRlcm1pbmF0ZWQpfX1jbGFzcyBDZXtjb25zdHJ1Y3RvcihlLHQscyxpKXt0aGlzLnRyYW5zYWN0aW9uQ29uc3RydWN0b3I9ZSx0aGlzLmNvcmU9dCx0aGlzLm1lc3NhZ2U9cyx0aGlzLmRlbGVnYXRlPWksdGhpcy5jaGFsbGVuZ2VkPSExLHRoaXMuc3RhbGU9ITEsdGhpcy5sb2dnZXI9dGhpcy5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcigic2lwLnVzZXItYWdlbnQtY2xpZW50IiksdGhpcy5pbml0KCl9ZGlzcG9zZSgpe3RoaXMudHJhbnNhY3Rpb24uZGlzcG9zZSgpfWdldCBsb2dnZXJGYWN0b3J5KCl7cmV0dXJuIHRoaXMuY29yZS5sb2dnZXJGYWN0b3J5fWdldCB0cmFuc2FjdGlvbigpe2lmKCF0aGlzLl90cmFuc2FjdGlvbil0aHJvdyBuZXcgRXJyb3IoIlRyYW5zYWN0aW9uIHVuZGVmaW5lZC4iKTtyZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb259Y2FuY2VsKGUsdD17fSl7aWYoIXRoaXMudHJhbnNhY3Rpb24pdGhyb3cgbmV3IEVycm9yKCJUcmFuc2FjdGlvbiB1bmRlZmluZWQuIik7aWYoIXRoaXMubWVzc2FnZS50byl0aHJvdyBuZXcgRXJyb3IoIlRvIHVuZGVmaW5lZC4iKTtpZighdGhpcy5tZXNzYWdlLmZyb20pdGhyb3cgbmV3IEVycm9yKCJGcm9tIHVuZGVmaW5lZC4iKTtjb25zdCBzPXRoaXMuY29yZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShMLkNBTkNFTCx0aGlzLm1lc3NhZ2UucnVyaSx0aGlzLm1lc3NhZ2UuZnJvbS51cmksdGhpcy5tZXNzYWdlLnRvLnVyaSx7dG9UYWc6dGhpcy5tZXNzYWdlLnRvVGFnLGZyb21UYWc6dGhpcy5tZXNzYWdlLmZyb21UYWcsY2FsbElkOnRoaXMubWVzc2FnZS5jYWxsSWQsY3NlcTp0aGlzLm1lc3NhZ2UuY3NlcX0sdC5leHRyYUhlYWRlcnMpO3JldHVybiBzLmJyYW5jaD10aGlzLm1lc3NhZ2UuYnJhbmNoLHRoaXMubWVzc2FnZS5oZWFkZXJzLlJvdXRlJiYocy5oZWFkZXJzLlJvdXRlPXRoaXMubWVzc2FnZS5oZWFkZXJzLlJvdXRlKSxlJiZzLnNldEhlYWRlcigiUmVhc29uIixlKSx0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09YWUuUHJvY2VlZGluZz9uZXcgQ2UoU2UsdGhpcy5jb3JlLHMpOnRoaXMudHJhbnNhY3Rpb24uYWRkU3RhdGVDaGFuZ2VMaXN0ZW5lcigoKCk9Pnt0aGlzLnRyYW5zYWN0aW9uJiZ0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09YWUuUHJvY2VlZGluZyYmbmV3IENlKFNlLHRoaXMuY29yZSxzKX0pLHtvbmNlOiEwfSksc31hdXRoZW50aWNhdGlvbkd1YXJkKGUsdCl7Y29uc3Qgcz1lLnN0YXR1c0NvZGU7aWYoIXMpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuIik7aWYoNDAxIT09cyYmNDA3IT09cylyZXR1cm4hMDtsZXQgaSxyO2lmKDQwMT09PXM/KGk9ZS5wYXJzZUhlYWRlcigid3d3LWF1dGhlbnRpY2F0ZSIpLHI9ImF1dGhvcml6YXRpb24iKTooaT1lLnBhcnNlSGVhZGVyKCJwcm94eS1hdXRoZW50aWNhdGUiKSxyPSJwcm94eS1hdXRob3JpemF0aW9uIiksIWkpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4ocysiIHdpdGggd3Jvbmcgb3IgbWlzc2luZyBjaGFsbGVuZ2UsIGNhbm5vdCBhdXRoZW50aWNhdGUiKSwhMDtpZih0aGlzLmNoYWxsZW5nZWQmJih0aGlzLnN0YWxlfHwhMCE9PWkuc3RhbGUpKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKHMrIiBhcHBhcmVudGx5IGluIGF1dGhlbnRpY2F0aW9uIGxvb3AsIGNhbm5vdCBhdXRoZW50aWNhdGUiKSwhMDtpZighdGhpcy5jcmVkZW50aWFscyYmKHRoaXMuY3JlZGVudGlhbHM9dGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24uYXV0aGVudGljYXRpb25GYWN0b3J5KCksIXRoaXMuY3JlZGVudGlhbHMpKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJVbmFibGUgdG8gb2J0YWluIGNyZWRlbnRpYWxzLCBjYW5ub3QgYXV0aGVudGljYXRlIiksITA7aWYoIXRoaXMuY3JlZGVudGlhbHMuYXV0aGVudGljYXRlKHRoaXMubWVzc2FnZSxpKSlyZXR1cm4hMDt0aGlzLmNoYWxsZW5nZWQ9ITAsaS5zdGFsZSYmKHRoaXMuc3RhbGU9ITApO2xldCBuPXRoaXMubWVzc2FnZS5jc2VxKz0xO3JldHVybiB0JiZ0LmxvY2FsU2VxdWVuY2VOdW1iZXImJih0LmluY3JlbWVudExvY2FsU2VxdWVuY2VOdW1iZXIoKSxuPXRoaXMubWVzc2FnZS5jc2VxPXQubG9jYWxTZXF1ZW5jZU51bWJlciksdGhpcy5tZXNzYWdlLnNldEhlYWRlcigiY3NlcSIsbisiICIrdGhpcy5tZXNzYWdlLm1ldGhvZCksdGhpcy5tZXNzYWdlLnNldEhlYWRlcihyLHRoaXMuY3JlZGVudGlhbHMudG9TdHJpbmcoKSksdGhpcy5pbml0KCksITF9b25SZXF1ZXN0VGltZW91dCgpe3RoaXMubG9nZ2VyLndhcm4oIlVzZXIgYWdlbnQgY2xpZW50IHJlcXVlc3QgdGltZWQgb3V0LiBHZW5lcmF0aW5nIGludGVybmFsIDQwOCBSZXF1ZXN0IFRpbWVvdXQuIik7Y29uc3QgZT1uZXcgSDtlLnN0YXR1c0NvZGU9NDA4LGUucmVhc29uUGhyYXNlPSJSZXF1ZXN0IFRpbWVvdXQiLHRoaXMucmVjZWl2ZVJlc3BvbnNlKGUpfW9uVHJhbnNwb3J0RXJyb3IoZSl7dGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcigiVXNlciBhZ2VudCBjbGllbnQgcmVxdWVzdCB0cmFuc3BvcnQgZXJyb3IuIEdlbmVyYXRpbmcgaW50ZXJuYWwgNTAzIFNlcnZpY2UgVW5hdmFpbGFibGUuIik7Y29uc3QgdD1uZXcgSDt0LnN0YXR1c0NvZGU9NTAzLHQucmVhc29uUGhyYXNlPSJTZXJ2aWNlIFVuYXZhaWxhYmxlIix0aGlzLnJlY2VpdmVSZXNwb25zZSh0KX1yZWNlaXZlUmVzcG9uc2UoZSl7aWYoIXRoaXMuYXV0aGVudGljYXRpb25HdWFyZChlKSlyZXR1cm47Y29uc3QgdD1lLnN0YXR1c0NvZGU/ZS5zdGF0dXNDb2RlLnRvU3RyaW5nKCk6IiI7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuIik7c3dpdGNoKCEwKXtjYXNlL14xMDAkLy50ZXN0KHQpOnRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25UcnlpbmcmJnRoaXMuZGVsZWdhdGUub25Ucnlpbmcoe21lc3NhZ2U6ZX0pO2JyZWFrO2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblByb2dyZXNzJiZ0aGlzLmRlbGVnYXRlLm9uUHJvZ3Jlc3Moe21lc3NhZ2U6ZX0pO2JyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCh7bWVzc2FnZTplfSk7YnJlYWs7Y2FzZS9eM1swLTldezJ9JC8udGVzdCh0KTp0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVkaXJlY3QmJnRoaXMuZGVsZWdhdGUub25SZWRpcmVjdCh7bWVzc2FnZTplfSk7YnJlYWs7Y2FzZS9eWzQtNl1bMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblJlamVjdCYmdGhpcy5kZWxlZ2F0ZS5vblJlamVjdCh7bWVzc2FnZTplfSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdHVzIGNvZGUgJHt0fWApfX1pbml0KCl7Y29uc3QgZT17bG9nZ2VyRmFjdG9yeTp0aGlzLmxvZ2dlckZhY3Rvcnksb25SZXF1ZXN0VGltZW91dDooKT0+dGhpcy5vblJlcXVlc3RUaW1lb3V0KCksb25TdGF0ZUNoYW5nZTplPT57ZT09PWFlLlRlcm1pbmF0ZWQmJih0aGlzLmNvcmUudXNlckFnZW50Q2xpZW50cy5kZWxldGUocyksdD09PXRoaXMuX3RyYW5zYWN0aW9uJiZ0aGlzLmRpc3Bvc2UoKSl9LG9uVHJhbnNwb3J0RXJyb3I6ZT0+dGhpcy5vblRyYW5zcG9ydEVycm9yKGUpLHJlY2VpdmVSZXNwb25zZTplPT50aGlzLnJlY2VpdmVSZXNwb25zZShlKX0sdD1uZXcgdGhpcy50cmFuc2FjdGlvbkNvbnN0cnVjdG9yKHRoaXMubWVzc2FnZSx0aGlzLmNvcmUudHJhbnNwb3J0LGUpO3RoaXMuX3RyYW5zYWN0aW9uPXQ7Y29uc3Qgcz10LmlkK3QucmVxdWVzdC5tZXRob2Q7dGhpcy5jb3JlLnVzZXJBZ2VudENsaWVudHMuc2V0KHMsdGhpcyl9fWNsYXNzIEFlIGV4dGVuZHMgQ2V7Y29uc3RydWN0b3IoZSx0LHMpe2NvbnN0IGk9ZS5jcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKEwuQllFLHMpO3N1cGVyKFNlLGUudXNlckFnZW50Q29yZSxpLHQpLGUuZGlzcG9zZSgpfX1jbGFzcyBEZSBleHRlbmRzIFJle2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihlLHQscyxhZS5UcnlpbmcsInNpcC50cmFuc2FjdGlvbi5uaXN0Iil9ZGlzcG9zZSgpe3RoaXMuSiYmKGNsZWFyVGltZW91dCh0aGlzLkopLHRoaXMuSj12b2lkIDApLHN1cGVyLmRpc3Bvc2UoKX1nZXQga2luZCgpe3JldHVybiJuaXN0In1yZWNlaXZlUmVxdWVzdChlKXtzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhZS5Ucnlpbmc6YnJlYWs7Y2FzZSBhZS5Qcm9jZWVkaW5nOmlmKCF0aGlzLmxhc3RSZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoIkxhc3QgcmVzcG9uc2UgdW5kZWZpbmVkLiIpO3RoaXMuc2VuZCh0aGlzLmxhc3RSZXNwb25zZSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIHJldHJhbnNtaXNzaW9uIG9mIHByb3Zpc2lvbmFsIHJlc3BvbnNlLiIpfSkpO2JyZWFrO2Nhc2UgYWUuQ29tcGxldGVkOmlmKCF0aGlzLmxhc3RSZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoIkxhc3QgcmVzcG9uc2UgdW5kZWZpbmVkLiIpO3RoaXMuc2VuZCh0aGlzLmxhc3RSZXNwb25zZSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIHJldHJhbnNtaXNzaW9uIG9mIGZpbmFsIHJlc3BvbnNlLiIpfSkpO2JyZWFrO2Nhc2UgYWUuVGVybWluYXRlZDpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSAke3RoaXMuc3RhdGV9YCl9fXJlY2VpdmVSZXNwb25zZShlLHQpe2lmKGU8MTAwfHxlPjY5OSl0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdHVzIGNvZGUgJHtlfWApO2lmKGU+MTAwJiZlPD0xOTkpdGhyb3cgbmV3IEVycm9yKCJQcm92aXNpb25hbCByZXNwb25zZSBvdGhlciB0aGFuIDEwMCBub3QgYWxsb3dlZC4iKTtzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhZS5Ucnlpbmc6aWYodGhpcy5sYXN0UmVzcG9uc2U9dCxlPj0xMDAmJmU8MjAwKXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihhZS5Qcm9jZWVkaW5nKSx2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaCgoZT0+e3RoaXMubG9nVHJhbnNwb3J0RXJyb3IoZSwiRmFpbGVkIHRvIHNlbmQgcHJvdmlzaW9uYWwgcmVzcG9uc2UuIil9KSk7aWYoZT49MjAwJiZlPD02OTkpcmV0dXJuIHRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLkNvbXBsZXRlZCksdm9pZCB0aGlzLnNlbmQodCkuY2F0Y2goKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIGZpbmFsIHJlc3BvbnNlLiIpfSkpO2JyZWFrO2Nhc2UgYWUuUHJvY2VlZGluZzppZih0aGlzLmxhc3RSZXNwb25zZT10LGU+PTIwMCYmZTw9Njk5KXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihhZS5Db21wbGV0ZWQpLHZvaWQgdGhpcy5zZW5kKHQpLmNhdGNoKChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCBmaW5hbCByZXNwb25zZS4iKX0pKTticmVhaztjYXNlIGFlLkNvbXBsZXRlZDpyZXR1cm47Y2FzZSBhZS5UZXJtaW5hdGVkOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlICR7dGhpcy5zdGF0ZX1gKX1jb25zdCBzPWBOb24tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiByZWNlaXZlZCB1bmV4cGVjdGVkICR7ZX0gcmVzcG9uc2UgZnJvbSBUVSB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LmA7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IocyksbmV3IEVycm9yKHMpfW9uVHJhbnNwb3J0RXJyb3IoZSl7dGhpcy51c2VyLm9uVHJhbnNwb3J0RXJyb3ImJnRoaXMudXNlci5vblRyYW5zcG9ydEVycm9yKGUpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKGFlLlRlcm1pbmF0ZWQsITApfXR5cGVUb1N0cmluZygpe3JldHVybiJub24tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiJ9c3RhdGVUcmFuc2l0aW9uKGUsdD0hMSl7Y29uc3Qgcz0oKT0+e3Rocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLnN0YXRlfSB0byAke2V9YCl9O3N3aXRjaChlKXtjYXNlIGFlLlRyeWluZzpzKCk7YnJlYWs7Y2FzZSBhZS5Qcm9jZWVkaW5nOnRoaXMuc3RhdGUhPT1hZS5UcnlpbmcmJnMoKTticmVhaztjYXNlIGFlLkNvbXBsZXRlZDp0aGlzLnN0YXRlIT09YWUuVHJ5aW5nJiZ0aGlzLnN0YXRlIT09YWUuUHJvY2VlZGluZyYmcygpO2JyZWFrO2Nhc2UgYWUuVGVybWluYXRlZDp0aGlzLnN0YXRlIT09YWUuUHJvY2VlZGluZyYmdGhpcy5zdGF0ZSE9PWFlLkNvbXBsZXRlZCYmKHR8fHMoKSk7YnJlYWs7ZGVmYXVsdDpzKCl9ZT09PWFlLkNvbXBsZXRlZCYmKHRoaXMuSj1zZXRUaW1lb3V0KCgoKT0+dGhpcy50aW1lckooKSksRi5USU1FUl9KKSksZT09PWFlLlRlcm1pbmF0ZWQmJnRoaXMuZGlzcG9zZSgpLHRoaXMuc2V0U3RhdGUoZSl9dGltZXJKKCl7dGhpcy5sb2dnZXIuZGVidWcoYFRpbWVyIEogZXhwaXJlZCBmb3IgTk9OLUlOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gJHt0aGlzLmlkfS5gKSx0aGlzLnN0YXRlPT09YWUuQ29tcGxldGVkJiZ0aGlzLnN0YXRlVHJhbnNpdGlvbihhZS5UZXJtaW5hdGVkKX19Y2xhc3MgSGV7Y29uc3RydWN0b3IoZSx0LHMsaSl7dGhpcy50cmFuc2FjdGlvbkNvbnN0cnVjdG9yPWUsdGhpcy5jb3JlPXQsdGhpcy5tZXNzYWdlPXMsdGhpcy5kZWxlZ2F0ZT1pLHRoaXMubG9nZ2VyPXRoaXMubG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoInNpcC51c2VyLWFnZW50LXNlcnZlciIpLHRoaXMudG9UYWc9cy50b1RhZz9zLnRvVGFnOiQoKSx0aGlzLmluaXQoKX1kaXNwb3NlKCl7dGhpcy50cmFuc2FjdGlvbi5kaXNwb3NlKCl9Z2V0IGxvZ2dlckZhY3RvcnkoKXtyZXR1cm4gdGhpcy5jb3JlLmxvZ2dlckZhY3Rvcnl9Z2V0IHRyYW5zYWN0aW9uKCl7aWYoIXRoaXMuX3RyYW5zYWN0aW9uKXRocm93IG5ldyBFcnJvcigiVHJhbnNhY3Rpb24gdW5kZWZpbmVkLiIpO3JldHVybiB0aGlzLl90cmFuc2FjdGlvbn1hY2NlcHQoZT17c3RhdHVzQ29kZToyMDB9KXtpZighdGhpcy5hY2NlcHRhYmxlKXRocm93IG5ldyBPKGAke3RoaXMubWVzc2FnZS5tZXRob2R9IG5vdCBhY2NlcHRhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7Y29uc3QgdD1lLnN0YXR1c0NvZGU7aWYodDwyMDB8fHQ+Mjk5KXRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgc3RhdHVzQ29kZTogJHt0fWApO3JldHVybiB0aGlzLnJlcGx5KGUpfXByb2dyZXNzKGU9e3N0YXR1c0NvZGU6MTgwfSl7aWYoIXRoaXMucHJvZ3Jlc3NhYmxlKXRocm93IG5ldyBPKGAke3RoaXMubWVzc2FnZS5tZXRob2R9IG5vdCBwcm9ncmVzc2FibGUgaW4gc3RhdGUgJHt0aGlzLnRyYW5zYWN0aW9uLnN0YXRlfS5gKTtjb25zdCB0PWUuc3RhdHVzQ29kZTtpZih0PDEwMXx8dD4xOTkpdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBzdGF0dXNDb2RlOiAke3R9YCk7cmV0dXJuIHRoaXMucmVwbHkoZSl9cmVkaXJlY3QoZSx0PXtzdGF0dXNDb2RlOjMwMn0pe2lmKCF0aGlzLnJlZGlyZWN0YWJsZSl0aHJvdyBuZXcgTyhgJHt0aGlzLm1lc3NhZ2UubWV0aG9kfSBub3QgcmVkaXJlY3RhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7Y29uc3Qgcz10LnN0YXR1c0NvZGU7aWYoczwzMDB8fHM+Mzk5KXRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgc3RhdHVzQ29kZTogJHtzfWApO2NvbnN0IGk9bmV3IEFycmF5O2UuZm9yRWFjaCgoZT0+aS5wdXNoKGBDb250YWN0OiAke2UudG9TdHJpbmcoKX1gKSkpLHQuZXh0cmFIZWFkZXJzPSh0LmV4dHJhSGVhZGVyc3x8W10pLmNvbmNhdChpKTtyZXR1cm4gdGhpcy5yZXBseSh0KX1yZWplY3QoZT17c3RhdHVzQ29kZTo0ODB9KXtpZighdGhpcy5yZWplY3RhYmxlKXRocm93IG5ldyBPKGAke3RoaXMubWVzc2FnZS5tZXRob2R9IG5vdCByZWplY3RhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7Y29uc3QgdD1lLnN0YXR1c0NvZGU7aWYodDw0MDB8fHQ+Njk5KXRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgc3RhdHVzQ29kZTogJHt0fWApO3JldHVybiB0aGlzLnJlcGx5KGUpfXRyeWluZyhlKXtpZighdGhpcy50cnlpbmdhYmxlKXRocm93IG5ldyBPKGAke3RoaXMubWVzc2FnZS5tZXRob2R9IG5vdCB0cnlpbmdhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7cmV0dXJuIHRoaXMucmVwbHkoe3N0YXR1c0NvZGU6MTAwfSl9cmVjZWl2ZUNhbmNlbChlKXt0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQ2FuY2VsJiZ0aGlzLmRlbGVnYXRlLm9uQ2FuY2VsKGUpfWdldCBhY2NlcHRhYmxlKCl7aWYodGhpcy50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEVlKXJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09YWUuUHJvY2VlZGluZ3x8dGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLkFjY2VwdGVkO2lmKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBEZSlyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlRyeWluZ3x8dGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlByb2NlZWRpbmc7dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHRyYW5zYWN0aW9uIHR5cGUuIil9Z2V0IHByb2dyZXNzYWJsZSgpe2lmKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBFZSlyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlByb2NlZWRpbmc7aWYodGhpcy50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIERlKXJldHVybiExO3Rocm93IG5ldyBFcnJvcigiVW5rbm93biB0cmFuc2FjdGlvbiB0eXBlLiIpfWdldCByZWRpcmVjdGFibGUoKXtpZih0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgRWUpcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uc3RhdGU9PT1hZS5Qcm9jZWVkaW5nO2lmKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBEZSlyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlRyeWluZ3x8dGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlByb2NlZWRpbmc7dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHRyYW5zYWN0aW9uIHR5cGUuIil9Z2V0IHJlamVjdGFibGUoKXtpZih0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgRWUpcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uc3RhdGU9PT1hZS5Qcm9jZWVkaW5nO2lmKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBEZSlyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlRyeWluZ3x8dGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlByb2NlZWRpbmc7dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHRyYW5zYWN0aW9uIHR5cGUuIil9Z2V0IHRyeWluZ2FibGUoKXtpZih0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgRWUpcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uc3RhdGU9PT1hZS5Qcm9jZWVkaW5nO2lmKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBEZSlyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlRyeWluZzt0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZS4iKX1yZXBseShlKXtlLnRvVGFnfHwxMDA9PT1lLnN0YXR1c0NvZGV8fChlLnRvVGFnPXRoaXMudG9UYWcpLGUudXNlckFnZW50PWUudXNlckFnZW50fHx0aGlzLmNvcmUuY29uZmlndXJhdGlvbi51c2VyQWdlbnRIZWFkZXJGaWVsZFZhbHVlLGUuc3VwcG9ydGVkPWUuc3VwcG9ydGVkfHx0aGlzLmNvcmUuY29uZmlndXJhdGlvbi5zdXBwb3J0ZWRPcHRpb25UYWdzUmVzcG9uc2U7Y29uc3QgdD13ZSh0aGlzLm1lc3NhZ2UsZSk7cmV0dXJuIHRoaXMudHJhbnNhY3Rpb24ucmVjZWl2ZVJlc3BvbnNlKGUuc3RhdHVzQ29kZSx0Lm1lc3NhZ2UpLHR9aW5pdCgpe2NvbnN0IGU9e2xvZ2dlckZhY3Rvcnk6dGhpcy5sb2dnZXJGYWN0b3J5LG9uU3RhdGVDaGFuZ2U6ZT0+e2U9PT1hZS5UZXJtaW5hdGVkJiYodGhpcy5jb3JlLnVzZXJBZ2VudFNlcnZlcnMuZGVsZXRlKHMpLHRoaXMuZGlzcG9zZSgpKX0sb25UcmFuc3BvcnRFcnJvcjplPT57dGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uVHJhbnNwb3J0RXJyb3I/dGhpcy5kZWxlZ2F0ZS5vblRyYW5zcG9ydEVycm9yKGUpOnRoaXMubG9nZ2VyLmVycm9yKCJVc2VyIGFnZW50IHNlcnZlciByZXNwb25zZSB0cmFuc3BvcnQgZXJyb3IuIil9fSx0PW5ldyB0aGlzLnRyYW5zYWN0aW9uQ29uc3RydWN0b3IodGhpcy5tZXNzYWdlLHRoaXMuY29yZS50cmFuc3BvcnQsZSk7dGhpcy5fdHJhbnNhY3Rpb249dDtjb25zdCBzPXQuaWQ7dGhpcy5jb3JlLnVzZXJBZ2VudFNlcnZlcnMuc2V0KHQuaWQsdGhpcyl9fWNsYXNzIGtlIGV4dGVuZHMgSGV7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKERlLGUudXNlckFnZW50Q29yZSx0LHMpfX1jbGFzcyBfZSBleHRlbmRzIENle2NvbnN0cnVjdG9yKGUsdCxzKXtjb25zdCBpPWUuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShMLklORk8scyk7c3VwZXIoU2UsZS51c2VyQWdlbnRDb3JlLGksdCl9fWNsYXNzIFBlIGV4dGVuZHMgSGV7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKERlLGUudXNlckFnZW50Q29yZSx0LHMpfX1jbGFzcyBxZSBleHRlbmRzIENle2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihTZSxlLHQscyl9fWNsYXNzIHhlIGV4dGVuZHMgSGV7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKERlLGUsdCxzKX19Y2xhc3MgTmUgZXh0ZW5kcyBDZXtjb25zdHJ1Y3RvcihlLHQscyl7Y29uc3QgaT1lLmNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoTC5OT1RJRlkscyk7c3VwZXIoU2UsZS51c2VyQWdlbnRDb3JlLGksdCl9fWNsYXNzIE1lIGV4dGVuZHMgSGV7Y29uc3RydWN0b3IoZSx0LHMpe2NvbnN0IGk9dm9pZCAwIT09ZS51c2VyQWdlbnRDb3JlP2UudXNlckFnZW50Q29yZTplO3N1cGVyKERlLGksdCxzKX19Y2xhc3MgT2UgZXh0ZW5kcyBDZXtjb25zdHJ1Y3RvcihlLHQscyl7Y29uc3QgaT1lLmNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoTC5QUkFDSyxzKTtzdXBlcihTZSxlLnVzZXJBZ2VudENvcmUsaSx0KSxlLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihpKX19Y2xhc3MgVWUgZXh0ZW5kcyBIZXtjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoRGUsZS51c2VyQWdlbnRDb3JlLHQscyksZS5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24odCksdGhpcy5kaWFsb2c9ZX1hY2NlcHQoZT17c3RhdHVzQ29kZToyMDB9KXtyZXR1cm4gZS5ib2R5JiZ0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZS5ib2R5KSxzdXBlci5hY2NlcHQoZSl9fWNsYXNzIGplIGV4dGVuZHMgQ2V7Y29uc3RydWN0b3IoZSx0LHMpe2NvbnN0IGk9ZS5jcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKEwuSU5WSVRFLHMpO3N1cGVyKEllLGUudXNlckFnZW50Q29yZSxpLHQpLHRoaXMuZGVsZWdhdGU9dCxlLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihpKSxlLnJlaW52aXRlVXNlckFnZW50Q2xpZW50PXRoaXMsdGhpcy5kaWFsb2c9ZX1yZWNlaXZlUmVzcG9uc2UoZSl7aWYoIXRoaXMuYXV0aGVudGljYXRpb25HdWFyZChlLHRoaXMuZGlhbG9nKSlyZXR1cm47Y29uc3QgdD1lLnN0YXR1c0NvZGU/ZS5zdGF0dXNDb2RlLnRvU3RyaW5nKCk6IiI7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuIik7c3dpdGNoKCEwKXtjYXNlL14xMDAkLy50ZXN0KHQpOnRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25UcnlpbmcmJnRoaXMuZGVsZWdhdGUub25Ucnlpbmcoe21lc3NhZ2U6ZX0pO2JyZWFrO2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblByb2dyZXNzJiZ0aGlzLmRlbGVnYXRlLm9uUHJvZ3Jlc3Moe21lc3NhZ2U6ZSxzZXNzaW9uOnRoaXMuZGlhbG9nLHByYWNrOmU9Pnt0aHJvdyBuZXcgRXJyb3IoIlVuaW1wbGVtZW50ZWQuIil9fSk7YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdCh0KTp0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZSksdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCh7bWVzc2FnZTplLHNlc3Npb246dGhpcy5kaWFsb2csYWNrOmU9PnRoaXMuZGlhbG9nLmFjayhlKX0pO2JyZWFrO2Nhc2UvXjNbMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVSb2xsYmFjaygpLHRoaXMuZGlhbG9nLnJlaW52aXRlVXNlckFnZW50Q2xpZW50PXZvaWQgMCx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVkaXJlY3QmJnRoaXMuZGVsZWdhdGUub25SZWRpcmVjdCh7bWVzc2FnZTplfSk7YnJlYWs7Y2FzZS9eWzQtNl1bMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVSb2xsYmFjaygpLHRoaXMuZGlhbG9nLnJlaW52aXRlVXNlckFnZW50Q2xpZW50PXZvaWQgMCx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVqZWN0JiZ0aGlzLmRlbGVnYXRlLm9uUmVqZWN0KHttZXNzYWdlOmV9KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3R9YCl9fX1jbGFzcyBGZSBleHRlbmRzIEhle2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihFZSxlLnVzZXJBZ2VudENvcmUsdCxzKSxlLnJlaW52aXRlVXNlckFnZW50U2VydmVyPXRoaXMsdGhpcy5kaWFsb2c9ZX1hY2NlcHQoZT17c3RhdHVzQ29kZToyMDB9KXtlLmV4dHJhSGVhZGVycz1lLmV4dHJhSGVhZGVyc3x8W10sZS5leHRyYUhlYWRlcnM9ZS5leHRyYUhlYWRlcnMuY29uY2F0KHRoaXMuZGlhbG9nLnJvdXRlU2V0Lm1hcCgoZT0+YFJlY29yZC1Sb3V0ZTogJHtlfWApKSk7Y29uc3QgdD1zdXBlci5hY2NlcHQoZSkscz10aGlzLmRpYWxvZyxpPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7c2Vzc2lvbjpzfSk7cmV0dXJuIGUuYm9keSYmdGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKGUuYm9keSksdGhpcy5kaWFsb2cucmVDb25maXJtKCksaX1wcm9ncmVzcyhlPXtzdGF0dXNDb2RlOjE4MH0pe2NvbnN0IHQ9c3VwZXIucHJvZ3Jlc3MoZSkscz10aGlzLmRpYWxvZyxpPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7c2Vzc2lvbjpzfSk7cmV0dXJuIGUuYm9keSYmdGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKGUuYm9keSksaX1yZWRpcmVjdChlLHQ9e3N0YXR1c0NvZGU6MzAyfSl7dGhyb3cgdGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVSb2xsYmFjaygpLHRoaXMuZGlhbG9nLnJlaW52aXRlVXNlckFnZW50U2VydmVyPXZvaWQgMCxuZXcgRXJyb3IoIlVuaW1wbGVtZW50ZWQuIil9cmVqZWN0KGU9e3N0YXR1c0NvZGU6NDg4fSl7cmV0dXJuIHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlUm9sbGJhY2soKSx0aGlzLmRpYWxvZy5yZWludml0ZVVzZXJBZ2VudFNlcnZlcj12b2lkIDAsc3VwZXIucmVqZWN0KGUpfX1jbGFzcyBMZSBleHRlbmRzIENle2NvbnN0cnVjdG9yKGUsdCxzKXtjb25zdCBpPWUuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShMLlJFRkVSLHMpO3N1cGVyKFNlLGUudXNlckFnZW50Q29yZSxpLHQpfX1jbGFzcyBCZSBleHRlbmRzIEhle2NvbnN0cnVjdG9yKGUsdCxzKXtjb25zdCBpPXZvaWQgMCE9PWUudXNlckFnZW50Q29yZT9lLnVzZXJBZ2VudENvcmU6ZTtzdXBlcihEZSxpLHQscyl9fWNsYXNzIEdlIGV4dGVuZHMgJGV7Y29uc3RydWN0b3IoZSx0LHMsaSl7c3VwZXIodCxzKSx0aGlzLmluaXRpYWxUcmFuc2FjdGlvbj1lLHRoaXMuX3NpZ25hbGluZ1N0YXRlPU0uSW5pdGlhbCx0aGlzLmFja1dhaXQ9ITEsdGhpcy5hY2tQcm9jZXNzaW5nPSExLHRoaXMuZGVsZWdhdGU9aSxlIGluc3RhbmNlb2YgRWUmJih0aGlzLmFja1dhaXQ9ITApLHRoaXMuZWFybHl8fHRoaXMuc3RhcnQyeHhSZXRyYW5zbWlzc2lvblRpbWVyKCksdGhpcy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZS5yZXF1ZXN0KSx0aGlzLmxvZ2dlcj10LmxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKCJzaXAuaW52aXRlLWRpYWxvZyIpLHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IGNvbnN0cnVjdGVkYCl9ZGlzcG9zZSgpe3N1cGVyLmRpc3Bvc2UoKSx0aGlzLl9zaWduYWxpbmdTdGF0ZT1NLkNsb3NlZCx0aGlzLl9vZmZlcj12b2lkIDAsdGhpcy5fYW5zd2VyPXZvaWQgMCx0aGlzLmludml0ZTJ4eFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuaW52aXRlMnh4VGltZXIpLHRoaXMuaW52aXRlMnh4VGltZXI9dm9pZCAwKSx0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBkZXN0cm95ZWRgKX1nZXQgc2Vzc2lvblN0YXRlKCl7cmV0dXJuIHRoaXMuZWFybHk/Ti5FYXJseTp0aGlzLmFja1dhaXQ/Ti5BY2tXYWl0OnRoaXMuX3NpZ25hbGluZ1N0YXRlPT09TS5DbG9zZWQ/Ti5UZXJtaW5hdGVkOk4uQ29uZmlybWVkfWdldCBzaWduYWxpbmdTdGF0ZSgpe3JldHVybiB0aGlzLl9zaWduYWxpbmdTdGF0ZX1nZXQgb2ZmZXIoKXtyZXR1cm4gdGhpcy5fb2ZmZXJ9Z2V0IGFuc3dlcigpe3JldHVybiB0aGlzLl9hbnN3ZXJ9Y29uZmlybSgpe3RoaXMuZWFybHkmJnRoaXMuc3RhcnQyeHhSZXRyYW5zbWlzc2lvblRpbWVyKCksc3VwZXIuY29uZmlybSgpfXJlQ29uZmlybSgpe3RoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXImJnRoaXMuc3RhcnRSZUludml0ZTJ4eFJldHJhbnNtaXNzaW9uVGltZXIoKX1hY2soZT17fSl7bGV0IHQ7aWYodGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBBQ0sgcmVxdWVzdGApLHRoaXMucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQpe2lmKCEodGhpcy5yZWludml0ZVVzZXJBZ2VudENsaWVudC50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEllKSl0aHJvdyBuZXcgRXJyb3IoIlRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi4iKTt0PXRoaXMucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQudHJhbnNhY3Rpb24sdGhpcy5yZWludml0ZVVzZXJBZ2VudENsaWVudD12b2lkIDB9ZWxzZXtpZighKHRoaXMuaW5pdGlhbFRyYW5zYWN0aW9uIGluc3RhbmNlb2YgSWUpKXRocm93IG5ldyBFcnJvcigiSW5pdGlhbCB0cmFuc2FjdGlvbiBub3QgaW5zdGFuY2Ugb2YgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24uIik7dD10aGlzLmluaXRpYWxUcmFuc2FjdGlvbn1jb25zdCBzPXRoaXMuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShMLkFDSyx7Y3NlcTp0LnJlcXVlc3QuY3NlcSxleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnMsYm9keTplLmJvZHl9KTtyZXR1cm4gdC5hY2tSZXNwb25zZShzKSx0aGlzLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihzKSx7bWVzc2FnZTpzfX1ieWUoZSx0KXtpZih0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIEJZRSByZXF1ZXN0YCksdGhpcy5pbml0aWFsVHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBFZSl7aWYodGhpcy5lYXJseSl0aHJvdyBuZXcgRXJyb3IoIlVBUyBNVVNUIE5PVCBzZW5kIGEgQllFIG9uIGVhcmx5IGRpYWxvZ3MuIik7aWYodGhpcy5hY2tXYWl0JiZ0aGlzLmluaXRpYWxUcmFuc2FjdGlvbi5zdGF0ZSE9PWFlLlRlcm1pbmF0ZWQpdGhyb3cgbmV3IEVycm9yKCJVQVMgTVVTVCBOT1Qgc2VuZCBhIEJZRSBvbiBhIGNvbmZpcm1lZCBkaWFsb2cgdW50aWwgaXQgaGFzIHJlY2VpdmVkIGFuIEFDSyBmb3IgaXRzIDJ4eCByZXNwb25zZSBvciB1bnRpbCB0aGUgc2VydmVyIHRyYW5zYWN0aW9uIHRpbWVzIG91dC4iKX1yZXR1cm4gbmV3IEFlKHRoaXMsZSx0KX1pbmZvKGUsdCl7aWYodGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBJTkZPIHJlcXVlc3RgKSx0aGlzLmVhcmx5KXRocm93IG5ldyBFcnJvcigiRGlhbG9nIG5vdCBjb25maXJtZWQuIik7cmV0dXJuIG5ldyBfZSh0aGlzLGUsdCl9aW52aXRlKGUsdCl7aWYodGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBJTlZJVEUgcmVxdWVzdGApLHRoaXMuZWFybHkpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgbm90IGNvbmZpcm1lZC4iKTtpZih0aGlzLnJlaW52aXRlVXNlckFnZW50Q2xpZW50KXRocm93IG5ldyBFcnJvcigiVGhlcmUgaXMgYW4gb25nb2luZyByZS1JTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uLiIpO2lmKHRoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIpdGhyb3cgbmV3IEVycm9yKCJUaGVyZSBpcyBhbiBvbmdvaW5nIHJlLUlOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24uIik7cmV0dXJuIG5ldyBqZSh0aGlzLGUsdCl9bWVzc2FnZShlLHQpe2lmKHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHNlbmRpbmcgTUVTU0FHRSByZXF1ZXN0YCksdGhpcy5lYXJseSl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyBub3QgY29uZmlybWVkLiIpO2NvbnN0IHM9dGhpcy5jcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKEwuTUVTU0FHRSx0KTtyZXR1cm4gbmV3IHFlKHRoaXMuY29yZSxzLGUpfW5vdGlmeShlLHQpe2lmKHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHNlbmRpbmcgTk9USUZZIHJlcXVlc3RgKSx0aGlzLmVhcmx5KXRocm93IG5ldyBFcnJvcigiRGlhbG9nIG5vdCBjb25maXJtZWQuIik7cmV0dXJuIG5ldyBOZSh0aGlzLGUsdCl9cHJhY2soZSx0KXtyZXR1cm4gdGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBQUkFDSyByZXF1ZXN0YCksbmV3IE9lKHRoaXMsZSx0KX1yZWZlcihlLHQpe2lmKHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHNlbmRpbmcgUkVGRVIgcmVxdWVzdGApLHRoaXMuZWFybHkpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgbm90IGNvbmZpcm1lZC4iKTtyZXR1cm4gbmV3IExlKHRoaXMsZSx0KX1yZWNlaXZlUmVxdWVzdChlKXtpZih0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSByZWNlaXZlZCAke2UubWV0aG9kfSByZXF1ZXN0YCksZS5tZXRob2QhPT1MLkFDSylpZih0aGlzLnNlcXVlbmNlR3VhcmQoZSkpe2lmKHN1cGVyLnJlY2VpdmVSZXF1ZXN0KGUpLGUubWV0aG9kPT09TC5JTlZJVEUpe2NvbnN0IHQ9KCk9Pntjb25zdCBlPXRoaXMuYWNrV2FpdD8id2FpdGluZyBmb3IgaW5pdGlhbCBBQ0siOiJwcm9jZXNzaW5nIGluaXRpYWwgQUNLIjt0aGlzLmxvZ2dlci53YXJuKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgcmUtSU5WSVRFIHdoaWxlICR7ZX1gKTtsZXQgdD0iUkZDIDU0MDcgc3VnZ2VzdHMgdGhlIGZvbGxvd2luZyB0byBhdm9pZCB0aGlzIHJhY2UgY29uZGl0aW9uLi4uICI7dCs9IiBOb3RlOiBJbXBsZW1lbnRhdGlvbiBpc3N1ZXMgYXJlIG91dHNpZGUgdGhlIHNjb3BlIG9mIHRoaXMgZG9jdW1lbnQsIix0Kz0iIGJ1dCB0aGUgZm9sbG93aW5nIHRpcCBpcyBwcm92aWRlZCBmb3IgYXZvaWRpbmcgcmFjZSBjb25kaXRpb25zIG9mIix0Kz0iIHRoaXMgdHlwZS4gIFRoZSBjYWxsZXIgY2FuIGRlbGF5IHNlbmRpbmcgcmUtSU5WSVRFIEY2IGZvciBzb21lIHBlcmlvZCIsdCs9IiBvZiB0aW1lICgyIHNlY29uZHMsIHBlcmhhcHMpLCBhZnRlciB3aGljaCB0aGUgY2FsbGVyIGNhbiByZWFzb25hYmx5Iix0Kz0iIGFzc3VtZSB0aGF0IGl0cyBBQ0sgaGFzIGJlZW4gcmVjZWl2ZWQuICBJbXBsZW1lbnRvcnMgY2FuIGRlY291cGxlIHRoZSIsdCs9IiBhY3Rpb25zIG9mIHRoZSB1c2VyIChlLmcuLCBwcmVzc2luZyB0aGUgaG9sZCBidXR0b24pIGZyb20gdGhlIGFjdGlvbnMiLHQrPSIgb2YgdGhlIHByb3RvY29sICh0aGUgc2VuZGluZyBvZiByZS1JTlZJVEUgRjYpLCBzbyB0aGF0IHRoZSBVQSBjYW4iLHQrPSIgYmVoYXZlIGxpa2UgdGhpcy4gIEluIHRoaXMgY2FzZSwgaXQgaXMgdGhlIGltcGxlbWVudG9yJ3MgY2hvaWNlIGFzIHRvIix0Kz0iIGhvdyBsb25nIHRvIHdhaXQuICBJbiBtb3N0IGNhc2VzLCBzdWNoIGFuIGltcGxlbWVudGF0aW9uIG1heSBiZSIsdCs9IiB1c2VmdWwgdG8gcHJldmVudCB0aGUgdHlwZSBvZiByYWNlIGNvbmRpdGlvbiBzaG93biBpbiB0aGlzIHNlY3Rpb24uIix0Kz0iIFRoaXMgZG9jdW1lbnQgZXhwcmVzc2VzIG5vIHByZWZlcmVuY2UgYWJvdXQgd2hldGhlciBvciBub3QgdGhleSIsdCs9IiBzaG91bGQgd2FpdCBmb3IgYW4gQUNLIHRvIGJlIGRlbGl2ZXJlZC4gIEFmdGVyIGNvbnNpZGVyaW5nIHRoZSBpbXBhY3QiLHQrPSIgb24gdXNlciBleHBlcmllbmNlLCBpbXBsZW1lbnRvcnMgc2hvdWxkIGRlY2lkZSB3aGV0aGVyIG9yIG5vdCB0byB3YWl0Iix0Kz0iIGZvciBhIHdoaWxlLCBiZWNhdXNlIHRoZSB1c2VyIGV4cGVyaWVuY2UgZGVwZW5kcyBvbiB0aGUiLHQrPSIgaW1wbGVtZW50YXRpb24gYW5kIGhhcyBubyBkaXJlY3QgYmVhcmluZyBvbiBwcm90b2NvbCBiZWhhdmlvci4iLHRoaXMubG9nZ2VyLndhcm4oIlJGQyA1NDA3IHN1Z2dlc3RzIHRoZSBmb2xsb3dpbmcgdG8gYXZvaWQgdGhpcyByYWNlIGNvbmRpdGlvbi4uLiAgTm90ZTogSW1wbGVtZW50YXRpb24gaXNzdWVzIGFyZSBvdXRzaWRlIHRoZSBzY29wZSBvZiB0aGlzIGRvY3VtZW50LCBidXQgdGhlIGZvbGxvd2luZyB0aXAgaXMgcHJvdmlkZWQgZm9yIGF2b2lkaW5nIHJhY2UgY29uZGl0aW9ucyBvZiB0aGlzIHR5cGUuICBUaGUgY2FsbGVyIGNhbiBkZWxheSBzZW5kaW5nIHJlLUlOVklURSBGNiBmb3Igc29tZSBwZXJpb2Qgb2YgdGltZSAoMiBzZWNvbmRzLCBwZXJoYXBzKSwgYWZ0ZXIgd2hpY2ggdGhlIGNhbGxlciBjYW4gcmVhc29uYWJseSBhc3N1bWUgdGhhdCBpdHMgQUNLIGhhcyBiZWVuIHJlY2VpdmVkLiAgSW1wbGVtZW50b3JzIGNhbiBkZWNvdXBsZSB0aGUgYWN0aW9ucyBvZiB0aGUgdXNlciAoZS5nLiwgcHJlc3NpbmcgdGhlIGhvbGQgYnV0dG9uKSBmcm9tIHRoZSBhY3Rpb25zIG9mIHRoZSBwcm90b2NvbCAodGhlIHNlbmRpbmcgb2YgcmUtSU5WSVRFIEY2KSwgc28gdGhhdCB0aGUgVUEgY2FuIGJlaGF2ZSBsaWtlIHRoaXMuICBJbiB0aGlzIGNhc2UsIGl0IGlzIHRoZSBpbXBsZW1lbnRvcidzIGNob2ljZSBhcyB0byBob3cgbG9uZyB0byB3YWl0LiAgSW4gbW9zdCBjYXNlcywgc3VjaCBhbiBpbXBsZW1lbnRhdGlvbiBtYXkgYmUgdXNlZnVsIHRvIHByZXZlbnQgdGhlIHR5cGUgb2YgcmFjZSBjb25kaXRpb24gc2hvd24gaW4gdGhpcyBzZWN0aW9uLiBUaGlzIGRvY3VtZW50IGV4cHJlc3NlcyBubyBwcmVmZXJlbmNlIGFib3V0IHdoZXRoZXIgb3Igbm90IHRoZXkgc2hvdWxkIHdhaXQgZm9yIGFuIEFDSyB0byBiZSBkZWxpdmVyZWQuICBBZnRlciBjb25zaWRlcmluZyB0aGUgaW1wYWN0IG9uIHVzZXIgZXhwZXJpZW5jZSwgaW1wbGVtZW50b3JzIHNob3VsZCBkZWNpZGUgd2hldGhlciBvciBub3QgdG8gd2FpdCBmb3IgYSB3aGlsZSwgYmVjYXVzZSB0aGUgdXNlciBleHBlcmllbmNlIGRlcGVuZHMgb24gdGhlIGltcGxlbWVudGF0aW9uIGFuZCBoYXMgbm8gZGlyZWN0IGJlYXJpbmcgb24gcHJvdG9jb2wgYmVoYXZpb3IuIil9LHM9W2BSZXRyeS1BZnRlcjogJHtNYXRoLmZsb29yKDEwKk1hdGgucmFuZG9tKCkpKzF9YF07aWYodGhpcy5hY2tQcm9jZXNzaW5nKXJldHVybiB0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo1MDAsZXh0cmFIZWFkZXJzOnN9KSx2b2lkIHQoKTtpZih0aGlzLmFja1dhaXQmJnRoaXMuc2lnbmFsaW5nU3RhdGUhPT1NLlN0YWJsZSlyZXR1cm4gdGhpcy5jb3JlLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NTAwLGV4dHJhSGVhZGVyczpzfSksdm9pZCB0KCk7aWYodGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlcilyZXR1cm4gdm9pZCB0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo1MDAsZXh0cmFIZWFkZXJzOnN9KTtpZih0aGlzLnJlaW52aXRlVXNlckFnZW50Q2xpZW50KXJldHVybiB2b2lkIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjQ5MX0pfWlmKGUubWV0aG9kPT09TC5JTlZJVEUpe2NvbnN0IHQ9ZS5wYXJzZUhlYWRlcigiY29udGFjdCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigiQ29udGFjdCB1bmRlZmluZWQuIik7aWYoISh0IGluc3RhbmNlb2YgbSkpdGhyb3cgbmV3IEVycm9yKCJDb250YWN0IG5vdCBpbnN0YW5jZSBvZiBOYW1lQWRkckhlYWRlci4iKTt0aGlzLmRpYWxvZ1N0YXRlLnJlbW90ZVRhcmdldD10LnVyaX1zd2l0Y2goZS5tZXRob2Qpe2Nhc2UgTC5CWUU6e2NvbnN0IHQ9bmV3IGtlKHRoaXMsZSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkJ5ZT90aGlzLmRlbGVnYXRlLm9uQnllKHQpOnQuYWNjZXB0KCksdGhpcy5kaXNwb3NlKCl9YnJlYWs7Y2FzZSBMLklORk86e2NvbnN0IHQ9bmV3IFBlKHRoaXMsZSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkluZm8/dGhpcy5kZWxlZ2F0ZS5vbkluZm8odCk6dC5yZWplY3Qoe3N0YXR1c0NvZGU6NDY5LGV4dHJhSGVhZGVyczpbIlJlY3YtSW5mbzoiXX0pfWJyZWFrO2Nhc2UgTC5JTlZJVEU6e2NvbnN0IHQ9bmV3IEZlKHRoaXMsZSk7dGhpcy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZSksdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkludml0ZT90aGlzLmRlbGVnYXRlLm9uSW52aXRlKHQpOnQucmVqZWN0KHtzdGF0dXNDb2RlOjQ4OH0pfWJyZWFrO2Nhc2UgTC5NRVNTQUdFOntjb25zdCB0PW5ldyB4ZSh0aGlzLmNvcmUsZSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbk1lc3NhZ2U/dGhpcy5kZWxlZ2F0ZS5vbk1lc3NhZ2UodCk6dC5hY2NlcHQoKX1icmVhaztjYXNlIEwuTk9USUZZOntjb25zdCB0PW5ldyBNZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25Ob3RpZnk/dGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeSh0KTp0LmFjY2VwdCgpfWJyZWFrO2Nhc2UgTC5QUkFDSzp7Y29uc3QgdD1uZXcgVWUodGhpcyxlKTt0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUHJhY2s/dGhpcy5kZWxlZ2F0ZS5vblByYWNrKHQpOnQuYWNjZXB0KCl9YnJlYWs7Y2FzZSBMLlJFRkVSOntjb25zdCB0PW5ldyBCZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWZlcj90aGlzLmRlbGVnYXRlLm9uUmVmZXIodCk6dC5yZWplY3QoKX1icmVhaztkZWZhdWx0OnRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkIHVuaW1wbGVtZW50ZWQgJHtlLm1ldGhvZH0gcmVxdWVzdGApLHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjUwMX0pfX1lbHNlIHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlamVjdGVkIG91dCBvZiBvcmRlciAke2UubWV0aG9kfSByZXF1ZXN0LmApO2Vsc2V7aWYodGhpcy5hY2tXYWl0KXtpZih0aGlzLmluaXRpYWxUcmFuc2FjdGlvbiBpbnN0YW5jZW9mIEllKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSByZWNlaXZlZCB1bmV4cGVjdGVkICR7ZS5tZXRob2R9IHJlcXVlc3QsIGRyb3BwaW5nLmApO2lmKHRoaXMuaW5pdGlhbFRyYW5zYWN0aW9uLnJlcXVlc3QuY3NlcSE9PWUuY3NlcSlyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgdW5leHBlY3RlZCAke2UubWV0aG9kfSByZXF1ZXN0LCBkcm9wcGluZy5gKTt0aGlzLmFja1dhaXQ9ITF9ZWxzZXtpZighdGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlcilyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgdW5leHBlY3RlZCAke2UubWV0aG9kfSByZXF1ZXN0LCBkcm9wcGluZy5gKTtpZih0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyLnRyYW5zYWN0aW9uLnJlcXVlc3QuY3NlcSE9PWUuY3NlcSlyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgdW5leHBlY3RlZCAke2UubWV0aG9kfSByZXF1ZXN0LCBkcm9wcGluZy5gKTt0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyPXZvaWQgMH1pZih0aGlzLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihlKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQWNrKXtjb25zdCB0PXRoaXMuZGVsZWdhdGUub25BY2soe21lc3NhZ2U6ZX0pO3QgaW5zdGFuY2VvZiBQcm9taXNlJiYodGhpcy5hY2tQcm9jZXNzaW5nPSEwLHQudGhlbigoKCk9PnRoaXMuYWNrUHJvY2Vzc2luZz0hMSkpLmNhdGNoKCgoKT0+dGhpcy5hY2tQcm9jZXNzaW5nPSExKSkpfX19cmVsaWFibGVTZXF1ZW5jZUd1YXJkKGUpe2NvbnN0IHQ9ZS5zdGF0dXNDb2RlO2lmKCF0KXRocm93IG5ldyBFcnJvcigiU3RhdHVzIGNvZGUgdW5kZWZpbmVkIik7aWYodD4xMDAmJnQ8MjAwKXtjb25zdCB0PWUuZ2V0SGVhZGVyKCJyZXF1aXJlIikscz1lLmdldEhlYWRlcigicnNlcSIpLGk9dCYmdC5pbmNsdWRlcygiMTAwcmVsIikmJnM/TnVtYmVyKHMpOnZvaWQgMDtpZihpKXtpZih0aGlzLnJzZXEmJnRoaXMucnNlcSsxIT09aSlyZXR1cm4hMTt0aGlzLnJzZXE9dGhpcy5yc2VxP3RoaXMucnNlcSsxOml9fXJldHVybiEwfXNpZ25hbGluZ1N0YXRlUm9sbGJhY2soKXt0aGlzLl9zaWduYWxpbmdTdGF0ZSE9PU0uSGF2ZUxvY2FsT2ZmZXImJnRoaXMuc2lnbmFsaW5nU3RhdGUhPT1NLkhhdmVSZW1vdGVPZmZlcnx8dGhpcy5fcm9sbGJhY2tPZmZlciYmdGhpcy5fcm9sbGJhY2tBbnN3ZXImJih0aGlzLl9zaWduYWxpbmdTdGF0ZT1NLlN0YWJsZSx0aGlzLl9vZmZlcj10aGlzLl9yb2xsYmFja09mZmVyLHRoaXMuX2Fuc3dlcj10aGlzLl9yb2xsYmFja0Fuc3dlcil9c2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKGUpe2NvbnN0IHQ9eChlKTtpZih0JiYic2Vzc2lvbiI9PT10LmNvbnRlbnREaXNwb3NpdGlvbil7aWYodGhpcy5fc2lnbmFsaW5nU3RhdGU9PT1NLlN0YWJsZSYmKHRoaXMuX3JvbGxiYWNrT2ZmZXI9dGhpcy5fb2ZmZXIsdGhpcy5fcm9sbGJhY2tBbnN3ZXI9dGhpcy5fYW5zd2VyKSxlIGluc3RhbmNlb2YgRClzd2l0Y2godGhpcy5fc2lnbmFsaW5nU3RhdGUpe2Nhc2UgTS5Jbml0aWFsOmNhc2UgTS5TdGFibGU6dGhpcy5fc2lnbmFsaW5nU3RhdGU9TS5IYXZlUmVtb3RlT2ZmZXIsdGhpcy5fb2ZmZXI9dCx0aGlzLl9hbnN3ZXI9dm9pZCAwO2JyZWFrO2Nhc2UgTS5IYXZlTG9jYWxPZmZlcjp0aGlzLl9zaWduYWxpbmdTdGF0ZT1NLlN0YWJsZSx0aGlzLl9hbnN3ZXI9dDticmVhaztjYXNlIE0uSGF2ZVJlbW90ZU9mZmVyOmNhc2UgTS5DbG9zZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgc2lnbmFsaW5nIHN0YXRlLiIpfWlmKGUgaW5zdGFuY2VvZiBIKXN3aXRjaCh0aGlzLl9zaWduYWxpbmdTdGF0ZSl7Y2FzZSBNLkluaXRpYWw6Y2FzZSBNLlN0YWJsZTp0aGlzLl9zaWduYWxpbmdTdGF0ZT1NLkhhdmVSZW1vdGVPZmZlcix0aGlzLl9vZmZlcj10LHRoaXMuX2Fuc3dlcj12b2lkIDA7YnJlYWs7Y2FzZSBNLkhhdmVMb2NhbE9mZmVyOnRoaXMuX3NpZ25hbGluZ1N0YXRlPU0uU3RhYmxlLHRoaXMuX2Fuc3dlcj10O2JyZWFrO2Nhc2UgTS5IYXZlUmVtb3RlT2ZmZXI6Y2FzZSBNLkNsb3NlZDpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5leHBlY3RlZCBzaWduYWxpbmcgc3RhdGUuIil9aWYoZSBpbnN0YW5jZW9mIGspc3dpdGNoKHRoaXMuX3NpZ25hbGluZ1N0YXRlKXtjYXNlIE0uSW5pdGlhbDpjYXNlIE0uU3RhYmxlOnRoaXMuX3NpZ25hbGluZ1N0YXRlPU0uSGF2ZUxvY2FsT2ZmZXIsdGhpcy5fb2ZmZXI9dCx0aGlzLl9hbnN3ZXI9dm9pZCAwO2JyZWFrO2Nhc2UgTS5IYXZlTG9jYWxPZmZlcjpicmVhaztjYXNlIE0uSGF2ZVJlbW90ZU9mZmVyOnRoaXMuX3NpZ25hbGluZ1N0YXRlPU0uU3RhYmxlLHRoaXMuX2Fuc3dlcj10O2JyZWFrO2Nhc2UgTS5DbG9zZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgc2lnbmFsaW5nIHN0YXRlLiIpfWlmKHEoZSkpc3dpdGNoKHRoaXMuX3NpZ25hbGluZ1N0YXRlKXtjYXNlIE0uSW5pdGlhbDpjYXNlIE0uU3RhYmxlOnRoaXMuX3NpZ25hbGluZ1N0YXRlPU0uSGF2ZUxvY2FsT2ZmZXIsdGhpcy5fb2ZmZXI9dCx0aGlzLl9hbnN3ZXI9dm9pZCAwO2JyZWFrO2Nhc2UgTS5IYXZlTG9jYWxPZmZlcjpicmVhaztjYXNlIE0uSGF2ZVJlbW90ZU9mZmVyOnRoaXMuX3NpZ25hbGluZ1N0YXRlPU0uU3RhYmxlLHRoaXMuX2Fuc3dlcj10O2JyZWFrO2Nhc2UgTS5DbG9zZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgc2lnbmFsaW5nIHN0YXRlLiIpfX19c3RhcnQyeHhSZXRyYW5zbWlzc2lvblRpbWVyKCl7aWYodGhpcy5pbml0aWFsVHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBFZSl7Y29uc3QgZT10aGlzLmluaXRpYWxUcmFuc2FjdGlvbjtsZXQgdD1GLlQxO2NvbnN0IHM9KCk9Pnt0aGlzLmFja1dhaXQ/KHRoaXMubG9nZ2VyLmxvZygiTm8gQUNLIGZvciAyeHggcmVzcG9uc2UgcmVjZWl2ZWQsIGF0dGVtcHRpbmcgcmV0cmFuc21pc3Npb24iKSxlLnJldHJhbnNtaXRBY2NlcHRlZFJlc3BvbnNlKCksdD1NYXRoLm1pbigyKnQsRi5UMiksdGhpcy5pbnZpdGUyeHhUaW1lcj1zZXRUaW1lb3V0KHMsdCkpOnRoaXMuaW52aXRlMnh4VGltZXI9dm9pZCAwfTt0aGlzLmludml0ZTJ4eFRpbWVyPXNldFRpbWVvdXQocyx0KTtjb25zdCBpPSgpPT57ZS5zdGF0ZT09PWFlLlRlcm1pbmF0ZWQmJihlLnJlbW92ZVN0YXRlQ2hhbmdlTGlzdGVuZXIoaSksdGhpcy5pbnZpdGUyeHhUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLmludml0ZTJ4eFRpbWVyKSx0aGlzLmludml0ZTJ4eFRpbWVyPXZvaWQgMCksdGhpcy5hY2tXYWl0JiYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkFja1RpbWVvdXQ/dGhpcy5kZWxlZ2F0ZS5vbkFja1RpbWVvdXQoKTp0aGlzLmJ5ZSgpKSl9O2UuYWRkU3RhdGVDaGFuZ2VMaXN0ZW5lcihpKX19c3RhcnRSZUludml0ZTJ4eFJldHJhbnNtaXNzaW9uVGltZXIoKXtpZih0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyJiZ0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgRWUpe2NvbnN0IGU9dGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlci50cmFuc2FjdGlvbjtsZXQgdD1GLlQxO2NvbnN0IHM9KCk9Pnt0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyPyh0aGlzLmxvZ2dlci5sb2coIk5vIEFDSyBmb3IgMnh4IHJlc3BvbnNlIHJlY2VpdmVkLCBhdHRlbXB0aW5nIHJldHJhbnNtaXNzaW9uIiksZS5yZXRyYW5zbWl0QWNjZXB0ZWRSZXNwb25zZSgpLHQ9TWF0aC5taW4oMip0LEYuVDIpLHRoaXMuaW52aXRlMnh4VGltZXI9c2V0VGltZW91dChzLHQpKTp0aGlzLmludml0ZTJ4eFRpbWVyPXZvaWQgMH07dGhpcy5pbnZpdGUyeHhUaW1lcj1zZXRUaW1lb3V0KHMsdCk7Y29uc3QgaT0oKT0+e2Uuc3RhdGU9PT1hZS5UZXJtaW5hdGVkJiYoZS5yZW1vdmVTdGF0ZUNoYW5nZUxpc3RlbmVyKGkpLHRoaXMuaW52aXRlMnh4VGltZXImJihjbGVhclRpbWVvdXQodGhpcy5pbnZpdGUyeHhUaW1lciksdGhpcy5pbnZpdGUyeHhUaW1lcj12b2lkIDApLHRoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIpfTtlLmFkZFN0YXRlQ2hhbmdlTGlzdGVuZXIoaSl9fX1jbGFzcyBWZSBleHRlbmRzIENle2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihJZSxlLHQscyksdGhpcy5jb25maXJtZWREaWFsb2dBY2tzPW5ldyBNYXAsdGhpcy5jb25maXJtZWREaWFsb2dzPW5ldyBNYXAsdGhpcy5lYXJseURpYWxvZ3M9bmV3IE1hcCx0aGlzLmRlbGVnYXRlPXN9ZGlzcG9zZSgpe3RoaXMuZWFybHlEaWFsb2dzLmZvckVhY2goKGU9PmUuZGlzcG9zZSgpKSksdGhpcy5lYXJseURpYWxvZ3MuY2xlYXIoKSxzdXBlci5kaXNwb3NlKCl9b25UcmFuc3BvcnRFcnJvcihlKXtpZih0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09YWUuQ2FsbGluZylyZXR1cm4gc3VwZXIub25UcmFuc3BvcnRFcnJvcihlKTt0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLHRoaXMubG9nZ2VyLmVycm9yKCJVc2VyIGFnZW50IGNsaWVudCByZXF1ZXN0IHRyYW5zcG9ydCBlcnJvciB3aGlsZSBzZW5kaW5nIEFDSy4iKX1yZWNlaXZlUmVzcG9uc2UoZSl7aWYoIXRoaXMuYXV0aGVudGljYXRpb25HdWFyZChlKSlyZXR1cm47Y29uc3QgdD1lLnN0YXR1c0NvZGU/ZS5zdGF0dXNDb2RlLnRvU3RyaW5nKCk6IiI7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuIik7c3dpdGNoKCEwKXtjYXNlL14xMDAkLy50ZXN0KHQpOnJldHVybiB2b2lkKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25UcnlpbmcmJnRoaXMuZGVsZWdhdGUub25Ucnlpbmcoe21lc3NhZ2U6ZX0pKTtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KHQpOntpZighZS50b1RhZylyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKCJOb24tMTAwIDF4eCBJTlZJVEUgcmVzcG9uc2UgcmVjZWl2ZWQgd2l0aG91dCBhIHRvIHRhZywgZHJvcHBpbmcuIik7aWYoIWUucGFyc2VIZWFkZXIoImNvbnRhY3QiKSlyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci5lcnJvcigiTm9uLTEwMCAxeHggSU5WSVRFIHJlc3BvbnNlIHJlY2VpdmVkIHdpdGhvdXQgYSBDb250YWN0IGhlYWRlciBmaWVsZCwgZHJvcHBpbmcuIik7Y29uc3QgdD0kZS5pbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRDbGllbnQodGhpcy5tZXNzYWdlLGUpO2xldCBzPXRoaXMuZWFybHlEaWFsb2dzLmdldCh0LmlkKTtpZighcyl7Y29uc3QgZT10aGlzLnRyYW5zYWN0aW9uO2lmKCEoZSBpbnN0YW5jZW9mIEllKSl0aHJvdyBuZXcgRXJyb3IoIlRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi4iKTtzPW5ldyBHZShlLHRoaXMuY29yZSx0KSx0aGlzLmVhcmx5RGlhbG9ncy5zZXQocy5pZCxzKX1pZighcy5yZWxpYWJsZVNlcXVlbmNlR3VhcmQoZSkpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybigiMXh4IElOVklURSByZWxpYWJsZSByZXNwb25zZSByZWNlaXZlZCBvdXQgb2Ygb3JkZXIgb3IgaXMgYSByZXRyYW5zbWlzc2lvbiwgZHJvcHBpbmcuIik7cy5zaWduYWxpbmdTdGF0ZSE9PU0uSW5pdGlhbCYmcy5zaWduYWxpbmdTdGF0ZSE9PU0uSGF2ZUxvY2FsT2ZmZXJ8fHMuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKGUpO2NvbnN0IGk9czt0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUHJvZ3Jlc3MmJnRoaXMuZGVsZWdhdGUub25Qcm9ncmVzcyh7bWVzc2FnZTplLHNlc3Npb246aSxwcmFjazplPT5pLnByYWNrKHZvaWQgMCxlKX0pfXJldHVybjtjYXNlL14yWzAtOV17Mn0kLy50ZXN0KHQpOntpZighZS50b1RhZylyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci5lcnJvcigiMnh4IElOVklURSByZXNwb25zZSByZWNlaXZlZCB3aXRob3V0IGEgdG8gdGFnLCBkcm9wcGluZy4iKTtpZighZS5wYXJzZUhlYWRlcigiY29udGFjdCIpKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLmVycm9yKCIyeHggSU5WSVRFIHJlc3BvbnNlIHJlY2VpdmVkIHdpdGhvdXQgYSBDb250YWN0IGhlYWRlciBmaWVsZCwgZHJvcHBpbmcuIik7Y29uc3QgdD0kZS5pbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRDbGllbnQodGhpcy5tZXNzYWdlLGUpO2xldCBzPXRoaXMuY29uZmlybWVkRGlhbG9ncy5nZXQodC5pZCk7aWYocyl7Y29uc3QgZT10aGlzLmNvbmZpcm1lZERpYWxvZ0Fja3MuZ2V0KHQuaWQpO2lmKGUpe2NvbnN0IHQ9dGhpcy50cmFuc2FjdGlvbjtpZighKHQgaW5zdGFuY2VvZiBJZSkpdGhyb3cgbmV3IEVycm9yKCJDbGllbnQgdHJhbnNhY3Rpb24gbm90IGluc3RhbmNlIG9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uLiIpO3QuYWNrUmVzcG9uc2UoZS5tZXNzYWdlKX1yZXR1cm59aWYocz10aGlzLmVhcmx5RGlhbG9ncy5nZXQodC5pZCkscylzLmNvbmZpcm0oKSxzLnJlY29tcHV0ZVJvdXRlU2V0KGUpLHRoaXMuZWFybHlEaWFsb2dzLmRlbGV0ZShzLmlkKSx0aGlzLmNvbmZpcm1lZERpYWxvZ3Muc2V0KHMuaWQscyk7ZWxzZXtjb25zdCBlPXRoaXMudHJhbnNhY3Rpb247aWYoIShlIGluc3RhbmNlb2YgSWUpKXRocm93IG5ldyBFcnJvcigiVHJhbnNhY3Rpb24gbm90IGluc3RhbmNlIG9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uLiIpO3M9bmV3IEdlKGUsdGhpcy5jb3JlLHQpLHRoaXMuY29uZmlybWVkRGlhbG9ncy5zZXQocy5pZCxzKX1zLnNpZ25hbGluZ1N0YXRlIT09TS5Jbml0aWFsJiZzLnNpZ25hbGluZ1N0YXRlIT09TS5IYXZlTG9jYWxPZmZlcnx8cy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZSk7Y29uc3QgaT1zO2lmKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25BY2NlcHQpdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCh7bWVzc2FnZTplLHNlc3Npb246aSxhY2s6ZT0+e2NvbnN0IHQ9aS5hY2soZSk7cmV0dXJuIHRoaXMuY29uZmlybWVkRGlhbG9nQWNrcy5zZXQoaS5pZCx0KSx0fX0pO2Vsc2V7Y29uc3QgZT1pLmFjaygpO3RoaXMuY29uZmlybWVkRGlhbG9nQWNrcy5zZXQoaS5pZCxlKX19cmV0dXJuO2Nhc2UvXjNbMC05XXsyfSQvLnRlc3QodCk6cmV0dXJuIHRoaXMuZWFybHlEaWFsb2dzLmZvckVhY2goKGU9PmUuZGlzcG9zZSgpKSksdGhpcy5lYXJseURpYWxvZ3MuY2xlYXIoKSx2b2lkKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWRpcmVjdCYmdGhpcy5kZWxlZ2F0ZS5vblJlZGlyZWN0KHttZXNzYWdlOmV9KSk7Y2FzZS9eWzQtNl1bMC05XXsyfSQvLnRlc3QodCk6cmV0dXJuIHRoaXMuZWFybHlEaWFsb2dzLmZvckVhY2goKGU9PmUuZGlzcG9zZSgpKSksdGhpcy5lYXJseURpYWxvZ3MuY2xlYXIoKSx2b2lkKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWplY3QmJnRoaXMuZGVsZWdhdGUub25SZWplY3Qoe21lc3NhZ2U6ZX0pKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3R9YCl9dGhyb3cgbmV3IEVycm9yKGBFeGVjdXRpbmcgd2hhdCBzaG91bGQgYmUgYW4gdW5yZWFjaGFibGUgY29kZSBwYXRoIHJlY2VpdmluZyAke3R9IHJlc3BvbnNlLmApfX1jbGFzcyBLZSBleHRlbmRzIENle2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihTZSxlLHQscyl9fWNsYXNzIFdlIGV4dGVuZHMgQ2V7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKFNlLGUsdCxzKX19Y2xhc3MgWWUgZXh0ZW5kcyBDZXtjb25zdHJ1Y3RvcihlLHQscyl7Y29uc3QgaT1lLmNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoTC5TVUJTQ1JJQkUscyk7c3VwZXIoU2UsZS51c2VyQWdlbnRDb3JlLGksdCksdGhpcy5kaWFsb2c9ZX13YWl0Tm90aWZ5U3RvcCgpe31yZWNlaXZlUmVzcG9uc2UoZSl7aWYoZS5zdGF0dXNDb2RlJiZlLnN0YXR1c0NvZGU+PTIwMCYmZS5zdGF0dXNDb2RlPDMwMCl7Y29uc3QgdD1lLmdldEhlYWRlcigiRXhwaXJlcyIpO2lmKHQpe2NvbnN0IGU9TnVtYmVyKHQpO3RoaXMuZGlhbG9nLnN1YnNjcmlwdGlvbkV4cGlyZXM+ZSYmKHRoaXMuZGlhbG9nLnN1YnNjcmlwdGlvbkV4cGlyZXM9ZSl9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKCJFeHBpcmVzIGhlYWRlciBtaXNzaW5nIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFNVQlNDUklCRSIpfWlmKGUuc3RhdHVzQ29kZSYmZS5zdGF0dXNDb2RlPj00MDAmJmUuc3RhdHVzQ29kZTw3MDApe1s0MDQsNDA1LDQxMCw0MTYsNDgwLDQ4MSw0ODIsNDgzLDQ4NCw0ODUsNDg5LDUwMSw2MDRdLmluY2x1ZGVzKGUuc3RhdHVzQ29kZSkmJnRoaXMuZGlhbG9nLnRlcm1pbmF0ZSgpfXN1cGVyLnJlY2VpdmVSZXNwb25zZShlKX19Y2xhc3MgWmUgZXh0ZW5kcyAkZXtjb25zdHJ1Y3RvcihlLHQscyxpLHIsbil7c3VwZXIoaSxyKSx0aGlzLmRlbGVnYXRlPW4sdGhpcy5fYXV0b1JlZnJlc2g9ITEsdGhpcy5fc3Vic2NyaXB0aW9uRXZlbnQ9ZSx0aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzPXQsdGhpcy5fc3Vic2NyaXB0aW9uRXhwaXJlc0luaXRpYWw9dCx0aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzTGFzdFNldD1NYXRoLmZsb29yKERhdGUubm93KCkvMWUzKSx0aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoPXZvaWQgMCx0aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoTGFzdFNldD12b2lkIDAsdGhpcy5fc3Vic2NyaXB0aW9uU3RhdGU9cyx0aGlzLmxvZ2dlcj1pLmxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKCJzaXAuc3Vic2NyaWJlLWRpYWxvZyIpLHRoaXMubG9nZ2VyLmxvZyhgU1VCU0NSSUJFIGRpYWxvZyAke3RoaXMuaWR9IGNvbnN0cnVjdGVkYCl9c3RhdGljIGluaXRpYWxEaWFsb2dTdGF0ZUZvclN1YnNjcmlwdGlvbihlLHQpe2NvbnN0IHM9dC5nZXRIZWFkZXJzKCJyZWNvcmQtcm91dGUiKSxpPXQucGFyc2VIZWFkZXIoImNvbnRhY3QiKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoIkNvbnRhY3QgdW5kZWZpbmVkLiIpO2lmKCEoaSBpbnN0YW5jZW9mIG0pKXRocm93IG5ldyBFcnJvcigiQ29udGFjdCBub3QgaW5zdGFuY2Ugb2YgTmFtZUFkZHJIZWFkZXIuIik7Y29uc3Qgcj1pLnVyaSxuPWUuY3NlcSxvPWUuY2FsbElkLGE9ZS5mcm9tVGFnLGM9dC5mcm9tVGFnO2lmKCFvKXRocm93IG5ldyBFcnJvcigiQ2FsbCBpZCB1bmRlZmluZWQuIik7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJGcm9tIHRhZyB1bmRlZmluZWQuIik7aWYoIWMpdGhyb3cgbmV3IEVycm9yKCJUbyB0YWcgdW5kZWZpbmVkLiIpO2lmKCFlLmZyb20pdGhyb3cgbmV3IEVycm9yKCJGcm9tIHVuZGVmaW5lZC4iKTtpZighZS50byl0aHJvdyBuZXcgRXJyb3IoIlRvIHVuZGVmaW5lZC4iKTtyZXR1cm57aWQ6bythK2MsZWFybHk6ITEsY2FsbElkOm8sbG9jYWxUYWc6YSxyZW1vdGVUYWc6Yyxsb2NhbFNlcXVlbmNlTnVtYmVyOm4scmVtb3RlU2VxdWVuY2VOdW1iZXI6dW5kZWZpbmVkLGxvY2FsVVJJOmUuZnJvbS51cmkscmVtb3RlVVJJOmUudG8udXJpLHJlbW90ZVRhcmdldDpyLHJvdXRlU2V0OnMsc2VjdXJlOiExfX1kaXNwb3NlKCl7c3VwZXIuZGlzcG9zZSgpLHRoaXMuTiYmKGNsZWFyVGltZW91dCh0aGlzLk4pLHRoaXMuTj12b2lkIDApLHRoaXMucmVmcmVzaFRpbWVyQ2xlYXIoKSx0aGlzLmxvZ2dlci5sb2coYFNVQlNDUklCRSBkaWFsb2cgJHt0aGlzLmlkfSBkZXN0cm95ZWRgKX1nZXQgYXV0b1JlZnJlc2goKXtyZXR1cm4gdGhpcy5fYXV0b1JlZnJlc2h9c2V0IGF1dG9SZWZyZXNoKGUpe3RoaXMuX2F1dG9SZWZyZXNoPSEwLHRoaXMucmVmcmVzaFRpbWVyU2V0KCl9Z2V0IHN1YnNjcmlwdGlvbkV2ZW50KCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbkV2ZW50fWdldCBzdWJzY3JpcHRpb25FeHBpcmVzKCl7Y29uc3QgZT1NYXRoLmZsb29yKERhdGUubm93KCkvMWUzKS10aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzTGFzdFNldCx0PXRoaXMuX3N1YnNjcmlwdGlvbkV4cGlyZXMtZTtyZXR1cm4gTWF0aC5tYXgodCwwKX1zZXQgc3Vic2NyaXB0aW9uRXhwaXJlcyhlKXtpZihlPDApdGhyb3cgbmV3IEVycm9yKCJFeHBpcmVzIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHplcm8uIik7aWYodGhpcy5fc3Vic2NyaXB0aW9uRXhwaXJlcz1lLHRoaXMuX3N1YnNjcmlwdGlvbkV4cGlyZXNMYXN0U2V0PU1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpLHRoaXMuYXV0b1JlZnJlc2gpe2NvbnN0IHQ9dGhpcy5zdWJzY3JpcHRpb25SZWZyZXNoOyh2b2lkIDA9PT10fHx0Pj1lKSYmdGhpcy5yZWZyZXNoVGltZXJTZXQoKX19Z2V0IHN1YnNjcmlwdGlvbkV4cGlyZXNJbml0aWFsKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbkV4cGlyZXNJbml0aWFsfWdldCBzdWJzY3JpcHRpb25SZWZyZXNoKCl7aWYodm9pZCAwPT09dGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaHx8dm9pZCAwPT09dGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQpcmV0dXJuO2NvbnN0IGU9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyktdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQsdD10aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoLWU7cmV0dXJuIE1hdGgubWF4KHQsMCl9Z2V0IHN1YnNjcmlwdGlvblN0YXRlKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvblN0YXRlfXJlY2VpdmVSZXF1ZXN0KGUpe2lmKHRoaXMubG9nZ2VyLmxvZyhgU1VCU0NSSUJFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkICR7ZS5tZXRob2R9IHJlcXVlc3RgKSx0aGlzLnNlcXVlbmNlR3VhcmQoZSkpc3dpdGNoKHN1cGVyLnJlY2VpdmVSZXF1ZXN0KGUpLGUubWV0aG9kKXtjYXNlIEwuTk9USUZZOnRoaXMub25Ob3RpZnkoZSk7YnJlYWs7ZGVmYXVsdDp0aGlzLmxvZ2dlci5sb2coYFNVQlNDUklCRSBkaWFsb2cgJHt0aGlzLmlkfSByZWNlaXZlZCB1bmltcGxlbWVudGVkICR7ZS5tZXRob2R9IHJlcXVlc3RgKSx0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo1MDF9KX1lbHNlIHRoaXMubG9nZ2VyLmxvZyhgU1VCU0NSSUJFIGRpYWxvZyAke3RoaXMuaWR9IHJlamVjdGVkIG91dCBvZiBvcmRlciAke2UubWV0aG9kfSByZXF1ZXN0LmApfXJlZnJlc2goKXtjb25zdCBlPSJBbGxvdzogIitCLnRvU3RyaW5nKCksdD17fTtyZXR1cm4gdC5leHRyYUhlYWRlcnM9KHQuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSx0LmV4dHJhSGVhZGVycy5wdXNoKGUpLHQuZXh0cmFIZWFkZXJzLnB1c2goIkV2ZW50OiAiK3RoaXMuc3Vic2NyaXB0aW9uRXZlbnQpLHQuZXh0cmFIZWFkZXJzLnB1c2goIkV4cGlyZXM6ICIrdGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzSW5pdGlhbCksdC5leHRyYUhlYWRlcnMucHVzaCgiQ29udGFjdDogIit0aGlzLmNvcmUuY29uZmlndXJhdGlvbi5jb250YWN0LnRvU3RyaW5nKCkpLHRoaXMuc3Vic2NyaWJlKHZvaWQgMCx0KX1zdWJzY3JpYmUoZSx0PXt9KXtpZih0aGlzLnN1YnNjcmlwdGlvblN0YXRlIT09c2UuUGVuZGluZyYmdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSE9PXNlLkFjdGl2ZSl0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgJHt0aGlzLnN1YnNjcmlwdGlvblN0YXRlfS4gTWF5IG9ubHkgcmUtc3Vic2NyaWJlIHdoaWxlIGluIHN0YXRlICJwZW5kaW5nIiBvciAiYWN0aXZlIi5gKTt0aGlzLmxvZ2dlci5sb2coYFNVQlNDUklCRSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIFNVQlNDUklCRSByZXF1ZXN0YCk7Y29uc3Qgcz1uZXcgWWUodGhpcyxlLHQpO3JldHVybiB0aGlzLk4mJihjbGVhclRpbWVvdXQodGhpcy5OKSx0aGlzLk49dm9pZCAwKSx0aGlzLk49c2V0VGltZW91dCgoKCk9PnRoaXMudGltZXJOKCkpLEYuVElNRVJfTiksc310ZXJtaW5hdGUoKXt0aGlzLnN0YXRlVHJhbnNpdGlvbihzZS5UZXJtaW5hdGVkKSx0aGlzLm9uVGVybWluYXRlZCgpfXVuc3Vic2NyaWJlKCl7Y29uc3QgZT0iQWxsb3c6ICIrQi50b1N0cmluZygpLHQ9e307cmV0dXJuIHQuZXh0cmFIZWFkZXJzPSh0LmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksdC5leHRyYUhlYWRlcnMucHVzaChlKSx0LmV4dHJhSGVhZGVycy5wdXNoKCJFdmVudDogIit0aGlzLnN1YnNjcmlwdGlvbkV2ZW50KSx0LmV4dHJhSGVhZGVycy5wdXNoKCJFeHBpcmVzOiAwIiksdC5leHRyYUhlYWRlcnMucHVzaCgiQ29udGFjdDogIit0aGlzLmNvcmUuY29uZmlndXJhdGlvbi5jb250YWN0LnRvU3RyaW5nKCkpLHRoaXMuc3Vic2NyaWJlKHZvaWQgMCx0KX1vbk5vdGlmeShlKXtjb25zdCB0PWUucGFyc2VIZWFkZXIoIkV2ZW50IikuZXZlbnQ7aWYoIXR8fHQhPT10aGlzLnN1YnNjcmlwdGlvbkV2ZW50KXJldHVybiB2b2lkIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjQ4OX0pO3RoaXMuTiYmKGNsZWFyVGltZW91dCh0aGlzLk4pLHRoaXMuTj12b2lkIDApO2NvbnN0IHM9ZS5wYXJzZUhlYWRlcigiU3Vic2NyaXB0aW9uLVN0YXRlIik7aWYoIXN8fCFzLnN0YXRlKXJldHVybiB2b2lkIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjQ4OX0pO2NvbnN0IGk9cy5zdGF0ZSxyPXMuZXhwaXJlcz9NYXRoLm1heChzLmV4cGlyZXMsMCk6dm9pZCAwO3N3aXRjaChpKXtjYXNlInBlbmRpbmciOnRoaXMuc3RhdGVUcmFuc2l0aW9uKHNlLlBlbmRpbmcscik7YnJlYWs7Y2FzZSJhY3RpdmUiOnRoaXMuc3RhdGVUcmFuc2l0aW9uKHNlLkFjdGl2ZSxyKTticmVhaztjYXNlInRlcm1pbmF0ZWQiOnRoaXMuc3RhdGVUcmFuc2l0aW9uKHNlLlRlcm1pbmF0ZWQscik7YnJlYWs7ZGVmYXVsdDp0aGlzLmxvZ2dlci53YXJuKCJVbnJlY29nbml6ZWQgc3Vic2NyaXB0aW9uIHN0YXRlLiIpfWNvbnN0IG49bmV3IE1lKHRoaXMsZSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeT90aGlzLmRlbGVnYXRlLm9uTm90aWZ5KG4pOm4uYWNjZXB0KCl9b25SZWZyZXNoKGUpe3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWZyZXNoJiZ0aGlzLmRlbGVnYXRlLm9uUmVmcmVzaChlKX1vblRlcm1pbmF0ZWQoKXt0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uVGVybWluYXRlZCYmdGhpcy5kZWxlZ2F0ZS5vblRlcm1pbmF0ZWQoKX1yZWZyZXNoVGltZXJDbGVhcigpe3RoaXMucmVmcmVzaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVmcmVzaFRpbWVyKSx0aGlzLnJlZnJlc2hUaW1lcj12b2lkIDApfXJlZnJlc2hUaW1lclNldCgpe2lmKHRoaXMucmVmcmVzaFRpbWVyQ2xlYXIoKSx0aGlzLmF1dG9SZWZyZXNoJiZ0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXM+MCl7Y29uc3QgZT05MDAqdGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzO3RoaXMuX3N1YnNjcmlwdGlvblJlZnJlc2g9TWF0aC5mbG9vcihlLzFlMyksdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQ9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyksdGhpcy5yZWZyZXNoVGltZXI9c2V0VGltZW91dCgoKCk9Pnt0aGlzLnJlZnJlc2hUaW1lcj12b2lkIDAsdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaD12b2lkIDAsdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQ9dm9pZCAwLHRoaXMub25SZWZyZXNoKHRoaXMucmVmcmVzaCgpKX0pLGUpfX1zdGF0ZVRyYW5zaXRpb24oZSx0KXtjb25zdCBzPSgpPT57dGhpcy5sb2dnZXIud2FybihgSW52YWxpZCBzdWJzY3JpcHRpb24gc3RhdGUgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5zdWJzY3JpcHRpb25TdGF0ZX0gdG8gJHtlfWApfTtzd2l0Y2goZSl7Y2FzZSBzZS5Jbml0aWFsOmNhc2Ugc2UuTm90aWZ5V2FpdDpyZXR1cm4gdm9pZCBzKCk7Y2FzZSBzZS5QZW5kaW5nOmlmKHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUhPT1zZS5Ob3RpZnlXYWl0JiZ0aGlzLnN1YnNjcmlwdGlvblN0YXRlIT09c2UuUGVuZGluZylyZXR1cm4gdm9pZCBzKCk7YnJlYWs7Y2FzZSBzZS5BY3RpdmU6Y2FzZSBzZS5UZXJtaW5hdGVkOmlmKHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUhPT1zZS5Ob3RpZnlXYWl0JiZ0aGlzLnN1YnNjcmlwdGlvblN0YXRlIT09c2UuUGVuZGluZyYmdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSE9PXNlLkFjdGl2ZSlyZXR1cm4gdm9pZCBzKCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gdm9pZCBzKCl9ZT09PXNlLlBlbmRpbmcmJnQmJih0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXM9dCksZT09PXNlLkFjdGl2ZSYmdCYmKHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcz10KSxlPT09c2UuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCksdGhpcy5fc3Vic2NyaXB0aW9uU3RhdGU9ZX10aW1lck4oKXt0aGlzLmxvZ2dlci53YXJuKCJUaW1lciBOIGV4cGlyZWQgZm9yIFNVQlNDUklCRSBkaWFsb2cuIFRpbWVkIG91dCB3YWl0aW5nIGZvciBOT1RJRlkuIiksdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSE9PXNlLlRlcm1pbmF0ZWQmJih0aGlzLnN0YXRlVHJhbnNpdGlvbihzZS5UZXJtaW5hdGVkKSx0aGlzLm9uVGVybWluYXRlZCgpKX19Y2xhc3MgSmUgZXh0ZW5kcyBDZXtjb25zdHJ1Y3RvcihlLHQscyl7Y29uc3QgaT10LmdldEhlYWRlcigiRXZlbnQiKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoIkV2ZW50IHVuZGVmaW5lZCIpO2NvbnN0IHI9dC5nZXRIZWFkZXIoIkV4cGlyZXMiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoIkV4cGlyZXMgdW5kZWZpbmVkIik7c3VwZXIoU2UsZSx0LHMpLHRoaXMuZGVsZWdhdGU9cyx0aGlzLnN1YnNjcmliZXJJZD10LmNhbGxJZCt0LmZyb21UYWcraSx0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXNSZXF1ZXN0ZWQ9dGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzPU51bWJlcihyKSx0aGlzLnN1YnNjcmlwdGlvbkV2ZW50PWksdGhpcy5zdWJzY3JpcHRpb25TdGF0ZT1zZS5Ob3RpZnlXYWl0LHRoaXMud2FpdE5vdGlmeVN0YXJ0KCl9ZGlzcG9zZSgpe3N1cGVyLmRpc3Bvc2UoKX1vbk5vdGlmeShlKXtjb25zdCB0PWUubWVzc2FnZS5wYXJzZUhlYWRlcigiRXZlbnQiKS5ldmVudDtpZighdHx8dCE9PXRoaXMuc3Vic2NyaXB0aW9uRXZlbnQpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oIkZhaWxlZCB0byBwYXJzZSBldmVudC4iKSx2b2lkIGUucmVqZWN0KHtzdGF0dXNDb2RlOjQ4OX0pO2NvbnN0IHM9ZS5tZXNzYWdlLnBhcnNlSGVhZGVyKCJTdWJzY3JpcHRpb24tU3RhdGUiKTtpZighc3x8IXMuc3RhdGUpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oIkZhaWxlZCB0byBwYXJzZSBzdWJzY3JpcHRpb24gc3RhdGUuIiksdm9pZCBlLnJlamVjdCh7c3RhdHVzQ29kZTo0ODl9KTtjb25zdCBpPXMuc3RhdGU7c3dpdGNoKGkpe2Nhc2UicGVuZGluZyI6Y2FzZSJhY3RpdmUiOmNhc2UidGVybWluYXRlZCI6YnJlYWs7ZGVmYXVsdDpyZXR1cm4gdGhpcy5sb2dnZXIud2FybihgSW52YWxpZCBzdWJzY3JpcHRpb24gc3RhdGUgJHtpfWApLHZvaWQgZS5yZWplY3Qoe3N0YXR1c0NvZGU6NDg5fSl9aWYoInRlcm1pbmF0ZWQiIT09aSl7aWYoIWUubWVzc2FnZS5wYXJzZUhlYWRlcigiY29udGFjdCIpKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJGYWlsZWQgdG8gcGFyc2UgY29udGFjdC4iKSx2b2lkIGUucmVqZWN0KHtzdGF0dXNDb2RlOjQ4OX0pfWlmKHRoaXMuZGlhbG9nKXRocm93IG5ldyBFcnJvcigiRGlhbG9nIGFscmVhZHkgY3JlYXRlZC4gVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHN1cHBvcnRzIGluc3RhbGwgb2Ygc2luZ2xlIHN1YnNjcmlwdGlvbnMuIik7c3dpdGNoKHRoaXMud2FpdE5vdGlmeVN0b3AoKSx0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXM9cy5leHBpcmVzP01hdGgubWluKHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcyxNYXRoLm1heChzLmV4cGlyZXMsMCkpOnRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcyxpKXtjYXNlInBlbmRpbmciOnRoaXMuc3Vic2NyaXB0aW9uU3RhdGU9c2UuUGVuZGluZzticmVhaztjYXNlImFjdGl2ZSI6dGhpcy5zdWJzY3JpcHRpb25TdGF0ZT1zZS5BY3RpdmU7YnJlYWs7Y2FzZSJ0ZXJtaW5hdGVkIjp0aGlzLnN1YnNjcmlwdGlvblN0YXRlPXNlLlRlcm1pbmF0ZWQ7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBzdGF0ZSAke2l9LmApfWlmKHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUhPT1zZS5UZXJtaW5hdGVkKXtjb25zdCB0PVplLmluaXRpYWxEaWFsb2dTdGF0ZUZvclN1YnNjcmlwdGlvbih0aGlzLm1lc3NhZ2UsZS5tZXNzYWdlKTt0aGlzLmRpYWxvZz1uZXcgWmUodGhpcy5zdWJzY3JpcHRpb25FdmVudCx0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMsdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSx0aGlzLmNvcmUsdCl9aWYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeSl7Y29uc3QgdD1lLHM9dGhpcy5kaWFsb2c7dGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeSh7cmVxdWVzdDp0LHN1YnNjcmlwdGlvbjpzfSl9ZWxzZSBlLmFjY2VwdCgpfXdhaXROb3RpZnlTdGFydCgpe3RoaXMuTnx8KHRoaXMuY29yZS5zdWJzY3JpYmVycy5zZXQodGhpcy5zdWJzY3JpYmVySWQsdGhpcyksdGhpcy5OPXNldFRpbWVvdXQoKCgpPT50aGlzLnRpbWVyTigpKSxGLlRJTUVSX04pKX13YWl0Tm90aWZ5U3RvcCgpe3RoaXMuTiYmKHRoaXMuY29yZS5zdWJzY3JpYmVycy5kZWxldGUodGhpcy5zdWJzY3JpYmVySWQpLGNsZWFyVGltZW91dCh0aGlzLk4pLHRoaXMuTj12b2lkIDApfXJlY2VpdmVSZXNwb25zZShlKXtpZih0aGlzLmF1dGhlbnRpY2F0aW9uR3VhcmQoZSkpe2lmKGUuc3RhdHVzQ29kZSYmZS5zdGF0dXNDb2RlPj0yMDAmJmUuc3RhdHVzQ29kZTwzMDApe2NvbnN0IHQ9ZS5nZXRIZWFkZXIoIkV4cGlyZXMiKTtpZih0KXtjb25zdCBlPU51bWJlcih0KTtlPnRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlc1JlcXVlc3RlZCYmdGhpcy5sb2dnZXIud2FybigiRXhwaXJlcyBoZWFkZXIgaW4gYSAyMDAtY2xhc3MgcmVzcG9uc2UgdG8gU1VCU0NSSUJFIHdpdGggYSBoaWdoZXIgdmFsdWUgdGhhbiB0aGUgb25lIGluIHRoZSByZXF1ZXN0IiksZTx0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMmJih0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXM9ZSl9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKCJFeHBpcmVzIGhlYWRlciBtaXNzaW5nIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFNVQlNDUklCRSIpO3RoaXMuZGlhbG9nJiZ0aGlzLmRpYWxvZy5zdWJzY3JpcHRpb25FeHBpcmVzPnRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcyYmKHRoaXMuZGlhbG9nLnN1YnNjcmlwdGlvbkV4cGlyZXM9dGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzKX1lLnN0YXR1c0NvZGUmJmUuc3RhdHVzQ29kZT49MzAwJiZlLnN0YXR1c0NvZGU8NzAwJiZ0aGlzLndhaXROb3RpZnlTdG9wKCksc3VwZXIucmVjZWl2ZVJlc3BvbnNlKGUpfX10aW1lck4oKXt0aGlzLmxvZ2dlci53YXJuKCJUaW1lciBOIGV4cGlyZWQgZm9yIFNVQlNDUklCRSB1c2VyIGFnZW50IGNsaWVudC4gVGltZWQgb3V0IHdhaXRpbmcgZm9yIE5PVElGWS4iKSx0aGlzLndhaXROb3RpZnlTdG9wKCksdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeVRpbWVvdXQmJnRoaXMuZGVsZWdhdGUub25Ob3RpZnlUaW1lb3V0KCl9fWNsYXNzIHplIGV4dGVuZHMgSGV7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKEVlLGUsdCxzKSx0aGlzLmNvcmU9ZX1kaXNwb3NlKCl7dGhpcy5lYXJseURpYWxvZyYmdGhpcy5lYXJseURpYWxvZy5kaXNwb3NlKCksc3VwZXIuZGlzcG9zZSgpfWFjY2VwdChlPXtzdGF0dXNDb2RlOjIwMH0pe2lmKCF0aGlzLmFjY2VwdGFibGUpdGhyb3cgbmV3IE8oYCR7dGhpcy5tZXNzYWdlLm1ldGhvZH0gbm90IGFjY2VwdGFibGUgaW4gc3RhdGUgJHt0aGlzLnRyYW5zYWN0aW9uLnN0YXRlfS5gKTtpZighdGhpcy5jb25maXJtZWREaWFsb2cpaWYodGhpcy5lYXJseURpYWxvZyl0aGlzLmVhcmx5RGlhbG9nLmNvbmZpcm0oKSx0aGlzLmNvbmZpcm1lZERpYWxvZz10aGlzLmVhcmx5RGlhbG9nLHRoaXMuZWFybHlEaWFsb2c9dm9pZCAwO2Vsc2V7Y29uc3QgZT10aGlzLnRyYW5zYWN0aW9uO2lmKCEoZSBpbnN0YW5jZW9mIEVlKSl0aHJvdyBuZXcgRXJyb3IoIlRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi4iKTtjb25zdCB0PSRlLmluaXRpYWxEaWFsb2dTdGF0ZUZvclVzZXJBZ2VudFNlcnZlcih0aGlzLm1lc3NhZ2UsdGhpcy50b1RhZyk7dGhpcy5jb25maXJtZWREaWFsb2c9bmV3IEdlKGUsdGhpcy5jb3JlLHQpfWNvbnN0IHQ9dGhpcy5tZXNzYWdlLmdldEhlYWRlcnMoInJlY29yZC1yb3V0ZSIpLm1hcCgoZT0+YFJlY29yZC1Sb3V0ZTogJHtlfWApKSxzPWBDb250YWN0OiAke3RoaXMuY29yZS5jb25maWd1cmF0aW9uLmNvbnRhY3QudG9TdHJpbmcoKX1gLGk9IkFsbG93OiAiK0IudG9TdHJpbmcoKTtpZighZS5ib2R5KWlmKHRoaXMuY29uZmlybWVkRGlhbG9nLnNpZ25hbGluZ1N0YXRlPT09TS5TdGFibGUpZS5ib2R5PXRoaXMuY29uZmlybWVkRGlhbG9nLmFuc3dlcjtlbHNlIGlmKHRoaXMuY29uZmlybWVkRGlhbG9nLnNpZ25hbGluZ1N0YXRlPT09TS5Jbml0aWFsfHx0aGlzLmNvbmZpcm1lZERpYWxvZy5zaWduYWxpbmdTdGF0ZT09PU0uSGF2ZVJlbW90ZU9mZmVyKXRocm93IG5ldyBFcnJvcigiUmVzcG9uc2UgbXVzdCBoYXZlIGEgYm9keS4iKTtlLnN0YXR1c0NvZGU9ZS5zdGF0dXNDb2RlfHwyMDAsZS5leHRyYUhlYWRlcnM9ZS5leHRyYUhlYWRlcnN8fFtdLGUuZXh0cmFIZWFkZXJzPWUuZXh0cmFIZWFkZXJzLmNvbmNhdCh0KSxlLmV4dHJhSGVhZGVycy5wdXNoKGkpLGUuZXh0cmFIZWFkZXJzLnB1c2gocyk7Y29uc3Qgcj1zdXBlci5hY2NlcHQoZSksbj10aGlzLmNvbmZpcm1lZERpYWxvZyxvPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSx7c2Vzc2lvbjpufSk7cmV0dXJuIGUuYm9keSYmdGhpcy5jb25maXJtZWREaWFsb2cuc2lnbmFsaW5nU3RhdGUhPT1NLlN0YWJsZSYmdGhpcy5jb25maXJtZWREaWFsb2cuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKGUuYm9keSksb31wcm9ncmVzcyhlPXtzdGF0dXNDb2RlOjE4MH0pe2lmKCF0aGlzLnByb2dyZXNzYWJsZSl0aHJvdyBuZXcgTyhgJHt0aGlzLm1lc3NhZ2UubWV0aG9kfSBub3QgcHJvZ3Jlc3NhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7aWYoIXRoaXMuZWFybHlEaWFsb2cpe2NvbnN0IGU9dGhpcy50cmFuc2FjdGlvbjtpZighKGUgaW5zdGFuY2VvZiBFZSkpdGhyb3cgbmV3IEVycm9yKCJUcmFuc2FjdGlvbiBub3QgaW5zdGFuY2Ugb2YgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24uIik7Y29uc3QgdD0kZS5pbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRTZXJ2ZXIodGhpcy5tZXNzYWdlLHRoaXMudG9UYWcsITApO3RoaXMuZWFybHlEaWFsb2c9bmV3IEdlKGUsdGhpcy5jb3JlLHQpfWNvbnN0IHQ9dGhpcy5tZXNzYWdlLmdldEhlYWRlcnMoInJlY29yZC1yb3V0ZSIpLm1hcCgoZT0+YFJlY29yZC1Sb3V0ZTogJHtlfWApKSxzPWBDb250YWN0OiAke3RoaXMuY29yZS5jb25maWd1cmF0aW9uLmNvbnRhY3R9YDtlLmV4dHJhSGVhZGVycz1lLmV4dHJhSGVhZGVyc3x8W10sZS5leHRyYUhlYWRlcnM9ZS5leHRyYUhlYWRlcnMuY29uY2F0KHQpLGUuZXh0cmFIZWFkZXJzLnB1c2gocyk7Y29uc3QgaT1zdXBlci5wcm9ncmVzcyhlKSxyPXRoaXMuZWFybHlEaWFsb2csbj1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSkse3Nlc3Npb246cn0pO3JldHVybiBlLmJvZHkmJnRoaXMuZWFybHlEaWFsb2cuc2lnbmFsaW5nU3RhdGUhPT1NLlN0YWJsZSYmdGhpcy5lYXJseURpYWxvZy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZS5ib2R5KSxufXJlZGlyZWN0KGUsdD17c3RhdHVzQ29kZTozMDJ9KXtyZXR1cm4gc3VwZXIucmVkaXJlY3QoZSx0KX1yZWplY3QoZT17c3RhdHVzQ29kZTo0ODZ9KXtyZXR1cm4gc3VwZXIucmVqZWN0KGUpfX1jbGFzcyBYZSBleHRlbmRzIEhle2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihEZSxlLHQscyksdGhpcy5jb3JlPWV9fWNsYXNzIFFlIGV4dGVuZHMgSGV7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKERlLGUsdCxzKSx0aGlzLmNvcmU9ZX19Y29uc3QgZXQ9WyJhcHBsaWNhdGlvbi9zZHAiLCJhcHBsaWNhdGlvbi9kdG1mLXJlbGF5Il07Y2xhc3MgdHR7Y29uc3RydWN0b3IoZSx0PXt9KXt0aGlzLnVzZXJBZ2VudENsaWVudHM9bmV3IE1hcCx0aGlzLnVzZXJBZ2VudFNlcnZlcnM9bmV3IE1hcCx0aGlzLmNvbmZpZ3VyYXRpb249ZSx0aGlzLmRlbGVnYXRlPXQsdGhpcy5kaWFsb2dzPW5ldyBNYXAsdGhpcy5zdWJzY3JpYmVycz1uZXcgTWFwLHRoaXMubG9nZ2VyPWUubG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoInNpcC51c2VyLWFnZW50LWNvcmUiKX1kaXNwb3NlKCl7dGhpcy5yZXNldCgpfXJlc2V0KCl7dGhpcy5kaWFsb2dzLmZvckVhY2goKGU9PmUuZGlzcG9zZSgpKSksdGhpcy5kaWFsb2dzLmNsZWFyKCksdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKChlPT5lLmRpc3Bvc2UoKSkpLHRoaXMuc3Vic2NyaWJlcnMuY2xlYXIoKSx0aGlzLnVzZXJBZ2VudENsaWVudHMuZm9yRWFjaCgoZT0+ZS5kaXNwb3NlKCkpKSx0aGlzLnVzZXJBZ2VudENsaWVudHMuY2xlYXIoKSx0aGlzLnVzZXJBZ2VudFNlcnZlcnMuZm9yRWFjaCgoZT0+ZS5kaXNwb3NlKCkpKSx0aGlzLnVzZXJBZ2VudFNlcnZlcnMuY2xlYXIoKX1nZXQgbG9nZ2VyRmFjdG9yeSgpe3JldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24ubG9nZ2VyRmFjdG9yeX1nZXQgdHJhbnNwb3J0KCl7Y29uc3QgZT10aGlzLmNvbmZpZ3VyYXRpb24udHJhbnNwb3J0QWNjZXNzb3IoKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIlRyYW5zcG9ydCB1bmRlZmluZWQuIik7cmV0dXJuIGV9aW52aXRlKGUsdCl7cmV0dXJuIG5ldyBWZSh0aGlzLGUsdCl9bWVzc2FnZShlLHQpe3JldHVybiBuZXcgcWUodGhpcyxlLHQpfXB1Ymxpc2goZSx0KXtyZXR1cm4gbmV3IEtlKHRoaXMsZSx0KX1yZWdpc3RlcihlLHQpe3JldHVybiBuZXcgV2UodGhpcyxlLHQpfXN1YnNjcmliZShlLHQpe3JldHVybiBuZXcgSmUodGhpcyxlLHQpfXJlcXVlc3QoZSx0KXtyZXR1cm4gbmV3IENlKFNlLHRoaXMsZSx0KX1tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShlLHQscyxpLHIsbixvKXtjb25zdCBhPXRoaXMuY29uZmlndXJhdGlvbi5zaXBqc0lkLGM9dGhpcy5jb25maWd1cmF0aW9uLmRpc3BsYXlOYW1lLGg9dGhpcy5jb25maWd1cmF0aW9uLnZpYUZvcmNlUnBvcnQsZD10aGlzLmNvbmZpZ3VyYXRpb24uaGFja1ZpYVRjcCxsPXRoaXMuY29uZmlndXJhdGlvbi5zdXBwb3J0ZWRPcHRpb25UYWdzLnNsaWNlKCk7ZT09PUwuUkVHSVNURVImJmwucHVzaCgicGF0aCIsImdydXUiKSxlPT09TC5JTlZJVEUmJih0aGlzLmNvbmZpZ3VyYXRpb24uY29udGFjdC5wdWJHcnV1fHx0aGlzLmNvbmZpZ3VyYXRpb24uY29udGFjdC50ZW1wR3J1dSkmJmwucHVzaCgiZ3J1dSIpO2NvbnN0IGc9e2NhbGxJZFByZWZpeDphLGZvcmNlUnBvcnQ6aCxmcm9tRGlzcGxheU5hbWU6YyxoYWNrVmlhVGNwOmQsb3B0aW9uVGFnczpsLHJvdXRlU2V0OnRoaXMuY29uZmlndXJhdGlvbi5yb3V0ZVNldCx1c2VyQWdlbnRTdHJpbmc6dGhpcy5jb25maWd1cmF0aW9uLnVzZXJBZ2VudEhlYWRlckZpZWxkVmFsdWUsdmlhSG9zdDp0aGlzLmNvbmZpZ3VyYXRpb24udmlhSG9zdH0sdT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZykscik7cmV0dXJuIG5ldyBrKGUsdCxzLGksdSxuLG8pfXJlY2VpdmVJbmNvbWluZ1JlcXVlc3RGcm9tVHJhbnNwb3J0KGUpe3RoaXMucmVjZWl2ZVJlcXVlc3RGcm9tVHJhbnNwb3J0KGUpfXJlY2VpdmVJbmNvbWluZ1Jlc3BvbnNlRnJvbVRyYW5zcG9ydChlKXt0aGlzLnJlY2VpdmVSZXNwb25zZUZyb21UcmFuc3BvcnQoZSl9cmVwbHlTdGF0ZWxlc3MoZSx0KXtjb25zdCBzPXRoaXMuY29uZmlndXJhdGlvbi51c2VyQWdlbnRIZWFkZXJGaWVsZFZhbHVlLGk9dGhpcy5jb25maWd1cmF0aW9uLnN1cHBvcnRlZE9wdGlvblRhZ3NSZXNwb25zZTt0PU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7dXNlckFnZW50OnMsc3VwcG9ydGVkOml9KTtjb25zdCByPXdlKGUsdCk7cmV0dXJuIHRoaXMudHJhbnNwb3J0LnNlbmQoci5tZXNzYWdlKS5jYXRjaCgodD0+e3QgaW5zdGFuY2VvZiBFcnJvciYmdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcihgVHJhbnNwb3J0IGVycm9yIG9jY3VycmVkIHNlbmRpbmcgc3RhdGVsZXNzIHJlcGx5IHRvICR7ZS5tZXRob2R9IHJlcXVlc3QuYCl9KSkscn1yZWNlaXZlUmVxdWVzdEZyb21UcmFuc3BvcnQoZSl7Y29uc3QgdD1lLnZpYUJyYW5jaCxzPXRoaXMudXNlckFnZW50U2VydmVycy5nZXQodCk7ZS5tZXRob2Q9PT1MLkFDSyYmcyYmcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLkFjY2VwdGVkJiZzIGluc3RhbmNlb2YgemU/dGhpcy5sb2dnZXIud2FybihgRGlzY2FyZGluZyBvdXQgb2YgZGlhbG9nIEFDSyBhZnRlciAyeHggcmVzcG9uc2Ugc2VudCBvbiB0cmFuc2FjdGlvbiAke3R9LmApOmUubWV0aG9kIT09TC5DQU5DRUw/cz9zLnRyYW5zYWN0aW9uLnJlY2VpdmVSZXF1ZXN0KGUpOnRoaXMucmVjZWl2ZVJlcXVlc3QoZSk6cz8odGhpcy5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjIwMH0pLHMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBFZSYmcy50cmFuc2FjdGlvbi5zdGF0ZT09PWFlLlByb2NlZWRpbmcmJnMgaW5zdGFuY2VvZiB6ZSYmcy5yZWNlaXZlQ2FuY2VsKGUpKTp0aGlzLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NDgxfSl9cmVjZWl2ZVJlcXVlc3QoZSl7aWYoIUIuaW5jbHVkZXMoZS5tZXRob2QpKXtjb25zdCB0PSJBbGxvdzogIitCLnRvU3RyaW5nKCk7cmV0dXJuIHZvaWQgdGhpcy5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjQwNSxleHRyYUhlYWRlcnM6W3RdfSl9aWYoIWUucnVyaSl0aHJvdyBuZXcgRXJyb3IoIlJlcXVlc3QtVVJJIHVuZGVmaW5lZC4iKTtpZigic2lwIiE9PWUucnVyaS5zY2hlbWUpcmV0dXJuIHZvaWQgdGhpcy5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjQxNn0pO2NvbnN0IHQ9ZS5ydXJpLHM9ZT0+ISFlJiZlLnVzZXI9PT10LnVzZXI7aWYoIXModGhpcy5jb25maWd1cmF0aW9uLmFvcikmJiEocyh0aGlzLmNvbmZpZ3VyYXRpb24uY29udGFjdC51cmkpfHxzKHRoaXMuY29uZmlndXJhdGlvbi5jb250YWN0LnB1YkdydXUpfHxzKHRoaXMuY29uZmlndXJhdGlvbi5jb250YWN0LnRlbXBHcnV1KSkpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oIlJlcXVlc3QtVVJJIGRvZXMgbm90IHBvaW50IHRvIHVzLiIpLHZvaWQoZS5tZXRob2QhPT1MLkFDSyYmdGhpcy5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjQwNH0pKTtpZihlLm1ldGhvZCE9PUwuSU5WSVRFfHxlLmhhc0hlYWRlcigiQ29udGFjdCIpKXtpZighZS50b1RhZyl7Y29uc3QgdD1lLnZpYUJyYW5jaDtpZighdGhpcy51c2VyQWdlbnRTZXJ2ZXJzLmhhcyh0KSl7aWYoQXJyYXkuZnJvbSh0aGlzLnVzZXJBZ2VudFNlcnZlcnMudmFsdWVzKCkpLnNvbWUoKHQ9PnQudHJhbnNhY3Rpb24ucmVxdWVzdC5mcm9tVGFnPT09ZS5mcm9tVGFnJiZ0LnRyYW5zYWN0aW9uLnJlcXVlc3QuY2FsbElkPT09ZS5jYWxsSWQmJnQudHJhbnNhY3Rpb24ucmVxdWVzdC5jc2VxPT09ZS5jc2VxKSkpcmV0dXJuIHZvaWQgdGhpcy5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjQ4Mn0pfX1lLnRvVGFnP3RoaXMucmVjZWl2ZUluc2lkZURpYWxvZ1JlcXVlc3QoZSk6dGhpcy5yZWNlaXZlT3V0c2lkZURpYWxvZ1JlcXVlc3QoZSl9ZWxzZSB0aGlzLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NDAwLHJlYXNvblBocmFzZToiTWlzc2luZyBDb250YWN0IEhlYWRlciJ9KX1yZWNlaXZlSW5zaWRlRGlhbG9nUmVxdWVzdChlKXtpZihlLm1ldGhvZD09PUwuTk9USUZZKXtjb25zdCB0PWUucGFyc2VIZWFkZXIoIkV2ZW50Iik7aWYoIXR8fCF0LmV2ZW50KXJldHVybiB2b2lkIHRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0ODl9KTtjb25zdCBzPWUuY2FsbElkK2UudG9UYWcrdC5ldmVudCxpPXRoaXMuc3Vic2NyaWJlcnMuZ2V0KHMpO2lmKGkpe2NvbnN0IHQ9bmV3IE1lKHRoaXMsZSk7cmV0dXJuIHZvaWQgaS5vbk5vdGlmeSh0KX19Y29uc3QgdD1lLmNhbGxJZCtlLnRvVGFnK2UuZnJvbVRhZyxzPXRoaXMuZGlhbG9ncy5nZXQodCk7aWYocyl7aWYoZS5tZXRob2Q9PT1MLk9QVElPTlMpe2NvbnN0IHQ9IkFsbG93OiAiK0IudG9TdHJpbmcoKSxzPSJBY2NlcHQ6ICIrZXQudG9TdHJpbmcoKTtyZXR1cm4gdm9pZCB0aGlzLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6MjAwLGV4dHJhSGVhZGVyczpbdCxzXX0pfXMucmVjZWl2ZVJlcXVlc3QoZSl9ZWxzZSBlLm1ldGhvZCE9PUwuQUNLJiZ0aGlzLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NDgxfSl9cmVjZWl2ZU91dHNpZGVEaWFsb2dSZXF1ZXN0KGUpe3N3aXRjaChlLm1ldGhvZCl7Y2FzZSBMLkFDSzpicmVhaztjYXNlIEwuQllFOnRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0ODF9KTticmVhaztjYXNlIEwuQ0FOQ0VMOnRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBvdXQgb2YgZGlhbG9nIHJlcXVlc3QgbWV0aG9kICR7ZS5tZXRob2R9LmApO2Nhc2UgTC5JTkZPOnRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0MDV9KTticmVhaztjYXNlIEwuSU5WSVRFOntjb25zdCB0PW5ldyB6ZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUub25JbnZpdGU/dGhpcy5kZWxlZ2F0ZS5vbkludml0ZSh0KTp0LnJlamVjdCgpfWJyZWFrO2Nhc2UgTC5NRVNTQUdFOntjb25zdCB0PW5ldyB4ZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUub25NZXNzYWdlP3RoaXMuZGVsZWdhdGUub25NZXNzYWdlKHQpOnQuYWNjZXB0KCl9YnJlYWs7Y2FzZSBMLk5PVElGWTp7Y29uc3QgdD1uZXcgTWUodGhpcyxlKTt0aGlzLmRlbGVnYXRlLm9uTm90aWZ5P3RoaXMuZGVsZWdhdGUub25Ob3RpZnkodCk6dC5yZWplY3Qoe3N0YXR1c0NvZGU6NDA1fSl9YnJlYWs7Y2FzZSBMLk9QVElPTlM6e2NvbnN0IHQ9IkFsbG93OiAiK0IudG9TdHJpbmcoKSxzPSJBY2NlcHQ6ICIrZXQudG9TdHJpbmcoKTt0aGlzLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6MjAwLGV4dHJhSGVhZGVyczpbdCxzXX0pfWJyZWFrO2Nhc2UgTC5SRUZFUjp7Y29uc3QgdD1uZXcgQmUodGhpcyxlKTt0aGlzLmRlbGVnYXRlLm9uUmVmZXI/dGhpcy5kZWxlZ2F0ZS5vblJlZmVyKHQpOnQucmVqZWN0KHtzdGF0dXNDb2RlOjQwNX0pfWJyZWFrO2Nhc2UgTC5SRUdJU1RFUjp7Y29uc3QgdD1uZXcgWGUodGhpcyxlKTt0aGlzLmRlbGVnYXRlLm9uUmVnaXN0ZXI/dGhpcy5kZWxlZ2F0ZS5vblJlZ2lzdGVyKHQpOnQucmVqZWN0KHtzdGF0dXNDb2RlOjQwNX0pfWJyZWFrO2Nhc2UgTC5TVUJTQ1JJQkU6e2NvbnN0IHQ9bmV3IFFlKHRoaXMsZSk7dGhpcy5kZWxlZ2F0ZS5vblN1YnNjcmliZT90aGlzLmRlbGVnYXRlLm9uU3Vic2NyaWJlKHQpOnQucmVqZWN0KHtzdGF0dXNDb2RlOjQ4MH0pfWJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIG91dCBvZiBkaWFsb2cgcmVxdWVzdCBtZXRob2QgJHtlLm1ldGhvZH0uYCl9fXJlY2VpdmVSZXNwb25zZUZyb21UcmFuc3BvcnQoZSl7aWYoZS5nZXRIZWFkZXJzKCJ2aWEiKS5sZW5ndGg+MSlyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKCJNb3JlIHRoYW4gb25lIFZpYSBoZWFkZXIgZmllbGQgcHJlc2VudCBpbiB0aGUgcmVzcG9uc2UsIGRyb3BwaW5nIik7Y29uc3QgdD1lLnZpYUJyYW5jaCtlLm1ldGhvZCxzPXRoaXMudXNlckFnZW50Q2xpZW50cy5nZXQodCk7cz9zLnRyYW5zYWN0aW9uLnJlY2VpdmVSZXNwb25zZShlKTp0aGlzLmxvZ2dlci53YXJuKGBEaXNjYXJkaW5nIHVubWF0Y2hlZCAke2Uuc3RhdHVzQ29kZX0gcmVzcG9uc2UgdG8gJHtlLm1ldGhvZH0gJHt0fS5gKX19dmFyIHN0O2Z1bmN0aW9uIGl0KCl7cmV0dXJuIGU9PmUuYXVkaW98fGUudmlkZW8/dm9pZCAwPT09bmF2aWdhdG9yLm1lZGlhRGV2aWNlcz9Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk1lZGlhIGRldmljZXMgbm90IGF2YWlsYWJsZSBpbiBpbnNlY3VyZSBjb250ZXh0cy4iKSk6bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuY2FsbChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLGUpOlByb21pc2UucmVzb2x2ZShuZXcgTWVkaWFTdHJlYW0pfWZ1bmN0aW9uIHJ0KCl7cmV0dXJue2J1bmRsZVBvbGljeToiYmFsYW5jZWQiLGNlcnRpZmljYXRlczp2b2lkIDAsaWNlQ2FuZGlkYXRlUG9vbFNpemU6MCxpY2VTZXJ2ZXJzOlt7dXJsczoic3R1bjpzdHVuLmwuZ29vZ2xlLmNvbToxOTMwMiJ9XSxpY2VUcmFuc3BvcnRQb2xpY3k6ImFsbCIscGVlcklkZW50aXR5OnZvaWQgMCxydGNwTXV4UG9saWN5OiJyZXF1aXJlIn19IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtsZXQgcz10LGk9MCxyPTA7aWYoZS5zdWJzdHJpbmcocyxzKzIpLm1hdGNoKC8oXlxyXG4pLykpcmV0dXJuLTI7Zm9yKDswPT09aTspe2lmKHI9ZS5pbmRleE9mKCJcclxuIixzKSwtMT09PXIpcmV0dXJuIHI7IWUuc3Vic3RyaW5nKHIrMixyKzQpLm1hdGNoKC8oXlxyXG4pLykmJmUuY2hhckF0KHIrMikubWF0Y2goLyheXHMrKS8pP3M9cisyOmk9cn1yZXR1cm4gaX1mdW5jdGlvbiBzKGUsdCxzLGkpe2NvbnN0IHI9dC5pbmRleE9mKCI6IixzKSxuPXQuc3Vic3RyaW5nKHMscikudHJpbSgpLG89dC5zdWJzdHJpbmcocisxLGkpLnRyaW0oKTtsZXQgYTtzd2l0Y2gobi50b0xvd2VyQ2FzZSgpKXtjYXNlInZpYSI6Y2FzZSJ2IjplLmFkZEhlYWRlcigidmlhIixvKSwxPT09ZS5nZXRIZWFkZXJzKCJ2aWEiKS5sZW5ndGg/KGE9ZS5wYXJzZUhlYWRlcigiVmlhIiksYSYmKGUudmlhPWEsZS52aWFCcmFuY2g9YS5icmFuY2gpKTphPTA7YnJlYWs7Y2FzZSJmcm9tIjpjYXNlImYiOmUuc2V0SGVhZGVyKCJmcm9tIixvKSxhPWUucGFyc2VIZWFkZXIoImZyb20iKSxhJiYoZS5mcm9tPWEsZS5mcm9tVGFnPWEuZ2V0UGFyYW0oInRhZyIpKTticmVhaztjYXNlInRvIjpjYXNlInQiOmUuc2V0SGVhZGVyKCJ0byIsbyksYT1lLnBhcnNlSGVhZGVyKCJ0byIpLGEmJihlLnRvPWEsZS50b1RhZz1hLmdldFBhcmFtKCJ0YWciKSk7YnJlYWs7Y2FzZSJyZWNvcmQtcm91dGUiOmlmKGE9eS5wYXJzZShvLCJSZWNvcmRfUm91dGUiKSwtMT09PWEpe2E9dm9pZCAwO2JyZWFrfWlmKCEoYSBpbnN0YW5jZW9mIEFycmF5KSl7YT12b2lkIDA7YnJlYWt9YS5mb3JFYWNoKCh0PT57ZS5hZGRIZWFkZXIoInJlY29yZC1yb3V0ZSIsby5zdWJzdHJpbmcodC5wb3NpdGlvbix0Lm9mZnNldCkpLGUuaGVhZGVyc1siUmVjb3JkLVJvdXRlIl1bZS5nZXRIZWFkZXJzKCJyZWNvcmQtcm91dGUiKS5sZW5ndGgtMV0ucGFyc2VkPXQucGFyc2VkfSkpO2JyZWFrO2Nhc2UiY2FsbC1pZCI6Y2FzZSJpIjplLnNldEhlYWRlcigiY2FsbC1pZCIsbyksYT1lLnBhcnNlSGVhZGVyKCJjYWxsLWlkIiksYSYmKGUuY2FsbElkPW8pO2JyZWFrO2Nhc2UiY29udGFjdCI6Y2FzZSJtIjppZihhPXkucGFyc2UobywiQ29udGFjdCIpLC0xPT09YSl7YT12b2lkIDA7YnJlYWt9aWYoIShhIGluc3RhbmNlb2YgQXJyYXkpKXthPXZvaWQgMDticmVha31hLmZvckVhY2goKHQ9PntlLmFkZEhlYWRlcigiY29udGFjdCIsby5zdWJzdHJpbmcodC5wb3NpdGlvbix0Lm9mZnNldCkpLGUuaGVhZGVycy5Db250YWN0W2UuZ2V0SGVhZGVycygiY29udGFjdCIpLmxlbmd0aC0xXS5wYXJzZWQ9dC5wYXJzZWR9KSk7YnJlYWs7Y2FzZSJjb250ZW50LWxlbmd0aCI6Y2FzZSJsIjplLnNldEhlYWRlcigiY29udGVudC1sZW5ndGgiLG8pLGE9ZS5wYXJzZUhlYWRlcigiY29udGVudC1sZW5ndGgiKTticmVhaztjYXNlImNvbnRlbnQtdHlwZSI6Y2FzZSJjIjplLnNldEhlYWRlcigiY29udGVudC10eXBlIixvKSxhPWUucGFyc2VIZWFkZXIoImNvbnRlbnQtdHlwZSIpO2JyZWFrO2Nhc2UiY3NlcSI6ZS5zZXRIZWFkZXIoImNzZXEiLG8pLGE9ZS5wYXJzZUhlYWRlcigiY3NlcSIpLGEmJihlLmNzZXE9YS52YWx1ZSksZSBpbnN0YW5jZW9mIEgmJihlLm1ldGhvZD1hLm1ldGhvZCk7YnJlYWs7Y2FzZSJtYXgtZm9yd2FyZHMiOmUuc2V0SGVhZGVyKCJtYXgtZm9yd2FyZHMiLG8pLGE9ZS5wYXJzZUhlYWRlcigibWF4LWZvcndhcmRzIik7YnJlYWs7Y2FzZSJ3d3ctYXV0aGVudGljYXRlIjplLnNldEhlYWRlcigid3d3LWF1dGhlbnRpY2F0ZSIsbyksYT1lLnBhcnNlSGVhZGVyKCJ3d3ctYXV0aGVudGljYXRlIik7YnJlYWs7Y2FzZSJwcm94eS1hdXRoZW50aWNhdGUiOmUuc2V0SGVhZGVyKCJwcm94eS1hdXRoZW50aWNhdGUiLG8pLGE9ZS5wYXJzZUhlYWRlcigicHJveHktYXV0aGVudGljYXRlIik7YnJlYWs7Y2FzZSJyZWZlci10byI6Y2FzZSJyIjplLnNldEhlYWRlcigicmVmZXItdG8iLG8pLGE9ZS5wYXJzZUhlYWRlcigicmVmZXItdG8iKSxhJiYoZS5yZWZlclRvPWEpO2JyZWFrO2RlZmF1bHQ6ZS5hZGRIZWFkZXIobi50b0xvd2VyQ2FzZSgpLG8pLGE9MH1yZXR1cm4gdm9pZCAwIT09YXx8e2Vycm9yOiJlcnJvciBwYXJzaW5nIGhlYWRlciAnIituKyInIn19ZS5nZXRIZWFkZXI9dCxlLnBhcnNlSGVhZGVyPXMsZS5wYXJzZU1lc3NhZ2U9ZnVuY3Rpb24oZSxpKXtsZXQgcj0wLG49ZS5pbmRleE9mKCJcclxuIik7aWYoLTE9PT1uKXJldHVybiB2b2lkIGkud2Fybigibm8gQ1JMRiBmb3VuZCwgbm90IGEgU0lQIG1lc3NhZ2UsIGRpc2NhcmRlZCIpO2NvbnN0IG89ZS5zdWJzdHJpbmcoMCxuKSxhPXkucGFyc2UobywiUmVxdWVzdF9SZXNwb25zZSIpO2xldCBjLGg7aWYoLTEhPT1hKXtmb3IoYS5zdGF0dXNfY29kZT8oYz1uZXcgSCxjLnN0YXR1c0NvZGU9YS5zdGF0dXNfY29kZSxjLnJlYXNvblBocmFzZT1hLnJlYXNvbl9waHJhc2UpOihjPW5ldyBELGMubWV0aG9kPWEubWV0aG9kLGMucnVyaT1hLnVyaSksYy5kYXRhPWUscj1uKzI7Oyl7aWYobj10KGUsciksLTI9PT1uKXtoPXIrMjticmVha31pZigtMT09PW4pcmV0dXJuIHZvaWQgaS5lcnJvcigibWFsZm9ybWVkIG1lc3NhZ2UiKTtjb25zdCBvPXMoYyxlLHIsbik7aWYobyYmITAhPT1vKXJldHVybiB2b2lkIGkuZXJyb3Ioby5lcnJvcik7cj1uKzJ9cmV0dXJuIGMuaGFzSGVhZGVyKCJjb250ZW50LWxlbmd0aCIpP2MuYm9keT1lLnN1YnN0cihoLE51bWJlcihjLmdldEhlYWRlcigiY29udGVudC1sZW5ndGgiKSkpOmMuYm9keT1lLnN1YnN0cmluZyhoKSxjfWkud2FybignZXJyb3IgcGFyc2luZyBmaXJzdCBsaW5lIG9mIFNJUCBtZXNzYWdlOiAiJytvKyciJyl9fShzdHx8KHN0PXt9KSk7Y2xhc3MgbnR7Y29uc3RydWN0b3IoZSx0LHMpe2UuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuY29uc3RydWN0b3IiKSx0aGlzLmxvZ2dlcj1lLHRoaXMubWVkaWFTdHJlYW1GYWN0b3J5PXQsdGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyQ29uZmlndXJhdGlvbj1zLHRoaXMuX2xvY2FsTWVkaWFTdHJlYW09bmV3IE1lZGlhU3RyZWFtLHRoaXMuX3JlbW90ZU1lZGlhU3RyZWFtPW5ldyBNZWRpYVN0cmVhbSx0aGlzLl9wZWVyQ29ubmVjdGlvbj1uZXcgUlRDUGVlckNvbm5lY3Rpb24obnVsbD09cz92b2lkIDA6cy5wZWVyQ29ubmVjdGlvbkNvbmZpZ3VyYXRpb24pLHRoaXMuaW5pdFBlZXJDb25uZWN0aW9uRXZlbnRIYW5kbGVycygpfWdldCBsb2NhbE1lZGlhU3RyZWFtKCl7cmV0dXJuIHRoaXMuX2xvY2FsTWVkaWFTdHJlYW19Z2V0IHJlbW90ZU1lZGlhU3RyZWFtKCl7cmV0dXJuIHRoaXMuX3JlbW90ZU1lZGlhU3RyZWFtfWdldCBkYXRhQ2hhbm5lbCgpe3JldHVybiB0aGlzLl9kYXRhQ2hhbm5lbH1nZXQgcGVlckNvbm5lY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGVlckNvbm5lY3Rpb259Z2V0IHBlZXJDb25uZWN0aW9uRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZX1zZXQgcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZShlKXt0aGlzLl9wZWVyQ29ubmVjdGlvbkRlbGVnYXRlPWV9c3RhdGljIGRpc3BhdGNoQWRkVHJhY2tFdmVudChlLHQpe2UuZGlzcGF0Y2hFdmVudChuZXcgTWVkaWFTdHJlYW1UcmFja0V2ZW50KCJhZGR0cmFjayIse3RyYWNrOnR9KSl9c3RhdGljIGRpc3BhdGNoUmVtb3ZlVHJhY2tFdmVudChlLHQpe2UuZGlzcGF0Y2hFdmVudChuZXcgTWVkaWFTdHJlYW1UcmFja0V2ZW50KCJyZW1vdmV0cmFjayIse3RyYWNrOnR9KSl9Y2xvc2UoKXt0aGlzLmxvZ2dlci5kZWJ1ZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5jbG9zZSIpLHZvaWQgMCE9PXRoaXMuX3BlZXJDb25uZWN0aW9uJiYodGhpcy5fcGVlckNvbm5lY3Rpb24uZ2V0UmVjZWl2ZXJzKCkuZm9yRWFjaCgoZT0+e2UudHJhY2smJmUudHJhY2suc3RvcCgpfSkpLHRoaXMuX3BlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChlPT57ZS50cmFjayYmZS50cmFjay5zdG9wKCl9KSksdGhpcy5fZGF0YUNoYW5uZWwmJnRoaXMuX2RhdGFDaGFubmVsLmNsb3NlKCksdGhpcy5fcGVlckNvbm5lY3Rpb24uY2xvc2UoKSx0aGlzLl9wZWVyQ29ubmVjdGlvbj12b2lkIDApfWdldERlc2NyaXB0aW9uKGUsdCl7dmFyIHMsaTtpZih0aGlzLmxvZ2dlci5kZWJ1ZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5nZXREZXNjcmlwdGlvbiIpLHZvaWQgMD09PXRoaXMuX3BlZXJDb25uZWN0aW9uKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlBlZXIgY29ubmVjdGlvbiBjbG9zZWQuIikpO3RoaXMub25EYXRhQ2hhbm5lbD1udWxsPT1lP3ZvaWQgMDplLm9uRGF0YUNoYW5uZWw7Y29uc3Qgcj1udWxsPT09KHM9bnVsbD09ZT92b2lkIDA6ZS5vZmZlck9wdGlvbnMpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmljZVJlc3RhcnQsbj12b2lkIDA9PT0obnVsbD09ZT92b2lkIDA6ZS5pY2VHYXRoZXJpbmdUaW1lb3V0KT9udWxsPT09KGk9dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyQ29uZmlndXJhdGlvbil8fHZvaWQgMD09PWk/dm9pZCAwOmkuaWNlR2F0aGVyaW5nVGltZW91dDpudWxsPT1lP3ZvaWQgMDplLmljZUdhdGhlcmluZ1RpbWVvdXQ7cmV0dXJuIHRoaXMuZ2V0TG9jYWxNZWRpYVN0cmVhbShlKS50aGVuKCgoKT0+dGhpcy51cGRhdGVEaXJlY3Rpb24oZSkpKS50aGVuKCgoKT0+dGhpcy5jcmVhdGVEYXRhQ2hhbm5lbChlKSkpLnRoZW4oKCgpPT50aGlzLmNyZWF0ZUxvY2FsT2ZmZXJPckFuc3dlcihlKSkpLnRoZW4oKGU9PnRoaXMuYXBwbHlNb2RpZmllcnMoZSx0KSkpLnRoZW4oKGU9PnRoaXMuc2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb24oZSkpKS50aGVuKCgoKT0+dGhpcy53YWl0Rm9ySWNlR2F0aGVyaW5nQ29tcGxldGUocixuKSkpLnRoZW4oKCgpPT50aGlzLmdldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uKCkpKS50aGVuKChlPT4oe2JvZHk6ZS5zZHAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3NkcCJ9KSkpLmNhdGNoKChlPT57dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZ2V0RGVzY3JpcHRpb24gZmFpbGVkIC0gIitlKSxlfSkpfWhhc0Rlc2NyaXB0aW9uKGUpe3JldHVybiB0aGlzLmxvZ2dlci5kZWJ1ZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5oYXNEZXNjcmlwdGlvbiIpLCJhcHBsaWNhdGlvbi9zZHAiPT09ZX1zZW5kRHRtZihlLHQpe2lmKHRoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNlbmREdG1mIiksdm9pZCAwPT09dGhpcy5fcGVlckNvbm5lY3Rpb24pcmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNlbmREdG1mIGZhaWxlZCAtIHBlZXIgY29ubmVjdGlvbiBjbG9zZWQiKSwhMTtjb25zdCBzPXRoaXMuX3BlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKTtpZigwPT09cy5sZW5ndGgpcmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNlbmREdG1mIGZhaWxlZCAtIG5vIHNlbmRlcnMiKSwhMTtjb25zdCBpPXNbMF0uZHRtZjtpZighaSlyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2VuZER0bWYgZmFpbGVkIC0gbm8gRFRNRiBzZW5kZXIiKSwhMTtjb25zdCByPW51bGw9PXQ/dm9pZCAwOnQuZHVyYXRpb24sbj1udWxsPT10P3ZvaWQgMDp0LmludGVyVG9uZUdhcDt0cnl7aS5pbnNlcnREVE1GKGUscixuKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZSksITF9cmV0dXJuIHRoaXMubG9nZ2VyLmxvZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZW5kRHRtZiBzZW50IHZpYSBSVFA6ICIrZS50b1N0cmluZygpKSwhMH1zZXREZXNjcmlwdGlvbihlLHQscyl7aWYodGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0RGVzY3JpcHRpb24iKSx2b2lkIDA9PT10aGlzLl9wZWVyQ29ubmVjdGlvbilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJQZWVyIGNvbm5lY3Rpb24gY2xvc2VkLiIpKTt0aGlzLm9uRGF0YUNoYW5uZWw9bnVsbD09dD92b2lkIDA6dC5vbkRhdGFDaGFubmVsO2NvbnN0IGk9ImhhdmUtbG9jYWwtb2ZmZXIiPT09dGhpcy5fcGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGU/ImFuc3dlciI6Im9mZmVyIjtyZXR1cm4gdGhpcy5nZXRMb2NhbE1lZGlhU3RyZWFtKHQpLnRoZW4oKCgpPT50aGlzLmFwcGx5TW9kaWZpZXJzKHtzZHA6ZSx0eXBlOml9LHMpKSkudGhlbigoZT0+dGhpcy5zZXRSZW1vdGVTZXNzaW9uRGVzY3JpcHRpb24oZSkpKS5jYXRjaCgoZT0+e3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldERlc2NyaXB0aW9uIGZhaWxlZCAtICIrZSksZX0pKX1hcHBseU1vZGlmaWVycyhlLHQpe3JldHVybiB0aGlzLmxvZ2dlci5kZWJ1ZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5hcHBseU1vZGlmaWVycyIpLHQmJjAhPT10Lmxlbmd0aD90LnJlZHVjZSgoKGUsdCk9PmUudGhlbih0KSksUHJvbWlzZS5yZXNvbHZlKGUpKS50aGVuKChlPT57aWYodGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuYXBwbHlNb2RpZmllcnMgLSBtb2RpZmllZCBzZHAiKSwhZS5zZHB8fCFlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIFNEUC4iKTtyZXR1cm57c2RwOmUuc2RwLHR5cGU6ZS50eXBlfX0pKTpQcm9taXNlLnJlc29sdmUoZSl9Y3JlYXRlRGF0YUNoYW5uZWwoZSl7aWYodm9pZCAwPT09dGhpcy5fcGVlckNvbm5lY3Rpb24pcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiUGVlciBjb25uZWN0aW9uIGNsb3NlZC4iKSk7aWYoITAhPT0obnVsbD09ZT92b2lkIDA6ZS5kYXRhQ2hhbm5lbCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2lmKHRoaXMuX2RhdGFDaGFubmVsKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtzd2l0Y2godGhpcy5fcGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUpe2Nhc2Uic3RhYmxlIjp0aGlzLmxvZ2dlci5kZWJ1ZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5jcmVhdGVEYXRhQ2hhbm5lbCAtIGNyZWF0aW5nIGRhdGEgY2hhbm5lbCIpO3RyeXtyZXR1cm4gdGhpcy5fZGF0YUNoYW5uZWw9dGhpcy5fcGVlckNvbm5lY3Rpb24uY3JlYXRlRGF0YUNoYW5uZWwoKG51bGw9PWU/dm9pZCAwOmUuZGF0YUNoYW5uZWxMYWJlbCl8fCIiLG51bGw9PWU/dm9pZCAwOmUuZGF0YUNoYW5uZWxPcHRpb25zKSx0aGlzLm9uRGF0YUNoYW5uZWwmJnRoaXMub25EYXRhQ2hhbm5lbCh0aGlzLl9kYXRhQ2hhbm5lbCksUHJvbWlzZS5yZXNvbHZlKCl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfWNhc2UiaGF2ZS1yZW1vdGUtb2ZmZXIiOnJldHVybiBQcm9taXNlLnJlc29sdmUoKTtjYXNlImhhdmUtbG9jYWwtb2ZmZXIiOmNhc2UiaGF2ZS1sb2NhbC1wcmFuc3dlciI6Y2FzZSJoYXZlLXJlbW90ZS1wcmFuc3dlciI6Y2FzZSJjbG9zZWQiOmRlZmF1bHQ6cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgIit0aGlzLl9wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSkpfX1jcmVhdGVMb2NhbE9mZmVyT3JBbnN3ZXIoZSl7aWYodm9pZCAwPT09dGhpcy5fcGVlckNvbm5lY3Rpb24pcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiUGVlciBjb25uZWN0aW9uIGNsb3NlZC4iKSk7c3dpdGNoKHRoaXMuX3BlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlKXtjYXNlInN0YWJsZSI6cmV0dXJuIHRoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmNyZWF0ZUxvY2FsT2ZmZXJPckFuc3dlciAtIGNyZWF0aW5nIFNEUCBvZmZlciIpLHRoaXMuX3BlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKG51bGw9PWU/dm9pZCAwOmUub2ZmZXJPcHRpb25zKTtjYXNlImhhdmUtcmVtb3RlLW9mZmVyIjpyZXR1cm4gdGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuY3JlYXRlTG9jYWxPZmZlck9yQW5zd2VyIC0gY3JlYXRpbmcgU0RQIGFuc3dlciIpLHRoaXMuX3BlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcihudWxsPT1lP3ZvaWQgMDplLmFuc3dlck9wdGlvbnMpO2Nhc2UiaGF2ZS1sb2NhbC1vZmZlciI6Y2FzZSJoYXZlLWxvY2FsLXByYW5zd2VyIjpjYXNlImhhdmUtcmVtb3RlLXByYW5zd2VyIjpjYXNlImNsb3NlZCI6ZGVmYXVsdDpyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAiK3RoaXMuX3BlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlKSl9fWdldExvY2FsTWVkaWFTdHJlYW0oZSl7aWYodGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZ2V0TG9jYWxNZWRpYVN0cmVhbSIpLHZvaWQgMD09PXRoaXMuX3BlZXJDb25uZWN0aW9uKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlBlZXIgY29ubmVjdGlvbiBjbG9zZWQuIikpO2xldCB0PU9iamVjdC5hc3NpZ24oe30sbnVsbD09ZT92b2lkIDA6ZS5jb25zdHJhaW50cyk7aWYodGhpcy5sb2NhbE1lZGlhU3RyZWFtQ29uc3RyYWludHMpe2lmKHQuYXVkaW89dC5hdWRpb3x8dGhpcy5sb2NhbE1lZGlhU3RyZWFtQ29uc3RyYWludHMuYXVkaW8sdC52aWRlbz10LnZpZGVvfHx0aGlzLmxvY2FsTWVkaWFTdHJlYW1Db25zdHJhaW50cy52aWRlbyxKU09OLnN0cmluZ2lmeSh0aGlzLmxvY2FsTWVkaWFTdHJlYW1Db25zdHJhaW50cy5hdWRpbyk9PT1KU09OLnN0cmluZ2lmeSh0LmF1ZGlvKSYmSlNPTi5zdHJpbmdpZnkodGhpcy5sb2NhbE1lZGlhU3RyZWFtQ29uc3RyYWludHMudmlkZW8pPT09SlNPTi5zdHJpbmdpZnkodC52aWRlbykpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWVsc2Ugdm9pZCAwPT09dC5hdWRpbyYmdm9pZCAwPT09dC52aWRlbyYmKHQ9e2F1ZGlvOiEwfSk7cmV0dXJuIHRoaXMubG9jYWxNZWRpYVN0cmVhbUNvbnN0cmFpbnRzPXQsdGhpcy5tZWRpYVN0cmVhbUZhY3RvcnkodCx0aGlzKS50aGVuKChlPT50aGlzLnNldExvY2FsTWVkaWFTdHJlYW0oZSkpKX1zZXRMb2NhbE1lZGlhU3RyZWFtKGUpe2lmKHRoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldExvY2FsTWVkaWFTdHJlYW0iKSwhdGhpcy5fcGVlckNvbm5lY3Rpb24pdGhyb3cgbmV3IEVycm9yKCJQZWVyIGNvbm5lY3Rpb24gdW5kZWZpbmVkLiIpO2NvbnN0IHQ9dGhpcy5fcGVlckNvbm5lY3Rpb24scz10aGlzLl9sb2NhbE1lZGlhU3RyZWFtLGk9W10scj1lPT57Y29uc3Qgcj1lLmtpbmQ7aWYoImF1ZGlvIiE9PXImJiJ2aWRlbyIhPT1yKXRocm93IG5ldyBFcnJvcihgVW5rbm93biBuZXcgdHJhY2sga2luZCAke3J9LmApO2NvbnN0IG49dC5nZXRTZW5kZXJzKCkuZmluZCgoZT0+ZS50cmFjayYmZS50cmFjay5raW5kPT09cikpO24/aS5wdXNoKG5ldyBQcm9taXNlKChlPT57dGhpcy5sb2dnZXIuZGVidWcoYFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0TG9jYWxNZWRpYVN0cmVhbSAtIHJlcGxhY2luZyBzZW5kZXIgJHtyfSB0cmFja2ApLGUoKX0pKS50aGVuKCgoKT0+bi5yZXBsYWNlVHJhY2soZSkudGhlbigoKCk9Pntjb25zdCB0PXMuZ2V0VHJhY2tzKCkuZmluZCgoZT0+ZS5raW5kPT09cikpO3QmJih0LnN0b3AoKSxzLnJlbW92ZVRyYWNrKHQpLG50LmRpc3BhdGNoUmVtb3ZlVHJhY2tFdmVudChzLHQpKSxzLmFkZFRyYWNrKGUpLG50LmRpc3BhdGNoQWRkVHJhY2tFdmVudChzLGUpfSkpLmNhdGNoKChlPT57dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoYFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0TG9jYWxNZWRpYVN0cmVhbSAtIGZhaWxlZCB0byByZXBsYWNlIHNlbmRlciAke3J9IHRyYWNrYCksZX0pKSkpKTppLnB1c2gobmV3IFByb21pc2UoKGU9Pnt0aGlzLmxvZ2dlci5kZWJ1ZyhgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRMb2NhbE1lZGlhU3RyZWFtIC0gYWRkaW5nIHNlbmRlciAke3J9IHRyYWNrYCksZSgpfSkpLnRoZW4oKCgpPT57dHJ5e3QuYWRkVHJhY2soZSxzKX1jYXRjaChlKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRMb2NhbE1lZGlhU3RyZWFtIC0gZmFpbGVkIHRvIGFkZCBzZW5kZXIgJHtyfSB0cmFja2ApLGV9cy5hZGRUcmFjayhlKSxudC5kaXNwYXRjaEFkZFRyYWNrRXZlbnQocyxlKX0pKSl9LG49ZS5nZXRBdWRpb1RyYWNrcygpO24ubGVuZ3RoJiZyKG5bMF0pO2NvbnN0IG89ZS5nZXRWaWRlb1RyYWNrcygpO3JldHVybiBvLmxlbmd0aCYmcihvWzBdKSxpLnJlZHVjZSgoKGUsdCk9PmUudGhlbigoKCk9PnQpKSksUHJvbWlzZS5yZXNvbHZlKCkpfWdldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uKCl7aWYodGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuZ2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb24iKSx2b2lkIDA9PT10aGlzLl9wZWVyQ29ubmVjdGlvbilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJQZWVyIGNvbm5lY3Rpb24gY2xvc2VkLiIpKTtjb25zdCBlPXRoaXMuX3BlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb247cmV0dXJuIGU/UHJvbWlzZS5yZXNvbHZlKGUpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiRmFpbGVkIHRvIGdldCBsb2NhbCBzZXNzaW9uIGRlc2NyaXB0aW9uIikpfXNldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uKGUpe3JldHVybiB0aGlzLmxvZ2dlci5kZWJ1ZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRMb2NhbFNlc3Npb25EZXNjcmlwdGlvbiIpLHZvaWQgMD09PXRoaXMuX3BlZXJDb25uZWN0aW9uP1Byb21pc2UucmVqZWN0KG5ldyBFcnJvcigiUGVlciBjb25uZWN0aW9uIGNsb3NlZC4iKSk6dGhpcy5fcGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihlKX1zZXRSZW1vdGVTZXNzaW9uRGVzY3JpcHRpb24oZSl7aWYodGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0UmVtb3RlU2Vzc2lvbkRlc2NyaXB0aW9uIiksdm9pZCAwPT09dGhpcy5fcGVlckNvbm5lY3Rpb24pcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiUGVlciBjb25uZWN0aW9uIGNsb3NlZC4iKSk7Y29uc3QgdD1lLnNkcDtsZXQgcztzd2l0Y2godGhpcy5fcGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUpe2Nhc2Uic3RhYmxlIjpzPSJvZmZlciI7YnJlYWs7Y2FzZSJoYXZlLWxvY2FsLW9mZmVyIjpzPSJhbnN3ZXIiO2JyZWFrO2Nhc2UiaGF2ZS1sb2NhbC1wcmFuc3dlciI6Y2FzZSJoYXZlLXJlbW90ZS1vZmZlciI6Y2FzZSJoYXZlLXJlbW90ZS1wcmFuc3dlciI6Y2FzZSJjbG9zZWQiOmRlZmF1bHQ6cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgIit0aGlzLl9wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSkpfXJldHVybiB0P3RoaXMuX3BlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKHtzZHA6dCx0eXBlOnN9KToodGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuc2V0UmVtb3RlU2Vzc2lvbkRlc2NyaXB0aW9uIGZhaWxlZCAtIGNhbm5vdCBzZXQgbnVsbCBzZHAiKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNEUCBpcyB1bmRlZmluZWQiKSkpfXNldFJlbW90ZVRyYWNrKGUpe3RoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldFJlbW90ZVRyYWNrIik7Y29uc3QgdD10aGlzLl9yZW1vdGVNZWRpYVN0cmVhbTt0LmdldFRyYWNrQnlJZChlLmlkKT90aGlzLmxvZ2dlci5kZWJ1ZyhgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5zZXRSZW1vdGVUcmFjayAtIGhhdmUgcmVtb3RlICR7ZS5raW5kfSB0cmFja2ApOiJhdWRpbyI9PT1lLmtpbmQ/KHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldFJlbW90ZVRyYWNrIC0gYWRkaW5nIHJlbW90ZSAke2Uua2luZH0gdHJhY2tgKSx0LmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaCgoZT0+e2Uuc3RvcCgpLHQucmVtb3ZlVHJhY2soZSksbnQuZGlzcGF0Y2hSZW1vdmVUcmFja0V2ZW50KHQsZSl9KSksdC5hZGRUcmFjayhlKSxudC5kaXNwYXRjaEFkZFRyYWNrRXZlbnQodCxlKSk6InZpZGVvIj09PWUua2luZCYmKHRoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnNldFJlbW90ZVRyYWNrIC0gYWRkaW5nIHJlbW90ZSAke2Uua2luZH0gdHJhY2tgKSx0LmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaCgoZT0+e2Uuc3RvcCgpLHQucmVtb3ZlVHJhY2soZSksbnQuZGlzcGF0Y2hSZW1vdmVUcmFja0V2ZW50KHQsZSl9KSksdC5hZGRUcmFjayhlKSxudC5kaXNwYXRjaEFkZFRyYWNrRXZlbnQodCxlKSl9dXBkYXRlRGlyZWN0aW9uKGUpe2lmKHZvaWQgMD09PXRoaXMuX3BlZXJDb25uZWN0aW9uKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlBlZXIgY29ubmVjdGlvbiBjbG9zZWQuIikpO3N3aXRjaCh0aGlzLl9wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSl7Y2FzZSJzdGFibGUiOnRoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnVwZGF0ZURpcmVjdGlvbiAtIHNldHRpbmcgb2ZmZXIgZGlyZWN0aW9uIik7e2NvbnN0IHQ9dD0+e3N3aXRjaCh0KXtjYXNlImluYWN0aXZlIjpjYXNlInJlY3Zvbmx5IjpyZXR1cm4obnVsbD09ZT92b2lkIDA6ZS5ob2xkKT8iaW5hY3RpdmUiOiJyZWN2b25seSI7Y2FzZSJzZW5kb25seSI6Y2FzZSJzZW5kcmVjdiI6cmV0dXJuKG51bGw9PWU/dm9pZCAwOmUuaG9sZCk/InNlbmRvbmx5Ijoic2VuZHJlY3YiO2Nhc2Uic3RvcHBlZCI6cmV0dXJuInN0b3BwZWQiO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJTaG91bGQgbmV2ZXIgaGFwcGVuIil9fTt0aGlzLl9wZWVyQ29ubmVjdGlvbi5nZXRUcmFuc2NlaXZlcnMoKS5mb3JFYWNoKChlPT57aWYoZS5kaXJlY3Rpb24pe2NvbnN0IHM9dChlLmRpcmVjdGlvbik7ZS5kaXJlY3Rpb24hPT1zJiYoZS5kaXJlY3Rpb249cyl9fSkpfWJyZWFrO2Nhc2UiaGF2ZS1yZW1vdGUtb2ZmZXIiOnRoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLnVwZGF0ZURpcmVjdGlvbiAtIHNldHRpbmcgYW5zd2VyIGRpcmVjdGlvbiIpO3tjb25zdCB0PSgoKT0+e2NvbnN0IGU9dGhpcy5fcGVlckNvbm5lY3Rpb24ucmVtb3RlRGVzY3JpcHRpb247aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gcmVhZCByZW1vdGUgb2ZmZXIiKTtjb25zdCB0PS9hPXNlbmRyZWN2XHJcbnxhPXNlbmRvbmx5XHJcbnxhPXJlY3Zvbmx5XHJcbnxhPWluYWN0aXZlXHJcbi8uZXhlYyhlLnNkcCk7aWYodClzd2l0Y2godFswXSl7Y2FzZSJhPWluYWN0aXZlXHJcbiI6cmV0dXJuImluYWN0aXZlIjtjYXNlImE9cmVjdm9ubHlcclxuIjpyZXR1cm4icmVjdm9ubHkiO2Nhc2UiYT1zZW5kb25seVxyXG4iOnJldHVybiJzZW5kb25seSI7Y2FzZSJhPXNlbmRyZWN2XHJcbiI6cmV0dXJuInNlbmRyZWN2IjtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiU2hvdWxkIG5ldmVyIGhhcHBlbiIpfXJldHVybiJzZW5kcmVjdiJ9KSgpLHM9KCgpPT57c3dpdGNoKHQpe2Nhc2UiaW5hY3RpdmUiOnJldHVybiJpbmFjdGl2ZSI7Y2FzZSJyZWN2b25seSI6cmV0dXJuInNlbmRvbmx5IjtjYXNlInNlbmRvbmx5IjpyZXR1cm4obnVsbD09ZT92b2lkIDA6ZS5ob2xkKT8iaW5hY3RpdmUiOiJyZWN2b25seSI7Y2FzZSJzZW5kcmVjdiI6cmV0dXJuKG51bGw9PWU/dm9pZCAwOmUuaG9sZCk/InNlbmRvbmx5Ijoic2VuZHJlY3YiO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJTaG91bGQgbmV2ZXIgaGFwcGVuIil9fSkoKTt0aGlzLl9wZWVyQ29ubmVjdGlvbi5nZXRUcmFuc2NlaXZlcnMoKS5mb3JFYWNoKChlPT57ZS5kaXJlY3Rpb24mJiJzdG9wcGVkIiE9PWUuZGlyZWN0aW9uJiZlLmRpcmVjdGlvbiE9PXMmJihlLmRpcmVjdGlvbj1zKX0pKX1icmVhaztjYXNlImhhdmUtbG9jYWwtb2ZmZXIiOmNhc2UiaGF2ZS1sb2NhbC1wcmFuc3dlciI6Y2FzZSJoYXZlLXJlbW90ZS1wcmFuc3dlciI6Y2FzZSJjbG9zZWQiOmRlZmF1bHQ6cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgIit0aGlzLl9wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSkpfXJldHVybiBQcm9taXNlLnJlc29sdmUoKX1pY2VHYXRoZXJpbmdDb21wbGV0ZSgpe3RoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmljZUdhdGhlcmluZ0NvbXBsZXRlIiksdm9pZCAwIT09dGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVRpbWVvdXRJZCYmKHRoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLmljZUdhdGhlcmluZ0NvbXBsZXRlIC0gY2xlYXJpbmcgdGltZW91dCIpLGNsZWFyVGltZW91dCh0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlVGltZW91dElkKSx0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlVGltZW91dElkPXZvaWQgMCksdm9pZCAwIT09dGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVByb21pc2UmJih0aGlzLmxvZ2dlci5kZWJ1ZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5pY2VHYXRoZXJpbmdDb21wbGV0ZSAtIHJlc29sdmluZyBwcm9taXNlIiksdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVJlc29sdmUmJnRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVSZXNvbHZlKCksdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVByb21pc2U9dm9pZCAwLHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVSZXNvbHZlPXZvaWQgMCx0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUmVqZWN0PXZvaWQgMCl9d2FpdEZvckljZUdhdGhlcmluZ0NvbXBsZXRlKGU9ITEsdD0wKXtyZXR1cm4gdGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIud2FpdEZvckljZUdhdGhlcmluZ1RvQ29tcGxldGUiKSx2b2lkIDA9PT10aGlzLl9wZWVyQ29ubmVjdGlvbj9Qcm9taXNlLnJlamVjdCgiUGVlciBjb25uZWN0aW9uIGNsb3NlZC4iKTplfHwiY29tcGxldGUiIT09dGhpcy5fcGVlckNvbm5lY3Rpb24uaWNlR2F0aGVyaW5nU3RhdGU/KHZvaWQgMCE9PXRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVQcm9taXNlJiYodGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIud2FpdEZvckljZUdhdGhlcmluZ1RvQ29tcGxldGUgLSByZWplY3RpbmcgcHJpb3Igd2FpdGluZyBwcm9taXNlIiksdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVJlamVjdCYmdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVJlamVjdChuZXcgRXJyb3IoIlByb21pc2Ugc3VwZXJzZWRlZC4iKSksdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVByb21pc2U9dm9pZCAwLHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGVSZXNvbHZlPXZvaWQgMCx0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUmVqZWN0PXZvaWQgMCksdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVByb21pc2U9bmV3IFByb21pc2UoKChlLHMpPT57dGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVJlc29sdmU9ZSx0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUmVqZWN0PXMsdD4wJiYodGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIud2FpdEZvckljZUdhdGhlcmluZ1RvQ29tcGxldGUgLSB0aW1lb3V0IGluICIrdCksdGhpcy5pY2VHYXRoZXJpbmdDb21wbGV0ZVRpbWVvdXRJZD1zZXRUaW1lb3V0KCgoKT0+e3RoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLndhaXRGb3JJY2VHYXRoZXJpbmdUb0NvbXBsZXRlIC0gdGltZW91dCIpLHRoaXMuaWNlR2F0aGVyaW5nQ29tcGxldGUoKX0pLHQpKX0pKSx0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlUHJvbWlzZSk6KHRoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLndhaXRGb3JJY2VHYXRoZXJpbmdUb0NvbXBsZXRlIC0gYWxyZWFkeSBjb21wbGV0ZSIpLFByb21pc2UucmVzb2x2ZSgpKX1pbml0UGVlckNvbm5lY3Rpb25FdmVudEhhbmRsZXJzKCl7aWYodGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuaW5pdFBlZXJDb25uZWN0aW9uRXZlbnRIYW5kbGVycyIpLCF0aGlzLl9wZWVyQ29ubmVjdGlvbil0aHJvdyBuZXcgRXJyb3IoIlBlZXIgY29ubmVjdGlvbiB1bmRlZmluZWQuIik7Y29uc3QgZT10aGlzLl9wZWVyQ29ubmVjdGlvbjtlLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlPXQ9Pnt2YXIgcztjb25zdCBpPWUuY29ubmVjdGlvblN0YXRlO3RoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlICR7aX1gKSwobnVsbD09PShzPXRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlKSYmdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSh0KX0sZS5vbmRhdGFjaGFubmVsPWU9Pnt2YXIgdDt0aGlzLmxvZ2dlci5kZWJ1ZygiU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5vbmRhdGFjaGFubmVsIiksdGhpcy5fZGF0YUNoYW5uZWw9ZS5jaGFubmVsLHRoaXMub25EYXRhQ2hhbm5lbCYmdGhpcy5vbkRhdGFDaGFubmVsKHRoaXMuX2RhdGFDaGFubmVsKSwobnVsbD09PSh0PXRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9uZGF0YWNoYW5uZWwpJiZ0aGlzLl9wZWVyQ29ubmVjdGlvbkRlbGVnYXRlLm9uZGF0YWNoYW5uZWwoZSl9LGUub25pY2VjYW5kaWRhdGU9ZT0+e3ZhciB0O3RoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uaWNlY2FuZGlkYXRlIiksKG51bGw9PT0odD10aGlzLl9wZWVyQ29ubmVjdGlvbkRlbGVnYXRlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vbmljZWNhbmRpZGF0ZSkmJnRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUub25pY2VjYW5kaWRhdGUoZSl9LGUub25pY2VjYW5kaWRhdGVlcnJvcj1lPT57dmFyIHQ7dGhpcy5sb2dnZXIuZGVidWcoIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIub25pY2VjYW5kaWRhdGVlcnJvciIpLChudWxsPT09KHQ9dGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25pY2VjYW5kaWRhdGVlcnJvcikmJnRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUub25pY2VjYW5kaWRhdGVlcnJvcihlKX0sZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT10PT57dmFyIHM7Y29uc3QgaT1lLmljZUNvbm5lY3Rpb25TdGF0ZTt0aGlzLmxvZ2dlci5kZWJ1ZyhgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSAke2l9YCksKG51bGw9PT0ocz10aGlzLl9wZWVyQ29ubmVjdGlvbkRlbGVnYXRlKXx8dm9pZCAwPT09cz92b2lkIDA6cy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSkmJnRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UodCl9LGUub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZT10PT57dmFyIHM7Y29uc3QgaT1lLmljZUdhdGhlcmluZ1N0YXRlO3RoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgJHtpfWApLCJjb21wbGV0ZSI9PT1pJiZ0aGlzLmljZUdhdGhlcmluZ0NvbXBsZXRlKCksKG51bGw9PT0ocz10aGlzLl9wZWVyQ29ubmVjdGlvbkRlbGVnYXRlKXx8dm9pZCAwPT09cz92b2lkIDA6cy5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKSYmdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKHQpfSxlLm9ubmVnb3RpYXRpb25uZWVkZWQ9ZT0+e3ZhciB0O3RoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9ubmVnb3RpYXRpb25uZWVkZWQiKSwobnVsbD09PSh0PXRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9ubmVnb3RpYXRpb25uZWVkZWQpJiZ0aGlzLl9wZWVyQ29ubmVjdGlvbkRlbGVnYXRlLm9ubmVnb3RpYXRpb25uZWVkZWQoZSl9LGUub25zaWduYWxpbmdzdGF0ZWNoYW5nZT10PT57dmFyIHM7Y29uc3QgaT1lLnNpZ25hbGluZ1N0YXRlO3RoaXMubG9nZ2VyLmRlYnVnKGBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgJHtpfWApLChudWxsPT09KHM9dGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSl8fHZvaWQgMD09PXM/dm9pZCAwOnMub25zaWduYWxpbmdzdGF0ZWNoYW5nZSkmJnRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUub25zaWduYWxpbmdzdGF0ZWNoYW5nZSh0KX0sZS5vbnN0YXRzZW5kZWQ9ZT0+e3ZhciB0O3RoaXMubG9nZ2VyLmRlYnVnKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLm9uc3RhdHNlbmRlZCIpLChudWxsPT09KHQ9dGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25zdGF0c2VuZGVkKSYmdGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZS5vbnN0YXRzZW5kZWQoZSl9LGUub250cmFjaz1lPT57dmFyIHQ7Y29uc3Qgcz1lLnRyYWNrLmtpbmQsaT1lLnRyYWNrLmVuYWJsZWQ/ImVuYWJsZWQiOiJkaXNhYmxlZCI7dGhpcy5sb2dnZXIuZGVidWcoYFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIub250cmFjayAke3N9ICR7aX1gKSx0aGlzLnNldFJlbW90ZVRyYWNrKGUudHJhY2spLChudWxsPT09KHQ9dGhpcy5fcGVlckNvbm5lY3Rpb25EZWxlZ2F0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub250cmFjaykmJnRoaXMuX3BlZXJDb25uZWN0aW9uRGVsZWdhdGUub250cmFjayhlKX19fWZ1bmN0aW9uIG90KGUpe3JldHVybih0LHMpPT57dm9pZCAwPT09ZSYmKGU9aXQoKSk7Y29uc3QgaT17aWNlR2F0aGVyaW5nVGltZW91dDp2b2lkIDAhPT0obnVsbD09cz92b2lkIDA6cy5pY2VHYXRoZXJpbmdUaW1lb3V0KT9udWxsPT1zP3ZvaWQgMDpzLmljZUdhdGhlcmluZ1RpbWVvdXQ6NWUzLHBlZXJDb25uZWN0aW9uQ29uZmlndXJhdGlvbjpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30se2J1bmRsZVBvbGljeToiYmFsYW5jZWQiLGNlcnRpZmljYXRlczp2b2lkIDAsaWNlQ2FuZGlkYXRlUG9vbFNpemU6MCxpY2VTZXJ2ZXJzOlt7dXJsczoic3R1bjpzdHVuLmwuZ29vZ2xlLmNvbToxOTMwMiJ9XSxpY2VUcmFuc3BvcnRQb2xpY3k6ImFsbCIscGVlcklkZW50aXR5OnZvaWQgMCxydGNwTXV4UG9saWN5OiJyZXF1aXJlIn0pLG51bGw9PXM/dm9pZCAwOnMucGVlckNvbm5lY3Rpb25Db25maWd1cmF0aW9uKX0scj10LnVzZXJBZ2VudC5nZXRMb2dnZXIoInNpcC5TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyIik7cmV0dXJuIG5ldyBudChyLGUsaSl9fWNsYXNzIGF0e2NvbnN0cnVjdG9yKGUsdCl7aWYodGhpcy5fc3RhdGU9cmUuRGlzY29ubmVjdGVkLHRoaXMudHJhbnNpdGlvbmluZ1N0YXRlPSExLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyPW5ldyB1LHRoaXMubG9nZ2VyPWUsdCl7Y29uc3QgZT10LHM9bnVsbD09ZT92b2lkIDA6ZS53c1NlcnZlcnMsaT1udWxsPT1lP3ZvaWQgMDplLm1heFJlY29ubmVjdGlvbkF0dGVtcHRzO2lmKHZvaWQgMCE9PXMpe2NvbnN0IGU9J1RoZSB0cmFuc3BvcnQgb3B0aW9uICJ3c1NlcnZlcnMiIGFzIGhhcyBhcHBhcmVudGx5IGJlZW4gc3BlY2lmaWVkIGFuZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBJdCB3aWxsIG5vIGxvbmdlciBiZSBhdmFpbGFibGUgc3RhcnRpbmcgd2l0aCBTSVAuanMgcmVsZWFzZSAwLjE2LjAuIFBsZWFzZSB1cGRhdGUgYWNjb3JkaW5nbHkuJzt0aGlzLmxvZ2dlci53YXJuKGUpfWlmKHZvaWQgMCE9PWkpe2NvbnN0IGU9J1RoZSB0cmFuc3BvcnQgb3B0aW9uICJtYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyIgYXMgaGFzIGFwcGFyZW50bHkgYmVlbiBzcGVjaWZpZWQgYW5kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIEl0IHdpbGwgbm8gbG9uZ2VyIGJlIGF2YWlsYWJsZSBzdGFydGluZyB3aXRoIFNJUC5qcyByZWxlYXNlIDAuMTYuMC4gUGxlYXNlIHVwZGF0ZSBhY2NvcmRpbmdseS4nO3RoaXMubG9nZ2VyLndhcm4oZSl9cyYmIXQuc2VydmVyJiYoInN0cmluZyI9PXR5cGVvZiBzJiYodC5zZXJ2ZXI9cykscyBpbnN0YW5jZW9mIEFycmF5JiYodC5zZXJ2ZXI9c1swXSkpfXRoaXMuY29uZmlndXJhdGlvbj1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYXQuZGVmYXVsdE9wdGlvbnMpLHQpO2NvbnN0IHM9dGhpcy5jb25maWd1cmF0aW9uLnNlcnZlcixpPXkucGFyc2UocywiYWJzb2x1dGVVUkkiKTtpZigtMT09PWkpdGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoYEludmFsaWQgV2ViU29ja2V0IFNlcnZlciBVUkwgIiR7c30iYCksbmV3IEVycm9yKCJJbnZhbGlkIFdlYlNvY2tldCBTZXJ2ZXIgVVJMIik7aWYoIVsid3NzIiwid3MiLCJ1ZHAiXS5pbmNsdWRlcyhpLnNjaGVtZSkpdGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoYEludmFsaWQgc2NoZW1lIGluIFdlYlNvY2tldCBTZXJ2ZXIgVVJMICIke3N9ImApLG5ldyBFcnJvcigiSW52YWxpZCBzY2hlbWUgaW4gV2ViU29ja2V0IFNlcnZlciBVUkwiKTt0aGlzLl9wcm90b2NvbD1pLnNjaGVtZS50b1VwcGVyQ2FzZSgpfWRpc3Bvc2UoKXtyZXR1cm4gdGhpcy5kaXNjb25uZWN0KCl9Z2V0IHByb3RvY29sKCl7cmV0dXJuIHRoaXMuX3Byb3RvY29sfWdldCBzZXJ2ZXIoKXtyZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLnNlcnZlcn1nZXQgc3RhdGUoKXtyZXR1cm4gdGhpcy5fc3RhdGV9Z2V0IHN0YXRlQ2hhbmdlKCl7cmV0dXJuIHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyfWdldCB3cygpe3JldHVybiB0aGlzLl93c31jb25uZWN0KCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3QoKX1kaXNjb25uZWN0KCl7cmV0dXJuIHRoaXMuX2Rpc2Nvbm5lY3QoKX1pc0Nvbm5lY3RlZCgpe3JldHVybiB0aGlzLnN0YXRlPT09cmUuQ29ubmVjdGVkfXNlbmQoZSl7cmV0dXJuIHRoaXMuX3NlbmQoZSl9X2Nvbm5lY3QoKXtzd2l0Y2godGhpcy5sb2dnZXIubG9nKGBDb25uZWN0aW5nICR7dGhpcy5zZXJ2ZXJ9YCksdGhpcy5zdGF0ZSl7Y2FzZSByZS5Db25uZWN0aW5nOmlmKHRoaXMudHJhbnNpdGlvbmluZ1N0YXRlKXJldHVybiBQcm9taXNlLnJlamVjdCh0aGlzLnRyYW5zaXRpb25Mb29wRGV0ZWN0ZWRFcnJvcihyZS5Db25uZWN0aW5nKSk7aWYoIXRoaXMuY29ubmVjdFByb21pc2UpdGhyb3cgbmV3IEVycm9yKCJDb25uZWN0IHByb21pc2UgbXVzdCBiZSBkZWZpbmVkLiIpO3JldHVybiB0aGlzLmNvbm5lY3RQcm9taXNlO2Nhc2UgcmUuQ29ubmVjdGVkOmlmKHRoaXMudHJhbnNpdGlvbmluZ1N0YXRlKXJldHVybiBQcm9taXNlLnJlamVjdCh0aGlzLnRyYW5zaXRpb25Mb29wRGV0ZWN0ZWRFcnJvcihyZS5Db25uZWN0aW5nKSk7aWYodGhpcy5jb25uZWN0UHJvbWlzZSl0aHJvdyBuZXcgRXJyb3IoIkNvbm5lY3QgcHJvbWlzZSBtdXN0IG5vdCBiZSBkZWZpbmVkLiIpO3JldHVybiBQcm9taXNlLnJlc29sdmUoKTtjYXNlIHJlLkRpc2Nvbm5lY3Rpbmc6aWYodGhpcy5jb25uZWN0UHJvbWlzZSl0aHJvdyBuZXcgRXJyb3IoIkNvbm5lY3QgcHJvbWlzZSBtdXN0IG5vdCBiZSBkZWZpbmVkLiIpO3RyeXt0aGlzLnRyYW5zaXRpb25TdGF0ZShyZS5Db25uZWN0aW5nKX1jYXRjaChlKXtpZihlIGluc3RhbmNlb2YgZClyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7dGhyb3cgZX1icmVhaztjYXNlIHJlLkRpc2Nvbm5lY3RlZDppZih0aGlzLmNvbm5lY3RQcm9taXNlKXRocm93IG5ldyBFcnJvcigiQ29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuIik7dHJ5e3RoaXMudHJhbnNpdGlvblN0YXRlKHJlLkNvbm5lY3RpbmcpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBkKXJldHVybiBQcm9taXNlLnJlamVjdChlKTt0aHJvdyBlfWJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlIil9bGV0IGU7dHJ5e2U9bmV3IFdlYlNvY2tldCh0aGlzLnNlcnZlciwic2lwIiksZS5iaW5hcnlUeXBlPSJhcnJheWJ1ZmZlciIsZS5hZGRFdmVudExpc3RlbmVyKCJjbG9zZSIsKHQ9PnRoaXMub25XZWJTb2NrZXRDbG9zZSh0LGUpKSksZS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsKHQ9PnRoaXMub25XZWJTb2NrZXRFcnJvcih0LGUpKSksZS5hZGRFdmVudExpc3RlbmVyKCJvcGVuIiwodD0+dGhpcy5vbldlYlNvY2tldE9wZW4odCxlKSkpLGUuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKHQ9PnRoaXMub25XZWJTb2NrZXRNZXNzYWdlKHQsZSkpKSx0aGlzLl93cz1lfWNhdGNoKGUpe3JldHVybiB0aGlzLl93cz12b2lkIDAsdGhpcy5sb2dnZXIuZXJyb3IoIldlYlNvY2tldCBjb25zdHJ1Y3Rpb24gZmFpbGVkLiIpLHRoaXMubG9nZ2VyLmVycm9yKGUpLG5ldyBQcm9taXNlKCgodCxzKT0+e3RoaXMuY29ubmVjdFJlc29sdmU9dCx0aGlzLmNvbm5lY3RSZWplY3Q9cyx0aGlzLnRyYW5zaXRpb25TdGF0ZShyZS5EaXNjb25uZWN0ZWQsZSl9KSl9cmV0dXJuIHRoaXMuY29ubmVjdFByb21pc2U9bmV3IFByb21pc2UoKCh0LHMpPT57dGhpcy5jb25uZWN0UmVzb2x2ZT10LHRoaXMuY29ubmVjdFJlamVjdD1zLHRoaXMuY29ubmVjdFRpbWVvdXQ9c2V0VGltZW91dCgoKCk9Pnt0aGlzLmxvZ2dlci53YXJuKCJDb25uZWN0IHRpbWVkIG91dC4gRXhjZWVkZWQgdGltZSBzZXQgaW4gY29uZmlndXJhdGlvbi5jb25uZWN0aW9uVGltZW91dDogIit0aGlzLmNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblRpbWVvdXQrInMuIiksZS5jbG9zZSgxZTMpfSksMWUzKnRoaXMuY29uZmlndXJhdGlvbi5jb25uZWN0aW9uVGltZW91dCl9KSksdGhpcy5jb25uZWN0UHJvbWlzZX1fZGlzY29ubmVjdCgpe3N3aXRjaCh0aGlzLmxvZ2dlci5sb2coYERpc2Nvbm5lY3RpbmcgJHt0aGlzLnNlcnZlcn1gKSx0aGlzLnN0YXRlKXtjYXNlIHJlLkNvbm5lY3Rpbmc6aWYodGhpcy5kaXNjb25uZWN0UHJvbWlzZSl0aHJvdyBuZXcgRXJyb3IoIkRpc2Nvbm5lY3QgcHJvbWlzZSBtdXN0IG5vdCBiZSBkZWZpbmVkLiIpO3RyeXt0aGlzLnRyYW5zaXRpb25TdGF0ZShyZS5EaXNjb25uZWN0aW5nKX1jYXRjaChlKXtpZihlIGluc3RhbmNlb2YgZClyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7dGhyb3cgZX1icmVhaztjYXNlIHJlLkNvbm5lY3RlZDppZih0aGlzLmRpc2Nvbm5lY3RQcm9taXNlKXRocm93IG5ldyBFcnJvcigiRGlzY29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuIik7dHJ5e3RoaXMudHJhbnNpdGlvblN0YXRlKHJlLkRpc2Nvbm5lY3RpbmcpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBkKXJldHVybiBQcm9taXNlLnJlamVjdChlKTt0aHJvdyBlfWJyZWFrO2Nhc2UgcmUuRGlzY29ubmVjdGluZzppZih0aGlzLnRyYW5zaXRpb25pbmdTdGF0ZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy50cmFuc2l0aW9uTG9vcERldGVjdGVkRXJyb3IocmUuRGlzY29ubmVjdGluZykpO2lmKCF0aGlzLmRpc2Nvbm5lY3RQcm9taXNlKXRocm93IG5ldyBFcnJvcigiRGlzY29ubmVjdCBwcm9taXNlIG11c3QgYmUgZGVmaW5lZC4iKTtyZXR1cm4gdGhpcy5kaXNjb25uZWN0UHJvbWlzZTtjYXNlIHJlLkRpc2Nvbm5lY3RlZDppZih0aGlzLnRyYW5zaXRpb25pbmdTdGF0ZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy50cmFuc2l0aW9uTG9vcERldGVjdGVkRXJyb3IocmUuRGlzY29ubmVjdGluZykpO2lmKHRoaXMuZGlzY29ubmVjdFByb21pc2UpdGhyb3cgbmV3IEVycm9yKCJEaXNjb25uZWN0IHByb21pc2UgbXVzdCBub3QgYmUgZGVmaW5lZC4iKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc3RhdGUiKX1pZighdGhpcy5fd3MpdGhyb3cgbmV3IEVycm9yKCJXZWJTb2NrZXQgbXVzdCBiZSBkZWZpbmVkLiIpO2NvbnN0IGU9dGhpcy5fd3M7cmV0dXJuIHRoaXMuZGlzY29ubmVjdFByb21pc2U9bmV3IFByb21pc2UoKCh0LHMpPT57dGhpcy5kaXNjb25uZWN0UmVzb2x2ZT10LHRoaXMuZGlzY29ubmVjdFJlamVjdD1zO3RyeXtlLmNsb3NlKDFlMyl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoIldlYlNvY2tldCBjbG9zZSBmYWlsZWQuIiksdGhpcy5sb2dnZXIuZXJyb3IoZSksZX19KSksdGhpcy5kaXNjb25uZWN0UHJvbWlzZX1fc2VuZChlKXtpZighMD09PXRoaXMuY29uZmlndXJhdGlvbi50cmFjZVNpcCYmdGhpcy5sb2dnZXIubG9nKCJTZW5kaW5nIFdlYlNvY2tldCBtZXNzYWdlOlxuXG4iK2UrIlxuIiksdGhpcy5fc3RhdGUhPT1yZS5Db25uZWN0ZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiTm90IGNvbm5lY3RlZC4iKSk7aWYoIXRoaXMuX3dzKXRocm93IG5ldyBFcnJvcigiV2ViU29ja2V0IHVuZGVmaW5lZC4iKTt0cnl7dGhpcy5fd3Muc2VuZChlKX1jYXRjaChlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yP1Byb21pc2UucmVqZWN0KGUpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiV2ViU29ja2V0IHNlbmQgZmFpbGVkLiIpKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9b25XZWJTb2NrZXRDbG9zZShlLHQpe2lmKHQhPT10aGlzLl93cylyZXR1cm47Y29uc3Qgcz1gV2ViU29ja2V0IGNsb3NlZCAke3RoaXMuc2VydmVyfSAoY29kZTogJHtlLmNvZGV9KWAsaT10aGlzLmRpc2Nvbm5lY3RQcm9taXNlP3ZvaWQgMDpuZXcgRXJyb3Iocyk7aSYmdGhpcy5sb2dnZXIud2FybigiV2ViU29ja2V0IGNsb3NlZCB1bmV4cGVjdGVkbHkiKSx0aGlzLmxvZ2dlci5sb2cocyksdGhpcy5fd3M9dm9pZCAwLHRoaXMudHJhbnNpdGlvblN0YXRlKHJlLkRpc2Nvbm5lY3RlZCxpKX1vbldlYlNvY2tldEVycm9yKGUsdCl7dD09PXRoaXMuX3dzJiZ0aGlzLmxvZ2dlci5lcnJvcigiV2ViU29ja2V0IGVycm9yIG9jY3VycmVkLiIpfW9uV2ViU29ja2V0TWVzc2FnZShlLHQpe2lmKHQhPT10aGlzLl93cylyZXR1cm47Y29uc3Qgcz1lLmRhdGE7bGV0IGk7aWYoL14oXHJcbikrJC8udGVzdChzKSlyZXR1cm4gdGhpcy5jbGVhcktlZXBBbGl2ZVRpbWVvdXQoKSx2b2lkKCEwPT09dGhpcy5jb25maWd1cmF0aW9uLnRyYWNlU2lwJiZ0aGlzLmxvZ2dlci5sb2coIlJlY2VpdmVkIFdlYlNvY2tldCBtZXNzYWdlIHdpdGggQ1JMRiBLZWVwIEFsaXZlIHJlc3BvbnNlIikpO2lmKHMpe2lmKCJzdHJpbmciIT10eXBlb2Ygcyl7dHJ5e2k9KG5ldyBUZXh0RGVjb2RlcikuZGVjb2RlKG5ldyBVaW50OEFycmF5KHMpKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZSksdm9pZCB0aGlzLmxvZ2dlci5lcnJvcigiUmVjZWl2ZWQgV2ViU29ja2V0IGJpbmFyeSBtZXNzYWdlIGZhaWxlZCB0byBiZSBjb252ZXJ0ZWQgaW50byBzdHJpbmcsIG1lc3NhZ2UgZGlzY2FyZGVkIil9ITA9PT10aGlzLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAmJnRoaXMubG9nZ2VyLmxvZygiUmVjZWl2ZWQgV2ViU29ja2V0IGJpbmFyeSBtZXNzYWdlOlxuXG4iK2krIlxuIil9ZWxzZSBpPXMsITA9PT10aGlzLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAmJnRoaXMubG9nZ2VyLmxvZygiUmVjZWl2ZWQgV2ViU29ja2V0IHRleHQgbWVzc2FnZTpcblxuIitpKyJcbiIpO2lmKHRoaXMuc3RhdGU9PT1yZS5Db25uZWN0ZWQpe2lmKHRoaXMub25NZXNzYWdlKXRyeXt0aGlzLm9uTWVzc2FnZShpKX1jYXRjaChlKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihlKSx0aGlzLmxvZ2dlci5lcnJvcigiRXhjZXB0aW9uIHRocm93biBieSBvbk1lc3NhZ2UgY2FsbGJhY2siKSxlfX1lbHNlIHRoaXMubG9nZ2VyLndhcm4oIlJlY2VpdmVkIG1lc3NhZ2Ugd2hpbGUgbm90IGNvbm5lY3RlZCwgZGlzY2FyZGluZy4uLiIpfWVsc2UgdGhpcy5sb2dnZXIud2FybigiUmVjZWl2ZWQgZW1wdHkgbWVzc2FnZSwgZGlzY2FyZGluZy4uLiIpfW9uV2ViU29ja2V0T3BlbihlLHQpe3Q9PT10aGlzLl93cyYmdGhpcy5fc3RhdGU9PT1yZS5Db25uZWN0aW5nJiYodGhpcy5sb2dnZXIubG9nKGBXZWJTb2NrZXQgb3BlbmVkICR7dGhpcy5zZXJ2ZXJ9YCksdGhpcy50cmFuc2l0aW9uU3RhdGUocmUuQ29ubmVjdGVkKSl9dHJhbnNpdGlvbkxvb3BEZXRlY3RlZEVycm9yKGUpe2xldCB0PSJBIHN0YXRlIHRyYW5zaXRpb24gbG9vcCBoYXMgYmVlbiBkZXRlY3RlZC4iO3JldHVybiB0Kz1gIEFuIGF0dGVtcHQgdG8gdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fc3RhdGV9IHRvICR7ZX0gYmVmb3JlIHRoZSBwcmlvciB0cmFuc2l0aW9uIGNvbXBsZXRlZC5gLHQrPSIgUGVyaGFwcyB5b3UgYXJlIHN5bmNocm9ub3VzbHkgY2FsbGluZyBjb25uZWN0KCkgb3IgZGlzY29ubmVjdCgpIGZyb20gYSBjYWxsYmFjayBvciBzdGF0ZSBjaGFuZ2UgaGFuZGxlcj8iLHRoaXMubG9nZ2VyLmVycm9yKHQpLG5ldyBkKCJMb29wIGRldGVjdGVkLiIpfXRyYW5zaXRpb25TdGF0ZShlLHQpe2NvbnN0IHM9KCk9Pnt0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fc3RhdGV9IHRvICR7ZX1gKX07aWYodGhpcy50cmFuc2l0aW9uaW5nU3RhdGUpdGhyb3cgdGhpcy50cmFuc2l0aW9uTG9vcERldGVjdGVkRXJyb3IoZSk7c3dpdGNoKHRoaXMudHJhbnNpdGlvbmluZ1N0YXRlPSEwLHRoaXMuX3N0YXRlKXtjYXNlIHJlLkNvbm5lY3Rpbmc6ZSE9PXJlLkNvbm5lY3RlZCYmZSE9PXJlLkRpc2Nvbm5lY3RpbmcmJmUhPT1yZS5EaXNjb25uZWN0ZWQmJnMoKTticmVhaztjYXNlIHJlLkNvbm5lY3RlZDplIT09cmUuRGlzY29ubmVjdGluZyYmZSE9PXJlLkRpc2Nvbm5lY3RlZCYmcygpO2JyZWFrO2Nhc2UgcmUuRGlzY29ubmVjdGluZzplIT09cmUuQ29ubmVjdGluZyYmZSE9PXJlLkRpc2Nvbm5lY3RlZCYmcygpO2JyZWFrO2Nhc2UgcmUuRGlzY29ubmVjdGVkOmUhPT1yZS5Db25uZWN0aW5nJiZzKCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc3RhdGUuIil9Y29uc3QgaT10aGlzLl9zdGF0ZTt0aGlzLl9zdGF0ZT1lO2NvbnN0IHI9dGhpcy5jb25uZWN0UmVzb2x2ZSxuPXRoaXMuY29ubmVjdFJlamVjdDtpPT09cmUuQ29ubmVjdGluZyYmKHRoaXMuY29ubmVjdFByb21pc2U9dm9pZCAwLHRoaXMuY29ubmVjdFJlc29sdmU9dm9pZCAwLHRoaXMuY29ubmVjdFJlamVjdD12b2lkIDApO2NvbnN0IG89dGhpcy5kaXNjb25uZWN0UmVzb2x2ZSxhPXRoaXMuZGlzY29ubmVjdFJlamVjdDtpZihpPT09cmUuRGlzY29ubmVjdGluZyYmKHRoaXMuZGlzY29ubmVjdFByb21pc2U9dm9pZCAwLHRoaXMuZGlzY29ubmVjdFJlc29sdmU9dm9pZCAwLHRoaXMuZGlzY29ubmVjdFJlamVjdD12b2lkIDApLHRoaXMuY29ubmVjdFRpbWVvdXQmJihjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0VGltZW91dCksdGhpcy5jb25uZWN0VGltZW91dD12b2lkIDApLHRoaXMubG9nZ2VyLmxvZyhgVHJhbnNpdGlvbmVkIGZyb20gJHtpfSB0byAke3RoaXMuX3N0YXRlfWApLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyLmVtaXQodGhpcy5fc3RhdGUpLGU9PT1yZS5Db25uZWN0ZWQmJih0aGlzLnN0YXJ0U2VuZGluZ0tlZXBBbGl2ZXMoKSx0aGlzLm9uQ29ubmVjdCkpdHJ5e3RoaXMub25Db25uZWN0KCl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoZSksdGhpcy5sb2dnZXIuZXJyb3IoIkV4Y2VwdGlvbiB0aHJvd24gYnkgb25Db25uZWN0IGNhbGxiYWNrIiksZX1pZihpPT09cmUuQ29ubmVjdGVkJiYodGhpcy5zdG9wU2VuZGluZ0tlZXBBbGl2ZXMoKSx0aGlzLm9uRGlzY29ubmVjdCkpdHJ5e3Q/dGhpcy5vbkRpc2Nvbm5lY3QodCk6dGhpcy5vbkRpc2Nvbm5lY3QoKX1jYXRjaChlKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihlKSx0aGlzLmxvZ2dlci5lcnJvcigiRXhjZXB0aW9uIHRocm93biBieSBvbkRpc2Nvbm5lY3QgY2FsbGJhY2siKSxlfWlmKGk9PT1yZS5Db25uZWN0aW5nKXtpZighcil0aHJvdyBuZXcgRXJyb3IoIkNvbm5lY3QgcmVzb2x2ZSB1bmRlZmluZWQuIik7aWYoIW4pdGhyb3cgbmV3IEVycm9yKCJDb25uZWN0IHJlamVjdCB1bmRlZmluZWQuIik7ZT09PXJlLkNvbm5lY3RlZD9yKCk6bih0fHxuZXcgRXJyb3IoIkNvbm5lY3QgYWJvcnRlZC4iKSl9aWYoaT09PXJlLkRpc2Nvbm5lY3Rpbmcpe2lmKCFvKXRocm93IG5ldyBFcnJvcigiRGlzY29ubmVjdCByZXNvbHZlIHVuZGVmaW5lZC4iKTtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkRpc2Nvbm5lY3QgcmVqZWN0IHVuZGVmaW5lZC4iKTtlPT09cmUuRGlzY29ubmVjdGVkP28oKTphKHR8fG5ldyBFcnJvcigiRGlzY29ubmVjdCBhYm9ydGVkLiIpKX10aGlzLnRyYW5zaXRpb25pbmdTdGF0ZT0hMX1jbGVhcktlZXBBbGl2ZVRpbWVvdXQoKXt0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMua2VlcEFsaXZlRGVib3VuY2VUaW1lb3V0KSx0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dD12b2lkIDB9c2VuZEtlZXBBbGl2ZSgpe3JldHVybiB0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dD9Qcm9taXNlLnJlc29sdmUoKToodGhpcy5rZWVwQWxpdmVEZWJvdW5jZVRpbWVvdXQ9c2V0VGltZW91dCgoKCk9Pnt0aGlzLmNsZWFyS2VlcEFsaXZlVGltZW91dCgpfSksMWUzKnRoaXMuY29uZmlndXJhdGlvbi5rZWVwQWxpdmVEZWJvdW5jZSksdGhpcy5zZW5kKCJcclxuXHJcbiIpKX1zdGFydFNlbmRpbmdLZWVwQWxpdmVzKCl7dGhpcy5jb25maWd1cmF0aW9uLmtlZXBBbGl2ZUludGVydmFsJiYhdGhpcy5rZWVwQWxpdmVJbnRlcnZhbCYmKHRoaXMua2VlcEFsaXZlSW50ZXJ2YWw9c2V0SW50ZXJ2YWwoKCgpPT57dGhpcy5zZW5kS2VlcEFsaXZlKCksdGhpcy5zdGFydFNlbmRpbmdLZWVwQWxpdmVzKCl9KSwoZT0+e2NvbnN0IHQ9LjgqZTtyZXR1cm4gMWUzKihNYXRoLnJhbmRvbSgpKihlLXQpK3QpfSkodGhpcy5jb25maWd1cmF0aW9uLmtlZXBBbGl2ZUludGVydmFsKSkpfXN0b3BTZW5kaW5nS2VlcEFsaXZlcygpe3RoaXMua2VlcEFsaXZlSW50ZXJ2YWwmJmNsZWFySW50ZXJ2YWwodGhpcy5rZWVwQWxpdmVJbnRlcnZhbCksdGhpcy5rZWVwQWxpdmVEZWJvdW5jZVRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dCksdGhpcy5rZWVwQWxpdmVJbnRlcnZhbD12b2lkIDAsdGhpcy5rZWVwQWxpdmVEZWJvdW5jZVRpbWVvdXQ9dm9pZCAwfX1hdC5kZWZhdWx0T3B0aW9ucz17c2VydmVyOiIiLGNvbm5lY3Rpb25UaW1lb3V0OjUsa2VlcEFsaXZlSW50ZXJ2YWw6MCxrZWVwQWxpdmVEZWJvdW5jZToxMCx0cmFjZVNpcDohMH07Y2xhc3MgY3R7Y29uc3RydWN0b3IoZT17fSl7aWYodGhpcy5fcHVibGlzaGVycz17fSx0aGlzLl9yZWdpc3RlcmVycz17fSx0aGlzLl9zZXNzaW9ucz17fSx0aGlzLl9zdWJzY3JpcHRpb25zPXt9LHRoaXMuX3N0YXRlPW5lLlN0b3BwZWQsdGhpcy51bmxvYWRMaXN0ZW5lcj0oKT0+e3RoaXMuc3RvcCgpfSx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcj1uZXcgdSx0aGlzLmRlbGVnYXRlPWUuZGVsZWdhdGUsdGhpcy5vcHRpb25zPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxjdC5kZWZhdWx0T3B0aW9ucygpKSx7c2lwanNJZDpSKDUpfSkse3VyaTpuZXcgdigic2lwIiwiYW5vbnltb3VzLiIrUig2KSwiYW5vbnltb3VzLmludmFsaWQiKX0pLHt2aWFIb3N0OlIoMTIpKyIuaW52YWxpZCJ9KSxjdC5zdHJpcFVuZGVmaW5lZFByb3BlcnRpZXMoZSkpLHRoaXMub3B0aW9ucy5oYWNrSXBJbkNvbnRhY3QpaWYoImJvb2xlYW4iPT10eXBlb2YgdGhpcy5vcHRpb25zLmhhY2tJcEluQ29udGFjdCYmdGhpcy5vcHRpb25zLmhhY2tJcEluQ29udGFjdCl7Y29uc3QgZT0xLHQ9MjU0LHM9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKih0LWUrMSkrZSk7dGhpcy5vcHRpb25zLnZpYUhvc3Q9IjE5Mi4wLjIuIitzfWVsc2UgdGhpcy5vcHRpb25zLmhhY2tJcEluQ29udGFjdCYmKHRoaXMub3B0aW9ucy52aWFIb3N0PXRoaXMub3B0aW9ucy5oYWNrSXBJbkNvbnRhY3QpO3N3aXRjaCh0aGlzLmxvZ2dlckZhY3Rvcnk9bmV3IHBlLHRoaXMubG9nZ2VyPXRoaXMubG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoInNpcC5Vc2VyQWdlbnQiKSx0aGlzLmxvZ2dlckZhY3RvcnkuYnVpbHRpbkVuYWJsZWQ9dGhpcy5vcHRpb25zLmxvZ0J1aWx0aW5FbmFibGVkLHRoaXMubG9nZ2VyRmFjdG9yeS5jb25uZWN0b3I9dGhpcy5vcHRpb25zLmxvZ0Nvbm5lY3Rvcix0aGlzLm9wdGlvbnMubG9nTGV2ZWwpe2Nhc2UiZXJyb3IiOnRoaXMubG9nZ2VyRmFjdG9yeS5sZXZlbD1vZS5lcnJvcjticmVhaztjYXNlIndhcm4iOnRoaXMubG9nZ2VyRmFjdG9yeS5sZXZlbD1vZS53YXJuO2JyZWFrO2Nhc2UibG9nIjp0aGlzLmxvZ2dlckZhY3RvcnkubGV2ZWw9b2UubG9nO2JyZWFrO2Nhc2UiZGVidWciOnRoaXMubG9nZ2VyRmFjdG9yeS5sZXZlbD1vZS5kZWJ1Z31pZih0aGlzLm9wdGlvbnMubG9nQ29uZmlndXJhdGlvbiYmKHRoaXMubG9nZ2VyLmxvZygiQ29uZmlndXJhdGlvbjoiKSxPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpLmZvckVhY2goKGU9Pntjb25zdCB0PXRoaXMub3B0aW9uc1tlXTtzd2l0Y2goZSl7Y2FzZSJ1cmkiOmNhc2Uic2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnkiOnRoaXMubG9nZ2VyLmxvZygiXHhiNyAiK2UrIjogIit0KTticmVhaztjYXNlImF1dGhvcml6YXRpb25QYXNzd29yZCI6dGhpcy5sb2dnZXIubG9nKCJceGI3ICIrZSsiOiBOT1QgU0hPV04iKTticmVhaztjYXNlInRyYW5zcG9ydENvbnN0cnVjdG9yIjp0aGlzLmxvZ2dlci5sb2coIlx4YjcgIitlKyI6ICIrdC5uYW1lKTticmVhaztkZWZhdWx0OnRoaXMubG9nZ2VyLmxvZygiXHhiNyAiK2UrIjogIitKU09OLnN0cmluZ2lmeSh0KSl9fSkpKSx0aGlzLm9wdGlvbnMudHJhbnNwb3J0T3B0aW9ucyl7Y29uc3QgdD10aGlzLm9wdGlvbnMudHJhbnNwb3J0T3B0aW9ucyxzPXQubWF4UmVjb25uZWN0aW9uQXR0ZW1wdHMsaT10LnJlY29ubmVjdGlvblRpbWVvdXQ7aWYodm9pZCAwIT09cyl7Y29uc3QgZT0nVGhlIHRyYW5zcG9ydCBvcHRpb24gIm1heFJlY29ubmVjdGlvbkF0dGVtcHRzIiBhcyBoYXMgYXBwYXJlbnRseSBiZWVuIHNwZWNpZmllZCBhbmQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gSXQgd2lsbCBubyBsb25nZXIgYmUgYXZhaWxhYmxlIHN0YXJ0aW5nIHdpdGggU0lQLmpzIHJlbGVhc2UgMC4xNi4wLiBQbGVhc2UgdXBkYXRlIGFjY29yZGluZ2x5Lic7dGhpcy5sb2dnZXIud2FybihlKX1pZih2b2lkIDAhPT1pKXtjb25zdCBlPSdUaGUgdHJhbnNwb3J0IG9wdGlvbiAicmVjb25uZWN0aW9uVGltZW91dCIgYXMgaGFzIGFwcGFyZW50bHkgYmVlbiBzcGVjaWZpZWQgYW5kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIEl0IHdpbGwgbm8gbG9uZ2VyIGJlIGF2YWlsYWJsZSBzdGFydGluZyB3aXRoIFNJUC5qcyByZWxlYXNlIDAuMTYuMC4gUGxlYXNlIHVwZGF0ZSBhY2NvcmRpbmdseS4nO3RoaXMubG9nZ2VyLndhcm4oZSl9dm9pZCAwPT09ZS5yZWNvbm5lY3Rpb25EZWxheSYmdm9pZCAwIT09aSYmKHRoaXMub3B0aW9ucy5yZWNvbm5lY3Rpb25EZWxheT1pKSx2b2lkIDA9PT1lLnJlY29ubmVjdGlvbkF0dGVtcHRzJiZ2b2lkIDAhPT1zJiYodGhpcy5vcHRpb25zLnJlY29ubmVjdGlvbkF0dGVtcHRzPXMpfWlmKHZvaWQgMCE9PWUucmVjb25uZWN0aW9uRGVsYXkpe2NvbnN0IGU9J1RoZSB1c2VyIGFnZW50IG9wdGlvbiAicmVjb25uZWN0aW9uRGVsYXkiIGFzIGhhcyBhcHBhcmVudGx5IGJlZW4gc3BlY2lmaWVkIGFuZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBJdCB3aWxsIG5vIGxvbmdlciBiZSBhdmFpbGFibGUgc3RhcnRpbmcgd2l0aCBTSVAuanMgcmVsZWFzZSAwLjE2LjAuIFBsZWFzZSB1cGRhdGUgYWNjb3JkaW5nbHkuJzt0aGlzLmxvZ2dlci53YXJuKGUpfWlmKHZvaWQgMCE9PWUucmVjb25uZWN0aW9uQXR0ZW1wdHMpe2NvbnN0IGU9J1RoZSB1c2VyIGFnZW50IG9wdGlvbiAicmVjb25uZWN0aW9uQXR0ZW1wdHMiIGFzIGhhcyBhcHBhcmVudGx5IGJlZW4gc3BlY2lmaWVkIGFuZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBJdCB3aWxsIG5vIGxvbmdlciBiZSBhdmFpbGFibGUgc3RhcnRpbmcgd2l0aCBTSVAuanMgcmVsZWFzZSAwLjE2LjAuIFBsZWFzZSB1cGRhdGUgYWNjb3JkaW5nbHkuJzt0aGlzLmxvZ2dlci53YXJuKGUpfXRoaXMuX3RyYW5zcG9ydD1uZXcgdGhpcy5vcHRpb25zLnRyYW5zcG9ydENvbnN0cnVjdG9yKHRoaXMuZ2V0TG9nZ2VyKCJzaXAuVHJhbnNwb3J0IiksdGhpcy5vcHRpb25zLnRyYW5zcG9ydE9wdGlvbnMpLHRoaXMuaW5pdFRyYW5zcG9ydENhbGxiYWNrcygpLHRoaXMuX2NvbnRhY3Q9dGhpcy5pbml0Q29udGFjdCgpLHRoaXMuX3VzZXJBZ2VudENvcmU9dGhpcy5pbml0Q29yZSgpLHRoaXMub3B0aW9ucy5hdXRvU3RhcnQmJnRoaXMuc3RhcnQoKX1zdGF0aWMgbWFrZVVSSShlKXtyZXR1cm4geS5VUklQYXJzZShlKX1zdGF0aWMgZGVmYXVsdE9wdGlvbnMoKXtyZXR1cm57YWxsb3dMZWdhY3lOb3RpZmljYXRpb25zOiExLGF1dGhvcml6YXRpb25IYTE6IiIsYXV0aG9yaXphdGlvblBhc3N3b3JkOiIiLGF1dGhvcml6YXRpb25Vc2VybmFtZToiIixhdXRvU3RhcnQ6ITEsYXV0b1N0b3A6ITAsZGVsZWdhdGU6e30sY29udGFjdE5hbWU6IiIsY29udGFjdFBhcmFtczp7dHJhbnNwb3J0OiJ3cyJ9LGRpc3BsYXlOYW1lOiIiLGZvcmNlUnBvcnQ6ITEsaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFnczohMSxoYWNrSXBJbkNvbnRhY3Q6ITEsaGFja1ZpYVRjcDohMSxsb2dCdWlsdGluRW5hYmxlZDohMCxsb2dDb25maWd1cmF0aW9uOiEwLGxvZ0Nvbm5lY3RvcjooKT0+e30sbG9nTGV2ZWw6ImxvZyIsbm9BbnN3ZXJUaW1lb3V0OjYwLHByZWxvYWRlZFJvdXRlU2V0OltdLHJlY29ubmVjdGlvbkF0dGVtcHRzOjAscmVjb25uZWN0aW9uRGVsYXk6NCxzZW5kSW5pdGlhbFByb3Zpc2lvbmFsUmVzcG9uc2U6ITAsc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3Rvcnk6b3QoKSxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeU9wdGlvbnM6e30sc2lwRXh0ZW5zaW9uMTAwcmVsOlkuVW5zdXBwb3J0ZWQsc2lwRXh0ZW5zaW9uUmVwbGFjZXM6WS5VbnN1cHBvcnRlZCxzaXBFeHRlbnNpb25FeHRyYVN1cHBvcnRlZDpbXSxzaXBqc0lkOiIiLHRyYW5zcG9ydENvbnN0cnVjdG9yOmF0LHRyYW5zcG9ydE9wdGlvbnM6e30sdXJpOm5ldyB2KCJzaXAiLCJhbm9ueW1vdXMiLCJhbm9ueW1vdXMuaW52YWxpZCIpLHVzZXJBZ2VudFN0cmluZzoiU0lQLmpzLzAuMjAuMCIsdmlhSG9zdDoiIn19c3RhdGljIHN0cmlwVW5kZWZpbmVkUHJvcGVydGllcyhlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkucmVkdWNlKCgodCxzKT0+KHZvaWQgMCE9PWVbc10mJih0W3NdPWVbc10pLHQpKSx7fSl9Z2V0IGNvbmZpZ3VyYXRpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zfWdldCBjb250YWN0KCl7cmV0dXJuIHRoaXMuX2NvbnRhY3R9Z2V0IHN0YXRlKCl7cmV0dXJuIHRoaXMuX3N0YXRlfWdldCBzdGF0ZUNoYW5nZSgpe3JldHVybiB0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcn1nZXQgdHJhbnNwb3J0KCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydH1nZXQgdXNlckFnZW50Q29yZSgpe3JldHVybiB0aGlzLl91c2VyQWdlbnRDb3JlfWdldExvZ2dlcihlLHQpe3JldHVybiB0aGlzLmxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKGUsdCl9Z2V0TG9nZ2VyRmFjdG9yeSgpe3JldHVybiB0aGlzLmxvZ2dlckZhY3Rvcnl9aXNDb25uZWN0ZWQoKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuaXNDb25uZWN0ZWQoKX1yZWNvbm5lY3QoKXtyZXR1cm4gdGhpcy5zdGF0ZT09PW5lLlN0b3BwZWQ/UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJVc2VyIGFnZW50IHN0b3BwZWQuIikpOlByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCgpPT50aGlzLnRyYW5zcG9ydC5jb25uZWN0KCkpKX1zdGFydCgpe2lmKHRoaXMuc3RhdGU9PT1uZS5TdGFydGVkKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJVc2VyIGFnZW50IGFscmVhZHkgc3RhcnRlZCIpLFByb21pc2UucmVzb2x2ZSgpO2lmKHRoaXMubG9nZ2VyLmxvZyhgU3RhcnRpbmcgJHt0aGlzLmNvbmZpZ3VyYXRpb24udXJpfWApLHRoaXMudHJhbnNpdGlvblN0YXRlKG5lLlN0YXJ0ZWQpLHRoaXMub3B0aW9ucy5hdXRvU3RvcCl7Y29uc3QgZT0hKCJ1bmRlZmluZWQiPT10eXBlb2YgY2hyb21lfHwhY2hyb21lLmFwcHx8IWNocm9tZS5hcHAucnVudGltZSk7InVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3d8fCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcnx8ZXx8d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsdGhpcy51bmxvYWRMaXN0ZW5lcil9cmV0dXJuIHRoaXMudHJhbnNwb3J0LmNvbm5lY3QoKX1hc3luYyBzdG9wKCl7aWYodGhpcy5zdGF0ZT09PW5lLlN0b3BwZWQpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oIlVzZXIgYWdlbnQgYWxyZWFkeSBzdG9wcGVkIiksUHJvbWlzZS5yZXNvbHZlKCk7aWYodGhpcy5sb2dnZXIubG9nKGBTdG9wcGluZyAke3RoaXMuY29uZmlndXJhdGlvbi51cml9YCksdGhpcy50cmFuc2l0aW9uU3RhdGUobmUuU3RvcHBlZCksdGhpcy5vcHRpb25zLmF1dG9TdG9wKXtjb25zdCBlPSEoInVuZGVmaW5lZCI9PXR5cGVvZiBjaHJvbWV8fCFjaHJvbWUuYXBwfHwhY2hyb21lLmFwcC5ydW50aW1lKTsidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXImJiFlJiZ3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigidW5sb2FkIix0aGlzLnVubG9hZExpc3RlbmVyKX1jb25zdCBlPU9iamVjdC5hc3NpZ24oe30sdGhpcy5fcHVibGlzaGVycyksdD1PYmplY3QuYXNzaWduKHt9LHRoaXMuX3JlZ2lzdGVyZXJzKSxzPU9iamVjdC5hc3NpZ24oe30sdGhpcy5fc2Vzc2lvbnMpLGk9T2JqZWN0LmFzc2lnbih7fSx0aGlzLl9zdWJzY3JpcHRpb25zKSxyPXRoaXMudHJhbnNwb3J0LG49dGhpcy51c2VyQWdlbnRDb3JlO3RoaXMubG9nZ2VyLmxvZygiRGlzcG9zZSBvZiByZWdpc3RlcmVycyIpO2Zvcihjb25zdCBlIGluIHQpdFtlXSYmYXdhaXQgdFtlXS5kaXNwb3NlKCkuY2F0Y2goKHQ9Pnt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLGRlbGV0ZSB0aGlzLl9yZWdpc3RlcmVyc1tlXSx0fSkpO3RoaXMubG9nZ2VyLmxvZygiRGlzcG9zZSBvZiBzZXNzaW9ucyIpO2Zvcihjb25zdCBlIGluIHMpc1tlXSYmYXdhaXQgc1tlXS5kaXNwb3NlKCkuY2F0Y2goKHQ9Pnt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLGRlbGV0ZSB0aGlzLl9zZXNzaW9uc1tlXSx0fSkpO3RoaXMubG9nZ2VyLmxvZygiRGlzcG9zZSBvZiBzdWJzY3JpcHRpb25zIik7Zm9yKGNvbnN0IGUgaW4gaSlpW2VdJiZhd2FpdCBpW2VdLmRpc3Bvc2UoKS5jYXRjaCgodD0+e3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksZGVsZXRlIHRoaXMuX3N1YnNjcmlwdGlvbnNbZV0sdH0pKTt0aGlzLmxvZ2dlci5sb2coIkRpc3Bvc2Ugb2YgcHVibGlzaGVycyIpO2Zvcihjb25zdCB0IGluIGUpZVt0XSYmYXdhaXQgZVt0XS5kaXNwb3NlKCkuY2F0Y2goKGU9Pnt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLGRlbGV0ZSB0aGlzLl9wdWJsaXNoZXJzW3RdLGV9KSk7dGhpcy5sb2dnZXIubG9nKCJEaXNwb3NlIG9mIHRyYW5zcG9ydCIpLGF3YWl0IHIuZGlzcG9zZSgpLmNhdGNoKChlPT57dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSxlfSkpLHRoaXMubG9nZ2VyLmxvZygiRGlzcG9zZSBvZiBjb3JlIiksbi5kaXNwb3NlKCl9X21ha2VJbnZpdGVyKGUsdCl7cmV0dXJuIG5ldyBYKHRoaXMsZSx0KX1hdHRlbXB0UmVjb25uZWN0aW9uKGU9MSl7Y29uc3QgdD10aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uQXR0ZW1wdHMscz10aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uRGVsYXk7ZT50P3RoaXMubG9nZ2VyLmxvZygiTWF4aW11bSByZWNvbm5lY3Rpb24gYXR0ZW1wdHMgcmVhY2hlZCIpOih0aGlzLmxvZ2dlci5sb2coYFJlY29ubmVjdGlvbiBhdHRlbXB0ICR7ZX0gb2YgJHt0fSAtIHRyeWluZ2ApLHNldFRpbWVvdXQoKCgpPT57dGhpcy5yZWNvbm5lY3QoKS50aGVuKCgoKT0+e3RoaXMubG9nZ2VyLmxvZyhgUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtlfSBvZiAke3R9IC0gc3VjY2VlZGVkYCl9KSkuY2F0Y2goKHM9Pnt0aGlzLmxvZ2dlci5lcnJvcihzLm1lc3NhZ2UpLHRoaXMubG9nZ2VyLmxvZyhgUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtlfSBvZiAke3R9IC0gZmFpbGVkYCksdGhpcy5hdHRlbXB0UmVjb25uZWN0aW9uKCsrZSl9KSl9KSwxPT09ZT8wOjFlMypzKSl9aW5pdENvbnRhY3QoKXtjb25zdCBlPSIiIT09dGhpcy5vcHRpb25zLmNvbnRhY3ROYW1lP3RoaXMub3B0aW9ucy5jb250YWN0TmFtZTpSKDgpLHQ9dGhpcy5vcHRpb25zLmNvbnRhY3RQYXJhbXM7cmV0dXJue3B1YkdydXU6dm9pZCAwLHRlbXBHcnV1OnZvaWQgMCx1cmk6bmV3IHYoInNpcCIsZSx0aGlzLm9wdGlvbnMudmlhSG9zdCx2b2lkIDAsdCksdG9TdHJpbmc6KGU9e30pPT57Y29uc3Qgcz1lLmFub255bW91c3x8ITEsaT1lLm91dGJvdW5kfHwhMTtsZXQgcj0iPCI7cmV0dXJuIHIrPXM/dGhpcy5jb250YWN0LnRlbXBHcnV1fHxgc2lwOmFub255bW91c0Bhbm9ueW1vdXMuaW52YWxpZDt0cmFuc3BvcnQ9JHt0LnRyYW5zcG9ydD90LnRyYW5zcG9ydDoid3MifWA6dGhpcy5jb250YWN0LnB1YkdydXV8fHRoaXMuY29udGFjdC51cmksaSYmKHIrPSI7b2IiKSxyKz0iPiIscn19fWluaXRDb3JlKCl7bGV0IGU9W107ZS5wdXNoKCJvdXRib3VuZCIpLHRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb24xMDByZWw9PT1ZLlN1cHBvcnRlZCYmZS5wdXNoKCIxMDByZWwiKSx0aGlzLm9wdGlvbnMuc2lwRXh0ZW5zaW9uUmVwbGFjZXM9PT1ZLlN1cHBvcnRlZCYmZS5wdXNoKCJyZXBsYWNlcyIpLHRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25FeHRyYVN1cHBvcnRlZCYmZS5wdXNoKC4uLnRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25FeHRyYVN1cHBvcnRlZCksdGhpcy5vcHRpb25zLmhhY2tBbGxvd1VucmVnaXN0ZXJlZE9wdGlvblRhZ3N8fChlPWUuZmlsdGVyKChlPT5KW2VdKSkpLGU9QXJyYXkuZnJvbShuZXcgU2V0KGUpKTtjb25zdCB0PWUuc2xpY2UoKTsodGhpcy5jb250YWN0LnB1YkdydXV8fHRoaXMuY29udGFjdC50ZW1wR3J1dSkmJnQucHVzaCgiZ3J1dSIpO2NvbnN0IHM9e2Fvcjp0aGlzLm9wdGlvbnMudXJpLGNvbnRhY3Q6dGhpcy5jb250YWN0LGRpc3BsYXlOYW1lOnRoaXMub3B0aW9ucy5kaXNwbGF5TmFtZSxsb2dnZXJGYWN0b3J5OnRoaXMubG9nZ2VyRmFjdG9yeSxoYWNrVmlhVGNwOnRoaXMub3B0aW9ucy5oYWNrVmlhVGNwLHJvdXRlU2V0OnRoaXMub3B0aW9ucy5wcmVsb2FkZWRSb3V0ZVNldCxzdXBwb3J0ZWRPcHRpb25UYWdzOmUsc3VwcG9ydGVkT3B0aW9uVGFnc1Jlc3BvbnNlOnQsc2lwanNJZDp0aGlzLm9wdGlvbnMuc2lwanNJZCx1c2VyQWdlbnRIZWFkZXJGaWVsZFZhbHVlOnRoaXMub3B0aW9ucy51c2VyQWdlbnRTdHJpbmcsdmlhRm9yY2VScG9ydDp0aGlzLm9wdGlvbnMuZm9yY2VScG9ydCx2aWFIb3N0OnRoaXMub3B0aW9ucy52aWFIb3N0LGF1dGhlbnRpY2F0aW9uRmFjdG9yeTooKT0+e2NvbnN0IGU9dGhpcy5vcHRpb25zLmF1dGhvcml6YXRpb25Vc2VybmFtZT90aGlzLm9wdGlvbnMuYXV0aG9yaXphdGlvblVzZXJuYW1lOnRoaXMub3B0aW9ucy51cmkudXNlcix0PXRoaXMub3B0aW9ucy5hdXRob3JpemF0aW9uUGFzc3dvcmQ/dGhpcy5vcHRpb25zLmF1dGhvcml6YXRpb25QYXNzd29yZDp2b2lkIDAscz10aGlzLm9wdGlvbnMuYXV0aG9yaXphdGlvbkhhMT90aGlzLm9wdGlvbnMuYXV0aG9yaXphdGlvbkhhMTp2b2lkIDA7cmV0dXJuIG5ldyB2ZSh0aGlzLmdldExvZ2dlckZhY3RvcnkoKSxzLGUsdCl9LHRyYW5zcG9ydEFjY2Vzc29yOigpPT50aGlzLnRyYW5zcG9ydH07cmV0dXJuIG5ldyB0dChzLHtvbkludml0ZTplPT57dmFyIHQ7Y29uc3Qgcz1uZXcgeih0aGlzLGUpO2lmKGUuZGVsZWdhdGU9e29uQ2FuY2VsOmU9PntzLl9vbkNhbmNlbChlKX0sb25UcmFuc3BvcnRFcnJvcjplPT57dGhpcy5sb2dnZXIuZXJyb3IoIkEgdHJhbnNwb3J0IGVycm9yIGhhcyBvY2N1cnJlZCB3aGlsZSBoYW5kbGluZyBhbiBpbmNvbWluZyBJTlZJVEUgcmVxdWVzdC4iKX19LGUudHJ5aW5nKCksdGhpcy5vcHRpb25zLnNpcEV4dGVuc2lvblJlcGxhY2VzIT09WS5VbnN1cHBvcnRlZCl7Y29uc3QgdD1lLm1lc3NhZ2UucGFyc2VIZWFkZXIoInJlcGxhY2VzIik7aWYodCl7Y29uc3QgZT10LmNhbGxfaWQ7aWYoInN0cmluZyIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcigiVHlwZSBvZiBjYWxsIGlkIGlzIG5vdCBzdHJpbmciKTtjb25zdCBpPXQucmVwbGFjZXNfdG9fdGFnO2lmKCJzdHJpbmciIT10eXBlb2YgaSl0aHJvdyBuZXcgRXJyb3IoIlR5cGUgb2YgdG8gdGFnIGlzIG5vdCBzdHJpbmciKTtjb25zdCByPXQucmVwbGFjZXNfZnJvbV90YWc7aWYoInN0cmluZyIhPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcigidHlwZSBvZiBmcm9tIHRhZyBpcyBub3Qgc3RyaW5nIik7Y29uc3Qgbj1lK2krcixvPXRoaXMudXNlckFnZW50Q29yZS5kaWFsb2dzLmdldChuKTtpZighbylyZXR1cm4gdm9pZCBzLnJlamVjdCh7c3RhdHVzQ29kZTo0ODF9KTtpZighby5lYXJseSYmITA9PT10LmVhcmx5X29ubHkpcmV0dXJuIHZvaWQgcy5yZWplY3Qoe3N0YXR1c0NvZGU6NDg2fSk7Y29uc3QgYT10aGlzLl9zZXNzaW9uc1tlK3JdfHx0aGlzLl9zZXNzaW9uc1tlK2ldfHx2b2lkIDA7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJTZXNzaW9uIGRvZXMgbm90IGV4aXN0LiIpO3MuX3JlcGxhY2VlPWF9fWlmKG51bGw9PT0odD10aGlzLmRlbGVnYXRlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vbkludml0ZSlyZXR1cm4gcy5hdXRvU2VuZEFuSW5pdGlhbFByb3Zpc2lvbmFsUmVzcG9uc2U/dm9pZCBzLnByb2dyZXNzKCkudGhlbigoKCk9Pnt2YXIgZTtpZih2b2lkIDA9PT0obnVsbD09PShlPXRoaXMuZGVsZWdhdGUpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm9uSW52aXRlKSl0aHJvdyBuZXcgRXJyb3IoIm9uSW52aXRlIHVuZGVmaW5lZC4iKTt0aGlzLmRlbGVnYXRlLm9uSW52aXRlKHMpfSkpOnZvaWQgdGhpcy5kZWxlZ2F0ZS5vbkludml0ZShzKTtzLnJlamVjdCh7c3RhdHVzQ29kZTo0ODZ9KX0sb25NZXNzYWdlOmU9PntpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZSl7Y29uc3QgdD1uZXcgRyhlKTt0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZSh0KX1lbHNlIGUuYWNjZXB0KCl9LG9uTm90aWZ5OmU9PntpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KXtjb25zdCB0PW5ldyBWKGUpO3RoaXMuZGVsZWdhdGUub25Ob3RpZnkodCl9ZWxzZSB0aGlzLm9wdGlvbnMuYWxsb3dMZWdhY3lOb3RpZmljYXRpb25zP2UuYWNjZXB0KCk6ZS5yZWplY3Qoe3N0YXR1c0NvZGU6NDgxfSl9LG9uUmVmZXI6ZT0+e3RoaXMubG9nZ2VyLndhcm4oIlJlY2VpdmVkIGFuIG91dCBvZiBkaWFsb2cgUkVGRVIgcmVxdWVzdCIpLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWZlclJlcXVlc3Q/dGhpcy5kZWxlZ2F0ZS5vblJlZmVyUmVxdWVzdChlKTplLnJlamVjdCh7c3RhdHVzQ29kZTo0MDV9KX0sb25SZWdpc3RlcjplPT57dGhpcy5sb2dnZXIud2FybigiUmVjZWl2ZWQgYW4gb3V0IG9mIGRpYWxvZyBSRUdJU1RFUiByZXF1ZXN0IiksdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblJlZ2lzdGVyUmVxdWVzdD90aGlzLmRlbGVnYXRlLm9uUmVnaXN0ZXJSZXF1ZXN0KGUpOmUucmVqZWN0KHtzdGF0dXNDb2RlOjQwNX0pfSxvblN1YnNjcmliZTplPT57dGhpcy5sb2dnZXIud2FybigiUmVjZWl2ZWQgYW4gb3V0IG9mIGRpYWxvZyBTVUJTQ1JJQkUgcmVxdWVzdCIpLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25TdWJzY3JpYmVSZXF1ZXN0P3RoaXMuZGVsZWdhdGUub25TdWJzY3JpYmVSZXF1ZXN0KGUpOmUucmVqZWN0KHtzdGF0dXNDb2RlOjQwNX0pfX0pfWluaXRUcmFuc3BvcnRDYWxsYmFja3MoKXt0aGlzLnRyYW5zcG9ydC5vbkNvbm5lY3Q9KCk9PnRoaXMub25UcmFuc3BvcnRDb25uZWN0KCksdGhpcy50cmFuc3BvcnQub25EaXNjb25uZWN0PWU9PnRoaXMub25UcmFuc3BvcnREaXNjb25uZWN0KGUpLHRoaXMudHJhbnNwb3J0Lm9uTWVzc2FnZT1lPT50aGlzLm9uVHJhbnNwb3J0TWVzc2FnZShlKX1vblRyYW5zcG9ydENvbm5lY3QoKXt0aGlzLnN0YXRlIT09bmUuU3RvcHBlZCYmdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkNvbm5lY3QmJnRoaXMuZGVsZWdhdGUub25Db25uZWN0KCl9b25UcmFuc3BvcnREaXNjb25uZWN0KGUpe3RoaXMuc3RhdGUhPT1uZS5TdG9wcGVkJiYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkRpc2Nvbm5lY3QmJnRoaXMuZGVsZWdhdGUub25EaXNjb25uZWN0KGUpLGUmJnRoaXMub3B0aW9ucy5yZWNvbm5lY3Rpb25BdHRlbXB0cz4wJiZ0aGlzLmF0dGVtcHRSZWNvbm5lY3Rpb24oKSl9b25UcmFuc3BvcnRNZXNzYWdlKGUpe2NvbnN0IHQ9c3QucGFyc2VNZXNzYWdlKGUsdGhpcy5nZXRMb2dnZXIoInNpcC5QYXJzZXIiKSk7aWYoIXQpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybigiRmFpbGVkIHRvIHBhcnNlIGluY29taW5nIG1lc3NhZ2UuIERyb3BwaW5nLiIpO2lmKHRoaXMuc3RhdGU9PT1uZS5TdG9wcGVkJiZ0IGluc3RhbmNlb2YgRClyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKGBSZWNlaXZlZCAke3QubWV0aG9kfSByZXF1ZXN0IHdoaWxlIHN0b3BwZWQuIERyb3BwaW5nLmApO2NvbnN0IHM9KCk9Pntjb25zdCBlPVsiZnJvbSIsInRvIiwiY2FsbF9pZCIsImNzZXEiLCJ2aWEiXTtmb3IoY29uc3QgcyBvZiBlKWlmKCF0Lmhhc0hlYWRlcihzKSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybihgTWlzc2luZyBtYW5kYXRvcnkgaGVhZGVyIGZpZWxkIDogJHtzfS5gKSwhMTtyZXR1cm4hMH07aWYodCBpbnN0YW5jZW9mIEQpe2lmKCFzKCkpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybigiUmVxdWVzdCBtaXNzaW5nIG1hbmRhdG9yeSBoZWFkZXIgZmllbGQuIERyb3BwaW5nLiIpO2lmKCF0LnRvVGFnJiZ0LmNhbGxJZC5zdWJzdHIoMCw1KT09PXRoaXMub3B0aW9ucy5zaXBqc0lkKXJldHVybiB2b2lkIHRoaXMudXNlckFnZW50Q29yZS5yZXBseVN0YXRlbGVzcyh0LHtzdGF0dXNDb2RlOjQ4Mn0pO2NvbnN0IGU9Qyh0LmJvZHkpLGk9dC5nZXRIZWFkZXIoImNvbnRlbnQtbGVuZ3RoIik7aWYoaSYmZTxOdW1iZXIoaSkpcmV0dXJuIHZvaWQgdGhpcy51c2VyQWdlbnRDb3JlLnJlcGx5U3RhdGVsZXNzKHQse3N0YXR1c0NvZGU6NDAwfSl9aWYodCBpbnN0YW5jZW9mIEgpe2lmKCFzKCkpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybigiUmVzcG9uc2UgbWlzc2luZyBtYW5kYXRvcnkgaGVhZGVyIGZpZWxkLiBEcm9wcGluZy4iKTtpZih0LmdldEhlYWRlcnMoInZpYSIpLmxlbmd0aD4xKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oIk1vcmUgdGhhbiBvbmUgVmlhIGhlYWRlciBmaWVsZCBwcmVzZW50IGluIHRoZSByZXNwb25zZS4gRHJvcHBpbmcuIik7aWYodC52aWEuaG9zdCE9PXRoaXMub3B0aW9ucy52aWFIb3N0fHx2b2lkIDAhPT10LnZpYS5wb3J0KXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oIlZpYSBzZW50LWJ5IGluIHRoZSByZXNwb25zZSBkb2VzIG5vdCBtYXRjaCBVQSBWaWEgaG9zdCB2YWx1ZS4gRHJvcHBpbmcuIik7Y29uc3QgZT1DKHQuYm9keSksaT10LmdldEhlYWRlcigiY29udGVudC1sZW5ndGgiKTtpZihpJiZlPE51bWJlcihpKSlyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKCJNZXNzYWdlIGJvZHkgbGVuZ3RoIGlzIGxvd2VyIHRoYW4gdGhlIHZhbHVlIGluIENvbnRlbnQtTGVuZ3RoIGhlYWRlciBmaWVsZC4gRHJvcHBpbmcuIil9aWYodCBpbnN0YW5jZW9mIEQpdGhpcy51c2VyQWdlbnRDb3JlLnJlY2VpdmVJbmNvbWluZ1JlcXVlc3RGcm9tVHJhbnNwb3J0KHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgSCkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG1lc3NhZ2UgdHlwZS4iKTt0aGlzLnVzZXJBZ2VudENvcmUucmVjZWl2ZUluY29taW5nUmVzcG9uc2VGcm9tVHJhbnNwb3J0KHQpfX10cmFuc2l0aW9uU3RhdGUoZSx0KXtjb25zdCBzPSgpPT57dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuX3N0YXRlfSB0byAke2V9YCl9O3N3aXRjaCh0aGlzLl9zdGF0ZSl7Y2FzZSBuZS5TdGFydGVkOmUhPT1uZS5TdG9wcGVkJiZzKCk7YnJlYWs7Y2FzZSBuZS5TdG9wcGVkOmUhPT1uZS5TdGFydGVkJiZzKCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc3RhdGUuIil9dGhpcy5sb2dnZXIubG9nKGBUcmFuc2l0aW9uZWQgZnJvbSAke3RoaXMuX3N0YXRlfSB0byAke2V9YCksdGhpcy5fc3RhdGU9ZSx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlci5lbWl0KHRoaXMuX3N0YXRlKX19Y2xhc3MgaHQgZXh0ZW5kcyBDZXtjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoU2UsZSx0LHMpfX1jbGFzcyBkdCBleHRlbmRzIEhle2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihEZSxlLnVzZXJBZ2VudENvcmUsdCxzKX19Y29uc3QgbHQ9KGUsdCk9Pntjb25zdCBzPVtdLGk9ZS5zcGxpdCgvXHJcbi8pO2xldCByO2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7KXtjb25zdCBuPWlbZV07aWYoL15tPSg/OmF1ZGlvfHZpZGVvKS8udGVzdChuKSlyPXtpbmRleDplLHN0cmlwcGVkOltdfSxzLnB1c2gocik7ZWxzZSBpZihyKXtjb25zdCBzPS9eYT1ydHBtYXA6KFxkKykgKFteL10rKVwvLy5leGVjKG4pO2lmKHMmJnQ9PT1zWzJdKXtpLnNwbGljZShlLDEpLHIuc3RyaXBwZWQucHVzaChzWzFdKTtjb250aW51ZX19ZSsrfWZvcihjb25zdCBlIG9mIHMpe2NvbnN0IHQ9aVtlLmluZGV4XS5zcGxpdCgiICIpO2ZvcihsZXQgcz0zO3M8dC5sZW5ndGg7KS0xPT09ZS5zdHJpcHBlZC5pbmRleE9mKHRbc10pP3MrKzp0LnNwbGljZShzLDEpO2lbZS5pbmRleF09dC5qb2luKCIgIil9cmV0dXJuIGkuam9pbigiXHJcbiIpfTtmdW5jdGlvbiBndChlKXtyZXR1cm4gZS5zZHA9KGUuc2RwfHwiIikucmVwbGFjZSgvXmE9Y2FuZGlkYXRlOlxkKyBcZCsgdGNwIC4qP1xyXG4vZ2ltLCIiKSxQcm9taXNlLnJlc29sdmUoZSl9ZnVuY3Rpb24gdXQoZSl7cmV0dXJuIGUuc2RwPWx0KGUuc2RwfHwiIiwidGVsZXBob25lLWV2ZW50IiksUHJvbWlzZS5yZXNvbHZlKGUpfWZ1bmN0aW9uIHB0KGUpe3JldHVybiBlLnNkcD0oZS5zZHB8fCIiKS5yZXBsYWNlKC9eKGE9aW1hZ2VhdHRyOi4qPykoeHx5KT1cWzAtL2dtLCIkMSQyPVsxOiIpLFByb21pc2UucmVzb2x2ZShlKX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZS5zZHA9bHQoZS5zZHB8fCIiLCJHNzIyIiksUHJvbWlzZS5yZXNvbHZlKGUpfWZ1bmN0aW9uIG10KGUpe3JldHVybiB0PT4odC5zZHA9bHQodC5zZHB8fCIiLGUpLFByb21pc2UucmVzb2x2ZSh0KSl9ZnVuY3Rpb24gdnQoZSl7cmV0dXJuIGUuc2RwPSgoZSx0KT0+e2NvbnN0IHM9bmV3IFJlZ0V4cCgibT0iK3QrIi4qJCIsImdtIiksaT1uZXcgUmVnRXhwKCJeYT1ncm91cDouKiQiLCJnbSIpO2lmKHMudGVzdChlKSl7bGV0IHM7Y29uc3Qgcj0oZT1lLnNwbGl0KC9ebT0vZ20pLmZpbHRlcigoZT0+e2lmKGUuc3Vic3RyKDAsdC5sZW5ndGgpPT09dCl7aWYocz1lLm1hdGNoKC9eYT1taWQ6LiokL2dtKSxzKXtjb25zdCBlPXNbMF0ubWF0Y2goLzouKyQvZyk7ZSYmKHM9ZVswXS5zdWJzdHIoMSkpfXJldHVybiExfXJldHVybiEwfSkpLmpvaW4oIm09IikpLm1hdGNoKGkpO2lmKHImJjE9PT1yLmxlbmd0aCl7bGV0IHQ9clswXTtjb25zdCBuPW5ldyBSZWdFeHAoIiAqIitzKyJbXiBdKiIsImciKTt0PXQucmVwbGFjZShuLCIiKSxlPWUuc3BsaXQoaSkuam9pbih0KX19cmV0dXJuIGV9KShlLnNkcHx8IiIsInZpZGVvIiksUHJvbWlzZS5yZXNvbHZlKGUpfWZ1bmN0aW9uIHd0KGUpe2xldCB0PWUuc2RwfHwiIjtpZigtMT09PXQuc2VhcmNoKC9eYT1taWQuKiQvZ20pKXtjb25zdCBzPXQubWF0Y2goL15tPS4qJC9nbSksaT10LnNwbGl0KC9ebT0uKiQvZ20pO3MmJnMuZm9yRWFjaCgoKGUsdCk9PntzW3RdPWUrIlxuYT1taWQ6Iit0fSkpLGkuZm9yRWFjaCgoKGUsdCk9PntzJiZzW3RdJiYoaVt0XT1lK3NbdF0pfSkpLHQ9aS5qb2luKCIiKSxlLnNkcD10fXJldHVybiBQcm9taXNlLnJlc29sdmUoZSl9ZnVuY3Rpb24gYnQoZSl7aWYoIWUuc2RwfHwhZS50eXBlKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBTRFAiKTtsZXQgdD1lLnNkcDtjb25zdCBzPWUudHlwZTtyZXR1cm4gdCYmKC9hPShzZW5kcmVjdnxzZW5kb25seXxyZWN2b25seXxpbmFjdGl2ZSkvLnRlc3QodCk/KHQ9dC5yZXBsYWNlKC9hPXNlbmRyZWN2XHJcbi9nLCJhPXNlbmRvbmx5XHJcbiIpLHQ9dC5yZXBsYWNlKC9hPXJlY3Zvbmx5XHJcbi9nLCJhPWluYWN0aXZlXHJcbiIpKTp0PXQucmVwbGFjZSgvKG09W15ccl0qXHJcbikvZywiJDFhPXNlbmRvbmx5XHJcbiIpKSxQcm9taXNlLnJlc29sdmUoe3NkcDp0LHR5cGU6c30pfWNsYXNzIFR0e2NvbnN0cnVjdG9yKGUsdD17fSl7dGhpcy5hdHRlbXB0aW5nUmVjb25uZWN0aW9uPSExLHRoaXMuY29ubmVjdFJlcXVlc3RlZD0hMSx0aGlzLmhlbGQ9ITEsdGhpcy5tdXRlZD0hMSx0aGlzLnJlZ2lzdGVyZXI9dm9pZCAwLHRoaXMucmVnaXN0ZXJSZXF1ZXN0ZWQ9ITEsdGhpcy5zZXNzaW9uPXZvaWQgMCx0aGlzLmRlbGVnYXRlPXQuZGVsZWdhdGUsdGhpcy5vcHRpb25zPU9iamVjdC5hc3NpZ24oe30sdCk7Y29uc3Qgcz1PYmplY3QuYXNzaWduKHt9LHQudXNlckFnZW50T3B0aW9ucyk7aWYocy50cmFuc3BvcnRDb25zdHJ1Y3Rvcnx8KHMudHJhbnNwb3J0Q29uc3RydWN0b3I9YXQpLHMudHJhbnNwb3J0T3B0aW9uc3x8KHMudHJhbnNwb3J0T3B0aW9ucz17c2VydmVyOmV9KSwhcy51cmkmJnQuYW9yKXtjb25zdCBlPWN0Lm1ha2VVUkkodC5hb3IpO2lmKCFlKXRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSB2YWxpZCBVUkkgZnJvbSAke3QuYW9yfWApO3MudXJpPWV9dGhpcy51c2VyQWdlbnQ9bmV3IGN0KHMpLHRoaXMudXNlckFnZW50LmRlbGVnYXRlPXtvbkNvbm5lY3Q6KCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBDb25uZWN0ZWRgKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uU2VydmVyQ29ubmVjdCYmdGhpcy5kZWxlZ2F0ZS5vblNlcnZlckNvbm5lY3QoKSx0aGlzLnJlZ2lzdGVyZXImJnRoaXMucmVnaXN0ZXJSZXF1ZXN0ZWQmJih0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWdpc3RlcmluZy4uLmApLHRoaXMucmVnaXN0ZXJlci5yZWdpc3RlcigpLmNhdGNoKChlPT57dGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBFcnJvciBvY2N1cnJlZCByZWdpc3RlcmluZyBhZnRlciBjb25uZWN0aW9uIHdpdGggc2VydmVyIHdhcyBvYnRhaW5lZC5gKSx0aGlzLmxvZ2dlci5lcnJvcihlLnRvU3RyaW5nKCkpfSkpKX0sb25EaXNjb25uZWN0OmU9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBEaXNjb25uZWN0ZWRgKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uU2VydmVyRGlzY29ubmVjdCYmdGhpcy5kZWxlZ2F0ZS5vblNlcnZlckRpc2Nvbm5lY3QoZSksdGhpcy5zZXNzaW9uJiYodGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gSGFuZ2luZyB1cC4uLmApLHRoaXMuaGFuZ3VwKCkuY2F0Y2goKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEVycm9yIG9jY3VycmVkIGhhbmdpbmcgdXAgY2FsbCBhZnRlciBjb25uZWN0aW9uIHdpdGggc2VydmVyIHdhcyBsb3N0LmApLHRoaXMubG9nZ2VyLmVycm9yKGUudG9TdHJpbmcoKSl9KSkpLHRoaXMucmVnaXN0ZXJlciYmKHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFVucmVnaXN0ZXJpbmcuLi5gKSx0aGlzLnJlZ2lzdGVyZXIudW5yZWdpc3RlcigpLmNhdGNoKChlPT57dGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBFcnJvciBvY2N1cnJlZCB1bnJlZ2lzdGVyaW5nIGFmdGVyIGNvbm5lY3Rpb24gd2l0aCBzZXJ2ZXIgd2FzIGxvc3QuYCksdGhpcy5sb2dnZXIuZXJyb3IoZS50b1N0cmluZygpKX0pKSksZSYmdGhpcy5hdHRlbXB0UmVjb25uZWN0aW9uKCl9LG9uSW52aXRlOmU9PntpZih0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNlaXZlZCBJTlZJVEVgKSx0aGlzLnNlc3Npb24pcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oYFske3RoaXMuaWR9XSBTZXNzaW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MsIHJlamVjdGluZyBJTlZJVEUuLi5gKSx2b2lkIGUucmVqZWN0KCkudGhlbigoKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWplY3RlZCBJTlZJVEVgKX0pKS5jYXRjaCgoZT0+e3RoaXMubG9nZ2VyLmVycm9yKGBbJHt0aGlzLmlkfV0gRmFpbGVkIHRvIHJlamVjdCBJTlZJVEVgKSx0aGlzLmxvZ2dlci5lcnJvcihlLnRvU3RyaW5nKCkpfSkpO2NvbnN0IHQ9e3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOntjb25zdHJhaW50czp0aGlzLmNvbnN0cmFpbnRzfX07dGhpcy5pbml0U2Vzc2lvbihlLHQpLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25DYWxsUmVjZWl2ZWQ/dGhpcy5kZWxlZ2F0ZS5vbkNhbGxSZWNlaXZlZCgpOih0aGlzLmxvZ2dlci53YXJuKGBbJHt0aGlzLmlkfV0gTm8gaGFuZGxlciBhdmFpbGFibGUsIHJlamVjdGluZyBJTlZJVEUuLi5gKSxlLnJlamVjdCgpLnRoZW4oKCgpPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVqZWN0ZWQgSU5WSVRFYCl9KSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEZhaWxlZCB0byByZWplY3QgSU5WSVRFYCksdGhpcy5sb2dnZXIuZXJyb3IoZS50b1N0cmluZygpKX0pKSl9LG9uTWVzc2FnZTplPT57ZS5hY2NlcHQoKS50aGVuKCgoKT0+e3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25NZXNzYWdlUmVjZWl2ZWQmJnRoaXMuZGVsZWdhdGUub25NZXNzYWdlUmVjZWl2ZWQoZS5yZXF1ZXN0LmJvZHkpfSkpfX0sdGhpcy5sb2dnZXI9dGhpcy51c2VyQWdlbnQuZ2V0TG9nZ2VyKCJzaXAuU2ltcGxlVXNlciIpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLCgoKT0+e3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIE9ubGluZWApLHRoaXMuYXR0ZW1wdFJlY29ubmVjdGlvbigpfSkpfWdldCBpZCgpe3JldHVybiB0aGlzLm9wdGlvbnMudXNlckFnZW50T3B0aW9ucyYmdGhpcy5vcHRpb25zLnVzZXJBZ2VudE9wdGlvbnMuZGlzcGxheU5hbWV8fCJBbm9ueW1vdXMifWdldCBsb2NhbE1lZGlhU3RyZWFtKCl7dmFyIGU7Y29uc3QgdD1udWxsPT09KGU9dGhpcy5zZXNzaW9uKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyO2lmKHQpe2lmKCEodCBpbnN0YW5jZW9mIG50KSl0aHJvdyBuZXcgRXJyb3IoIlNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBub3QgaW5zdGFuY2Ugb2Ygd2ViIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIiKTtyZXR1cm4gdC5sb2NhbE1lZGlhU3RyZWFtfX1nZXQgcmVtb3RlTWVkaWFTdHJlYW0oKXt2YXIgZTtjb25zdCB0PW51bGw9PT0oZT10aGlzLnNlc3Npb24pfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI7aWYodCl7aWYoISh0IGluc3RhbmNlb2YgbnQpKXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIG5vdCBpbnN0YW5jZSBvZiB3ZWIgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciIpO3JldHVybiB0LnJlbW90ZU1lZGlhU3RyZWFtfX1nZXQgbG9jYWxBdWRpb1RyYWNrKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLmxvY2FsTWVkaWFTdHJlYW0pfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldFRyYWNrcygpLmZpbmQoKGU9PiJhdWRpbyI9PT1lLmtpbmQpKX1nZXQgbG9jYWxWaWRlb1RyYWNrKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLmxvY2FsTWVkaWFTdHJlYW0pfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldFRyYWNrcygpLmZpbmQoKGU9PiJ2aWRlbyI9PT1lLmtpbmQpKX1nZXQgcmVtb3RlQXVkaW9UcmFjaygpe3ZhciBlO3JldHVybiBudWxsPT09KGU9dGhpcy5yZW1vdGVNZWRpYVN0cmVhbSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZ2V0VHJhY2tzKCkuZmluZCgoZT0+ImF1ZGlvIj09PWUua2luZCkpfWdldCByZW1vdGVWaWRlb1RyYWNrKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLnJlbW90ZU1lZGlhU3RyZWFtKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRUcmFja3MoKS5maW5kKChlPT4idmlkZW8iPT09ZS5raW5kKSl9Y29ubmVjdCgpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBDb25uZWN0aW5nIFVzZXJBZ2VudC4uLmApLHRoaXMuY29ubmVjdFJlcXVlc3RlZD0hMCx0aGlzLnVzZXJBZ2VudC5zdGF0ZSE9PW5lLlN0YXJ0ZWQ/dGhpcy51c2VyQWdlbnQuc3RhcnQoKTp0aGlzLnVzZXJBZ2VudC5yZWNvbm5lY3QoKX1kaXNjb25uZWN0KCl7cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIERpc2Nvbm5lY3RpbmcgVXNlckFnZW50Li4uYCksdGhpcy5jb25uZWN0UmVxdWVzdGVkPSExLHRoaXMudXNlckFnZW50LnN0b3AoKX1pc0Nvbm5lY3RlZCgpe3JldHVybiB0aGlzLnVzZXJBZ2VudC5pc0Nvbm5lY3RlZCgpfXJlZ2lzdGVyKGUsdCl7cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlZ2lzdGVyaW5nIFVzZXJBZ2VudC4uLmApLHRoaXMucmVnaXN0ZXJSZXF1ZXN0ZWQ9ITAsdGhpcy5yZWdpc3RlcmVyfHwodGhpcy5yZWdpc3RlcmVyPW5ldyBoZSh0aGlzLnVzZXJBZ2VudCxlKSx0aGlzLnJlZ2lzdGVyZXIuc3RhdGVDaGFuZ2UuYWRkTGlzdGVuZXIoKGU9Pntzd2l0Y2goZSl7Y2FzZSB0ZS5Jbml0aWFsOmJyZWFrO2Nhc2UgdGUuUmVnaXN0ZXJlZDp0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVnaXN0ZXJlZCYmdGhpcy5kZWxlZ2F0ZS5vblJlZ2lzdGVyZWQoKTticmVhaztjYXNlIHRlLlVucmVnaXN0ZXJlZDp0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uVW5yZWdpc3RlcmVkJiZ0aGlzLmRlbGVnYXRlLm9uVW5yZWdpc3RlcmVkKCk7YnJlYWs7Y2FzZSB0ZS5UZXJtaW5hdGVkOnRoaXMucmVnaXN0ZXJlcj12b2lkIDA7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gcmVnaXN0ZXJlciBzdGF0ZS4iKX19KSkpLHRoaXMucmVnaXN0ZXJlci5yZWdpc3Rlcih0KS50aGVuKCgoKT0+e30pKX11bnJlZ2lzdGVyKGUpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBVbnJlZ2lzdGVyaW5nIFVzZXJBZ2VudC4uLmApLHRoaXMucmVnaXN0ZXJSZXF1ZXN0ZWQ9ITEsdGhpcy5yZWdpc3RlcmVyP3RoaXMucmVnaXN0ZXJlci51bnJlZ2lzdGVyKGUpLnRoZW4oKCgpPT57fSkpOlByb21pc2UucmVzb2x2ZSgpfWNhbGwoZSx0LHMpe2lmKHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIEJlZ2lubmluZyBTZXNzaW9uLi4uYCksdGhpcy5zZXNzaW9uKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gYWxyZWFkeSBleGlzdHMuIikpO2NvbnN0IGk9Y3QubWFrZVVSSShlKTtpZighaSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGEgdmFsaWQgVVJJIGZyb20gIiR7ZX0iYCkpO3R8fCh0PXt9KSx0LnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zfHwodC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucz17fSksdC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucy5jb25zdHJhaW50c3x8KHQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMuY29uc3RyYWludHM9dGhpcy5jb25zdHJhaW50cyk7Y29uc3Qgcj1uZXcgWCh0aGlzLnVzZXJBZ2VudCxpLHQpO3JldHVybiB0aGlzLnNlbmRJbnZpdGUocix0LHMpLnRoZW4oKCgpPT57fSkpfWhhbmd1cCgpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBIYW5ndXAuLi5gKSx0aGlzLnRlcm1pbmF0ZSgpfWFuc3dlcihlKXtyZXR1cm4gdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gQWNjZXB0aW5nIEludml0YXRpb24uLi5gKSx0aGlzLnNlc3Npb24/dGhpcy5zZXNzaW9uIGluc3RhbmNlb2Ygej8oZXx8KGU9e30pLGUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnN8fChlLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zPXt9KSxlLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLmNvbnN0cmFpbnRzfHwoZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucy5jb25zdHJhaW50cz10aGlzLmNvbnN0cmFpbnRzKSx0aGlzLnNlc3Npb24uYWNjZXB0KGUpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gbm90IGluc3RhbmNlIG9mIEludml0YXRpb24uIikpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKSl9ZGVjbGluZSgpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSByZWplY3RpbmcgSW52aXRhdGlvbi4uLmApLHRoaXMuc2Vzc2lvbj90aGlzLnNlc3Npb24gaW5zdGFuY2VvZiB6P3RoaXMuc2Vzc2lvbi5yZWplY3QoKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gbm90IGluc3RhbmNlIG9mIEludml0YXRpb24uIikpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKSl9aG9sZCgpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBob2xkaW5nIHNlc3Npb24uLi5gKSx0aGlzLnNldEhvbGQoITApfXVuaG9sZCgpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSB1bmhvbGRpbmcgc2Vzc2lvbi4uLmApLHRoaXMuc2V0SG9sZCghMSl9aXNIZWxkKCl7cmV0dXJuIHRoaXMuaGVsZH1tdXRlKCl7dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gZGlzYWJsaW5nIG1lZGlhIHRyYWNrcy4uLmApLHRoaXMuc2V0TXV0ZSghMCl9dW5tdXRlKCl7dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gZW5hYmxpbmcgbWVkaWEgdHJhY2tzLi4uYCksdGhpcy5zZXRNdXRlKCExKX1pc011dGVkKCl7cmV0dXJuIHRoaXMubXV0ZWR9c2VuZERUTUYoZSl7aWYodGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gc2VuZGluZyBEVE1GLi4uYCksIS9eWzAtOUEtRCMqLF0kLy5leGVjKGUpKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgRFRNRiB0b25lLiIpKTtpZighdGhpcy5zZXNzaW9uKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gZG9lcyBub3QgZXhpc3QuIikpO3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFNlbmRpbmcgRFRNRiB0b25lOiAke2V9YCk7Y29uc3QgdD17Ym9keTp7Y29udGVudERpc3Bvc2l0aW9uOiJyZW5kZXIiLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi9kdG1mLXJlbGF5Iixjb250ZW50OiJTaWduYWw9IitlKyJcclxuRHVyYXRpb249MjAwMCJ9fTtyZXR1cm4gdGhpcy5zZXNzaW9uLmluZm8oe3JlcXVlc3RPcHRpb25zOnR9KS50aGVuKCgoKT0+e30pKX1tZXNzYWdlKGUsdCl7dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gc2VuZGluZyBtZXNzYWdlLi4uYCk7Y29uc3Qgcz1jdC5tYWtlVVJJKGUpO3JldHVybiBzP25ldyBRKHRoaXMudXNlckFnZW50LHMsdCkubWVzc2FnZSgpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBhIHZhbGlkIFVSSSBmcm9tICIke2V9ImApKX1nZXQgY29uc3RyYWludHMoKXt2YXIgZTtsZXQgdD17YXVkaW86ITAsdmlkZW86ITF9O3JldHVybihudWxsPT09KGU9dGhpcy5vcHRpb25zLm1lZGlhKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jb25zdHJhaW50cykmJih0PU9iamVjdC5hc3NpZ24oe30sdGhpcy5vcHRpb25zLm1lZGlhLmNvbnN0cmFpbnRzKSksdH1hdHRlbXB0UmVjb25uZWN0aW9uKGU9MSl7Y29uc3QgdD10aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uQXR0ZW1wdHN8fDMscz10aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uRGVsYXl8fDQ7dGhpcy5jb25uZWN0UmVxdWVzdGVkPyh0aGlzLmF0dGVtcHRpbmdSZWNvbm5lY3Rpb24mJnRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlY29ubmVjdGlvbiBhdHRlbXB0IGFscmVhZHkgaW4gcHJvZ3Jlc3NgKSxlPnQ/dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIG1heGltdW0gYXR0ZW1wdHMgcmVhY2hlZGApOigxPT09ZT90aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke2V9IG9mICR7dH0gLSB0cnlpbmdgKTp0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke2V9IG9mICR7dH0gLSB0cnlpbmcgaW4gJHtzfSBzZWNvbmRzYCksdGhpcy5hdHRlbXB0aW5nUmVjb25uZWN0aW9uPSEwLHNldFRpbWVvdXQoKCgpPT57aWYoIXRoaXMuY29ubmVjdFJlcXVlc3RlZClyZXR1cm4gdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtlfSBvZiAke3R9IC0gYWJvcnRlZGApLHZvaWQodGhpcy5hdHRlbXB0aW5nUmVjb25uZWN0aW9uPSExKTt0aGlzLnVzZXJBZ2VudC5yZWNvbm5lY3QoKS50aGVuKCgoKT0+e3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlY29ubmVjdGlvbiBhdHRlbXB0ICR7ZX0gb2YgJHt0fSAtIHN1Y2NlZWRlZGApLHRoaXMuYXR0ZW1wdGluZ1JlY29ubmVjdGlvbj0hMX0pKS5jYXRjaCgocz0+e3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlY29ubmVjdGlvbiBhdHRlbXB0ICR7ZX0gb2YgJHt0fSAtIGZhaWxlZGApLHRoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksdGhpcy5hdHRlbXB0aW5nUmVjb25uZWN0aW9uPSExLHRoaXMuYXR0ZW1wdFJlY29ubmVjdGlvbigrK2UpfSkpfSksMT09PWU/MDoxZTMqcykpKTp0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gbm90IGN1cnJlbnRseSBkZXNpcmVkYCl9Y2xlYW51cE1lZGlhKCl7dGhpcy5vcHRpb25zLm1lZGlhJiYodGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsJiZ0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8mJih0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8uc3JjT2JqZWN0PW51bGwsdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsLnZpZGVvLnBhdXNlKCkpLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUmJih0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvJiYodGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS5hdWRpby5zcmNPYmplY3Q9bnVsbCx0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvLnBhdXNlKCkpLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8mJih0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLnZpZGVvLnNyY09iamVjdD1udWxsLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8ucGF1c2UoKSkpKX1lbmFibGVSZWNlaXZlclRyYWNrcyhlKXtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKTtjb25zdCB0PXRoaXMuc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyO2lmKCEodCBpbnN0YW5jZW9mIG50KSl0aHJvdyBuZXcgRXJyb3IoIlNlc3Npb24ncyBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgbm90IGluc3RhbmNlIG9mIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuIik7Y29uc3Qgcz10LnBlZXJDb25uZWN0aW9uO2lmKCFzKXRocm93IG5ldyBFcnJvcigiUGVlciBjb25uZWN0aW9uIGNsb3NlZC4iKTtzLmdldFJlY2VpdmVycygpLmZvckVhY2goKHQ9Pnt0LnRyYWNrJiYodC50cmFjay5lbmFibGVkPWUpfSkpfWVuYWJsZVNlbmRlclRyYWNrcyhlKXtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKTtjb25zdCB0PXRoaXMuc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyO2lmKCEodCBpbnN0YW5jZW9mIG50KSl0aHJvdyBuZXcgRXJyb3IoIlNlc3Npb24ncyBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgbm90IGluc3RhbmNlIG9mIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuIik7Y29uc3Qgcz10LnBlZXJDb25uZWN0aW9uO2lmKCFzKXRocm93IG5ldyBFcnJvcigiUGVlciBjb25uZWN0aW9uIGNsb3NlZC4iKTtzLmdldFNlbmRlcnMoKS5mb3JFYWNoKCh0PT57dC50cmFjayYmKHQudHJhY2suZW5hYmxlZD1lKX0pKX1pbml0U2Vzc2lvbihlLHQpe3RoaXMuc2Vzc2lvbj1lLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25DYWxsQ3JlYXRlZCYmdGhpcy5kZWxlZ2F0ZS5vbkNhbGxDcmVhdGVkKCksdGhpcy5zZXNzaW9uLnN0YXRlQ2hhbmdlLmFkZExpc3RlbmVyKCh0PT57aWYodGhpcy5zZXNzaW9uPT09ZSlzd2l0Y2godGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gc2Vzc2lvbiBzdGF0ZSBjaGFuZ2VkIHRvICR7dH1gKSx0KXtjYXNlIFcuSW5pdGlhbDpjYXNlIFcuRXN0YWJsaXNoaW5nOmJyZWFrO2Nhc2UgVy5Fc3RhYmxpc2hlZDp0aGlzLnNldHVwTG9jYWxNZWRpYSgpLHRoaXMuc2V0dXBSZW1vdGVNZWRpYSgpLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25DYWxsQW5zd2VyZWQmJnRoaXMuZGVsZWdhdGUub25DYWxsQW5zd2VyZWQoKTticmVhaztjYXNlIFcuVGVybWluYXRpbmc6Y2FzZSBXLlRlcm1pbmF0ZWQ6dGhpcy5zZXNzaW9uPXZvaWQgMCx0aGlzLmNsZWFudXBNZWRpYSgpLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25DYWxsSGFuZ3VwJiZ0aGlzLmRlbGVnYXRlLm9uQ2FsbEhhbmd1cCgpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHNlc3Npb24gc3RhdGUuIil9fSkpLHRoaXMuc2Vzc2lvbi5kZWxlZ2F0ZT17b25JbmZvOmU9Pnt2YXIgdDtpZih2b2lkIDA9PT0obnVsbD09PSh0PXRoaXMuZGVsZWdhdGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9uQ2FsbERUTUZSZWNlaXZlZCkpcmV0dXJuIHZvaWQgZS5yZWplY3QoKTtjb25zdCBzPWUucmVxdWVzdC5nZXRIZWFkZXIoImNvbnRlbnQtdHlwZSIpO2lmKCFzfHwhL15hcHBsaWNhdGlvblwvZHRtZi1yZWxheS9pLmV4ZWMocykpcmV0dXJuIHZvaWQgZS5yZWplY3QoKTtjb25zdCBpPWUucmVxdWVzdC5ib2R5LnNwbGl0KCJcclxuIiwyKTtpZigyIT09aS5sZW5ndGgpcmV0dXJuIHZvaWQgZS5yZWplY3QoKTtsZXQgcjtjb25zdCBuPS9eKFNpZ25hbFxzKj89XHMqPykoWzAtOUEtRCMqXXsxfSkoXHMpPy4qLztpZihuLnRlc3QoaVswXSkmJihyPWlbMF0ucmVwbGFjZShuLCIkMiIpKSwhcilyZXR1cm4gdm9pZCBlLnJlamVjdCgpO2xldCBvO2NvbnN0IGE9L14oRHVyYXRpb25ccz89XHM/KShbMC05XXsxLDR9KShccyk/LiovO2EudGVzdChpWzFdKSYmKG89cGFyc2VJbnQoaVsxXS5yZXBsYWNlKGEsIiQyIiksMTApKSxvP2UuYWNjZXB0KCkudGhlbigoKCk9PntpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQ2FsbERUTUZSZWNlaXZlZCl7aWYoIXJ8fCFvKXRocm93IG5ldyBFcnJvcigiVG9uZSBvciBkdXJhdGlvbiB1bmRlZmluZWQuIik7dGhpcy5kZWxlZ2F0ZS5vbkNhbGxEVE1GUmVjZWl2ZWQocixvKX19KSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpfSkpOmUucmVqZWN0KCl9LG9uUmVmZXI6ZT0+e2UuYWNjZXB0KCkudGhlbigoKCk9PnRoaXMuc2VuZEludml0ZShlLm1ha2VJbnZpdGVyKHQpLHQpKSkuY2F0Y2goKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpfSkpfX19c2VuZEludml0ZShlLHQscyl7cmV0dXJuIHRoaXMuaW5pdFNlc3Npb24oZSx0KSxlLmludml0ZShzKS50aGVuKCgoKT0+e3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIHNlbnQgSU5WSVRFYCl9KSl9c2V0SG9sZChlKXtpZighdGhpcy5zZXNzaW9uKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gZG9lcyBub3QgZXhpc3QuIikpO2NvbnN0IHQ9dGhpcy5zZXNzaW9uO2lmKHRoaXMuaGVsZD09PWUpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2lmKCEodGhpcy5zZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIgaW5zdGFuY2VvZiBudCkpdGhyb3cgbmV3IEVycm9yKCJTZXNzaW9uJ3Mgc2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIG5vdCBpbnN0YW5jZSBvZiBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLiIpO2NvbnN0IHM9e3JlcXVlc3REZWxlZ2F0ZTp7b25BY2NlcHQ6KCk9Pnt0aGlzLmhlbGQ9ZSx0aGlzLmVuYWJsZVJlY2VpdmVyVHJhY2tzKCF0aGlzLmhlbGQpLHRoaXMuZW5hYmxlU2VuZGVyVHJhY2tzKCF0aGlzLmhlbGQmJiF0aGlzLm11dGVkKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQ2FsbEhvbGQmJnRoaXMuZGVsZWdhdGUub25DYWxsSG9sZCh0aGlzLmhlbGQpfSxvblJlamVjdDooKT0+e3RoaXMubG9nZ2VyLndhcm4oYFske3RoaXMuaWR9XSByZS1pbnZpdGUgcmVxdWVzdCB3YXMgcmVqZWN0ZWRgKSx0aGlzLmVuYWJsZVJlY2VpdmVyVHJhY2tzKCF0aGlzLmhlbGQpLHRoaXMuZW5hYmxlU2VuZGVyVHJhY2tzKCF0aGlzLmhlbGQmJiF0aGlzLm11dGVkKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQ2FsbEhvbGQmJnRoaXMuZGVsZWdhdGUub25DYWxsSG9sZCh0aGlzLmhlbGQpfX19LGk9dC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uc1JlSW52aXRlO3JldHVybiBpLmhvbGQ9ZSx0LnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zUmVJbnZpdGU9aSx0aGlzLnNlc3Npb24uaW52aXRlKHMpLnRoZW4oKCgpPT57dGhpcy5lbmFibGVSZWNlaXZlclRyYWNrcyghZSksdGhpcy5lbmFibGVTZW5kZXJUcmFja3MoIWUmJiF0aGlzLm11dGVkKX0pKS5jYXRjaCgoZT0+e3Rocm93IGUgaW5zdGFuY2VvZiBhJiZ0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEEgaG9sZCByZXF1ZXN0IGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuYCksZX0pKX1zZXRNdXRlKGUpe3RoaXMuc2Vzc2lvbj90aGlzLnNlc3Npb24uc3RhdGU9PT1XLkVzdGFibGlzaGVkPyh0aGlzLm11dGVkPWUsdGhpcy5lbmFibGVTZW5kZXJUcmFja3MoIXRoaXMuaGVsZCYmIXRoaXMubXV0ZWQpKTp0aGlzLmxvZ2dlci53YXJuKGBbJHt0aGlzLmlkfV0gQW4gZXN0YWJsaXNoZWQgc2Vzc2lvbiBpcyByZXF1aXJlZCB0byBlbmFibGUvZGlzYWJsZSBtZWRpYSB0cmFja3NgKTp0aGlzLmxvZ2dlci53YXJuKGBbJHt0aGlzLmlkfV0gQSBzZXNzaW9uIGlzIHJlcXVpcmVkIHRvIGVuYWJsZWQvZGlzYWJsZSBtZWRpYSB0cmFja3NgKX1zZXR1cExvY2FsTWVkaWEoKXt2YXIgZSx0O2lmKCF0aGlzLnNlc3Npb24pdGhyb3cgbmV3IEVycm9yKCJTZXNzaW9uIGRvZXMgbm90IGV4aXN0LiIpO2NvbnN0IHM9bnVsbD09PSh0PW51bGw9PT0oZT10aGlzLm9wdGlvbnMubWVkaWEpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmxvY2FsKXx8dm9pZCAwPT09dD92b2lkIDA6dC52aWRlbztpZihzKXtjb25zdCBlPXRoaXMubG9jYWxNZWRpYVN0cmVhbTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkxvY2FsIG1lZGlhIHN0cmVhbSB1bmRlZmllbmQuIik7cy5zcmNPYmplY3Q9ZSxzLnZvbHVtZT0wLHMucGxheSgpLmNhdGNoKChlPT57dGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBGYWlsZWQgdG8gcGxheSBsb2NhbCBtZWRpYWApLHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSl9KSl9fXNldHVwUmVtb3RlTWVkaWEoKXt2YXIgZSx0LHMsaTtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKTtjb25zdCByPShudWxsPT09KHQ9bnVsbD09PShlPXRoaXMub3B0aW9ucy5tZWRpYSl8fHZvaWQgMD09PWU/dm9pZCAwOmUucmVtb3RlKXx8dm9pZCAwPT09dD92b2lkIDA6dC52aWRlbyl8fChudWxsPT09KGk9bnVsbD09PShzPXRoaXMub3B0aW9ucy5tZWRpYSl8fHZvaWQgMD09PXM/dm9pZCAwOnMucmVtb3RlKXx8dm9pZCAwPT09aT92b2lkIDA6aS5hdWRpbyk7aWYocil7Y29uc3QgZT10aGlzLnJlbW90ZU1lZGlhU3RyZWFtO2lmKCFlKXRocm93IG5ldyBFcnJvcigiUmVtb3RlIG1lZGlhIHN0cmVhbSB1bmRlZmllbmQuIik7ci5hdXRvcGxheT0hMCxyLnNyY09iamVjdD1lLHIucGxheSgpLmNhdGNoKChlPT57dGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBGYWlsZWQgdG8gcGxheSByZW1vdGUgbWVkaWFgKSx0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpfSkpLGUub25hZGR0cmFjaz0oKT0+e3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlbW90ZSBtZWRpYSBvbmFkZHRyYWNrYCksci5sb2FkKCksci5wbGF5KCkuY2F0Y2goKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEZhaWxlZCB0byBwbGF5IHJlbW90ZSBtZWRpYWApLHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSl9KSl9fX10ZXJtaW5hdGUoKXtpZih0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBUZXJtaW5hdGluZy4uLmApLCF0aGlzLnNlc3Npb24pcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKSk7c3dpdGNoKHRoaXMuc2Vzc2lvbi5zdGF0ZSl7Y2FzZSBXLkluaXRpYWw6aWYodGhpcy5zZXNzaW9uIGluc3RhbmNlb2YgWClyZXR1cm4gdGhpcy5zZXNzaW9uLmNhbmNlbCgpLnRoZW4oKCgpPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gSW52aXRlciBuZXZlciBzZW50IElOVklURSAoY2FuY2VsZWQpYCl9KSk7aWYodGhpcy5zZXNzaW9uIGluc3RhbmNlb2YgeilyZXR1cm4gdGhpcy5zZXNzaW9uLnJlamVjdCgpLnRoZW4oKCgpPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gSW52aXRhdGlvbiByZWplY3RlZCAoc2VudCA0ODApYCl9KSk7dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHNlc3Npb24gdHlwZS4iKTtjYXNlIFcuRXN0YWJsaXNoaW5nOmlmKHRoaXMuc2Vzc2lvbiBpbnN0YW5jZW9mIFgpcmV0dXJuIHRoaXMuc2Vzc2lvbi5jYW5jZWwoKS50aGVuKCgoKT0+e3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIEludml0ZXIgY2FuY2VsZWQgKHNlbnQgQ0FOQ0VMKWApfSkpO2lmKHRoaXMuc2Vzc2lvbiBpbnN0YW5jZW9mIHopcmV0dXJuIHRoaXMuc2Vzc2lvbi5yZWplY3QoKS50aGVuKCgoKT0+e3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIEludml0YXRpb24gcmVqZWN0ZWQgKHNlbnQgNDgwKWApfSkpO3Rocm93IG5ldyBFcnJvcigiVW5rbm93biBzZXNzaW9uIHR5cGUuIik7Y2FzZSBXLkVzdGFibGlzaGVkOnJldHVybiB0aGlzLnNlc3Npb24uYnllKCkudGhlbigoKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBTZXNzaW9uIGVuZGVkIChzZW50IEJZRSlgKX0pKTtjYXNlIFcuVGVybWluYXRpbmc6Y2FzZSBXLlRlcm1pbmF0ZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc3RhdGUiKX1yZXR1cm4gdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gVGVybWluYXRpbmcgaW4gc3RhdGUgJHt0aGlzLnNlc3Npb24uc3RhdGV9LCBubyBhY3Rpb24gdGFrZW5gKSxQcm9taXNlLnJlc29sdmUoKX19Y29uc3QgeXQ9cixTdD0ic2lwLmpzIjtyZXR1cm4gdH0pKCl9KSk7`
