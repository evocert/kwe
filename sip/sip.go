package sip

import (
	"encoding/base64"
	"io"
	"strings"

	"github.com/evocert/kwe/resources"
)

// embedded https://cdn.jsdelivr.net/npm/sip.js/dist/sip.min.js v 0.16.1 at the time
func SipJS() io.Reader {
	return base64.NewDecoder(base64.StdEncoding, strings.NewReader(sipjs))
}

func init() {
	gblrs := resources.GLOBALRSNG()
	gblrs.FS().MKDIR("/sip/js", "")
	gblrs.FS().SET("/sip/js/sip.js", SipJS())
}

const sipjs string = `IWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuU0lQPXQoKTplLlNJUD10KCl9KHRoaXMsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIHMoaSl7aWYodFtpXSlyZXR1cm4gdFtpXS5leHBvcnRzO3ZhciByPXRbaV09e2k6aSxsOiExLGV4cG9ydHM6e319O3JldHVybiBlW2ldLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLHMpLHIubD0hMCxyLmV4cG9ydHN9cmV0dXJuIHMubT1lLHMuYz10LHMuZD1mdW5jdGlvbihlLHQsaSl7cy5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ITAsZ2V0Oml9KX0scy5yPWZ1bmN0aW9uKGUpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LHMudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9cyhlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIGk9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihzLnIoaSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGksImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJiJzdHJpbmciIT10eXBlb2YgZSlmb3IodmFyIHIgaW4gZSlzLmQoaSxyLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwscikpO3JldHVybiBpfSxzLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHMuZCh0LCJhIix0KSx0fSxzLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHMucD0iIixzKHMucz0xKX0oW2Z1bmN0aW9uKGUsdCxzKXsidXNlIHN0cmljdCI7dmFyIGkscj0ib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3Q/UmVmbGVjdDpudWxsLG49ciYmImZ1bmN0aW9uIj09dHlwZW9mIHIuYXBwbHk/ci5hcHBseTpmdW5jdGlvbihlLHQscyl7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGUsdCxzKX07aT1yJiYiZnVuY3Rpb24iPT10eXBlb2Ygci5vd25LZXlzP3Iub3duS2V5czpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP2Z1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSl9OmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKX07dmFyIG89TnVtYmVyLmlzTmFOfHxmdW5jdGlvbihlKXtyZXR1cm4gZSE9ZX07ZnVuY3Rpb24gYSgpe2EuaW5pdC5jYWxsKHRoaXMpfWUuZXhwb3J0cz1hLGEuRXZlbnRFbWl0dGVyPWEsYS5wcm90b3R5cGUuX2V2ZW50cz12b2lkIDAsYS5wcm90b3R5cGUuX2V2ZW50c0NvdW50PTAsYS5wcm90b3R5cGUuX21heExpc3RlbmVycz12b2lkIDA7dmFyIGM9MTA7ZnVuY3Rpb24gaChlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgImxpc3RlbmVyIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyt0eXBlb2YgZSl9ZnVuY3Rpb24gZChlKXtyZXR1cm4gdm9pZCAwPT09ZS5fbWF4TGlzdGVuZXJzP2EuZGVmYXVsdE1heExpc3RlbmVyczplLl9tYXhMaXN0ZW5lcnN9ZnVuY3Rpb24gZyhlLHQscyxpKXt2YXIgcixuLG8sYTtpZihoKHMpLHZvaWQgMD09PShuPWUuX2V2ZW50cyk/KG49ZS5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksZS5fZXZlbnRzQ291bnQ9MCk6KHZvaWQgMCE9PW4ubmV3TGlzdGVuZXImJihlLmVtaXQoIm5ld0xpc3RlbmVyIix0LHMubGlzdGVuZXI/cy5saXN0ZW5lcjpzKSxuPWUuX2V2ZW50cyksbz1uW3RdKSx2b2lkIDA9PT1vKW89blt0XT1zLCsrZS5fZXZlbnRzQ291bnQ7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2Ygbz9vPW5bdF09aT9bcyxvXTpbbyxzXTppP28udW5zaGlmdChzKTpvLnB1c2gocyksKHI9ZChlKSk+MCYmby5sZW5ndGg+ciYmIW8ud2FybmVkKXtvLndhcm5lZD0hMDt2YXIgYz1uZXcgRXJyb3IoIlBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gIitvLmxlbmd0aCsiICIrU3RyaW5nKHQpKyIgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdCIpO2MubmFtZT0iTWF4TGlzdGVuZXJzRXhjZWVkZWRXYXJuaW5nIixjLmVtaXR0ZXI9ZSxjLnR5cGU9dCxjLmNvdW50PW8ubGVuZ3RoLGE9Yyxjb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihhKX1yZXR1cm4gZX1mdW5jdGlvbiBsKCl7aWYoIXRoaXMuZmlyZWQpcmV0dXJuIHRoaXMudGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHRoaXMudHlwZSx0aGlzLndyYXBGbiksdGhpcy5maXJlZD0hMCwwPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpOnRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsYXJndW1lbnRzKX1mdW5jdGlvbiB1KGUsdCxzKXt2YXIgaT17ZmlyZWQ6ITEsd3JhcEZuOnZvaWQgMCx0YXJnZXQ6ZSx0eXBlOnQsbGlzdGVuZXI6c30scj1sLmJpbmQoaSk7cmV0dXJuIHIubGlzdGVuZXI9cyxpLndyYXBGbj1yLHJ9ZnVuY3Rpb24gcChlLHQscyl7dmFyIGk9ZS5fZXZlbnRzO2lmKHZvaWQgMD09PWkpcmV0dXJuW107dmFyIHI9aVt0XTtyZXR1cm4gdm9pZCAwPT09cj9bXToiZnVuY3Rpb24iPT10eXBlb2Ygcj9zP1tyLmxpc3RlbmVyfHxyXTpbcl06cz9mdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IEFycmF5KGUubGVuZ3RoKSxzPTA7czx0Lmxlbmd0aDsrK3MpdFtzXT1lW3NdLmxpc3RlbmVyfHxlW3NdO3JldHVybiB0fShyKTptKHIsci5sZW5ndGgpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9dGhpcy5fZXZlbnRzO2lmKHZvaWQgMCE9PXQpe3ZhciBzPXRbZV07aWYoImZ1bmN0aW9uIj09dHlwZW9mIHMpcmV0dXJuIDE7aWYodm9pZCAwIT09cylyZXR1cm4gcy5sZW5ndGh9cmV0dXJuIDB9ZnVuY3Rpb24gbShlLHQpe2Zvcih2YXIgcz1uZXcgQXJyYXkodCksaT0wO2k8dDsrK2kpc1tpXT1lW2ldO3JldHVybiBzfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJkZWZhdWx0TWF4TGlzdGVuZXJzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY30sc2V0OmZ1bmN0aW9uKGUpe2lmKCJudW1iZXIiIT10eXBlb2YgZXx8ZTwwfHxvKGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgImRlZmF1bHRNYXhMaXN0ZW5lcnMiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcrZSsiLiIpO2M9ZX19KSxhLmluaXQ9ZnVuY3Rpb24oKXt2b2lkIDAhPT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50cyE9PU9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpcy5fbWF4TGlzdGVuZXJzPXRoaXMuX21heExpc3RlbmVyc3x8dm9pZCAwfSxhLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7aWYoIm51bWJlciIhPXR5cGVvZiBlfHxlPDB8fG8oZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiAibiIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJytlKyIuIik7cmV0dXJuIHRoaXMuX21heExpc3RlbmVycz1lLHRoaXN9LGEucHJvdG90eXBlLmdldE1heExpc3RlbmVycz1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMpfSxhLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxzPTE7czxhcmd1bWVudHMubGVuZ3RoO3MrKyl0LnB1c2goYXJndW1lbnRzW3NdKTt2YXIgaT0iZXJyb3IiPT09ZSxyPXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT1yKWk9aSYmdm9pZCAwPT09ci5lcnJvcjtlbHNlIGlmKCFpKXJldHVybiExO2lmKGkpe3ZhciBvO2lmKHQubGVuZ3RoPjAmJihvPXRbMF0pLG8gaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBvO3ZhciBhPW5ldyBFcnJvcigiVW5oYW5kbGVkIGVycm9yLiIrKG8/IiAoIitvLm1lc3NhZ2UrIikiOiIiKSk7dGhyb3cgYS5jb250ZXh0PW8sYX12YXIgYz1yW2VdO2lmKHZvaWQgMD09PWMpcmV0dXJuITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGMpbihjLHRoaXMsdCk7ZWxzZXt2YXIgaD1jLmxlbmd0aCxkPW0oYyxoKTtmb3Iocz0wO3M8aDsrK3MpbihkW3NdLHRoaXMsdCl9cmV0dXJuITB9LGEucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGcodGhpcyxlLHQsITEpfSxhLnByb3RvdHlwZS5vbj1hLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixhLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZyh0aGlzLGUsdCwhMCl9LGEucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaCh0KSx0aGlzLm9uKGUsdSh0aGlzLGUsdCkpLHRoaXN9LGEucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaCh0KSx0aGlzLnByZXBlbmRMaXN0ZW5lcihlLHUodGhpcyxlLHQpKSx0aGlzfSxhLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3ZhciBzLGkscixuLG87aWYoaCh0KSx2b2lkIDA9PT0oaT10aGlzLl9ldmVudHMpKXJldHVybiB0aGlzO2lmKHZvaWQgMD09PShzPWlbZV0pKXJldHVybiB0aGlzO2lmKHM9PT10fHxzLmxpc3RlbmVyPT09dCkwPT0tLXRoaXMuX2V2ZW50c0NvdW50P3RoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpOihkZWxldGUgaVtlXSxpLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoInJlbW92ZUxpc3RlbmVyIixlLHMubGlzdGVuZXJ8fHQpKTtlbHNlIGlmKCJmdW5jdGlvbiIhPXR5cGVvZiBzKXtmb3Iocj0tMSxuPXMubGVuZ3RoLTE7bj49MDtuLS0paWYoc1tuXT09PXR8fHNbbl0ubGlzdGVuZXI9PT10KXtvPXNbbl0ubGlzdGVuZXIscj1uO2JyZWFrfWlmKHI8MClyZXR1cm4gdGhpczswPT09cj9zLnNoaWZ0KCk6ZnVuY3Rpb24oZSx0KXtmb3IoO3QrMTxlLmxlbmd0aDt0KyspZVt0XT1lW3QrMV07ZS5wb3AoKX0ocyxyKSwxPT09cy5sZW5ndGgmJihpW2VdPXNbMF0pLHZvaWQgMCE9PWkucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdCgicmVtb3ZlTGlzdGVuZXIiLGUsb3x8dCl9cmV0dXJuIHRoaXN9LGEucHJvdG90eXBlLm9mZj1hLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixhLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQscyxpO2lmKHZvaWQgMD09PShzPXRoaXMuX2V2ZW50cykpcmV0dXJuIHRoaXM7aWYodm9pZCAwPT09cy5yZW1vdmVMaXN0ZW5lcilyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V2ZW50c0NvdW50PTApOnZvaWQgMCE9PXNbZV0mJigwPT0tLXRoaXMuX2V2ZW50c0NvdW50P3RoaXMuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpOmRlbGV0ZSBzW2VdKSx0aGlzO2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcixuPU9iamVjdC5rZXlzKHMpO2ZvcihpPTA7aTxuLmxlbmd0aDsrK2kpInJlbW92ZUxpc3RlbmVyIiE9PShyPW5baV0pJiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhyKTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoInJlbW92ZUxpc3RlbmVyIiksdGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXZlbnRzQ291bnQ9MCx0aGlzfWlmKCJmdW5jdGlvbiI9PXR5cGVvZih0PXNbZV0pKXRoaXMucmVtb3ZlTGlzdGVuZXIoZSx0KTtlbHNlIGlmKHZvaWQgMCE9PXQpZm9yKGk9dC5sZW5ndGgtMTtpPj0wO2ktLSl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsdFtpXSk7cmV0dXJuIHRoaXN9LGEucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm4gcCh0aGlzLGUsITApfSxhLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIHAodGhpcyxlLCExKX0sYS5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGUubGlzdGVuZXJDb3VudD9lLmxpc3RlbmVyQ291bnQodCk6Zi5jYWxsKGUsdCl9LGEucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZixhLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50PjA/aSh0aGlzLl9ldmVudHMpOltdfX0sZnVuY3Rpb24oZSx0LHMpeyJ1c2Ugc3RyaWN0IjtzLnIodCkscy5kKHQsIm5hbWUiLChmdW5jdGlvbigpe3JldHVybiB3dH0pKSxzLmQodCwidmVyc2lvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZ0fSkpLHMuZCh0LCJDb250ZW50VHlwZVVuc3VwcG9ydGVkRXJyb3IiLChmdW5jdGlvbigpe3JldHVybiBxZX0pKSxzLmQodCwiUmVxdWVzdFBlbmRpbmdFcnJvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGtlfSkpLHMuZCh0LCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRXJyb3IiLChmdW5jdGlvbigpe3JldHVybiBfZX0pKSxzLmQodCwiU2Vzc2lvblRlcm1pbmF0ZWRFcnJvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFBlfSkpLHMuZCh0LCJTdGF0ZVRyYW5zaXRpb25FcnJvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIERlfSkpLHMuZCh0LCJCeWUiLChmdW5jdGlvbigpe3JldHVybiBIZX0pKSxzLmQodCwiX21ha2VFbWl0dGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gTmV9KSkscy5kKHQsIkluZm8iLChmdW5jdGlvbigpe3JldHVybiBPZX0pKSxzLmQodCwiSW52aXRhdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZlfSkpLHMuZCh0LCJJbnZpdGVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gS2V9KSkscy5kKHQsIk1lc3NhZ2UiLChmdW5jdGlvbigpe3JldHVybiBVZX0pKSxzLmQodCwiTWVzc2FnZXIiLChmdW5jdGlvbigpe3JldHVybiBXZX0pKSxzLmQodCwiTm90aWZpY2F0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gTWV9KSkscy5kKHQsIlB1Ymxpc2hlclN0YXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gWWV9KSkscy5kKHQsIlB1Ymxpc2hlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFFlfSkpLHMuZCh0LCJSZWZlcnJhbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGplfSkpLHMuZCh0LCJSZWdpc3RlcmVyU3RhdGUiLChmdW5jdGlvbigpe3JldHVybiBaZX0pKSxzLmQodCwiUmVnaXN0ZXJlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGV0fSkpLHMuZCh0LCJTZXNzaW9uU3RhdGUiLChmdW5jdGlvbigpe3JldHVybiBGZX0pKSxzLmQodCwiU2Vzc2lvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJlfSkpLHMuZCh0LCJTdWJzY3JpYmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gc3R9KSkscy5kKHQsIlN1YnNjcmlwdGlvblN0YXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gSmV9KSkscy5kKHQsIlN1YnNjcmlwdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIHR0fSkpLHMuZCh0LCJUcmFuc3BvcnRTdGF0ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHplfSkpLHMuZCh0LCJTSVBFeHRlbnNpb24iLChmdW5jdGlvbigpe3JldHVybiBMZX0pKSxzLmQodCwiVXNlckFnZW50UmVnaXN0ZXJlZE9wdGlvblRhZ3MiLChmdW5jdGlvbigpe3JldHVybiBHZX0pKSxzLmQodCwiVXNlckFnZW50U3RhdGUiLChmdW5jdGlvbigpe3JldHVybiBYZX0pKSxzLmQodCwiVXNlckFnZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gZnR9KSkscy5kKHQsIkdyYW1tYXIiLChmdW5jdGlvbigpe3JldHVybiBkfSkpLHMuZCh0LCJOYW1lQWRkckhlYWRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG99KSkscy5kKHQsIlBhcmFtZXRlcnMiLChmdW5jdGlvbigpe3JldHVybiBufSkpLHMuZCh0LCJVUkkiLChmdW5jdGlvbigpe3JldHVybiBhfSkpLHMuZCh0LCJDb3JlIiwoZnVuY3Rpb24oKXtyZXR1cm4gaX0pKSxzLmQodCwiV2ViIiwoZnVuY3Rpb24oKXtyZXR1cm4gcn0pKTt2YXIgaT17fTtzLnIoaSkscy5kKGksIkRpYWxvZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIER9KSkscy5kKGksIlNlc3Npb25EaWFsb2ciLChmdW5jdGlvbigpe3JldHVybiBsZX0pKSxzLmQoaSwiU3Vic2NyaXB0aW9uRGlhbG9nIiwoZnVuY3Rpb24oKXtyZXR1cm4gZmV9KSkscy5kKGksIkV4Y2VwdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIGp9KSkscy5kKGksIlRyYW5zYWN0aW9uU3RhdGVFcnJvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZ9KSkscy5kKGksIlRyYW5zcG9ydEVycm9yIiwoZnVuY3Rpb24oKXtyZXR1cm4gTH0pKSxzLmQoaSwiTGV2ZWxzIiwoZnVuY3Rpb24oKXtyZXR1cm4gbWV9KSkscy5kKGksIkxvZ2dlckZhY3RvcnkiLChmdW5jdGlvbigpe3JldHVybiB3ZX0pKSxzLmQoaSwiTG9nZ2VyIiwoZnVuY3Rpb24oKXtyZXR1cm4gdmV9KSkscy5kKGksIkdyYW1tYXIiLChmdW5jdGlvbigpe3JldHVybiBkfSkpLHMuZChpLCJOYW1lQWRkckhlYWRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG99KSkscy5kKGksIlBhcmFtZXRlcnMiLChmdW5jdGlvbigpe3JldHVybiBufSkpLHMuZChpLCJVUkkiLChmdW5jdGlvbigpe3JldHVybiBhfSkpLHMuZChpLCJDIiwoZnVuY3Rpb24oKXtyZXR1cm4gbH0pKSxzLmQoaSwiZnJvbUJvZHlMZWdhY3kiLChmdW5jdGlvbigpe3JldHVybiBTfSkpLHMuZChpLCJpc0JvZHkiLChmdW5jdGlvbigpe3JldHVybiBJfSkpLHMuZChpLCJnZXRCb2R5IiwoZnVuY3Rpb24oKXtyZXR1cm4gJH0pKSxzLmQoaSwiRGlnZXN0QXV0aGVudGljYXRpb24iLChmdW5jdGlvbigpe3JldHVybiB4fSkpLHMuZChpLCJJbmNvbWluZ01lc3NhZ2UiLChmdW5jdGlvbigpe3JldHVybiBifSkpLHMuZChpLCJJbmNvbWluZ1JlcXVlc3RNZXNzYWdlIiwoZnVuY3Rpb24oKXtyZXR1cm4gVH0pKSxzLmQoaSwiSW5jb21pbmdSZXNwb25zZU1lc3NhZ2UiLChmdW5jdGlvbigpe3JldHVybiB5fSkpLHMuZChpLCJPdXRnb2luZ1JlcXVlc3RNZXNzYWdlIiwoZnVuY3Rpb24oKXtyZXR1cm4gRX0pKSxzLmQoaSwiY29uc3RydWN0T3V0Z29pbmdSZXNwb25zZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHF9KSkscy5kKGksIlBhcnNlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGt9KSkscy5kKGksIlNlc3Npb25TdGF0ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIF99KSkscy5kKGksIlNpZ25hbGluZ1N0YXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gUH0pKSxzLmQoaSwiU3Vic2NyaXB0aW9uU3RhdGUiLChmdW5jdGlvbigpe3JldHVybiBVfSkpLHMuZChpLCJDbGllbnRUcmFuc2FjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIEd9KSkscy5kKGksIkludml0ZUNsaWVudFRyYW5zYWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gVn0pKSxzLmQoaSwiSW52aXRlU2VydmVyVHJhbnNhY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBXfSkpLHMuZChpLCJOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIFl9KSkscy5kKGksIk5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gWn0pKSxzLmQoaSwiU2VydmVyVHJhbnNhY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBLfSkpLHMuZChpLCJUcmFuc2FjdGlvblN0YXRlIiwoZnVuY3Rpb24oKXtyZXR1cm4gT30pKSxzLmQoaSwiVHJhbnNhY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBCfSkpLHMuZChpLCJVc2VyQWdlbnRDb3JlIiwoZnVuY3Rpb24oKXtyZXR1cm4geGV9KSkscy5kKGksIkJ5ZVVzZXJBZ2VudENsaWVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHp9KSkscy5kKGksIkJ5ZVVzZXJBZ2VudFNlcnZlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFF9KSkscy5kKGksIkNhbmNlbFVzZXJBZ2VudENsaWVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGJlfSkpLHMuZChpLCJJbmZvVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gZWV9KSkscy5kKGksIkluZm9Vc2VyQWdlbnRTZXJ2ZXIiLChmdW5jdGlvbigpe3JldHVybiB0ZX0pKSxzLmQoaSwiSW52aXRlVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gVGV9KSkscy5kKGksIkludml0ZVVzZXJBZ2VudFNlcnZlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIHllfSkpLHMuZChpLCJNZXNzYWdlVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gc2V9KSkscy5kKGksIk1lc3NhZ2VVc2VyQWdlbnRTZXJ2ZXIiLChmdW5jdGlvbigpe3JldHVybiBpZX0pKSxzLmQoaSwiTm90aWZ5VXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gcmV9KSkscy5kKGksIk5vdGlmeVVzZXJBZ2VudFNlcnZlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG5lfSkpLHMuZChpLCJQdWJsaXNoVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gRWV9KSkscy5kKGksIlByYWNrVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gb2V9KSkscy5kKGksIlByYWNrVXNlckFnZW50U2VydmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gYWV9KSkscy5kKGksIlJlSW52aXRlVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gY2V9KSkscy5kKGksIlJlSW52aXRlVXNlckFnZW50U2VydmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gaGV9KSkscy5kKGksIlJlU3Vic2NyaWJlVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gcGV9KSkscy5kKGksIlJlU3Vic2NyaWJlVXNlckFnZW50U2VydmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gUmV9KSkscy5kKGksIlJlZmVyVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gZGV9KSkscy5kKGksIlJlZmVyVXNlckFnZW50U2VydmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ2V9KSkscy5kKGksIlJlZ2lzdGVyVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gU2V9KSkscy5kKGksIlJlZ2lzdGVyVXNlckFnZW50U2VydmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gSWV9KSkscy5kKGksIlN1YnNjcmliZVVzZXJBZ2VudENsaWVudCIsKGZ1bmN0aW9uKCl7cmV0dXJuICRlfSkpLHMuZChpLCJTdWJzY3JpYmVVc2VyQWdlbnRTZXJ2ZXIiLChmdW5jdGlvbigpe3JldHVybiBDZX0pKSxzLmQoaSwiVXNlckFnZW50Q2xpZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gSn0pKSxzLmQoaSwiVXNlckFnZW50U2VydmVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gWH0pKSxzLmQoaSwiVGltZXJzIiwoZnVuY3Rpb24oKXtyZXR1cm4gTn0pKTt2YXIgcj17fTtzLnIocikscy5kKHIsInN0cmlwVGNwQ2FuZGlkYXRlcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIG50fSkpLHMuZChyLCJzdHJpcFRlbGVwaG9uZUV2ZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gb3R9KSkscy5kKHIsImNsZWFuSml0c2lTZHBJbWFnZWF0dHIiLChmdW5jdGlvbigpe3JldHVybiBhdH0pKSxzLmQociwic3RyaXBHNzIyIiwoZnVuY3Rpb24oKXtyZXR1cm4gY3R9KSkscy5kKHIsInN0cmlwUnRwUGF5bG9hZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh0fSkpLHMuZChyLCJzdHJpcFZpZGVvIiwoZnVuY3Rpb24oKXtyZXR1cm4gZHR9KSkscy5kKHIsImFkZE1pZExpbmVzIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ3R9KSkscy5kKHIsIlNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIiLChmdW5jdGlvbigpe3JldHVybiB1dH0pKSxzLmQociwiU2ltcGxlVXNlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIG10fSkpLHMuZChyLCJUcmFuc3BvcnQiLChmdW5jdGlvbigpe3JldHVybiBwdH0pKTtjbGFzcyBue2NvbnN0cnVjdG9yKGUpe3RoaXMucGFyYW1ldGVycz17fTtmb3IoY29uc3QgdCBpbiBlKWUuaGFzT3duUHJvcGVydHkodCkmJnRoaXMuc2V0UGFyYW0odCxlW3RdKX1zZXRQYXJhbShlLHQpe2UmJih0aGlzLnBhcmFtZXRlcnNbZS50b0xvd2VyQ2FzZSgpXT1udWxsPT10P251bGw6dC50b1N0cmluZygpKX1nZXRQYXJhbShlKXtpZihlKXJldHVybiB0aGlzLnBhcmFtZXRlcnNbZS50b0xvd2VyQ2FzZSgpXX1oYXNQYXJhbShlKXtyZXR1cm4hIWUmJiEhdGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSl9ZGVsZXRlUGFyYW0oZSl7aWYoZT1lLnRvTG93ZXJDYXNlKCksdGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGUpKXtjb25zdCB0PXRoaXMucGFyYW1ldGVyc1tlXTtyZXR1cm4gZGVsZXRlIHRoaXMucGFyYW1ldGVyc1tlXSx0fX1jbGVhclBhcmFtcygpe3RoaXMucGFyYW1ldGVycz17fX19Y2xhc3MgbyBleHRlbmRzIG57Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKHMpLHRoaXMudXJpPWUsdGhpcy5fZGlzcGxheU5hbWU9dH1nZXQgZnJpZW5kbHlOYW1lKCl7cmV0dXJuIHRoaXMuZGlzcGxheU5hbWV8fHRoaXMudXJpLmFvcn1nZXQgZGlzcGxheU5hbWUoKXtyZXR1cm4gdGhpcy5fZGlzcGxheU5hbWV9c2V0IGRpc3BsYXlOYW1lKGUpe3RoaXMuX2Rpc3BsYXlOYW1lPWV9Y2xvbmUoKXtyZXR1cm4gbmV3IG8odGhpcy51cmkuY2xvbmUoKSx0aGlzLl9kaXNwbGF5TmFtZSxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYW1ldGVycykpKX10b1N0cmluZygpe2xldCBlPXRoaXMuZGlzcGxheU5hbWV8fCIwIj09PXRoaXMuZGlzcGxheU5hbWU/JyInK3RoaXMuZGlzcGxheU5hbWUrJyIgJzoiIjtlKz0iPCIrdGhpcy51cmkudG9TdHJpbmcoKSsiPiI7Zm9yKGNvbnN0IHQgaW4gdGhpcy5wYXJhbWV0ZXJzKXRoaXMucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eSh0KSYmKGUrPSI7Iit0LG51bGwhPT10aGlzLnBhcmFtZXRlcnNbdF0mJihlKz0iPSIrdGhpcy5wYXJhbWV0ZXJzW3RdKSk7cmV0dXJuIGV9fWNsYXNzIGEgZXh0ZW5kcyBue2NvbnN0cnVjdG9yKGUsdCxzLGkscixuKXtpZihzdXBlcihyKSx0aGlzLmhlYWRlcnM9e30sIXMpdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyBvciBpbnZhbGlkICJob3N0IiBwYXJhbWV0ZXInKTtlPWV8fCJzaXAiO2Zvcihjb25zdCBlIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShlKSYmdGhpcy5zZXRIZWFkZXIoZSxuW2VdKTt0aGlzLnJhdz17c2NoZW1lOmUsdXNlcjp0LGhvc3Q6cyxwb3J0Oml9LHRoaXMubm9ybWFsPXtzY2hlbWU6ZS50b0xvd2VyQ2FzZSgpLHVzZXI6dCxob3N0OnMudG9Mb3dlckNhc2UoKSxwb3J0Oml9fWdldCBzY2hlbWUoKXtyZXR1cm4gdGhpcy5ub3JtYWwuc2NoZW1lfXNldCBzY2hlbWUoZSl7dGhpcy5yYXcuc2NoZW1lPWUsdGhpcy5ub3JtYWwuc2NoZW1lPWUudG9Mb3dlckNhc2UoKX1nZXQgdXNlcigpe3JldHVybiB0aGlzLm5vcm1hbC51c2VyfXNldCB1c2VyKGUpe3RoaXMubm9ybWFsLnVzZXI9dGhpcy5yYXcudXNlcj1lfWdldCBob3N0KCl7cmV0dXJuIHRoaXMubm9ybWFsLmhvc3R9c2V0IGhvc3QoZSl7dGhpcy5yYXcuaG9zdD1lLHRoaXMubm9ybWFsLmhvc3Q9ZS50b0xvd2VyQ2FzZSgpfWdldCBhb3IoKXtyZXR1cm4gdGhpcy5ub3JtYWwudXNlcisiQCIrdGhpcy5ub3JtYWwuaG9zdH1nZXQgcG9ydCgpe3JldHVybiB0aGlzLm5vcm1hbC5wb3J0fXNldCBwb3J0KGUpe3RoaXMubm9ybWFsLnBvcnQ9dGhpcy5yYXcucG9ydD1lfXNldEhlYWRlcihlLHQpe3RoaXMuaGVhZGVyc1t0aGlzLmhlYWRlcml6ZShlKV09dCBpbnN0YW5jZW9mIEFycmF5P3Q6W3RdfWdldEhlYWRlcihlKXtpZihlKXJldHVybiB0aGlzLmhlYWRlcnNbdGhpcy5oZWFkZXJpemUoZSldfWhhc0hlYWRlcihlKXtyZXR1cm4hIWUmJiEhdGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KHRoaXMuaGVhZGVyaXplKGUpKX1kZWxldGVIZWFkZXIoZSl7aWYoZT10aGlzLmhlYWRlcml6ZShlKSx0aGlzLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoZSkpe2NvbnN0IHQ9dGhpcy5oZWFkZXJzW2VdO3JldHVybiBkZWxldGUgdGhpcy5oZWFkZXJzW2VdLHR9fWNsZWFySGVhZGVycygpe3RoaXMuaGVhZGVycz17fX1jbG9uZSgpe3JldHVybiBuZXcgYSh0aGlzLl9yYXcuc2NoZW1lLHRoaXMuX3Jhdy51c2VyfHwiIix0aGlzLl9yYXcuaG9zdCx0aGlzLl9yYXcucG9ydCxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYW1ldGVycykpLEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5oZWFkZXJzKSkpfXRvUmF3KCl7cmV0dXJuIHRoaXMuX3RvU3RyaW5nKHRoaXMuX3Jhdyl9dG9TdHJpbmcoKXtyZXR1cm4gdGhpcy5fdG9TdHJpbmcodGhpcy5fbm9ybWFsKX1nZXQgX25vcm1hbCgpe3JldHVybiB0aGlzLm5vcm1hbH1nZXQgX3Jhdygpe3JldHVybiB0aGlzLnJhd31fdG9TdHJpbmcoZSl7bGV0IHQ9ZS5zY2hlbWUrIjoiO2Uuc2NoZW1lLnRvTG93ZXJDYXNlKCkubWF0Y2goIl5zaXBzPyQiKXx8KHQrPSIvLyIpLGUudXNlciYmKHQrPXRoaXMuZXNjYXBlVXNlcihlLnVzZXIpKyJAIiksdCs9ZS5ob3N0LChlLnBvcnR8fDA9PT1lLnBvcnQpJiYodCs9IjoiK2UucG9ydCk7Zm9yKGNvbnN0IGUgaW4gdGhpcy5wYXJhbWV0ZXJzKXRoaXMucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShlKSYmKHQrPSI7IitlLG51bGwhPT10aGlzLnBhcmFtZXRlcnNbZV0mJih0Kz0iPSIrdGhpcy5wYXJhbWV0ZXJzW2VdKSk7Y29uc3Qgcz1bXTtmb3IoY29uc3QgZSBpbiB0aGlzLmhlYWRlcnMpaWYodGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KGUpKWZvcihjb25zdCB0IGluIHRoaXMuaGVhZGVyc1tlXSl0aGlzLmhlYWRlcnNbZV0uaGFzT3duUHJvcGVydHkodCkmJnMucHVzaChlKyI9Iit0aGlzLmhlYWRlcnNbZV1bdF0pO3JldHVybiBzLmxlbmd0aD4wJiYodCs9Ij8iK3Muam9pbigiJiIpKSx0fWVzY2FwZVVzZXIoZSl7bGV0IHQ7dHJ5e3Q9ZGVjb2RlVVJJQ29tcG9uZW50KGUpfWNhdGNoKGUpe3Rocm93IGV9cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh0KS5yZXBsYWNlKC8lM0EvZ2ksIjoiKS5yZXBsYWNlKC8lMkIvZ2ksIisiKS5yZXBsYWNlKC8lM0YvZ2ksIj8iKS5yZXBsYWNlKC8lMkYvZ2ksIi8iKX1oZWFkZXJpemUoZSl7Y29uc3QgdD17IkNhbGwtSWQiOiJDYWxsLUlEIixDc2VxOiJDU2VxIiwiTWluLVNlIjoiTWluLVNFIixSYWNrOiJSQWNrIixSc2VxOiJSU2VxIiwiV3d3LUF1dGhlbnRpY2F0ZSI6IldXVy1BdXRoZW50aWNhdGUifSxzPWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIi0iKS5zcGxpdCgiLSIpLGk9cy5sZW5ndGg7bGV0IHI9IiI7Zm9yKGxldCBlPTA7ZTxpO2UrKykwIT09ZSYmKHIrPSItIikscis9c1tlXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzW2VdLnN1YnN0cmluZygxKTtyZXR1cm4gdFtyXSYmKHI9dFtyXSkscn19Y2xhc3MgYyBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsdCxzLGkpe3N1cGVyKCksdGhpcy5tZXNzYWdlPWUsdGhpcy5leHBlY3RlZD10LHRoaXMuZm91bmQ9cyx0aGlzLmxvY2F0aW9uPWksdGhpcy5uYW1lPSJTeW50YXhFcnJvciIsImZ1bmN0aW9uIj09dHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLGMpfXN0YXRpYyBidWlsZE1lc3NhZ2UoZSx0KXtmdW5jdGlvbiBzKGUpe3JldHVybiBlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cXC9nLCJcXFxcIikucmVwbGFjZSgvIi9nLCdcXCInKS5yZXBsYWNlKC9cMC9nLCJcXDAiKS5yZXBsYWNlKC9cdC9nLCJcXHQiKS5yZXBsYWNlKC9cbi9nLCJcXG4iKS5yZXBsYWNlKC9cci9nLCJcXHIiKS5yZXBsYWNlKC9bXHgwMC1ceDBGXS9nLGU9PiJcXHgwIitzKGUpKS5yZXBsYWNlKC9bXHgxMC1ceDFGXHg3Ri1ceDlGXS9nLGU9PiJcXHgiK3MoZSkpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUucmVwbGFjZSgvXFwvZywiXFxcXCIpLnJlcGxhY2UoL1xdL2csIlxcXSIpLnJlcGxhY2UoL1xeL2csIlxcXiIpLnJlcGxhY2UoLy0vZywiXFwtIikucmVwbGFjZSgvXDAvZywiXFwwIikucmVwbGFjZSgvXHQvZywiXFx0IikucmVwbGFjZSgvXG4vZywiXFxuIikucmVwbGFjZSgvXHIvZywiXFxyIikucmVwbGFjZSgvW1x4MDAtXHgwRl0vZyxlPT4iXFx4MCIrcyhlKSkucmVwbGFjZSgvW1x4MTAtXHgxRlx4N0YtXHg5Rl0vZyxlPT4iXFx4IitzKGUpKX1mdW5jdGlvbiBuKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2UibGl0ZXJhbCI6cmV0dXJuJyInK2koZS50ZXh0KSsnIic7Y2FzZSJjbGFzcyI6Y29uc3QgdD1lLnBhcnRzLm1hcChlPT5BcnJheS5pc0FycmF5KGUpP3IoZVswXSkrIi0iK3IoZVsxXSk6cihlKSk7cmV0dXJuIlsiKyhlLmludmVydGVkPyJeIjoiIikrdCsiXSI7Y2FzZSJhbnkiOnJldHVybiJhbnkgY2hhcmFjdGVyIjtjYXNlImVuZCI6cmV0dXJuImVuZCBvZiBpbnB1dCI7Y2FzZSJvdGhlciI6cmV0dXJuIGUuZGVzY3JpcHRpb259fXJldHVybiJFeHBlY3RlZCAiK2Z1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5tYXAobik7bGV0IHMsaTtpZih0LnNvcnQoKSx0Lmxlbmd0aD4wKXtmb3Iocz0xLGk9MTtzPHQubGVuZ3RoO3MrKyl0W3MtMV0hPT10W3NdJiYodFtpXT10W3NdLGkrKyk7dC5sZW5ndGg9aX1zd2l0Y2godC5sZW5ndGgpe2Nhc2UgMTpyZXR1cm4gdFswXTtjYXNlIDI6cmV0dXJuIHRbMF0rIiBvciAiK3RbMV07ZGVmYXVsdDpyZXR1cm4gdC5zbGljZSgwLC0xKS5qb2luKCIsICIpKyIsIG9yICIrdFt0Lmxlbmd0aC0xXX19KGUpKyIgYnV0ICIrKCgobz10KT8nIicraShvKSsnIic6ImVuZCBvZiBpbnB1dCIpKyIgZm91bmQuIik7dmFyIG99fWNvbnN0IGg9ZnVuY3Rpb24oZSx0KXt0PXZvaWQgMCE9PXQ/dDp7fTtjb25zdCBzPXt9LGk9e0NvbnRhY3Q6MTE5LE5hbWVfQWRkcl9IZWFkZXI6MTU2LFJlY29yZF9Sb3V0ZToxNzYsUmVxdWVzdF9SZXNwb25zZTo4MSxTSVBfVVJJOjQ1LFN1YnNjcmlwdGlvbl9TdGF0ZToxODYsU3VwcG9ydGVkOjE5MSxSZXF1aXJlOjE4MixWaWE6MTk0LGFic29sdXRlVVJJOjg0LENhbGxfSUQ6MTE4LENvbnRlbnRfRGlzcG9zaXRpb246MTMwLENvbnRlbnRfTGVuZ3RoOjEzNSxDb250ZW50X1R5cGU6MTM2LENTZXE6MTQ2LGRpc3BsYXlOYW1lOjEyMixFdmVudDoxNDksRnJvbToxNTEsaG9zdDo1MixNYXhfRm9yd2FyZHM6MTU0LE1pbl9TRToyMTMsUHJveHlfQXV0aGVudGljYXRlOjE1NyxxdW90ZWRfc3RyaW5nOjQwLFJlZmVyX1RvOjE3OCxSZXBsYWNlczoxNzksU2Vzc2lvbl9FeHBpcmVzOjIxMCxzdHVuX1VSSToyMTcsVG86MTkyLHR1cm5fVVJJOjIyMyx1dWlkOjIyNixXV1dfQXV0aGVudGljYXRlOjIwOSxjaGFsbGVuZ2U6MTU4LHNpcGZyYWc6MjMwLFJlZmVycmVkX0J5OjIzMX07bGV0IHI9MTE5O2NvbnN0IG49WyJcclxuIixiKCJcclxuIiwhMSksL15bMC05XS8sVChbWyIwIiwiOSJdXSwhMSwhMSksL15bYS16QS1aXS8sVChbWyJhIiwieiJdLFsiQSIsIloiXV0sITEsITEpLC9eWzAtOWEtZkEtRl0vLFQoW1siMCIsIjkiXSxbImEiLCJmIl0sWyJBIiwiRiJdXSwhMSwhMSksL15bXDAtXHhGRl0vLFQoW1siXDAiLCJceGZmIl1dLCExLCExKSwvXlsiXS8sVChbJyInXSwhMSwhMSksIiAiLGIoIiAiLCExKSwiXHQiLGIoIlx0IiwhMSksL15bYS16QS1aMC05XS8sVChbWyJhIiwieiJdLFsiQSIsIloiXSxbIjAiLCI5Il1dLCExLCExKSwiOyIsYigiOyIsITEpLCIvIixiKCIvIiwhMSksIj8iLGIoIj8iLCExKSwiOiIsYigiOiIsITEpLCJAIixiKCJAIiwhMSksIiYiLGIoIiYiLCExKSwiPSIsYigiPSIsITEpLCIrIixiKCIrIiwhMSksIiQiLGIoIiQiLCExKSwiLCIsYigiLCIsITEpLCItIixiKCItIiwhMSksIl8iLGIoIl8iLCExKSwiLiIsYigiLiIsITEpLCIhIixiKCIhIiwhMSksIn4iLGIoIn4iLCExKSwiKiIsYigiKiIsITEpLCInIixiKCInIiwhMSksIigiLGIoIigiLCExKSwiKSIsYigiKSIsITEpLCIlIixiKCIlIiwhMSksZnVuY3Rpb24oKXtyZXR1cm4iICJ9LGZ1bmN0aW9uKCl7cmV0dXJuIjoifSwvXlshLX5dLyxUKFtbIiEiLCJ+Il1dLCExLCExKSwvXltceDgwLVx1RkZGRl0vLFQoW1siXHg4MCIsIlx1ZmZmZiJdXSwhMSwhMSksL15bXHg4MC1ceEJGXS8sVChbWyJceDgwIiwiXHhiZiJdXSwhMSwhMSksL15bYS1mXS8sVChbWyJhIiwiZiJdXSwhMSwhMSksImAiLGIoImAiLCExKSwiPCIsYigiPCIsITEpLCI+IixiKCI+IiwhMSksIlxcIixiKCJcXCIsITEpLCJbIixiKCJbIiwhMSksIl0iLGIoIl0iLCExKSwieyIsYigieyIsITEpLCJ9IixiKCJ9IiwhMSksZnVuY3Rpb24oKXtyZXR1cm4iKiJ9LGZ1bmN0aW9uKCl7cmV0dXJuIi8ifSxmdW5jdGlvbigpe3JldHVybiI9In0sZnVuY3Rpb24oKXtyZXR1cm4iKCJ9LGZ1bmN0aW9uKCl7cmV0dXJuIikifSxmdW5jdGlvbigpe3JldHVybiI+In0sZnVuY3Rpb24oKXtyZXR1cm4iPCJ9LGZ1bmN0aW9uKCl7cmV0dXJuIiwifSxmdW5jdGlvbigpe3JldHVybiI7In0sZnVuY3Rpb24oKXtyZXR1cm4iOiJ9LGZ1bmN0aW9uKCl7cmV0dXJuJyInfSwvXlshLSddLyxUKFtbIiEiLCInIl1dLCExLCExKSwvXlsqLVtdLyxUKFtbIioiLCJbIl1dLCExLCExKSwvXltcXS1+XS8sVChbWyJdIiwifiJdXSwhMSwhMSksZnVuY3Rpb24oZSl7cmV0dXJuIGV9LC9eWyMtW10vLFQoW1siIyIsIlsiXV0sITEsITEpLC9eW1wwLVx0XS8sVChbWyJcMCIsIlx0Il1dLCExLCExKSwvXltceDBCLVxmXS8sVChbWyJcdiIsIlxmIl1dLCExLCExKSwvXltceDBFLVx4N0ZdLyxUKFtbIlx4MGUiLCJceDdmIl1dLCExLCExKSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS51cmk9bmV3IGEodC5kYXRhLnNjaGVtZSx0LmRhdGEudXNlcix0LmRhdGEuaG9zdCx0LmRhdGEucG9ydCksZGVsZXRlIHQuZGF0YS5zY2hlbWUsZGVsZXRlIHQuZGF0YS51c2VyLGRlbGV0ZSB0LmRhdGEuaG9zdCxkZWxldGUgdC5kYXRhLmhvc3RfdHlwZSxkZWxldGUgdC5kYXRhLnBvcnR9LGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnVyaT1uZXcgYSh0LmRhdGEuc2NoZW1lLHQuZGF0YS51c2VyLHQuZGF0YS5ob3N0LHQuZGF0YS5wb3J0LHQuZGF0YS51cmlfcGFyYW1zLHQuZGF0YS51cmlfaGVhZGVycyksZGVsZXRlIHQuZGF0YS5zY2hlbWUsZGVsZXRlIHQuZGF0YS51c2VyLGRlbGV0ZSB0LmRhdGEuaG9zdCxkZWxldGUgdC5kYXRhLmhvc3RfdHlwZSxkZWxldGUgdC5kYXRhLnBvcnQsZGVsZXRlIHQuZGF0YS51cmlfcGFyYW1zLCJTSVBfVVJJIj09PXQuc3RhcnRSdWxlJiYodC5kYXRhPXQuZGF0YS51cmkpfSwic2lwcyIsYigic2lwcyIsITApLCJzaXAiLGIoInNpcCIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5zY2hlbWU9ZX0sZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudXNlcj1kZWNvZGVVUklDb21wb25lbnQodigpLnNsaWNlKDAsLTEpKX0sZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEucGFzc3dvcmQ9digpfSxmdW5jdGlvbigpe3JldHVybih0PXR8fHtkYXRhOnt9fSkuZGF0YS5ob3N0PXYoKSx0LmRhdGEuaG9zdH0sZnVuY3Rpb24oKXtyZXR1cm4odD10fHx7ZGF0YTp7fX0pLmRhdGEuaG9zdF90eXBlPSJkb21haW4iLHYoKX0sL15bYS16QS1aMC05X1wtXS8sVChbWyJhIiwieiJdLFsiQSIsIloiXSxbIjAiLCI5Il0sIl8iLCItIl0sITEsITEpLC9eW2EtekEtWjAtOVwtXS8sVChbWyJhIiwieiJdLFsiQSIsIloiXSxbIjAiLCI5Il0sIi0iXSwhMSwhMSksZnVuY3Rpb24oKXtyZXR1cm4odD10fHx7ZGF0YTp7fX0pLmRhdGEuaG9zdF90eXBlPSJJUHY2Iix2KCl9LCI6OiIsYigiOjoiLCExKSxmdW5jdGlvbigpe3JldHVybih0PXR8fHtkYXRhOnt9fSkuZGF0YS5ob3N0X3R5cGU9IklQdjYiLHYoKX0sZnVuY3Rpb24oKXtyZXR1cm4odD10fHx7ZGF0YTp7fX0pLmRhdGEuaG9zdF90eXBlPSJJUHY0Iix2KCl9LCIyNSIsYigiMjUiLCExKSwvXlswLTVdLyxUKFtbIjAiLCI1Il1dLCExLCExKSwiMiIsYigiMiIsITEpLC9eWzAtNF0vLFQoW1siMCIsIjQiXV0sITEsITEpLCIxIixiKCIxIiwhMSksL15bMS05XS8sVChbWyIxIiwiOSJdXSwhMSwhMSksZnVuY3Rpb24oZSl7cmV0dXJuIHQ9dHx8e2RhdGE6e319LGU9cGFyc2VJbnQoZS5qb2luKCIiKSksdC5kYXRhLnBvcnQ9ZSxlfSwidHJhbnNwb3J0PSIsYigidHJhbnNwb3J0PSIsITApLCJ1ZHAiLGIoInVkcCIsITApLCJ0Y3AiLGIoInRjcCIsITApLCJzY3RwIixiKCJzY3RwIiwhMCksInRscyIsYigidGxzIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnVyaV9wYXJhbXN8fCh0LmRhdGEudXJpX3BhcmFtcz17fSksdC5kYXRhLnVyaV9wYXJhbXMudHJhbnNwb3J0PWUudG9Mb3dlckNhc2UoKX0sInVzZXI9IixiKCJ1c2VyPSIsITApLCJwaG9uZSIsYigicGhvbmUiLCEwKSwiaXAiLGIoImlwIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnVyaV9wYXJhbXN8fCh0LmRhdGEudXJpX3BhcmFtcz17fSksdC5kYXRhLnVyaV9wYXJhbXMudXNlcj1lLnRvTG93ZXJDYXNlKCl9LCJtZXRob2Q9IixiKCJtZXRob2Q9IiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnVyaV9wYXJhbXN8fCh0LmRhdGEudXJpX3BhcmFtcz17fSksdC5kYXRhLnVyaV9wYXJhbXMubWV0aG9kPWV9LCJ0dGw9IixiKCJ0dGw9IiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnBhcmFtc3x8KHQuZGF0YS5wYXJhbXM9e30pLHQuZGF0YS5wYXJhbXMudHRsPWV9LCJtYWRkcj0iLGIoIm1hZGRyPSIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS51cmlfcGFyYW1zfHwodC5kYXRhLnVyaV9wYXJhbXM9e30pLHQuZGF0YS51cmlfcGFyYW1zLm1hZGRyPWV9LCJsciIsYigibHIiLCEwKSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS51cmlfcGFyYW1zfHwodC5kYXRhLnVyaV9wYXJhbXM9e30pLHQuZGF0YS51cmlfcGFyYW1zLmxyPXZvaWQgMH0sZnVuY3Rpb24oZSxzKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudXJpX3BhcmFtc3x8KHQuZGF0YS51cmlfcGFyYW1zPXt9KSxzPW51bGw9PT1zP3ZvaWQgMDpzWzFdLHQuZGF0YS51cmlfcGFyYW1zW2UudG9Mb3dlckNhc2UoKV09c30sZnVuY3Rpb24oZSxzKXtlPWUuam9pbigiIikudG9Mb3dlckNhc2UoKSxzPXMuam9pbigiIiksKHQ9dHx8e2RhdGE6e319KS5kYXRhLnVyaV9oZWFkZXJzfHwodC5kYXRhLnVyaV9oZWFkZXJzPXt9KSx0LmRhdGEudXJpX2hlYWRlcnNbZV0/dC5kYXRhLnVyaV9oZWFkZXJzW2VdLnB1c2gocyk6dC5kYXRhLnVyaV9oZWFkZXJzW2VdPVtzXX0sZnVuY3Rpb24oKXsiUmVmZXJfVG8iPT09KHQ9dHx8e2RhdGE6e319KS5zdGFydFJ1bGUmJih0LmRhdGEudXJpPW5ldyBhKHQuZGF0YS5zY2hlbWUsdC5kYXRhLnVzZXIsdC5kYXRhLmhvc3QsdC5kYXRhLnBvcnQsdC5kYXRhLnVyaV9wYXJhbXMsdC5kYXRhLnVyaV9oZWFkZXJzKSxkZWxldGUgdC5kYXRhLnNjaGVtZSxkZWxldGUgdC5kYXRhLnVzZXIsZGVsZXRlIHQuZGF0YS5ob3N0LGRlbGV0ZSB0LmRhdGEuaG9zdF90eXBlLGRlbGV0ZSB0LmRhdGEucG9ydCxkZWxldGUgdC5kYXRhLnVyaV9wYXJhbXMpfSwiLy8iLGIoIi8vIiwhMSksZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuc2NoZW1lPXYoKX0sYigiU0lQIiwhMCksZnVuY3Rpb24oKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuc2lwX3ZlcnNpb249digpfSwiSU5WSVRFIixiKCJJTlZJVEUiLCExKSwiQUNLIixiKCJBQ0siLCExKSwiVlhBQ0giLGIoIlZYQUNIIiwhMSksIk9QVElPTlMiLGIoIk9QVElPTlMiLCExKSwiQllFIixiKCJCWUUiLCExKSwiQ0FOQ0VMIixiKCJDQU5DRUwiLCExKSwiUkVHSVNURVIiLGIoIlJFR0lTVEVSIiwhMSksIlNVQlNDUklCRSIsYigiU1VCU0NSSUJFIiwhMSksIk5PVElGWSIsYigiTk9USUZZIiwhMSksIlJFRkVSIixiKCJSRUZFUiIsITEpLCJQVUJMSVNIIixiKCJQVUJMSVNIIiwhMSksZnVuY3Rpb24oKXtyZXR1cm4odD10fHx7ZGF0YTp7fX0pLmRhdGEubWV0aG9kPXYoKSx0LmRhdGEubWV0aG9kfSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuc3RhdHVzX2NvZGU9cGFyc2VJbnQoZS5qb2luKCIiKSl9LGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnJlYXNvbl9waHJhc2U9digpfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT12KCl9LGZ1bmN0aW9uKCl7dmFyIGUscztmb3Iocz0odD10fHx7ZGF0YTp7fX0pLmRhdGEubXVsdGlfaGVhZGVyLmxlbmd0aCxlPTA7ZTxzO2UrKylpZihudWxsPT09dC5kYXRhLm11bHRpX2hlYWRlcltlXS5wYXJzZWQpe3QuZGF0YT1udWxsO2JyZWFrfW51bGwhPT10LmRhdGE/dC5kYXRhPXQuZGF0YS5tdWx0aV9oZWFkZXI6dC5kYXRhPS0xfSxmdW5jdGlvbigpe3ZhciBlOyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5tdWx0aV9oZWFkZXJ8fCh0LmRhdGEubXVsdGlfaGVhZGVyPVtdKTt0cnl7ZT1uZXcgbyh0LmRhdGEudXJpLHQuZGF0YS5kaXNwbGF5TmFtZSx0LmRhdGEucGFyYW1zKSxkZWxldGUgdC5kYXRhLnVyaSxkZWxldGUgdC5kYXRhLmRpc3BsYXlOYW1lLGRlbGV0ZSB0LmRhdGEucGFyYW1zfWNhdGNoKHQpe2U9bnVsbH10LmRhdGEubXVsdGlfaGVhZGVyLnB1c2goe3Bvc2l0aW9uOmQsb2Zmc2V0OncoKS5zdGFydC5vZmZzZXQscGFyc2VkOmV9KX0sZnVuY3Rpb24oZSl7JyInPT09KGU9digpLnRyaW0oKSlbMF0mJihlPWUuc3Vic3RyaW5nKDEsZS5sZW5ndGgtMSkpLCh0PXR8fHtkYXRhOnt9fSkuZGF0YS5kaXNwbGF5TmFtZT1lfSwicSIsYigicSIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5wYXJhbXN8fCh0LmRhdGEucGFyYW1zPXt9KSx0LmRhdGEucGFyYW1zLnE9ZX0sImV4cGlyZXMiLGIoImV4cGlyZXMiLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEucGFyYW1zfHwodC5kYXRhLnBhcmFtcz17fSksdC5kYXRhLnBhcmFtcy5leHBpcmVzPWV9LGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLmpvaW4oIiIpKX0sIjAiLGIoIjAiLCExKSxmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHYoKSl9LGZ1bmN0aW9uKGUscyl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnBhcmFtc3x8KHQuZGF0YS5wYXJhbXM9e30pLHM9bnVsbD09PXM/dm9pZCAwOnNbMV0sdC5kYXRhLnBhcmFtc1tlLnRvTG93ZXJDYXNlKCldPXN9LCJyZW5kZXIiLGIoInJlbmRlciIsITApLCJzZXNzaW9uIixiKCJzZXNzaW9uIiwhMCksImljb24iLGIoImljb24iLCEwKSwiYWxlcnQiLGIoImFsZXJ0IiwhMCksZnVuY3Rpb24oKXsiQ29udGVudF9EaXNwb3NpdGlvbiI9PT0odD10fHx7ZGF0YTp7fX0pLnN0YXJ0UnVsZSYmKHQuZGF0YS50eXBlPXYoKS50b0xvd2VyQ2FzZSgpKX0sImhhbmRsaW5nIixiKCJoYW5kbGluZyIsITApLCJvcHRpb25hbCIsYigib3B0aW9uYWwiLCEwKSwicmVxdWlyZWQiLGIoInJlcXVpcmVkIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhPXBhcnNlSW50KGUuam9pbigiIikpfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT12KCl9LCJ0ZXh0IixiKCJ0ZXh0IiwhMCksImltYWdlIixiKCJpbWFnZSIsITApLCJhdWRpbyIsYigiYXVkaW8iLCEwKSwidmlkZW8iLGIoInZpZGVvIiwhMCksImFwcGxpY2F0aW9uIixiKCJhcHBsaWNhdGlvbiIsITApLCJtZXNzYWdlIixiKCJtZXNzYWdlIiwhMCksIm11bHRpcGFydCIsYigibXVsdGlwYXJ0IiwhMCksIngtIixiKCJ4LSIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS52YWx1ZT1wYXJzZUludChlLmpvaW4oIiIpKX0sZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhPWV9LGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5ldmVudD1lLnRvTG93ZXJDYXNlKCl9LGZ1bmN0aW9uKCl7dmFyIGU9KHQ9dHx8e2RhdGE6e319KS5kYXRhLnRhZzt0LmRhdGE9bmV3IG8odC5kYXRhLnVyaSx0LmRhdGEuZGlzcGxheU5hbWUsdC5kYXRhLnBhcmFtcyksZSYmdC5kYXRhLnNldFBhcmFtKCJ0YWciLGUpfSwidGFnIixiKCJ0YWciLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudGFnPWV9LGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YT1wYXJzZUludChlLmpvaW4oIiIpKX0sZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhPWV9LGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhPW5ldyBvKHQuZGF0YS51cmksdC5kYXRhLmRpc3BsYXlOYW1lLHQuZGF0YS5wYXJhbXMpfSwiZGlnZXN0IixiKCJEaWdlc3QiLCEwKSwicmVhbG0iLGIoInJlYWxtIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnJlYWxtPWV9LCJkb21haW4iLGIoImRvbWFpbiIsITApLCJub25jZSIsYigibm9uY2UiLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEubm9uY2U9ZX0sIm9wYXF1ZSIsYigib3BhcXVlIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLm9wYXF1ZT1lfSwic3RhbGUiLGIoInN0YWxlIiwhMCksInRydWUiLGIoInRydWUiLCEwKSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5zdGFsZT0hMH0sImZhbHNlIixiKCJmYWxzZSIsITApLGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnN0YWxlPSExfSwiYWxnb3JpdGhtIixiKCJhbGdvcml0aG0iLCEwKSwibWQ1IixiKCJNRDUiLCEwKSwibWQ1LXNlc3MiLGIoIk1ENS1zZXNzIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLmFsZ29yaXRobT1lLnRvVXBwZXJDYXNlKCl9LCJxb3AiLGIoInFvcCIsITApLCJhdXRoLWludCIsYigiYXV0aC1pbnQiLCEwKSwiYXV0aCIsYigiYXV0aCIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5xb3B8fCh0LmRhdGEucW9wPVtdKSx0LmRhdGEucW9wLnB1c2goZS50b0xvd2VyQ2FzZSgpKX0sZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnZhbHVlPXBhcnNlSW50KGUuam9pbigiIikpfSxmdW5jdGlvbigpe3ZhciBlLHM7Zm9yKHM9KHQ9dHx8e2RhdGE6e319KS5kYXRhLm11bHRpX2hlYWRlci5sZW5ndGgsZT0wO2U8cztlKyspaWYobnVsbD09PXQuZGF0YS5tdWx0aV9oZWFkZXJbZV0ucGFyc2VkKXt0LmRhdGE9bnVsbDticmVha31udWxsIT09dC5kYXRhP3QuZGF0YT10LmRhdGEubXVsdGlfaGVhZGVyOnQuZGF0YT0tMX0sZnVuY3Rpb24oKXt2YXIgZTsodD10fHx7ZGF0YTp7fX0pLmRhdGEubXVsdGlfaGVhZGVyfHwodC5kYXRhLm11bHRpX2hlYWRlcj1bXSk7dHJ5e2U9bmV3IG8odC5kYXRhLnVyaSx0LmRhdGEuZGlzcGxheU5hbWUsdC5kYXRhLnBhcmFtcyksZGVsZXRlIHQuZGF0YS51cmksZGVsZXRlIHQuZGF0YS5kaXNwbGF5TmFtZSxkZWxldGUgdC5kYXRhLnBhcmFtc31jYXRjaCh0KXtlPW51bGx9dC5kYXRhLm11bHRpX2hlYWRlci5wdXNoKHtwb3NpdGlvbjpkLG9mZnNldDp3KCkuc3RhcnQub2Zmc2V0LHBhcnNlZDplfSl9LGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhPW5ldyBvKHQuZGF0YS51cmksdC5kYXRhLmRpc3BsYXlOYW1lLHQuZGF0YS5wYXJhbXMpfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5yZXBsYWNlc19mcm9tX3RhZyYmdC5kYXRhLnJlcGxhY2VzX3RvX3RhZ3x8KHQuZGF0YT0tMSl9LGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhPXtjYWxsX2lkOnQuZGF0YX19LCJmcm9tLXRhZyIsYigiZnJvbS10YWciLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEucmVwbGFjZXNfZnJvbV90YWc9ZX0sInRvLXRhZyIsYigidG8tdGFnIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnJlcGxhY2VzX3RvX3RhZz1lfSwiZWFybHktb25seSIsYigiZWFybHktb25seSIsITApLGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLmVhcmx5X29ubHk9ITB9LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuW2VdLmNvbmNhdCh0KX0oZSx0KX0sZnVuY3Rpb24oZSl7IlJlcXVpcmUiPT09KHQ9dHx8e2RhdGE6e319KS5zdGFydFJ1bGUmJih0LmRhdGE9ZXx8W10pfSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudmFsdWU9cGFyc2VJbnQoZS5qb2luKCIiKSl9LCJhY3RpdmUiLGIoImFjdGl2ZSIsITApLCJwZW5kaW5nIixiKCJwZW5kaW5nIiwhMCksInRlcm1pbmF0ZWQiLGIoInRlcm1pbmF0ZWQiLCEwKSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5zdGF0ZT12KCl9LCJyZWFzb24iLGIoInJlYXNvbiIsITApLGZ1bmN0aW9uKGUpe3Q9dHx8e2RhdGE6e319LHZvaWQgMCE9PWUmJih0LmRhdGEucmVhc29uPWUpfSxmdW5jdGlvbihlKXt0PXR8fHtkYXRhOnt9fSx2b2lkIDAhPT1lJiYodC5kYXRhLmV4cGlyZXM9ZSl9LCJyZXRyeV9hZnRlciIsYigicmV0cnlfYWZ0ZXIiLCEwKSxmdW5jdGlvbihlKXt0PXR8fHtkYXRhOnt9fSx2b2lkIDAhPT1lJiYodC5kYXRhLnJldHJ5X2FmdGVyPWUpfSwiZGVhY3RpdmF0ZWQiLGIoImRlYWN0aXZhdGVkIiwhMCksInByb2JhdGlvbiIsYigicHJvYmF0aW9uIiwhMCksInJlamVjdGVkIixiKCJyZWplY3RlZCIsITApLCJ0aW1lb3V0IixiKCJ0aW1lb3V0IiwhMCksImdpdmV1cCIsYigiZ2l2ZXVwIiwhMCksIm5vcmVzb3VyY2UiLGIoIm5vcmVzb3VyY2UiLCEwKSwiaW52YXJpYW50IixiKCJpbnZhcmlhbnQiLCEwKSxmdW5jdGlvbihlKXsiU3VwcG9ydGVkIj09PSh0PXR8fHtkYXRhOnt9fSkuc3RhcnRSdWxlJiYodC5kYXRhPWV8fFtdKX0sZnVuY3Rpb24oKXt2YXIgZT0odD10fHx7ZGF0YTp7fX0pLmRhdGEudGFnO3QuZGF0YT1uZXcgbyh0LmRhdGEudXJpLHQuZGF0YS5kaXNwbGF5TmFtZSx0LmRhdGEucGFyYW1zKSxlJiZ0LmRhdGEuc2V0UGFyYW0oInRhZyIsZSl9LCJ0dGwiLGIoInR0bCIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS50dGw9ZX0sIm1hZGRyIixiKCJtYWRkciIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5tYWRkcj1lfSwicmVjZWl2ZWQiLGIoInJlY2VpdmVkIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnJlY2VpdmVkPWV9LCJicmFuY2giLGIoImJyYW5jaCIsITApLGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5icmFuY2g9ZX0sInJwb3J0IixiKCJycG9ydCIsITApLGZ1bmN0aW9uKGUpe3Q9dHx8e2RhdGE6e319LHZvaWQgMCE9PWUmJih0LmRhdGEucnBvcnQ9ZS5qb2luKCIiKSl9LGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5wcm90b2NvbD1lfSxiKCJVRFAiLCEwKSxiKCJUQ1AiLCEwKSxiKCJUTFMiLCEwKSxiKCJTQ1RQIiwhMCksZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnRyYW5zcG9ydD1lfSxmdW5jdGlvbigpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5ob3N0PXYoKX0sZnVuY3Rpb24oZSl7KHQ9dHx8e2RhdGE6e319KS5kYXRhLnBvcnQ9cGFyc2VJbnQoZS5qb2luKCIiKSl9LGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLmpvaW4oIiIpKX0sZnVuY3Rpb24oZSl7IlNlc3Npb25fRXhwaXJlcyI9PT0odD10fHx7ZGF0YTp7fX0pLnN0YXJ0UnVsZSYmKHQuZGF0YS5kZWx0YVNlY29uZHM9ZSl9LCJyZWZyZXNoZXIiLGIoInJlZnJlc2hlciIsITEpLCJ1YXMiLGIoInVhcyIsITEpLCJ1YWMiLGIoInVhYyIsITEpLGZ1bmN0aW9uKGUpeyJTZXNzaW9uX0V4cGlyZXMiPT09KHQ9dHx8e2RhdGE6e319KS5zdGFydFJ1bGUmJih0LmRhdGEucmVmcmVzaGVyPWUpfSxmdW5jdGlvbihlKXsiTWluX1NFIj09PSh0PXR8fHtkYXRhOnt9fSkuc3RhcnRSdWxlJiYodC5kYXRhPWUpfSwic3R1bnMiLGIoInN0dW5zIiwhMCksInN0dW4iLGIoInN0dW4iLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEuc2NoZW1lPWV9LGZ1bmN0aW9uKGUpeyh0PXR8fHtkYXRhOnt9fSkuZGF0YS5ob3N0PWV9LCI/dHJhbnNwb3J0PSIsYigiP3RyYW5zcG9ydD0iLCExKSwidHVybnMiLGIoInR1cm5zIiwhMCksInR1cm4iLGIoInR1cm4iLCEwKSxmdW5jdGlvbihlKXsodD10fHx7ZGF0YTp7fX0pLmRhdGEudHJhbnNwb3J0PWV9LGZ1bmN0aW9uKCl7KHQ9dHx8e2RhdGE6e319KS5kYXRhPXYoKX0sIlJlZmVycmVkLUJ5IixiKCJSZWZlcnJlZC1CeSIsITEpLCJiIixiKCJiIiwhMSksImNpZCIsYigiY2lkIiwhMSldLGg9W0koJzIgIiI2IDchJyksSSgnNCIiIjUhNyMnKSxJKCc0JCIiNSE3JScpLEkoJzQmIiI1ITdcJycpLEkoIjsnLiMgJjsoIiksSSgnNCgiIjUhNyknKSxJKCc0KiIiNSE3KycpLEkoJzIsIiI2LDctJyksSSgnMi4iIjYuNy8nKSxJKCc0MCIiNSE3MScpLEkoJzIyIiI2MjczLlx4ODkgJjI0IiI2NDc1Ln0gJjI2IiI2Njc3LnEgJjI4IiI2ODc5LmUgJjI6IiI2Ojc7LlkgJjI8IiI2PDc9Lk0gJjI+IiI2Pjc/LkEgJjJAIiI2QDdBLjUgJjJCIiI2QjdDLikgJjJEIiI2RDdFJyksSSgiOykuIyAmOywiKSxJKCcyRiIiNkY3Ry59ICYySCIiNkg3SS5xICYySiIiNko3Sy5lICYyTCIiNkw3TS5ZICYyTiIiNk43Ty5NICYyUCIiNlA3US5BICYyUiIiNlI3Uy41ICYyVCIiNlQ3VS4pICYyViIiNlY3VycpLEkoJyUlMlgiIjZYN1kvNSM7Iy8sJDsjLyMkKyMpKCNcJyMoIlwnIyZcJyMvIiEmLCknKSxJKCclJSQ7JDAjKjskJi8sIzsgLyMkKyIpKCJcJyMmXCcjLiIgJiIvPSMkOyQvJiMwIyo7JCYmJiMvXCckOCI6WiIgKSgiXCcjJlwnIycpLEkoJzsuLiIgJiInKSxJKCIlJDsnLiMgJjsoMCkqOycuIyAmOygmLz8jMjhcIlwiNjg3OS8wJDsvLyckOCM6WyMgKSgjJyMoXCInIyYnIyIpLEkoJyUlJDsyLyYjMCMqOzImJiYjL2cjJCUkOy4wIyo7LiYvLCM7Mi8jJCsiKSgiXCcjJlwnIzA9KiUkOy4wIyo7LiYvLCM7Mi8jJCsiKSgiXCcjJlwnIyYvIyQrIikoIlwnIyZcJyMvIiEmLCknKSxJKCc0XFwiIjUhN10uIyAmOzMnKSxJKCc0XiIiNSE3XycpLEkoJzRgIiI1ITdhJyksSSgnOyEuKSAmNGIiIjUhN2MnKSxJKCclJDspLlx4OTUgJjJGIiI2RjdHLlx4ODkgJjJKIiI2SjdLLn0gJjJMIiI2TDdNLnEgJjJYIiI2WDdZLmUgJjJQIiI2UDdRLlkgJjJIIiI2SDdJLk0gJjJAIiI2QDdBLkEgJjJkIiI2ZDdlLjUgJjJSIiI2UjdTLikgJjJOIiI2TjdPL1x4OWUjMFx4OWIqOykuXHg5NSAmMkYiIjZGN0cuXHg4OSAmMkoiIjZKN0sufSAmMkwiIjZMN00ucSAmMlgiIjZYN1kuZSAmMlAiIjZQN1EuWSAmMkgiIjZIN0kuTSAmMkAiIjZAN0EuQSAmMmQiIjZkN2UuNSAmMlIiIjZSN1MuKSAmMk4iIjZON08mJiYjLyIhJiwpJyksSSgnJSQ7KS5ceDg5ICYyRiIiNkY3Ry59ICYyTCIiNkw3TS5xICYyWCIiNlg3WS5lICYyUCIiNlA3US5ZICYySCIiNkg3SS5NICYyQCIiNkA3QS5BICYyZCIiNmQ3ZS41ICYyUiIiNlI3Uy4pICYyTiIiNk43Ty9ceDkyIzBceDhmKjspLlx4ODkgJjJGIiI2RjdHLn0gJjJMIiI2TDdNLnEgJjJYIiI2WDdZLmUgJjJQIiI2UDdRLlkgJjJIIiI2SDdJLk0gJjJAIiI2QDdBLkEgJjJkIiI2ZDdlLjUgJjJSIiI2UjdTLikgJjJOIiI2TjdPJiYmIy8iISYsKScpLEkoJzJUIiI2VDdVLlx4ZTMgJjJWIiI2VjdXLlx4ZDcgJjJmIiI2ZjdnLlx4Y2IgJjJoIiI2aDdpLlx4YmYgJjI6IiI2Ojc7Llx4YjMgJjJEIiI2RDdFLlx4YTcgJjIyIiI2MjczLlx4OWIgJjI4IiI2ODc5Llx4OGYgJjJqIiI2ajdrLlx4ODMgJjsmLn0gJjI0IiI2NDc1LnEgJjJsIiI2bDdtLmUgJjJuIiI2bjdvLlkgJjI2IiI2Njc3Lk0gJjI+IiI2Pjc/LkEgJjJwIiI2cDdxLjUgJjJyIiI2cjdzLikgJjtcJy4jICY7KCcpLEkoJyUkOykuXHUwMTJiICYyRiIiNkY3Ry5cdTAxMWYgJjJKIiI2SjdLLlx1MDExMyAmMkwiIjZMN00uXHUwMTA3ICYyWCIiNlg3WS5ceGZiICYyUCIiNlA3US5ceGVmICYySCIiNkg3SS5ceGUzICYyQCIiNkA3QS5ceGQ3ICYyZCIiNmQ3ZS5ceGNiICYyUiIiNlI3Uy5ceGJmICYyTiIiNk43Ty5ceGIzICYyVCIiNlQ3VS5ceGE3ICYyViIiNlY3Vy5ceDliICYyZiIiNmY3Zy5ceDhmICYyaCIiNmg3aS5ceDgzICYyOCIiNjg3OS53ICYyaiIiNmo3ay5rICY7Ji5lICYyNCIiNjQ3NS5ZICYybCIiNmw3bS5NICYybiIiNm43by5BICYyNiIiNjY3Ny41ICYycCIiNnA3cS4pICYyciIiNnI3cy9cdTAxMzQjMFx1MDEzMSo7KS5cdTAxMmIgJjJGIiI2RjdHLlx1MDExZiAmMkoiIjZKN0suXHUwMTEzICYyTCIiNkw3TS5cdTAxMDcgJjJYIiI2WDdZLlx4ZmIgJjJQIiI2UDdRLlx4ZWYgJjJIIiI2SDdJLlx4ZTMgJjJAIiI2QDdBLlx4ZDcgJjJkIiI2ZDdlLlx4Y2IgJjJSIiI2UjdTLlx4YmYgJjJOIiI2TjdPLlx4YjMgJjJUIiI2VDdVLlx4YTcgJjJWIiI2VjdXLlx4OWIgJjJmIiI2ZjdnLlx4OGYgJjJoIiI2aDdpLlx4ODMgJjI4IiI2ODc5LncgJjJqIiI2ajdrLmsgJjsmLmUgJjI0IiI2NDc1LlkgJjJsIiI2bDdtLk0gJjJuIiI2bjdvLkEgJjI2IiI2Njc3LjUgJjJwIiI2cDdxLikgJjJyIiI2cjdzJiYmIy8iISYsKScpLEkoIiU7Ly8/IzJQXCJcIjZQN1EvMCQ7Ly8nJDgjOnQjICkoIycjKFwiJyMmJyMiKSxJKCIlOy8vPyMyNFwiXCI2NDc1LzAkOy8vJyQ4Izp1IyApKCMnIyhcIicjJicjIiksSSgiJTsvLz8jMj5cIlwiNj43Py8wJDsvLyckOCM6diMgKSgjJyMoXCInIyYnIyIpLEkoIiU7Ly8/IzJUXCJcIjZUN1UvMCQ7Ly8nJDgjOncjICkoIycjKFwiJyMmJyMiKSxJKCIlOy8vPyMyVlwiXCI2VjdXLzAkOy8vJyQ4Izp4IyApKCMnIyhcIicjJicjIiksSSgnJTJoIiI2aDdpLzAjOy8vXCckOCI6eSIgKSgiXCcjJlwnIycpLEkoJyU7Ly82IzJmIiI2ZjdnL1wnJDgiOnoiICkoIlwnIyZcJyMnKSxJKCIlOy8vPyMyRFwiXCI2RDdFLzAkOy8vJyQ4Izp7IyApKCMnIyhcIicjJicjIiksSSgiJTsvLz8jMjJcIlwiNjI3My8wJDsvLyckOCM6fCMgKSgjJyMoXCInIyYnIyIpLEkoIiU7Ly8/IzI4XCJcIjY4NzkvMCQ7Ly8nJDgjOn0jICkoIycjKFwiJyMmJyMiKSxJKCIlOy8vMCM7Ji8nJDhcIjp+XCIgKShcIicjJicjIiksSSgiJTsmLzAjOy8vJyQ4XCI6flwiICkoXCInIyYnIyIpLEkoIiU7PS9UIyQ7Ry4pICY7Sy4jICY7RjAvKjtHLikgJjtLLiMgJjtGJi8sJDs+LyMkKyMpKCMnIyhcIicjJicjIiksSSgnNFx4N2YiIjUhN1x4ODAuQSAmNFx4ODEiIjUhN1x4ODIuNSAmNFx4ODMiIjUhN1x4ODQuKSAmOzMuIyAmOy4nKSxJKCIlJTsvL1EjOyYvSCQkO0ouIyAmO0swKSo7Si4jICY7SyYvLCQ7Ji8jJCskKSgkJyMoIycjKFwiJyMmJyMvXCIhJiwpIiksSSgiJTsvL10jOyYvVCQlJDtKLiMgJjtLMCkqO0ouIyAmO0smL1wiISYsKS8xJDsmLygkOCQ6XHg4NSQhISkoJCcjKCMnIyhcIicjJicjIiksSSgnOy4uRyAmMkwiIjZMN00uOyAmNFx4ODYiIjUhN1x4ODcuLyAmNFx4ODMiIjUhN1x4ODQuIyAmOzMnKSxJKCclMmoiIjZqN2svSiM0XHg4OCIiNSE3XHg4OS41ICY0XHg4YSIiNSE3XHg4Yi4pICY0XHg4YyIiNSE3XHg4ZC8jJCsiKSgiXCcjJlwnIycpLEkoIiU7Ti9NIzI4XCJcIjY4NzkvPiQ7Ty5cIiAmXCIvMCQ7Uy8nJDgkOlx4OGUkICkoJCcjKCMnIyhcIicjJicjIiksSSgiJTtOL2QjMjhcIlwiNjg3OS9VJDtPLlwiICZcIi9HJDtTLz4kO18vNSQ7bC5cIiAmXCIvJyQ4JjpceDhmJiApKCYnIyglJyMoJCcjKCMnIyhcIicjJicjIiksSSgnJTNceDkwIiI1JDdceDkxLikgJjNceDkyIiI1IzdceDkzL1wnIDghOlx4OTQhISApJyksSSgnJTtQL10jJTI4IiI2ODc5LywjO1IvIyQrIikoIlwnIyZcJyMuIiAmIi82JDI6IiI2Ojc7L1wnJDgjOlx4OTUjICkoI1wnIygiXCcjJlwnIycpLEkoIiQ7Ky4pICY7LS4jICY7US8yIzAvKjsrLikgJjstLiMgJjtRJiYmIyIpLEkoJzI8IiI2PDc9LnEgJjI+IiI2Pjc/LmUgJjJAIiI2QDdBLlkgJjJCIiI2QjdDLk0gJjJEIiI2RDdFLkEgJjIyIiI2MjczLjUgJjI2IiI2Njc3LikgJjI0IiI2NDc1JyksSSgnJSQ7Ky5fICY7LS5ZICYyPCIiNjw3PS5NICYyPiIiNj43Py5BICYyQCIiNkA3QS41ICYyQiIiNkI3Qy4pICYyRCIiNkQ3RTBlKjsrLl8gJjstLlkgJjI8IiI2PDc9Lk0gJjI+IiI2Pjc/LkEgJjJAIiI2QDdBLjUgJjJCIiI2QjdDLikgJjJEIiI2RDdFJi8mIDghOlx4OTYhICknKSxJKCclO1QvSiMlMjgiIjY4NzkvLCM7Xi8jJCsiKSgiXCcjJlwnIy4iICYiLyMkKyIpKCJcJyMmXCcjJyksSSgiJTtVLikgJjtcXC4jICY7WC8mIDghOlx4OTchICkiKSxJKCclJCU7Vi8yIzJKIiI2SjdLLyMkKyIpKCJcJyMmXCcjMDwqJTtWLzIjMkoiIjZKN0svIyQrIikoIlwnIyZcJyMmL0QjO1cvOyQySiIiNko3Sy4iICYiL1wnJDgjOlx4OTgjICkoI1wnIygiXCcjJlwnIycpLEkoJyQ0XHg5OSIiNSE3XHg5YS8sIzApKjRceDk5IiI1ITdceDlhJiYmIycpLEkoJyU0JCIiNSE3JS8/IyQ0XHg5YiIiNSE3XHg5YzApKjRceDliIiI1ITdceDljJi8jJCsiKSgiXCcjJlwnIycpLEkoJyUybCIiNmw3bS8/IztZLzYkMm4iIjZuN28vXCckOCM6XHg5ZCMgKSgjXCcjKCJcJyMmXCcjJyksSSgnJSU7Wi9ceGIzIzI4IiI2ODc5L1x4YTQkO1ovXHg5YiQyOCIiNjg3OS9ceDhjJDtaL1x4ODMkMjgiIjY4NzkvdCQ7Wi9rJDI4IiI2ODc5L1xcJDtaL1MkMjgiIjY4NzkvRCQ7Wi87JDI4IiI2ODc5LywkO1svIyQrLSkoLVwnIygsXCcjKCtcJyMoKlwnIygpXCcjKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTA3OTAgJiUyXHg5ZSIiNlx4OWU3XHg5Zi9ceGE0IztaL1x4OWIkMjgiIjY4NzkvXHg4YyQ7Wi9ceDgzJDI4IiI2ODc5L3QkO1ovayQyOCIiNjg3OS9cXCQ7Wi9TJDI4IiI2ODc5L0QkO1ovOyQyOCIiNjg3OS8sJDtbLyMkKywpKCxcJyMoK1wnIygqXCcjKClcJyMoKFwnIyhcJ1wnIygmXCcjKCVcJyMoJFwnIygjXCcjKCJcJyMmXCcjLlx1MDZmOSAmJTJceDllIiI2XHg5ZTdceDlmL1x4OGMjO1ovXHg4MyQyOCIiNjg3OS90JDtaL2skMjgiIjY4NzkvXFwkO1ovUyQyOCIiNjg3OS9EJDtaLzskMjgiIjY4NzkvLCQ7Wy8jJCsqKSgqXCcjKClcJyMoKFwnIyhcJ1wnIygmXCcjKCVcJyMoJFwnIygjXCcjKCJcJyMmXCcjLlx1MDY3YSAmJTJceDllIiI2XHg5ZTdceDlmL3QjO1ovayQyOCIiNjg3OS9cXCQ7Wi9TJDI4IiI2ODc5L0QkO1ovOyQyOCIiNjg3OS8sJDtbLyMkKygpKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTA2MTMgJiUyXHg5ZSIiNlx4OWU3XHg5Zi9cXCM7Wi9TJDI4IiI2ODc5L0QkO1ovOyQyOCIiNjg3OS8sJDtbLyMkKyYpKCZcJyMoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMuXHUwNWM0ICYlMlx4OWUiIjZceDllN1x4OWYvRCM7Wi87JDI4IiI2ODc5LywkO1svIyQrJCkoJFwnIygjXCcjKCJcJyMmXCcjLlx1MDU4ZCAmJTJceDllIiI2XHg5ZTdceDlmLywjO1svIyQrIikoIlwnIyZcJyMuXHUwNTZlICYlMlx4OWUiIjZceDllN1x4OWYvLCM7Wi8jJCsiKSgiXCcjJlwnIy5cdTA1NGYgJiU7Wi9ceDliIzJceDllIiI2XHg5ZTdceDlmL1x4OGMkO1ovXHg4MyQyOCIiNjg3OS90JDtaL2skMjgiIjY4NzkvXFwkO1ovUyQyOCIiNjg3OS9EJDtaLzskMjgiIjY4NzkvLCQ7Wy8jJCsrKSgrXCcjKCpcJyMoKVwnIygoXCcjKFwnXCcjKCZcJyMoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMuXHUwNGM3ICYlO1ovXHhhYSMlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4ODMkMlx4OWUiIjZceDllN1x4OWYvdCQ7Wi9rJDI4IiI2ODc5L1xcJDtaL1MkMjgiIjY4NzkvRCQ7Wi87JDI4IiI2ODc5LywkO1svIyQrKikoKlwnIygpXCcjKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTA0MzAgJiU7Wi9ceGI5IyUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvXHg5MiQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL2skMlx4OWUiIjZceDllN1x4OWYvXFwkO1ovUyQyOCIiNjg3OS9EJDtaLzskMjgiIjY4NzkvLCQ7Wy8jJCspKSgpXCcjKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTAzOGEgJiU7Wi9ceGM4IyUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvXHhhMSQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL3okJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9TJDJceDllIiI2XHg5ZTdceDlmL0QkO1ovOyQyOCIiNjg3OS8sJDtbLyMkKygpKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTAyZDUgJiU7Wi9ceGQ3IyUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvXHhiMCQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4ODkkJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9iJCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvOyQyXHg5ZSIiNlx4OWU3XHg5Zi8sJDtbLyMkK1wnKShcJ1wnIygmXCcjKCVcJyMoJFwnIygjXCcjKCJcJyMmXCcjLlx1MDIxMSAmJTtaL1x4ZmUjJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9ceGQ3JCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvXHhiMCQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4ODkkJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9iJCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvOyQyXHg5ZSIiNlx4OWU3XHg5Zi8sJDtaLyMkKygpKChcJyMoXCdcJyMoJlwnIyglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy5cdTAxMjYgJiU7Wi9cdTAxMWMjJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9ceGY1JCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvXHhjZSQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiL1x4YTckJTI4IiI2ODc5LywjO1ovIyQrIikoIlwnIyZcJyMuIiAmIi9ceDgwJCUyOCIiNjg3OS8sIztaLyMkKyIpKCJcJyMmXCcjLiIgJiIvWSQlMjgiIjY4NzkvLCM7Wi8jJCsiKSgiXCcjJlwnIy4iICYiLzIkMlx4OWUiIjZceDllN1x4OWYvIyQrKCkoKFwnIyhcJ1wnIygmXCcjKCVcJyMoJFwnIygjXCcjKCJcJyMmXCcjLyYgOCE6XHhhMCEgKScpLEkoJyU7Iy9NIzsjLiIgJiIvPyQ7Iy4iICYiLzEkOyMuIiAmIi8jJCskKSgkXCcjKCNcJyMoIlwnIyZcJyMnKSxJKCIlO1ovOyMyOFwiXCI2ODc5LywkO1ovIyQrIykoIycjKFwiJyMmJyMuIyAmO1xcIiksSSgiJTtdL28jMkpcIlwiNko3Sy9gJDtdL1ckMkpcIlwiNko3Sy9IJDtdLz8kMkpcIlwiNko3Sy8wJDtdLyckOCc6XHhhMScgKSgnJyMoJicjKCUnIygkJyMoIycjKFwiJyMmJyMiKSxJKCclMlx4YTIiIjZceGEyN1x4YTMvMiM0XHhhNCIiNSE3XHhhNS8jJCsiKSgiXCcjJlwnIy5ceDk4ICYlMlx4YTYiIjZceGE2N1x4YTcvOyM0XHhhOCIiNSE3XHhhOS8sJDshLyMkKyMpKCNcJyMoIlwnIyZcJyMuaiAmJTJceGFhIiI2XHhhYTdceGFiLzUjOyEvLCQ7IS8jJCsjKSgjXCcjKCJcJyMmXCcjLkIgJiU0XHhhYyIiNSE3XHhhZC8sIzshLyMkKyIpKCJcJyMmXCcjLiMgJjshJyksSSgnJSU7IS4iICYiL1sjOyEuIiAmIi9NJDshLiIgJiIvPyQ7IS4iICYiLzEkOyEuIiAmIi8jJCslKSglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy9cJyA4ITpceGFlISEgKScpLEkoJyQlMjIiIjYyNzMvLCM7YC8jJCsiKSgiXCcjJlwnIzA8KiUyMiIiNjI3My8sIztgLyMkKyIpKCJcJyMmXCcjJicpLEkoIjthLkEgJjtiLjsgJjtjLjUgJjtkLi8gJjtlLikgJjtmLiMgJjtnIiksSSgnJTNceGFmIiI1KjdceGIwL2EjM1x4YjEiIjUjN1x4YjIuRyAmM1x4YjMiIjUjN1x4YjQuOyAmM1x4YjUiIjUkN1x4YjYuLyAmM1x4YjciIjUjN1x4YjguIyAmOzYvKCQ4IjpceGI5IiEgKSgiXCcjJlwnIycpLEkoJyUzXHhiYSIiNSU3XHhiYi9JIzNceGJjIiI1JTdceGJkLi8gJjNceGJlIiI1IjdceGJmLiMgJjs2LygkOCI6XHhjMCIhICkoIlwnIyZcJyMnKSxJKCclM1x4YzEiIjVcJzdceGMyLzEjO1x4OTAvKCQ4IjpceGMzIiEgKSgiXCcjJlwnIycpLEkoJyUzXHhjNCIiNSQ3XHhjNS8xIztceGYwLygkOCI6XHhjNiIhICkoIlwnIyZcJyMnKSxJKCclM1x4YzciIjUmN1x4YzgvMSM7VC8oJDgiOlx4YzkiISApKCJcJyMmXCcjJyksSSgnJTNceGNhIiI1IjdceGNiL04jJTI+IiI2Pjc/LywjOzYvIyQrIikoIlwnIyZcJyMuIiAmIi9cJyQ4IjpceGNjIiApKCJcJyMmXCcjJyksSSgnJTtoL1AjJTI+IiI2Pjc/LywjO2kvIyQrIikoIlwnIyZcJyMuIiAmIi8pJDgiOlx4Y2QiIiEgKSgiXCcjJlwnIycpLEkoJyUkO2ovJiMwIyo7aiYmJiMvIiEmLCknKSxJKCclJDtqLyYjMCMqO2omJiYjLyIhJiwpJyksSSgiO2suKSAmOysuIyAmOy0iKSxJKCcybCIiNmw3bS5lICYybiIiNm43by5ZICYyNCIiNjQ3NS5NICYyOCIiNjg3OS5BICYyPCIiNjw3PS41ICYyQCIiNkA3QS4pICYyQiIiNkI3QycpLEkoJyUyNiIiNjY3Ny9uIzttL2UkJCUyPCIiNjw3PS8sIzttLyMkKyIpKCJcJyMmXCcjMDwqJTI8IiI2PDc9LywjO20vIyQrIikoIlwnIyZcJyMmLyMkKyMpKCNcJyMoIlwnIyZcJyMnKSxJKCclO24vQSMyPiIiNj43Py8yJDtvLykkOCM6XHhjZSMiIiApKCNcJyMoIlwnIyZcJyMnKSxJKCIkO3AuKSAmOysuIyAmOy0vMiMwLyo7cC4pICY7Ky4jICY7LSYmJiMiKSxJKCIkO3AuKSAmOysuIyAmOy0wLyo7cC4pICY7Ky4jICY7LSYiKSxJKCcybCIiNmw3bS5lICYybiIiNm43by5ZICYyNCIiNjQ3NS5NICYyNiIiNjY3Ny5BICYyOCIiNjg3OS41ICYyQCIiNkA3QS4pICYyQiIiNkI3QycpLEkoIjtceDkxLiMgJjtyIiksSSgiJTtceDkwL0cjOycvPiQ7cy81JDsnLywkO1x4ODQvIyQrJSkoJScjKCQnIygjJyMoXCInIyYnIyIpLEkoIjtNLiMgJjt0IiksSSgiJTtceDdmL0UjMjhcIlwiNjg3OS82JDt1LiMgJjt4LyckOCM6XHhjZiMgKSgjJyMoXCInIyYnIyIpLEkoJyU7di4jICY7dy9KIyUyNiIiNjY3Ny8sIztceDgzLyMkKyIpKCJcJyMmXCcjLiIgJiIvIyQrIikoIlwnIyZcJyMnKSxJKCclMlx4ZDAiIjZceGQwN1x4ZDEvOiM7XHg4MC8xJDt3LiIgJiIvIyQrIykoI1wnIygiXCcjJlwnIycpLEkoJyUyNCIiNjQ3NS8sIzt7LyMkKyIpKCJcJyMmXCcjJyksSSgiJTt6LzMjJDt5MCMqO3kmLyMkK1wiKShcIicjJicjIiksSSgiOyouKSAmOysuIyAmOy0iKSxJKCc7Ky5ceDhmICY7LS5ceDg5ICYyMiIiNjI3My59ICYyNiIiNjY3Ny5xICYyOCIiNjg3OS5lICYyOiIiNjo3Oy5ZICYyPCIiNjw3PS5NICYyPiIiNj43Py5BICYyQCIiNkA3QS41ICYyQiIiNkI3Qy4pICYyRCIiNkQ3RScpLEkoJyU7fC9lIyQlMjQiIjY0NzUvLCM7fC8jJCsiKSgiXCcjJlwnIzA8KiUyNCIiNjQ3NS8sIzt8LyMkKyIpKCJcJyMmXCcjJi8jJCsiKSgiXCcjJlwnIycpLEkoJyUkO34wIyo7fiYvZSMkJTIyIiI2MjczLywjO30vIyQrIikoIlwnIyZcJyMwPColMjIiIjYyNzMvLCM7fS8jJCsiKSgiXCcjJlwnIyYvIyQrIikoIlwnIyZcJyMnKSxJKCIkO34wIyo7fiYiKSxJKCc7Ky53ICY7LS5xICYyOCIiNjg3OS5lICYyOiIiNjo3Oy5ZICYyPCIiNjw3PS5NICYyPiIiNj43Py5BICYyQCIiNkA3QS41ICYyQiIiNkI3Qy4pICYyRCIiNkQ3RScpLEkoJyUlOyIvXHg4NyMkOyIuRyAmOyEuQSAmMkAiIjZAN0EuNSAmMkYiIjZGN0cuKSAmMkoiIjZKN0swTSo7Ii5HICY7IS5BICYyQCIiNkA3QS41ICYyRiIiNkY3Ry4pICYySiIiNko3SyYvIyQrIikoIlwnIyZcJyMvJiA4ITpceGQyISApJyksSSgiO1x4ODEuIyAmO1x4ODIiKSxJKCclJTtPLzIjMjoiIjY6NzsvIyQrIikoIlwnIyZcJyMuIiAmIi8sIztTLyMkKyIpKCJcJyMmXCcjLiIgJiInKSxJKCckOysuXHg4MyAmOy0ufSAmMkIiIjZCN0MucSAmMkQiIjZEN0UuZSAmMjIiIjYyNzMuWSAmMjgiIjY4NzkuTSAmMjoiIjY6NzsuQSAmMjwiIjY8Nz0uNSAmMj4iIjY+Nz8uKSAmMkAiIjZAN0EvXHg4YyMwXHg4OSo7Ky5ceDgzICY7LS59ICYyQiIiNkI3Qy5xICYyRCIiNkQ3RS5lICYyMiIiNjI3My5ZICYyOCIiNjg3OS5NICYyOiIiNjo3Oy5BICYyPCIiNjw3PS41ICYyPiIiNj43Py4pICYyQCIiNkA3QSYmJiMnKSxJKCIkO3kwIyo7eSYiKSxJKCclM1x4OTIiIjUjN1x4ZDMvcSMyNCIiNjQ3NS9iJCQ7IS8mIzAjKjshJiYmIy9MJDJKIiI2SjdLLz0kJDshLyYjMCMqOyEmJiYjL1wnJDglOlx4ZDQlICkoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMnKSxJKCcyXHhkNSIiNlx4ZDU3XHhkNicpLEkoJzJceGQ3IiI2XHhkNzdceGQ4JyksSSgnMlx4ZDkiIjZceGQ5N1x4ZGEnKSxJKCcyXHhkYiIiNlx4ZGI3XHhkYycpLEkoJzJceGRkIiI2XHhkZDdceGRlJyksSSgnMlx4ZGYiIjZceGRmN1x4ZTAnKSxJKCcyXHhlMSIiNlx4ZTE3XHhlMicpLEkoJzJceGUzIiI2XHhlMzdceGU0JyksSSgnMlx4ZTUiIjZceGU1N1x4ZTYnKSxJKCcyXHhlNyIiNlx4ZTc3XHhlOCcpLEkoJzJceGU5IiI2XHhlOTdceGVhJyksSSgiJTtceDg1LlkgJjtceDg2LlMgJjtceDg4Lk0gJjtceDg5LkcgJjtceDhhLkEgJjtceDhiLjsgJjtceDhjLjUgJjtceDhmLi8gJjtceDhkLikgJjtceDhlLiMgJjs2LyYgOCE6XHhlYiEgKSIpLEkoIiU7XHg4NC9HIzsnLz4kO1x4OTIvNSQ7Jy8sJDtceDk0LyMkKyUpKCUnIygkJyMoIycjKFwiJyMmJyMiKSxJKCIlO1x4OTMvJyA4ITpceGVjISEgKSIpLEkoIiU7IS81IzshLywkOyEvIyQrIykoIycjKFwiJyMmJyMiKSxJKCIlJDsqLkEgJjsrLjsgJjstLjUgJjszLi8gJjs0LikgJjsnLiMgJjsoMEcqOyouQSAmOysuOyAmOy0uNSAmOzMuLyAmOzQuKSAmOycuIyAmOygmLyYgOCE6XHhlZCEgKSIpLEkoIiU7XHhiNi9ZIyQlO0EvLCM7XHhiNi8jJCtcIikoXCInIyYnIzA2KiU7QS8sIztceGI2LyMkK1wiKShcIicjJicjJi8jJCtcIikoXCInIyYnIyIpLEkoJyU7OS9OIyUyOiIiNjo3Oy8sIzs5LyMkKyIpKCJcJyMmXCcjLiIgJiIvXCckOCI6XHhlZSIgKSgiXCcjJlwnIycpLEkoIiU7Oi5jICYlO1x4OTgvWSMkJTtBLywjO1x4OTgvIyQrXCIpKFwiJyMmJyMwNiolO0EvLCM7XHg5OC8jJCtcIikoXCInIyYnIyYvIyQrXCIpKFwiJyMmJyMvJiA4ITpceGVmISApIiksSSgiJTtMLiMgJjtceDk5L10jJCU7Qi8sIztceDliLyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4OWIvIyQrXCIpKFwiJyMmJyMmLyckOFwiOlx4ZjBcIiApKFwiJyMmJyMiKSxJKCIlO1x4OWEuXCIgJlwiLz4jO0AvNSQ7TS8sJDs/LyMkKyQpKCQnIygjJyMoXCInIyYnIyIpLEkoIiUlOzYvWSMkJTsuLywjOzYvIyQrXCIpKFwiJyMmJyMwNiolOy4vLCM7Ni8jJCtcIikoXCInIyYnIyYvIyQrXCIpKFwiJyMmJyMuIyAmO0gvJyA4ITpceGYxISEgKSIpLEkoIjtceDljLikgJjtceDlkLiMgJjtceGEwIiksSSgiJTNceGYyXCJcIjUhN1x4ZjMvOiM7PC8xJDtceDlmLygkOCM6XHhmNCMhICkoIycjKFwiJyMmJyMiKSxJKCIlM1x4ZjVcIlwiNSc3XHhmNi86Izs8LzEkO1x4OWUvKCQ4IzpceGY3IyEgKSgjJyMoXCInIyYnIyIpLEkoIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpceGY4ISEgKSIpLEkoJyUyXHhmOSIiNlx4Zjk3XHhmYS9vIyUySiIiNko3Sy9NIzshLiIgJiIvPyQ7IS4iICYiLzEkOyEuIiAmIi8jJCskKSgkXCcjKCNcJyMoIlwnIyZcJyMuIiAmIi9cJyQ4IjpceGZiIiApKCJcJyMmXCcjJyksSSgnJTs2L0ojJTs8LywjO1x4YTEvIyQrIikoIlwnIyZcJyMuIiAmIi8pJDgiOlx4ZmMiIiEgKSgiXCcjJlwnIycpLEkoIjs2LikgJjtULiMgJjtIIiksSSgiJTtceGEzL1kjJCU7Qi8sIztceGE0LyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4YTQvIyQrXCIpKFwiJyMmJyMmLyMkK1wiKShcIicjJicjIiksSSgnJTNceGZkIiI1JjdceGZlLkcgJjNceGZmIiI1XCc3XHUwMTAwLjsgJjNcdTAxMDEiIjUkN1x1MDEwMi4vICYzXHUwMTAzIiI1JTdcdTAxMDQuIyAmOzYvJiA4ITpcdTAxMDUhICknKSxJKCI7XHhhNS4jICY7XHhhMCIpLEkoJyUzXHUwMTA2IiI1KDdcdTAxMDcvTSM7PC9EJDNcdTAxMDgiIjUoN1x1MDEwOS4vICYzXHUwMTBhIiI1KDdcdTAxMGIuIyAmOzYvIyQrIykoI1wnIygiXCcjJlwnIycpLEkoIiU7Ni9ZIyQlO0EvLCM7Ni8jJCtcIikoXCInIyYnIzA2KiU7QS8sIzs2LyMkK1wiKShcIicjJicjJi8jJCtcIikoXCInIyYnIyIpLEkoIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpcdTAxMGMhISApIiksSSgiJTtceGE5LyYgOCE6XHUwMTBkISApIiksSSgiJTtceGFhL2sjOzsvYiQ7XHhhZi9ZJCQlO0IvLCM7XHhiMC8jJCtcIikoXCInIyYnIzA2KiU7Qi8sIztceGIwLyMkK1wiKShcIicjJicjJi8jJCskKSgkJyMoIycjKFwiJyMmJyMiKSxJKCI7XHhhYi4jICY7XHhhYyIpLEkoJzNcdTAxMGUiIjUkN1x1MDEwZi5TICYzXHUwMTEwIiI1JTdcdTAxMTEuRyAmM1x1MDExMiIiNSU3XHUwMTEzLjsgJjNcdTAxMTQiIjUlN1x1MDExNS4vICYzXHUwMTE2IiI1KzdcdTAxMTcuIyAmO1x4YWQnKSxJKCczXHUwMTE4IiI1XCc3XHUwMTE5Li8gJjNcdTAxMWEiIjUpN1x1MDExYi4jICY7XHhhZCcpLEkoIjs2LiMgJjtceGFlIiksSSgnJTNcdTAxMWMiIjUiN1x1MDExZC8sIzs2LyMkKyIpKCJcJyMmXCcjJyksSSgiO1x4YWQuIyAmOzYiKSxJKCIlOzYvNSM7PC8sJDtceGIxLyMkKyMpKCMnIyhcIicjJicjIiksSSgiOzYuIyAmO0giKSxJKCIlO1x4YjMvNSM7Li8sJDtceDkwLyMkKyMpKCMnIyhcIicjJicjIiksSSgiJSQ7IS8mIzAjKjshJiYmIy8nIDghOlx1MDExZSEhICkiKSxJKCIlO1x4OWUvJyA4ITpcdTAxMWYhISApIiksSSgnJTtceGI2L14jJCU7Qi8sIztceGEwLyMkKyIpKCJcJyMmXCcjMDYqJTtCLywjO1x4YTAvIyQrIikoIlwnIyZcJyMmLygkOCI6XHUwMTIwIiEhKSgiXCcjJlwnIycpLEkoJyUlOzcvZSMkJTJKIiI2SjdLLywjOzcvIyQrIikoIlwnIyZcJyMwPColMkoiIjZKN0svLCM7Ny8jJCsiKSgiXCcjJlwnIyYvIyQrIikoIlwnIyZcJyMvIiEmLCknKSxJKCIlO0wuIyAmO1x4OTkvXSMkJTtCLywjO1x4YjgvIyQrXCIpKFwiJyMmJyMwNiolO0IvLCM7XHhiOC8jJCtcIikoXCInIyYnIyYvJyQ4XCI6XHUwMTIxXCIgKShcIicjJicjIiksSSgiO1x4YjkuIyAmO1x4YTAiKSxJKCIlM1x1MDEyMlwiXCI1IzdcdTAxMjMvOiM7PC8xJDs2LygkOCM6XHUwMTI0IyEgKSgjJyMoXCInIyYnIyIpLEkoIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpcdTAxMjUhISApIiksSSgiJTtceDllLycgOCE6XHUwMTI2ISEgKSIpLEkoIiUkO1x4OWEwIyo7XHg5YSYveCM7QC9vJDtNL2YkOz8vXSQkJTtCLywjO1x4YTAvIyQrXCIpKFwiJyMmJyMwNiolO0IvLCM7XHhhMC8jJCtcIikoXCInIyYnIyYvJyQ4JTpcdTAxMjclICkoJScjKCQnIygjJyMoXCInIyYnIyIpLEkoIjtceGJlIiksSSgiJTNcdTAxMjhcIlwiNSY3XHUwMTI5L2sjOy4vYiQ7XHhjMS9ZJCQlO0EvLCM7XHhjMS8jJCtcIikoXCInIyYnIzA2KiU7QS8sIztceGMxLyMkK1wiKShcIicjJicjJi8jJCskKSgkJyMoIycjKFwiJyMmJyMuIyAmO1x4YmYiKSxJKCIlOzYvayM7Li9iJDtceGMwL1kkJCU7QS8sIztceGMwLyMkK1wiKShcIicjJicjMDYqJTtBLywjO1x4YzAvIyQrXCIpKFwiJyMmJyMmLyMkKyQpKCQnIygjJyMoXCInIyYnIyIpLEkoIiU7Ni87Izs8LzIkOzYuIyAmO0gvIyQrIykoIycjKFwiJyMmJyMiKSxJKCI7XHhjMi5HICY7XHhjNC5BICY7XHhjNi47ICY7XHhjOC41ICY7XHhjOS4vICY7XHhjYS4pICY7XHhjYi4jICY7XHhjMCIpLEkoIiUzXHUwMTJhXCJcIjUlN1x1MDEyYi81Izs8LywkO1x4YzMvIyQrIykoIycjKFwiJyMmJyMiKSxJKCIlO0kvJyA4ITpcdTAxMmMhISApIiksSSgiJTNcdTAxMmRcIlwiNSY3XHUwMTJlL1x4OTcjOzwvXHg4ZSQ7RC9ceDg1JDtceGM1L3wkJCUkOycvJiMwIyo7JyYmJiMvLCM7XHhjNS8jJCtcIikoXCInIyYnIzBDKiUkOycvJiMwIyo7JyYmJiMvLCM7XHhjNS8jJCtcIikoXCInIyYnIyYvLCQ7RS8jJCsmKSgmJyMoJScjKCQnIygjJyMoXCInIyYnIyIpLEkoIjt0LiMgJjt3IiksSSgiJTNcdTAxMmZcIlwiNSU3XHUwMTMwLzUjOzwvLCQ7XHhjNy8jJCsjKSgjJyMoXCInIyYnIyIpLEkoIiU7SS8nIDghOlx1MDEzMSEhICkiKSxJKCIlM1x1MDEzMlwiXCI1JjdcdTAxMzMvOiM7PC8xJDtJLygkOCM6XHUwMTM0IyEgKSgjJyMoXCInIyYnIyIpLEkoJyUzXHUwMTM1IiI1JTdcdTAxMzYvXSM7PC9UJCUzXHUwMTM3IiI1JDdcdTAxMzgvJiA4ITpcdTAxMzkhICkuNCAmJTNcdTAxM2EiIjUlN1x1MDEzYi8mIDghOlx1MDEzYyEgKS8jJCsjKSgjXCcjKCJcJyMmXCcjJyksSSgnJTNcdTAxM2QiIjUpN1x1MDEzZS9SIzs8L0kkM1x1MDEzZiIiNSM3XHUwMTQwLi8gJjNcdTAxNDEiIjUoN1x1MDE0Mi4jICY7Ni8oJDgjOlx1MDE0MyMhICkoI1wnIygiXCcjJlwnIycpLEkoJyUzXHUwMTQ0IiI1IzdcdTAxNDUvXHg5MyM7PC9ceDhhJDtEL1x4ODEkJTtceGNjL2UjJCUyRCIiNkQ3RS8sIztceGNjLyMkKyIpKCJcJyMmXCcjMDwqJTJEIiI2RDdFLywjO1x4Y2MvIyQrIikoIlwnIyZcJyMmLyMkKyIpKCJcJyMmXCcjLywkO0UvIyQrJSkoJVwnIygkXCcjKCNcJyMoIlwnIyZcJyMnKSxJKCclM1x1MDE0NiIiNSg3XHUwMTQ3Li8gJjNcdTAxNDgiIjUkN1x1MDE0OS4jICY7Ni9cJyA4ITpcdTAxNGEhISApJyksSSgiJTs2L1kjJCU7QS8sIzs2LyMkK1wiKShcIicjJicjMDYqJTtBLywjOzYvIyQrXCIpKFwiJyMmJyMmLyMkK1wiKShcIicjJicjIiksSSgiJTtceGNmL0cjOy4vPiQ7XHhjZi81JDsuLywkO1x4OTAvIyQrJSkoJScjKCQnIygjJyMoXCInIyYnIyIpLEkoIiUkOyEvJiMwIyo7ISYmJiMvJyA4ITpcdTAxNGIhISApIiksSSgiJTtceGQxL10jJCU7QS8sIztceGQxLyMkK1wiKShcIicjJicjMDYqJTtBLywjO1x4ZDEvIyQrXCIpKFwiJyMmJyMmLyckOFwiOlx1MDE0Y1wiICkoXCInIyYnIyIpLEkoIiU7XHg5OS9dIyQlO0IvLCM7XHhhMC8jJCtcIikoXCInIyYnIzA2KiU7Qi8sIztceGEwLyMkK1wiKShcIicjJicjJi8nJDhcIjpcdTAxNGRcIiApKFwiJyMmJyMiKSxJKCclO0wuTyAmO1x4OTkuSSAmJTtALiIgJiIvOiM7dC8xJDs/LiIgJiIvIyQrIykoI1wnIygiXCcjJlwnIy9dIyQlO0IvLCM7XHhhMC8jJCsiKSgiXCcjJlwnIzA2KiU7Qi8sIztceGEwLyMkKyIpKCJcJyMmXCcjJi9cJyQ4IjpcdTAxNGUiICkoIlwnIyZcJyMnKSxJKCIlO1x4ZDQvXSMkJTtCLywjO1x4ZDUvIyQrXCIpKFwiJyMmJyMwNiolO0IvLCM7XHhkNS8jJCtcIikoXCInIyYnIyYvJyQ4XCI6XHUwMTRmXCIgKShcIicjJicjIiksSSgiJTtceDk2LyYgOCE6XHUwMTUwISApIiksSSgnJTNcdTAxNTEiIjUoN1x1MDE1Mi86Izs8LzEkOzYvKCQ4IzpcdTAxNTMjISApKCNcJyMoIlwnIyZcJyMuZyAmJTNcdTAxNTQiIjUmN1x1MDE1NS86Izs8LzEkOzYvKCQ4IzpcdTAxNTYjISApKCNcJyMoIlwnIyZcJyMuOiAmJTNcdTAxNTciIjUqN1x1MDE1OC8mIDghOlx1MDE1OSEgKS4jICY7XHhhMCcpLEkoJyUlOzYvayMkJTtBLzIjOzYvKSQ4IjpcdTAxNWEiIiQgKSgiXCcjJlwnIzA8KiU7QS8yIzs2LykkOCI6XHUwMTVhIiIkICkoIlwnIyZcJyMmLykkOCI6XHUwMTViIiIhICkoIlwnIyZcJyMuIiAmIi9cJyA4ITpcdTAxNWMhISApJyksSSgiJTtceGQ4L1kjJCU7QS8sIztceGQ4LyMkK1wiKShcIicjJicjMDYqJTtBLywjO1x4ZDgvIyQrXCIpKFwiJyMmJyMmLyMkK1wiKShcIicjJicjIiksSSgiJTtceDk5L1kjJCU7Qi8sIztceGEwLyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4YTAvIyQrXCIpKFwiJyMmJyMmLyMkK1wiKShcIicjJicjIiksSSgiJSQ7IS8mIzAjKjshJiYmIy8nIDghOlx1MDE1ZCEhICkiKSxJKCIlO1x4ZGIvWSMkJTtCLywjO1x4ZGMvIyQrXCIpKFwiJyMmJyMwNiolO0IvLCM7XHhkYy8jJCtcIikoXCInIyYnIyYvIyQrXCIpKFwiJyMmJyMiKSxJKCclM1x1MDE1ZSIiNSY3XHUwMTVmLjsgJjNcdTAxNjAiIjVcJzdcdTAxNjEuLyAmM1x1MDE2MiIiNSo3XHUwMTYzLiMgJjs2LyYgOCE6XHUwMTY0ISApJyksSSgiJTNcdTAxNjVcIlwiNSY3XHUwMTY2LzojOzwvMSQ7XHhkZC8oJDgjOlx1MDE2NyMhICkoIycjKFwiJyMmJyMufSAmJTNceGY1XCJcIjUnN1x4ZjYvOiM7PC8xJDtceDllLygkOCM6XHUwMTY4IyEgKSgjJyMoXCInIyYnIy5QICYlM1x1MDE2OVwiXCI1KzdcdTAxNmEvOiM7PC8xJDtceDllLygkOCM6XHUwMTZiIyEgKSgjJyMoXCInIyYnIy4jICY7XHhhMCIpLEkoJzNcdTAxNmMiIjUrN1x1MDE2ZC5rICYzXHUwMTZlIiI1KTdcdTAxNmYuXyAmM1x1MDE3MCIiNSg3XHUwMTcxLlMgJjNcdTAxNzIiIjVcJzdcdTAxNzMuRyAmM1x1MDE3NCIiNSY3XHUwMTc1LjsgJjNcdTAxNzYiIjUqN1x1MDE3Ny4vICYzXHUwMTc4IiI1KTdcdTAxNzkuIyAmOzYnKSxJKCc7MS4iICYiJyksSSgnJSU7Ni9rIyQlO0EvMiM7Ni8pJDgiOlx1MDE1YSIiJCApKCJcJyMmXCcjMDwqJTtBLzIjOzYvKSQ4IjpcdTAxNWEiIiQgKSgiXCcjJlwnIyYvKSQ4IjpcdTAxNWIiIiEgKSgiXCcjJlwnIy4iICYiL1wnIDghOlx1MDE3YSEhICknKSxJKCIlO0wuIyAmO1x4OTkvXSMkJTtCLywjO1x4ZTEvIyQrXCIpKFwiJyMmJyMwNiolO0IvLCM7XHhlMS8jJCtcIikoXCInIyYnIyYvJyQ4XCI6XHUwMTdiXCIgKShcIicjJicjIiksSSgiO1x4YjkuIyAmO1x4YTAiKSxJKCIlO1x4ZTMvWSMkJTtBLywjO1x4ZTMvIyQrXCIpKFwiJyMmJyMwNiolO0EvLCM7XHhlMy8jJCtcIikoXCInIyYnIyYvIyQrXCIpKFwiJyMmJyMiKSxJKCIlO1x4ZWEvayM7Li9iJDtceGVkL1kkJCU7Qi8sIztceGU0LyMkK1wiKShcIicjJicjMDYqJTtCLywjO1x4ZTQvIyQrXCIpKFwiJyMmJyMmLyMkKyQpKCQnIygjJyMoXCInIyYnIyIpLEkoIjtceGU1LjsgJjtceGU2LjUgJjtceGU3Li8gJjtceGU4LikgJjtceGU5LiMgJjtceGEwIiksSSgiJTNcdTAxN2NcIlwiNSM3XHUwMTdkLzojOzwvMSQ7XHhmMC8oJDgjOlx1MDE3ZSMhICkoIycjKFwiJyMmJyMiKSxJKCIlM1x1MDE3ZlwiXCI1JTdcdTAxODAvOiM7PC8xJDtULygkOCM6XHUwMTgxIyEgKSgjJyMoXCInIyYnIyIpLEkoIiUzXHUwMTgyXCJcIjUoN1x1MDE4My9GIzs8Lz0kO1xcLikgJjtZLiMgJjtYLygkOCM6XHUwMTg0IyEgKSgjJyMoXCInIyYnIyIpLEkoIiUzXHUwMTg1XCJcIjUmN1x1MDE4Ni86Izs8LzEkOzYvKCQ4IzpcdTAxODcjISApKCMnIyhcIicjJicjIiksSSgiJTNcdTAxODhcIlwiNSU3XHUwMTg5L0EjOzwvOCQkOyEwIyo7ISYvKCQ4IzpcdTAxOGEjISApKCMnIyhcIicjJicjIiksSSgiJTtceGViL0cjOzsvPiQ7Ni81JDs7LywkO1x4ZWMvIyQrJSkoJScjKCQnIygjJyMoXCInIyYnIyIpLEkoJyUzXHg5MiIiNSM3XHhkMy4jICY7Ni9cJyA4ITpcdTAxOGIhISApJyksSSgnJTNceGIxIiI1IzdcdTAxOGMuRyAmM1x4YjMiIjUjN1x1MDE4ZC47ICYzXHhiNyIiNSM3XHUwMThlLi8gJjNceGI1IiI1JDdcdTAxOGYuIyAmOzYvXCcgOCE6XHUwMTkwISEgKScpLEkoJyU7XHhlZS9EIyU7Qy8sIztceGVmLyMkKyIpKCJcJyMmXCcjLiIgJiIvIyQrIikoIlwnIyZcJyMnKSxJKCIlO1UuKSAmO1xcLiMgJjtYLyYgOCE6XHUwMTkxISApIiksSSgnJSU7IS4iICYiL1sjOyEuIiAmIi9NJDshLiIgJiIvPyQ7IS4iICYiLzEkOyEuIiAmIi8jJCslKSglXCcjKCRcJyMoI1wnIygiXCcjJlwnIy9cJyA4ITpcdTAxOTIhISApJyksSSgnJSU7IS8/IzshLiIgJiIvMSQ7IS4iICYiLyMkKyMpKCNcJyMoIlwnIyZcJyMvXCcgOCE6XHUwMTkzISEgKScpLEkoIjtceGJlIiksSSgnJTtceDllL14jJCU7Qi8sIztceGYzLyMkKyIpKCJcJyMmXCcjMDYqJTtCLywjO1x4ZjMvIyQrIikoIlwnIyZcJyMmLygkOCI6XHUwMTk0IiEhKSgiXCcjJlwnIycpLEkoIjtceGY0LiMgJjtceGEwIiksSSgnJTJcdTAxOTUiIjZcdTAxOTU3XHUwMTk2L0wjOzwvQyQyXHUwMTk3IiI2XHUwMTk3N1x1MDE5OC4pICYyXHUwMTk5IiI2XHUwMTk5N1x1MDE5YS8oJDgjOlx1MDE5YiMhICkoI1wnIygiXCcjJlwnIycpLEkoJyU7XHg5ZS9eIyQlO0IvLCM7XHhhMC8jJCsiKSgiXCcjJlwnIzA2KiU7Qi8sIztceGEwLyMkKyIpKCJcJyMmXCcjJi8oJDgiOlx1MDE5YyIhISkoIlwnIyZcJyMnKSxJKCIlOzYvNSM7MC8sJDtceGY3LyMkKyMpKCMnIyhcIicjJicjIiksSSgiJDsyLikgJjs0LiMgJjsuMC8qOzIuKSAmOzQuIyAmOy4mIiksSSgiJDslMCMqOyUmIiksSSgiJTtceGZhLzsjMjhcIlwiNjg3OS8sJDtceGZiLyMkKyMpKCMnIyhcIicjJicjIiksSSgnJTNcdTAxOWQiIjUlN1x1MDE5ZS4pICYzXHUwMTlmIiI1JDdcdTAxYTAvXCcgOCE6XHUwMWExISEgKScpLEkoJyU7XHhmYy9KIyUyOCIiNjg3OS8sIzteLyMkKyIpKCJcJyMmXCcjLiIgJiIvIyQrIikoIlwnIyZcJyMnKSxJKCIlO1xcLikgJjtYLiMgJjtceDgyLycgOCE6XHUwMWEyISEgKSIpLEkoJzsiLlMgJjshLk0gJjJGIiI2RjdHLkEgJjJKIiI2SjdLLjUgJjJIIiI2SDdJLikgJjJOIiI2TjdPJyksSSgnMkwiIjZMN00uXHg5NSAmMkIiIjZCN0MuXHg4OSAmMjwiIjY8Nz0ufSAmMlIiIjZSN1MucSAmMlQiIjZUN1UuZSAmMlYiIjZWN1cuWSAmMlAiIjZQN1EuTSAmMkAiIjZAN0EuQSAmMkQiIjZEN0UuNSAmMjIiIjYyNzMuKSAmMj4iIjY+Nz8nKSxJKCclO1x1MDEwMC9iIzI4IiI2ODc5L1MkO1x4ZmIvSiQlMlx1MDFhMyIiNlx1MDFhMzdcdTAxYTQvLCM7XHhlYy8jJCsiKSgiXCcjJlwnIy4iICYiLyMkKyQpKCRcJyMoI1wnIygiXCcjJlwnIycpLEkoJyUzXHUwMWE1IiI1JTdcdTAxYTYuKSAmM1x1MDFhNyIiNSQ3XHUwMWE4L1wnIDghOlx1MDFhMSEhICknKSxJKCclM1x4YjEiIjUjN1x4YjIuNiAmM1x4YjMiIjUjN1x4YjQuKiAmJDsrMCMqOysmL1wnIDghOlx1MDFhOSEhICknKSxJKCIlO1x1MDEwNC9ceDg3IzJGXCJcIjZGN0cveCQ7XHUwMTAzL28kMkZcIlwiNkY3Ry9gJDtcdTAxMDMvVyQyRlwiXCI2RjdHL0gkO1x1MDEwMy8/JDJGXCJcIjZGN0cvMCQ7XHUwMTA1LyckOCk6XHUwMWFhKSApKCknIygoJyMoJycjKCYnIyglJyMoJCcjKCMnIyhcIicjJicjIiksSSgiJTsjLz4jOyMvNSQ7Iy8sJDsjLyMkKyQpKCQnIygjJyMoXCInIyYnIyIpLEkoIiU7XHUwMTAzLywjO1x1MDEwMy8jJCtcIikoXCInIyYnIyIpLEkoIiU7XHUwMTAzLzUjO1x1MDEwMy8sJDtcdTAxMDMvIyQrIykoIycjKFwiJyMmJyMiKSxJKCIlO3EvVCMkO20wIyo7bSYvRCQlOyAvLCM7XHhmOC8jJCtcIikoXCInIyYnIy5cIiAmXCIvIyQrIykoIycjKFwiJyMmJyMiKSxJKCclMlx1MDFhYiIiNlx1MDFhYjdcdTAxYWMuKSAmMlx1MDFhZCIiNlx1MDFhZDdcdTAxYWUvdyM7MC9uJDtcdTAxMDgvZSQkJTtCLzIjO1x1MDEwOS4jICY7XHhhMC8jJCsiKSgiXCcjJlwnIzA8KiU7Qi8yIztcdTAxMDkuIyAmO1x4YTAvIyQrIikoIlwnIyZcJyMmLyMkKyQpKCRcJyMoI1wnIygiXCcjJlwnIycpLEkoIjtceDk5LiMgJjtMIiksSSgiJTJcdTAxYWZcIlwiNlx1MDFhZjdcdTAxYjAvNSM7PC8sJDtcdTAxMGEvIyQrIykoIycjKFwiJyMmJyMiKSxJKCIlO0QvUyM7LC9KJDI6XCJcIjY6NzsvOyQ7LC4jICY7VC8sJDtFLyMkKyUpKCUnIygkJyMoIycjKFwiJyMmJyMiKV07bGV0IGQ9MCxnPTA7Y29uc3QgbD1be2xpbmU6MSxjb2x1bW46MX1dO2xldCB1LHA9MCxmPVtdLG09MDtpZih2b2lkIDAhPT10LnN0YXJ0UnVsZSl7aWYoISh0LnN0YXJ0UnVsZSBpbiBpKSl0aHJvdyBuZXcgRXJyb3IoIkNhbid0IHN0YXJ0IHBhcnNpbmcgZnJvbSBydWxlIFwiIit0LnN0YXJ0UnVsZSsnIi4nKTtyPWlbdC5zdGFydFJ1bGVdfWZ1bmN0aW9uIHYoKXtyZXR1cm4gZS5zdWJzdHJpbmcoZyxkKX1mdW5jdGlvbiB3KCl7cmV0dXJuIEUoZyxkKX1mdW5jdGlvbiBiKGUsdCl7cmV0dXJue3R5cGU6ImxpdGVyYWwiLHRleHQ6ZSxpZ25vcmVDYXNlOnR9fWZ1bmN0aW9uIFQoZSx0LHMpe3JldHVybnt0eXBlOiJjbGFzcyIscGFydHM6ZSxpbnZlcnRlZDp0LGlnbm9yZUNhc2U6c319ZnVuY3Rpb24geSh0KXtsZXQgcyxpPWxbdF07aWYoaSlyZXR1cm4gaTtmb3Iocz10LTE7IWxbc107KXMtLTtmb3IoaT1sW3NdLGk9e2xpbmU6aS5saW5lLGNvbHVtbjppLmNvbHVtbn07czx0OykxMD09PWUuY2hhckNvZGVBdChzKT8oaS5saW5lKyssaS5jb2x1bW49MSk6aS5jb2x1bW4rKyxzKys7cmV0dXJuIGxbdF09aSxpfWZ1bmN0aW9uIEUoZSx0KXtjb25zdCBzPXkoZSksaT15KHQpO3JldHVybntzdGFydDp7b2Zmc2V0OmUsbGluZTpzLmxpbmUsY29sdW1uOnMuY29sdW1ufSxlbmQ6e29mZnNldDp0LGxpbmU6aS5saW5lLGNvbHVtbjppLmNvbHVtbn19fWZ1bmN0aW9uIFIoZSl7ZDxwfHwoZD5wJiYocD1kLGY9W10pLGYucHVzaChlKSl9ZnVuY3Rpb24gUyhlLHQscyl7cmV0dXJuIG5ldyBjKGMuYnVpbGRNZXNzYWdlKGUsdCksZSx0LHMpfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIGUuc3BsaXQoIiIpLm1hcChlPT5lLmNoYXJDb2RlQXQoMCktMzIpfWlmKHQuZGF0YT17fSx1PWZ1bmN0aW9uIHQoaSl7Y29uc3Qgcj1oW2ldO2xldCBvPTA7Y29uc3QgYT1bXTtsZXQgYz1yLmxlbmd0aDtjb25zdCBsPVtdLHU9W107bGV0IHA7Zm9yKDs7KXtmb3IoO288Yzspc3dpdGNoKHJbb10pe2Nhc2UgMDp1LnB1c2gobltyW28rMV1dKSxvKz0yO2JyZWFrO2Nhc2UgMTp1LnB1c2godm9pZCAwKSxvKys7YnJlYWs7Y2FzZSAyOnUucHVzaChudWxsKSxvKys7YnJlYWs7Y2FzZSAzOnUucHVzaChzKSxvKys7YnJlYWs7Y2FzZSA0OnUucHVzaChbXSksbysrO2JyZWFrO2Nhc2UgNTp1LnB1c2goZCksbysrO2JyZWFrO2Nhc2UgNjp1LnBvcCgpLG8rKzticmVhaztjYXNlIDc6ZD11LnBvcCgpLG8rKzticmVhaztjYXNlIDg6dS5sZW5ndGgtPXJbbysxXSxvKz0yO2JyZWFrO2Nhc2UgOTp1LnNwbGljZSgtMiwxKSxvKys7YnJlYWs7Y2FzZSAxMDp1W3UubGVuZ3RoLTJdLnB1c2godS5wb3AoKSksbysrO2JyZWFrO2Nhc2UgMTE6dS5wdXNoKHUuc3BsaWNlKHUubGVuZ3RoLXJbbysxXSxyW28rMV0pKSxvKz0yO2JyZWFrO2Nhc2UgMTI6dS5wdXNoKGUuc3Vic3RyaW5nKHUucG9wKCksZCkpLG8rKzticmVhaztjYXNlIDEzOmwucHVzaChjKSxhLnB1c2gobyszK3JbbysxXStyW28rMl0pLHVbdS5sZW5ndGgtMV0/KGM9byszK3JbbysxXSxvKz0zKTooYz1vKzMrcltvKzFdK3JbbysyXSxvKz0zK3JbbysxXSk7YnJlYWs7Y2FzZSAxNDpsLnB1c2goYyksYS5wdXNoKG8rMytyW28rMV0rcltvKzJdKSx1W3UubGVuZ3RoLTFdPT09cz8oYz1vKzMrcltvKzFdLG8rPTMpOihjPW8rMytyW28rMV0rcltvKzJdLG8rPTMrcltvKzFdKTticmVhaztjYXNlIDE1OmwucHVzaChjKSxhLnB1c2gobyszK3JbbysxXStyW28rMl0pLHVbdS5sZW5ndGgtMV0hPT1zPyhjPW8rMytyW28rMV0sbys9Myk6KGM9byszK3JbbysxXStyW28rMl0sbys9MytyW28rMV0pO2JyZWFrO2Nhc2UgMTY6dVt1Lmxlbmd0aC0xXSE9PXM/KGwucHVzaChjKSxhLnB1c2gobyksYz1vKzIrcltvKzFdLG8rPTIpOm8rPTIrcltvKzFdO2JyZWFrO2Nhc2UgMTc6bC5wdXNoKGMpLGEucHVzaChvKzMrcltvKzFdK3JbbysyXSksZS5sZW5ndGg+ZD8oYz1vKzMrcltvKzFdLG8rPTMpOihjPW8rMytyW28rMV0rcltvKzJdLG8rPTMrcltvKzFdKTticmVhaztjYXNlIDE4OmwucHVzaChjKSxhLnB1c2gobys0K3JbbysyXStyW28rM10pLGUuc3Vic3RyKGQsbltyW28rMV1dLmxlbmd0aCk9PT1uW3JbbysxXV0/KGM9bys0K3JbbysyXSxvKz00KTooYz1vKzQrcltvKzJdK3JbbyszXSxvKz00K3JbbysyXSk7YnJlYWs7Y2FzZSAxOTpsLnB1c2goYyksYS5wdXNoKG8rNCtyW28rMl0rcltvKzNdKSxlLnN1YnN0cihkLG5bcltvKzFdXS5sZW5ndGgpLnRvTG93ZXJDYXNlKCk9PT1uW3JbbysxXV0/KGM9bys0K3JbbysyXSxvKz00KTooYz1vKzQrcltvKzJdK3JbbyszXSxvKz00K3JbbysyXSk7YnJlYWs7Y2FzZSAyMDpsLnB1c2goYyksYS5wdXNoKG8rNCtyW28rMl0rcltvKzNdKSxuW3JbbysxXV0udGVzdChlLmNoYXJBdChkKSk/KGM9bys0K3JbbysyXSxvKz00KTooYz1vKzQrcltvKzJdK3JbbyszXSxvKz00K3JbbysyXSk7YnJlYWs7Y2FzZSAyMTp1LnB1c2goZS5zdWJzdHIoZCxyW28rMV0pKSxkKz1yW28rMV0sbys9MjticmVhaztjYXNlIDIyOnUucHVzaChuW3JbbysxXV0pLGQrPW5bcltvKzFdXS5sZW5ndGgsbys9MjticmVhaztjYXNlIDIzOnUucHVzaChzKSwwPT09bSYmUihuW3JbbysxXV0pLG8rPTI7YnJlYWs7Y2FzZSAyNDpnPXVbdS5sZW5ndGgtMS1yW28rMV1dLG8rPTI7YnJlYWs7Y2FzZSAyNTpnPWQsbysrO2JyZWFrO2Nhc2UgMjY6cD1yLnNsaWNlKG8rNCxvKzQrcltvKzNdKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiB1W3UubGVuZ3RoLTEtZV19KSksdS5zcGxpY2UodS5sZW5ndGgtcltvKzJdLHJbbysyXSxuW3JbbysxXV0uYXBwbHkobnVsbCxwKSksbys9NCtyW28rM107YnJlYWs7Y2FzZSAyNzp1LnB1c2godChyW28rMV0pKSxvKz0yO2JyZWFrO2Nhc2UgMjg6bSsrLG8rKzticmVhaztjYXNlIDI5Om0tLSxvKys7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgb3Bjb2RlOiAiK3Jbb10rIi4iKX1pZighKGwubGVuZ3RoPjApKWJyZWFrO2M9bC5wb3AoKSxvPWEucG9wKCl9cmV0dXJuIHVbMF19KHIpLHUhPT1zJiZkPT09ZS5sZW5ndGgpcmV0dXJuIHU7dGhyb3cgdSE9PXMmJmQ8ZS5sZW5ndGgmJlIoe3R5cGU6ImVuZCJ9KSxTKGYscDxlLmxlbmd0aD9lLmNoYXJBdChwKTpudWxsLHA8ZS5sZW5ndGg/RShwLHArMSk6RShwLHApKX07dmFyIGQsZyxsOyhnPWR8fChkPXt9KSkucGFyc2U9ZnVuY3Rpb24oZSx0KXtjb25zdCBzPXtzdGFydFJ1bGU6dH07dHJ5e2goZSxzKX1jYXRjaChlKXtzLmRhdGE9LTF9cmV0dXJuIHMuZGF0YX0sZy5uYW1lQWRkckhlYWRlclBhcnNlPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9Zy5wYXJzZShlLCJOYW1lX0FkZHJfSGVhZGVyIik7cmV0dXJuLTEhPT10P3Q6dm9pZCAwfSxnLlVSSVBhcnNlPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9Zy5wYXJzZShlLCJTSVBfVVJJIik7cmV0dXJuLTEhPT10P3Q6dm9pZCAwfSxmdW5jdGlvbihlKXtlLkFDSz0iQUNLIixlLkJZRT0iQllFIixlLkNBTkNFTD0iQ0FOQ0VMIixlLklORk89IklORk8iLGUuSU5WSVRFPSJJTlZJVEUiLGUuTUVTU0FHRT0iTUVTU0FHRSIsZS5OT1RJRlk9Ik5PVElGWSIsZS5PUFRJT05TPSJPUFRJT05TIixlLlJFR0lTVEVSPSJSRUdJU1RFUiIsZS5VUERBVEU9IlVQREFURSIsZS5TVUJTQ1JJQkU9IlNVQlNDUklCRSIsZS5QVUJMSVNIPSJQVUJMSVNIIixlLlJFRkVSPSJSRUZFUiIsZS5QUkFDSz0iUFJBQ0sifShsfHwobD17fSkpO2NvbnN0IHU9ezEwMDoiVHJ5aW5nIiwxODA6IlJpbmdpbmciLDE4MToiQ2FsbCBJcyBCZWluZyBGb3J3YXJkZWQiLDE4MjoiUXVldWVkIiwxODM6IlNlc3Npb24gUHJvZ3Jlc3MiLDE5OToiRWFybHkgRGlhbG9nIFRlcm1pbmF0ZWQiLDIwMDoiT0siLDIwMjoiQWNjZXB0ZWQiLDIwNDoiTm8gTm90aWZpY2F0aW9uIiwzMDA6Ik11bHRpcGxlIENob2ljZXMiLDMwMToiTW92ZWQgUGVybWFuZW50bHkiLDMwMjoiTW92ZWQgVGVtcG9yYXJpbHkiLDMwNToiVXNlIFByb3h5IiwzODA6IkFsdGVybmF0aXZlIFNlcnZpY2UiLDQwMDoiQmFkIFJlcXVlc3QiLDQwMToiVW5hdXRob3JpemVkIiw0MDI6IlBheW1lbnQgUmVxdWlyZWQiLDQwMzoiRm9yYmlkZGVuIiw0MDQ6Ik5vdCBGb3VuZCIsNDA1OiJNZXRob2QgTm90IEFsbG93ZWQiLDQwNjoiTm90IEFjY2VwdGFibGUiLDQwNzoiUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQiLDQwODoiUmVxdWVzdCBUaW1lb3V0Iiw0MTA6IkdvbmUiLDQxMjoiQ29uZGl0aW9uYWwgUmVxdWVzdCBGYWlsZWQiLDQxMzoiUmVxdWVzdCBFbnRpdHkgVG9vIExhcmdlIiw0MTQ6IlJlcXVlc3QtVVJJIFRvbyBMb25nIiw0MTU6IlVuc3VwcG9ydGVkIE1lZGlhIFR5cGUiLDQxNjoiVW5zdXBwb3J0ZWQgVVJJIFNjaGVtZSIsNDE3OiJVbmtub3duIFJlc291cmNlLVByaW9yaXR5Iiw0MjA6IkJhZCBFeHRlbnNpb24iLDQyMToiRXh0ZW5zaW9uIFJlcXVpcmVkIiw0MjI6IlNlc3Npb24gSW50ZXJ2YWwgVG9vIFNtYWxsIiw0MjM6IkludGVydmFsIFRvbyBCcmllZiIsNDI4OiJVc2UgSWRlbnRpdHkgSGVhZGVyIiw0Mjk6IlByb3ZpZGUgUmVmZXJyZXIgSWRlbnRpdHkiLDQzMDoiRmxvdyBGYWlsZWQiLDQzMzoiQW5vbnltaXR5IERpc2FsbG93ZWQiLDQzNjoiQmFkIElkZW50aXR5LUluZm8iLDQzNzoiVW5zdXBwb3J0ZWQgQ2VydGlmaWNhdGUiLDQzODoiSW52YWxpZCBJZGVudGl0eSBIZWFkZXIiLDQzOToiRmlyc3QgSG9wIExhY2tzIE91dGJvdW5kIFN1cHBvcnQiLDQ0MDoiTWF4LUJyZWFkdGggRXhjZWVkZWQiLDQ2OToiQmFkIEluZm8gUGFja2FnZSIsNDcwOiJDb25zZW50IE5lZWRlZCIsNDc4OiJVbnJlc29sdmFibGUgRGVzdGluYXRpb24iLDQ4MDoiVGVtcG9yYXJpbHkgVW5hdmFpbGFibGUiLDQ4MToiQ2FsbC9UcmFuc2FjdGlvbiBEb2VzIE5vdCBFeGlzdCIsNDgyOiJMb29wIERldGVjdGVkIiw0ODM6IlRvbyBNYW55IEhvcHMiLDQ4NDoiQWRkcmVzcyBJbmNvbXBsZXRlIiw0ODU6IkFtYmlndW91cyIsNDg2OiJCdXN5IEhlcmUiLDQ4NzoiUmVxdWVzdCBUZXJtaW5hdGVkIiw0ODg6Ik5vdCBBY2NlcHRhYmxlIEhlcmUiLDQ4OToiQmFkIEV2ZW50Iiw0OTE6IlJlcXVlc3QgUGVuZGluZyIsNDkzOiJVbmRlY2lwaGVyYWJsZSIsNDk0OiJTZWN1cml0eSBBZ3JlZW1lbnQgUmVxdWlyZWQiLDUwMDoiSW50ZXJuYWwgU2VydmVyIEVycm9yIiw1MDE6Ik5vdCBJbXBsZW1lbnRlZCIsNTAyOiJCYWQgR2F0ZXdheSIsNTAzOiJTZXJ2aWNlIFVuYXZhaWxhYmxlIiw1MDQ6IlNlcnZlciBUaW1lLW91dCIsNTA1OiJWZXJzaW9uIE5vdCBTdXBwb3J0ZWQiLDUxMzoiTWVzc2FnZSBUb28gTGFyZ2UiLDU4MDoiUHJlY29uZGl0aW9uIEZhaWx1cmUiLDYwMDoiQnVzeSBFdmVyeXdoZXJlIiw2MDM6IkRlY2xpbmUiLDYwNDoiRG9lcyBOb3QgRXhpc3QgQW55d2hlcmUiLDYwNjoiTm90IEFjY2VwdGFibGUifTtmdW5jdGlvbiBwKGUsdD0zMil7bGV0IHM9IiI7Zm9yKGxldCBpPTA7aTxlO2krKyl7cys9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnQpLnRvU3RyaW5nKHQpfXJldHVybiBzfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIHVbZV18fCIifWZ1bmN0aW9uIG0oKXtyZXR1cm4gcCgxMCl9ZnVuY3Rpb24gdihlKXtjb25zdCB0PXsiQ2FsbC1JZCI6IkNhbGwtSUQiLENzZXE6IkNTZXEiLCJNaW4tU2UiOiJNaW4tU0UiLFJhY2s6IlJBY2siLFJzZXE6IlJTZXEiLCJXd3ctQXV0aGVudGljYXRlIjoiV1dXLUF1dGhlbnRpY2F0ZSJ9LHM9ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywiLSIpLnNwbGl0KCItIiksaT1zLmxlbmd0aDtsZXQgcj0iIjtmb3IobGV0IGU9MDtlPGk7ZSsrKTAhPT1lJiYocis9Ii0iKSxyKz1zW2VdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3NbZV0uc3Vic3RyaW5nKDEpO3JldHVybiB0W3JdJiYocj10W3JdKSxyfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKC8lW0EtRlxkXXsyfS9nLCJVIikubGVuZ3RofWNsYXNzIGJ7Y29uc3RydWN0b3IoKXt0aGlzLmhlYWRlcnM9e319YWRkSGVhZGVyKGUsdCl7Y29uc3Qgcz17cmF3OnR9O2U9dihlKSx0aGlzLmhlYWRlcnNbZV0/dGhpcy5oZWFkZXJzW2VdLnB1c2gocyk6dGhpcy5oZWFkZXJzW2VdPVtzXX1nZXRIZWFkZXIoZSl7Y29uc3QgdD10aGlzLmhlYWRlcnNbdihlKV07aWYodClyZXR1cm4gdFswXT90WzBdLnJhdzp2b2lkIDB9Z2V0SGVhZGVycyhlKXtjb25zdCB0PXRoaXMuaGVhZGVyc1t2KGUpXSxzPVtdO2lmKCF0KXJldHVybltdO2Zvcihjb25zdCBlIG9mIHQpcy5wdXNoKGUucmF3KTtyZXR1cm4gc31oYXNIZWFkZXIoZSl7cmV0dXJuISF0aGlzLmhlYWRlcnNbdihlKV19cGFyc2VIZWFkZXIoZSx0PTApe2lmKGU9dihlKSwhdGhpcy5oZWFkZXJzW2VdKXJldHVybjtpZih0Pj10aGlzLmhlYWRlcnNbZV0ubGVuZ3RoKXJldHVybjtjb25zdCBzPXRoaXMuaGVhZGVyc1tlXVt0XSxpPXMucmF3O2lmKHMucGFyc2VkKXJldHVybiBzLnBhcnNlZDtjb25zdCByPWQucGFyc2UoaSxlLnJlcGxhY2UoLy0vZywiXyIpKTtyZXR1cm4tMT09PXI/dm9pZCB0aGlzLmhlYWRlcnNbZV0uc3BsaWNlKHQsMSk6KHMucGFyc2VkPXIscil9cyhlLHQ9MCl7cmV0dXJuIHRoaXMucGFyc2VIZWFkZXIoZSx0KX1zZXRIZWFkZXIoZSx0KXt0aGlzLmhlYWRlcnNbdihlKV09W3tyYXc6dH1dfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuZGF0YX19Y2xhc3MgVCBleHRlbmRzIGJ7Y29uc3RydWN0b3IoKXtzdXBlcigpfX1jbGFzcyB5IGV4dGVuZHMgYntjb25zdHJ1Y3Rvcigpe3N1cGVyKCl9fWNsYXNzIEV7Y29uc3RydWN0b3IoZSx0LHMsaSxyLG4sbyl7dGhpcy5oZWFkZXJzPXt9LHRoaXMuZXh0cmFIZWFkZXJzPVtdLHRoaXMub3B0aW9ucz1FLmdldERlZmF1bHRPcHRpb25zKCksciYmKHRoaXMub3B0aW9ucz1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdGhpcy5vcHRpb25zKSxyKSx0aGlzLm9wdGlvbnMub3B0aW9uVGFncyYmdGhpcy5vcHRpb25zLm9wdGlvblRhZ3MubGVuZ3RoJiYodGhpcy5vcHRpb25zLm9wdGlvblRhZ3M9dGhpcy5vcHRpb25zLm9wdGlvblRhZ3Muc2xpY2UoKSksdGhpcy5vcHRpb25zLnJvdXRlU2V0JiZ0aGlzLm9wdGlvbnMucm91dGVTZXQubGVuZ3RoJiYodGhpcy5vcHRpb25zLnJvdXRlU2V0PXRoaXMub3B0aW9ucy5yb3V0ZVNldC5zbGljZSgpKSksbiYmbi5sZW5ndGgmJih0aGlzLmV4dHJhSGVhZGVycz1uLnNsaWNlKCkpLG8mJih0aGlzLmJvZHk9e2JvZHk6by5jb250ZW50LGNvbnRlbnRUeXBlOm8uY29udGVudFR5cGV9KSx0aGlzLm1ldGhvZD1lLHRoaXMucnVyaT10LmNsb25lKCksdGhpcy5mcm9tVVJJPXMuY2xvbmUoKSx0aGlzLmZyb21UYWc9dGhpcy5vcHRpb25zLmZyb21UYWc/dGhpcy5vcHRpb25zLmZyb21UYWc6bSgpLHRoaXMuZnJvbT1FLm1ha2VOYW1lQWRkckhlYWRlcih0aGlzLmZyb21VUkksdGhpcy5vcHRpb25zLmZyb21EaXNwbGF5TmFtZSx0aGlzLmZyb21UYWcpLHRoaXMudG9VUkk9aS5jbG9uZSgpLHRoaXMudG9UYWc9dGhpcy5vcHRpb25zLnRvVGFnLHRoaXMudG89RS5tYWtlTmFtZUFkZHJIZWFkZXIodGhpcy50b1VSSSx0aGlzLm9wdGlvbnMudG9EaXNwbGF5TmFtZSx0aGlzLnRvVGFnKSx0aGlzLmNhbGxJZD10aGlzLm9wdGlvbnMuY2FsbElkP3RoaXMub3B0aW9ucy5jYWxsSWQ6dGhpcy5vcHRpb25zLmNhbGxJZFByZWZpeCtwKDE1KSx0aGlzLmNzZXE9dGhpcy5vcHRpb25zLmNzZXEsdGhpcy5zZXRIZWFkZXIoInJvdXRlIix0aGlzLm9wdGlvbnMucm91dGVTZXQpLHRoaXMuc2V0SGVhZGVyKCJ2aWEiLCIiKSx0aGlzLnNldEhlYWRlcigidG8iLHRoaXMudG8udG9TdHJpbmcoKSksdGhpcy5zZXRIZWFkZXIoImZyb20iLHRoaXMuZnJvbS50b1N0cmluZygpKSx0aGlzLnNldEhlYWRlcigiY3NlcSIsdGhpcy5jc2VxKyIgIit0aGlzLm1ldGhvZCksdGhpcy5zZXRIZWFkZXIoImNhbGwtaWQiLHRoaXMuY2FsbElkKSx0aGlzLnNldEhlYWRlcigibWF4LWZvcndhcmRzIiwiNzAiKX1zdGF0aWMgZ2V0RGVmYXVsdE9wdGlvbnMoKXtyZXR1cm57Y2FsbElkOiIiLGNhbGxJZFByZWZpeDoiIixjc2VxOjEsdG9EaXNwbGF5TmFtZToiIix0b1RhZzoiIixmcm9tRGlzcGxheU5hbWU6IiIsZnJvbVRhZzoiIixmb3JjZVJwb3J0OiExLGhhY2tWaWFUY3A6ITEsb3B0aW9uVGFnczpbIm91dGJvdW5kIl0scm91dGVTZXQ6W10sdXNlckFnZW50U3RyaW5nOiJzaXAuanMiLHZpYUhvc3Q6IiJ9fXN0YXRpYyBtYWtlTmFtZUFkZHJIZWFkZXIoZSx0LHMpe2NvbnN0IGk9e307cmV0dXJuIHMmJihpLnRhZz1zKSxuZXcgbyhlLHQsaSl9Z2V0SGVhZGVyKGUpe2NvbnN0IHQ9dGhpcy5oZWFkZXJzW3YoZSldO2lmKHQpe2lmKHRbMF0pcmV0dXJuIHRbMF19ZWxzZXtjb25zdCB0PW5ldyBSZWdFeHAoIl5cXHMqIitlKyJcXHMqOiIsImkiKTtmb3IoY29uc3QgZSBvZiB0aGlzLmV4dHJhSGVhZGVycylpZih0LnRlc3QoZSkpcmV0dXJuIGUuc3Vic3RyaW5nKGUuaW5kZXhPZigiOiIpKzEpLnRyaW0oKX19Z2V0SGVhZGVycyhlKXtjb25zdCB0PVtdLHM9dGhpcy5oZWFkZXJzW3YoZSldO2lmKHMpZm9yKGNvbnN0IGUgb2Ygcyl0LnB1c2goZSk7ZWxzZXtjb25zdCBzPW5ldyBSZWdFeHAoIl5cXHMqIitlKyJcXHMqOiIsImkiKTtmb3IoY29uc3QgZSBvZiB0aGlzLmV4dHJhSGVhZGVycylzLnRlc3QoZSkmJnQucHVzaChlLnN1YnN0cmluZyhlLmluZGV4T2YoIjoiKSsxKS50cmltKCkpfXJldHVybiB0fWhhc0hlYWRlcihlKXtpZih0aGlzLmhlYWRlcnNbdihlKV0pcmV0dXJuITA7e2NvbnN0IHQ9bmV3IFJlZ0V4cCgiXlxccyoiK2UrIlxccyo6IiwiaSIpO2Zvcihjb25zdCBlIG9mIHRoaXMuZXh0cmFIZWFkZXJzKWlmKHQudGVzdChlKSlyZXR1cm4hMH1yZXR1cm4hMX1zZXRIZWFkZXIoZSx0KXt0aGlzLmhlYWRlcnNbdihlKV09dCBpbnN0YW5jZW9mIEFycmF5P3Q6W3RdfXNldFZpYUhlYWRlcihlLHQpe3RoaXMub3B0aW9ucy5oYWNrVmlhVGNwJiYodD0iVENQIik7bGV0IHM9IlNJUC8yLjAvIit0O3MrPSIgIit0aGlzLm9wdGlvbnMudmlhSG9zdCsiO2JyYW5jaD0iK2UsdGhpcy5vcHRpb25zLmZvcmNlUnBvcnQmJihzKz0iO3Jwb3J0IiksdGhpcy5zZXRIZWFkZXIoInZpYSIscyksdGhpcy5icmFuY2g9ZX10b1N0cmluZygpe2xldCBlPSIiO2UrPXRoaXMubWV0aG9kKyIgIit0aGlzLnJ1cmkudG9SYXcoKSsiIFNJUC8yLjBcclxuIjtmb3IoY29uc3QgdCBpbiB0aGlzLmhlYWRlcnMpaWYodGhpcy5oZWFkZXJzW3RdKWZvcihjb25zdCBzIG9mIHRoaXMuaGVhZGVyc1t0XSllKz10KyI6ICIrcysiXHJcbiI7Zm9yKGNvbnN0IHQgb2YgdGhpcy5leHRyYUhlYWRlcnMpZSs9dC50cmltKCkrIlxyXG4iO3JldHVybiBlKz0iU3VwcG9ydGVkOiAiK3RoaXMub3B0aW9ucy5vcHRpb25UYWdzLmpvaW4oIiwgIikrIlxyXG4iLGUrPSJVc2VyLUFnZW50OiAiK3RoaXMub3B0aW9ucy51c2VyQWdlbnRTdHJpbmcrIlxyXG4iLHRoaXMuYm9keT8ic3RyaW5nIj09dHlwZW9mIHRoaXMuYm9keT8oZSs9IkNvbnRlbnQtTGVuZ3RoOiAiK3codGhpcy5ib2R5KSsiXHJcblxyXG4iLGUrPXRoaXMuYm9keSk6dGhpcy5ib2R5LmJvZHkmJnRoaXMuYm9keS5jb250ZW50VHlwZT8oZSs9IkNvbnRlbnQtVHlwZTogIit0aGlzLmJvZHkuY29udGVudFR5cGUrIlxyXG4iLGUrPSJDb250ZW50LUxlbmd0aDogIit3KHRoaXMuYm9keS5ib2R5KSsiXHJcblxyXG4iLGUrPXRoaXMuYm9keS5ib2R5KTplKz0iQ29udGVudC1MZW5ndGg6IDBcclxuXHJcbiI6ZSs9IkNvbnRlbnQtTGVuZ3RoOiAwXHJcblxyXG4iLGV9fWZ1bmN0aW9uIFIoZSl7cmV0dXJuImFwcGxpY2F0aW9uL3NkcCI9PT1lPyJzZXNzaW9uIjoicmVuZGVyIn1mdW5jdGlvbiBTKGUpe2NvbnN0IHQ9InN0cmluZyI9PXR5cGVvZiBlP2U6ZS5ib2R5LHM9InN0cmluZyI9PXR5cGVvZiBlPyJhcHBsaWNhdGlvbi9zZHAiOmUuY29udGVudFR5cGU7cmV0dXJue2NvbnRlbnREaXNwb3NpdGlvbjpSKHMpLGNvbnRlbnRUeXBlOnMsY29udGVudDp0fX1mdW5jdGlvbiBJKGUpe3JldHVybiEoIWV8fCJzdHJpbmciIT10eXBlb2YgZS5jb250ZW50fHwic3RyaW5nIiE9dHlwZW9mIGUuY29udGVudFR5cGV8fHZvaWQgMCE9PWUuY29udGVudERpc3Bvc2l0aW9uKXx8InN0cmluZyI9PXR5cGVvZiBlLmNvbnRlbnREaXNwb3NpdGlvbn1mdW5jdGlvbiAkKGUpe2xldCB0LHMsaTtpZihlIGluc3RhbmNlb2YgVCYmZS5ib2R5KXtjb25zdCByPWUucGFyc2VIZWFkZXIoIkNvbnRlbnQtRGlzcG9zaXRpb24iKTt0PXI/ci50eXBlOnZvaWQgMCxzPWUucGFyc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpLGk9ZS5ib2R5fWlmKGUgaW5zdGFuY2VvZiB5JiZlLmJvZHkpe2NvbnN0IHI9ZS5wYXJzZUhlYWRlcigiQ29udGVudC1EaXNwb3NpdGlvbiIpO3Q9cj9yLnR5cGU6dm9pZCAwLHM9ZS5wYXJzZUhlYWRlcigiQ29udGVudC1UeXBlIiksaT1lLmJvZHl9aWYoZSBpbnN0YW5jZW9mIEUmJmUuYm9keSlpZih0PWUuZ2V0SGVhZGVyKCJDb250ZW50LURpc3Bvc2l0aW9uIikscz1lLmdldEhlYWRlcigiQ29udGVudC1UeXBlIiksInN0cmluZyI9PXR5cGVvZiBlLmJvZHkpe2lmKCFzKXRocm93IG5ldyBFcnJvcigiSGVhZGVyIGNvbnRlbnQgdHlwZSBoZWFkZXIgZG9lcyBub3QgZXF1YWwgYm9keSBjb250ZW50IHR5cGUuIik7aT1lLmJvZHl9ZWxzZXtpZihzJiZzIT09ZS5ib2R5LmNvbnRlbnRUeXBlKXRocm93IG5ldyBFcnJvcigiSGVhZGVyIGNvbnRlbnQgdHlwZSBoZWFkZXIgZG9lcyBub3QgZXF1YWwgYm9keSBjb250ZW50IHR5cGUuIik7cz1lLmJvZHkuY29udGVudFR5cGUsaT1lLmJvZHkuYm9keX1pZihJKGUpJiYodD1lLmNvbnRlbnREaXNwb3NpdGlvbixzPWUuY29udGVudFR5cGUsaT1lLmNvbnRlbnQpLGkpe2lmKHMmJiF0JiYodD1SKHMpKSwhdCl0aHJvdyBuZXcgRXJyb3IoIkNvbnRlbnQgZGlzcG9zaXRpb24gdW5kZWZpbmVkLiIpO2lmKCFzKXRocm93IG5ldyBFcnJvcigiQ29udGVudCB0eXBlIHVuZGVmaW5lZC4iKTtyZXR1cm57Y29udGVudERpc3Bvc2l0aW9uOnQsY29udGVudFR5cGU6cyxjb250ZW50Oml9fX1jbGFzcyBDe2NvbnN0cnVjdG9yKCl7dGhpcy5fZGF0YUxlbmd0aD0wLHRoaXMuX2J1ZmZlckxlbmd0aD0wLHRoaXMuX3N0YXRlPW5ldyBJbnQzMkFycmF5KDQpLHRoaXMuX2J1ZmZlcj1uZXcgQXJyYXlCdWZmZXIoNjgpLHRoaXMuX2J1ZmZlcjg9bmV3IFVpbnQ4QXJyYXkodGhpcy5fYnVmZmVyLDAsNjgpLHRoaXMuX2J1ZmZlcjMyPW5ldyBVaW50MzJBcnJheSh0aGlzLl9idWZmZXIsMCwxNyksdGhpcy5zdGFydCgpfXN0YXRpYyBoYXNoU3RyKGUsdD0hMSl7cmV0dXJuIHRoaXMub25lUGFzc0hhc2hlci5zdGFydCgpLmFwcGVuZFN0cihlKS5lbmQodCl9c3RhdGljIGhhc2hBc2NpaVN0cihlLHQ9ITEpe3JldHVybiB0aGlzLm9uZVBhc3NIYXNoZXIuc3RhcnQoKS5hcHBlbmRBc2NpaVN0cihlKS5lbmQodCl9c3RhdGljIF9oZXgoZSl7Y29uc3QgdD1DLmhleENoYXJzLHM9Qy5oZXhPdXQ7bGV0IGkscixuLG87Zm9yKG89MDtvPDQ7bys9MSlmb3Iocj04Km8saT1lW29dLG49MDtuPDg7bis9MilzW3IrMStuXT10LmNoYXJBdCgxNSZpKSxpPj4+PTQsc1tyKzArbl09dC5jaGFyQXQoMTUmaSksaT4+Pj00O3JldHVybiBzLmpvaW4oIiIpfXN0YXRpYyBfbWQ1Y3ljbGUoZSx0KXtsZXQgcz1lWzBdLGk9ZVsxXSxyPWVbMl0sbj1lWzNdO3MrPShpJnJ8fmkmbikrdFswXS02ODA4NzY5MzZ8MCxzPShzPDw3fHM+Pj4yNSkraXwwLG4rPShzJml8fnMmcikrdFsxXS0zODk1NjQ1ODZ8MCxuPShuPDwxMnxuPj4+MjApK3N8MCxyKz0obiZzfH5uJmkpK3RbMl0rNjA2MTA1ODE5fDAscj0ocjw8MTd8cj4+PjE1KStufDAsaSs9KHImbnx+ciZzKSt0WzNdLTEwNDQ1MjUzMzB8MCxpPShpPDwyMnxpPj4+MTApK3J8MCxzKz0oaSZyfH5pJm4pK3RbNF0tMTc2NDE4ODk3fDAscz0oczw8N3xzPj4+MjUpK2l8MCxuKz0ocyZpfH5zJnIpK3RbNV0rMTIwMDA4MDQyNnwwLG49KG48PDEyfG4+Pj4yMCkrc3wwLHIrPShuJnN8fm4maSkrdFs2XS0xNDczMjMxMzQxfDAscj0ocjw8MTd8cj4+PjE1KStufDAsaSs9KHImbnx+ciZzKSt0WzddLTQ1NzA1OTgzfDAsaT0oaTw8MjJ8aT4+PjEwKStyfDAscys9KGkmcnx+aSZuKSt0WzhdKzE3NzAwMzU0MTZ8MCxzPShzPDw3fHM+Pj4yNSkraXwwLG4rPShzJml8fnMmcikrdFs5XS0xOTU4NDE0NDE3fDAsbj0objw8MTJ8bj4+PjIwKStzfDAscis9KG4mc3x+biZpKSt0WzEwXS00MjA2M3wwLHI9KHI8PDE3fHI+Pj4xNSkrbnwwLGkrPShyJm58fnImcykrdFsxMV0tMTk5MDQwNDE2MnwwLGk9KGk8PDIyfGk+Pj4xMCkrcnwwLHMrPShpJnJ8fmkmbikrdFsxMl0rMTgwNDYwMzY4MnwwLHM9KHM8PDd8cz4+PjI1KStpfDAsbis9KHMmaXx+cyZyKSt0WzEzXS00MDM0MTEwMXwwLG49KG48PDEyfG4+Pj4yMCkrc3wwLHIrPShuJnN8fm4maSkrdFsxNF0tMTUwMjAwMjI5MHwwLHI9KHI8PDE3fHI+Pj4xNSkrbnwwLGkrPShyJm58fnImcykrdFsxNV0rMTIzNjUzNTMyOXwwLGk9KGk8PDIyfGk+Pj4xMCkrcnwwLHMrPShpJm58ciZ+bikrdFsxXS0xNjU3OTY1MTB8MCxzPShzPDw1fHM+Pj4yNykraXwwLG4rPShzJnJ8aSZ+cikrdFs2XS0xMDY5NTAxNjMyfDAsbj0objw8OXxuPj4+MjMpK3N8MCxyKz0obiZpfHMmfmkpK3RbMTFdKzY0MzcxNzcxM3wwLHI9KHI8PDE0fHI+Pj4xOCkrbnwwLGkrPShyJnN8biZ+cykrdFswXS0zNzM4OTczMDJ8MCxpPShpPDwyMHxpPj4+MTIpK3J8MCxzKz0oaSZufHImfm4pK3RbNV0tNzAxNTU4NjkxfDAscz0oczw8NXxzPj4+MjcpK2l8MCxuKz0ocyZyfGkmfnIpK3RbMTBdKzM4MDE2MDgzfDAsbj0objw8OXxuPj4+MjMpK3N8MCxyKz0obiZpfHMmfmkpK3RbMTVdLTY2MDQ3ODMzNXwwLHI9KHI8PDE0fHI+Pj4xOCkrbnwwLGkrPShyJnN8biZ+cykrdFs0XS00MDU1Mzc4NDh8MCxpPShpPDwyMHxpPj4+MTIpK3J8MCxzKz0oaSZufHImfm4pK3RbOV0rNTY4NDQ2NDM4fDAscz0oczw8NXxzPj4+MjcpK2l8MCxuKz0ocyZyfGkmfnIpK3RbMTRdLTEwMTk4MDM2OTB8MCxuPShuPDw5fG4+Pj4yMykrc3wwLHIrPShuJml8cyZ+aSkrdFszXS0xODczNjM5NjF8MCxyPShyPDwxNHxyPj4+MTgpK258MCxpKz0ociZzfG4mfnMpK3RbOF0rMTE2MzUzMTUwMXwwLGk9KGk8PDIwfGk+Pj4xMikrcnwwLHMrPShpJm58ciZ+bikrdFsxM10tMTQ0NDY4MTQ2N3wwLHM9KHM8PDV8cz4+PjI3KStpfDAsbis9KHMmcnxpJn5yKSt0WzJdLTUxNDAzNzg0fDAsbj0objw8OXxuPj4+MjMpK3N8MCxyKz0obiZpfHMmfmkpK3RbN10rMTczNTMyODQ3M3wwLHI9KHI8PDE0fHI+Pj4xOCkrbnwwLGkrPShyJnN8biZ+cykrdFsxMl0tMTkyNjYwNzczNHwwLGk9KGk8PDIwfGk+Pj4xMikrcnwwLHMrPShpXnJebikrdFs1XS0zNzg1NTh8MCxzPShzPDw0fHM+Pj4yOCkraXwwLG4rPShzXmlecikrdFs4XS0yMDIyNTc0NDYzfDAsbj0objw8MTF8bj4+PjIxKStzfDAscis9KG5ec15pKSt0WzExXSsxODM5MDMwNTYyfDAscj0ocjw8MTZ8cj4+PjE2KStufDAsaSs9KHJebl5zKSt0WzE0XS0zNTMwOTU1NnwwLGk9KGk8PDIzfGk+Pj45KStyfDAscys9KGlecl5uKSt0WzFdLTE1MzA5OTIwNjB8MCxzPShzPDw0fHM+Pj4yOCkraXwwLG4rPShzXmlecikrdFs0XSsxMjcyODkzMzUzfDAsbj0objw8MTF8bj4+PjIxKStzfDAscis9KG5ec15pKSt0WzddLTE1NTQ5NzYzMnwwLHI9KHI8PDE2fHI+Pj4xNikrbnwwLGkrPShyXm5ecykrdFsxMF0tMTA5NDczMDY0MHwwLGk9KGk8PDIzfGk+Pj45KStyfDAscys9KGlecl5uKSt0WzEzXSs2ODEyNzkxNzR8MCxzPShzPDw0fHM+Pj4yOCkraXwwLG4rPShzXmlecikrdFswXS0zNTg1MzcyMjJ8MCxuPShuPDwxMXxuPj4+MjEpK3N8MCxyKz0obl5zXmkpK3RbM10tNzIyNTIxOTc5fDAscj0ocjw8MTZ8cj4+PjE2KStufDAsaSs9KHJebl5zKSt0WzZdKzc2MDI5MTg5fDAsaT0oaTw8MjN8aT4+PjkpK3J8MCxzKz0oaV5yXm4pK3RbOV0tNjQwMzY0NDg3fDAscz0oczw8NHxzPj4+MjgpK2l8MCxuKz0oc15pXnIpK3RbMTJdLTQyMTgxNTgzNXwwLG49KG48PDExfG4+Pj4yMSkrc3wwLHIrPShuXnNeaSkrdFsxNV0rNTMwNzQyNTIwfDAscj0ocjw8MTZ8cj4+PjE2KStufDAsaSs9KHJebl5zKSt0WzJdLTk5NTMzODY1MXwwLGk9KGk8PDIzfGk+Pj45KStyfDAscys9KHJeKGl8fm4pKSt0WzBdLTE5ODYzMDg0NHwwLHM9KHM8PDZ8cz4+PjI2KStpfDAsbis9KGleKHN8fnIpKSt0WzddKzExMjY4OTE0MTV8MCxuPShuPDwxMHxuPj4+MjIpK3N8MCxyKz0oc14obnx+aSkpK3RbMTRdLTE0MTYzNTQ5MDV8MCxyPShyPDwxNXxyPj4+MTcpK258MCxpKz0obl4ocnx+cykpK3RbNV0tNTc0MzQwNTV8MCxpPShpPDwyMXxpPj4+MTEpK3J8MCxzKz0ocl4oaXx+bikpK3RbMTJdKzE3MDA0ODU1NzF8MCxzPShzPDw2fHM+Pj4yNikraXwwLG4rPShpXihzfH5yKSkrdFszXS0xODk0OTg2NjA2fDAsbj0objw8MTB8bj4+PjIyKStzfDAscis9KHNeKG58fmkpKSt0WzEwXS0xMDUxNTIzfDAscj0ocjw8MTV8cj4+PjE3KStufDAsaSs9KG5eKHJ8fnMpKSt0WzFdLTIwNTQ5MjI3OTl8MCxpPShpPDwyMXxpPj4+MTEpK3J8MCxzKz0ocl4oaXx+bikpK3RbOF0rMTg3MzMxMzM1OXwwLHM9KHM8PDZ8cz4+PjI2KStpfDAsbis9KGleKHN8fnIpKSt0WzE1XS0zMDYxMTc0NHwwLG49KG48PDEwfG4+Pj4yMikrc3wwLHIrPShzXihufH5pKSkrdFs2XS0xNTYwMTk4MzgwfDAscj0ocjw8MTV8cj4+PjE3KStufDAsaSs9KG5eKHJ8fnMpKSt0WzEzXSsxMzA5MTUxNjQ5fDAsaT0oaTw8MjF8aT4+PjExKStyfDAscys9KHJeKGl8fm4pKSt0WzRdLTE0NTUyMzA3MHwwLHM9KHM8PDZ8cz4+PjI2KStpfDAsbis9KGleKHN8fnIpKSt0WzExXS0xMTIwMjEwMzc5fDAsbj0objw8MTB8bj4+PjIyKStzfDAscis9KHNeKG58fmkpKSt0WzJdKzcxODc4NzI1OXwwLHI9KHI8PDE1fHI+Pj4xNykrbnwwLGkrPShuXihyfH5zKSkrdFs5XS0zNDM0ODU1NTF8MCxpPShpPDwyMXxpPj4+MTEpK3J8MCxlWzBdPXMrZVswXXwwLGVbMV09aStlWzFdfDAsZVsyXT1yK2VbMl18MCxlWzNdPW4rZVszXXwwfXN0YXJ0KCl7cmV0dXJuIHRoaXMuX2RhdGFMZW5ndGg9MCx0aGlzLl9idWZmZXJMZW5ndGg9MCx0aGlzLl9zdGF0ZS5zZXQoQy5zdGF0ZUlkZW50aXR5KSx0aGlzfWFwcGVuZFN0cihlKXtjb25zdCB0PXRoaXMuX2J1ZmZlcjgscz10aGlzLl9idWZmZXIzMjtsZXQgaSxyLG49dGhpcy5fYnVmZmVyTGVuZ3RoO2ZvcihyPTA7cjxlLmxlbmd0aDtyKz0xKXtpZihpPWUuY2hhckNvZGVBdChyKSxpPDEyOCl0W24rK109aTtlbHNlIGlmKGk8MjA0OCl0W24rK109MTkyKyhpPj4+NiksdFtuKytdPTYzJml8MTI4O2Vsc2UgaWYoaTw1NTI5Nnx8aT41NjMxOSl0W24rK109MjI0KyhpPj4+MTIpLHRbbisrXT1pPj4+NiY2M3wxMjgsdFtuKytdPTYzJml8MTI4O2Vsc2V7aWYoaT0xMDI0KihpLTU1Mjk2KSsoZS5jaGFyQ29kZUF0KCsrciktNTYzMjApKzY1NTM2LGk+MTExNDExMSl0aHJvdyBuZXcgRXJyb3IoIlVuaWNvZGUgc3RhbmRhcmQgc3VwcG9ydHMgY29kZSBwb2ludHMgdXAgdG8gVSsxMEZGRkYiKTt0W24rK109MjQwKyhpPj4+MTgpLHRbbisrXT1pPj4+MTImNjN8MTI4LHRbbisrXT1pPj4+NiY2M3wxMjgsdFtuKytdPTYzJml8MTI4fW4+PTY0JiYodGhpcy5fZGF0YUxlbmd0aCs9NjQsQy5fbWQ1Y3ljbGUodGhpcy5fc3RhdGUscyksbi09NjQsc1swXT1zWzE2XSl9cmV0dXJuIHRoaXMuX2J1ZmZlckxlbmd0aD1uLHRoaXN9YXBwZW5kQXNjaWlTdHIoZSl7Y29uc3QgdD10aGlzLl9idWZmZXI4LHM9dGhpcy5fYnVmZmVyMzI7bGV0IGkscj10aGlzLl9idWZmZXJMZW5ndGgsbj0wO2Zvcig7Oyl7Zm9yKGk9TWF0aC5taW4oZS5sZW5ndGgtbiw2NC1yKTtpLS07KXRbcisrXT1lLmNoYXJDb2RlQXQobisrKTtpZihyPDY0KWJyZWFrO3RoaXMuX2RhdGFMZW5ndGgrPTY0LEMuX21kNWN5Y2xlKHRoaXMuX3N0YXRlLHMpLHI9MH1yZXR1cm4gdGhpcy5fYnVmZmVyTGVuZ3RoPXIsdGhpc31hcHBlbmRCeXRlQXJyYXkoZSl7Y29uc3QgdD10aGlzLl9idWZmZXI4LHM9dGhpcy5fYnVmZmVyMzI7bGV0IGkscj10aGlzLl9idWZmZXJMZW5ndGgsbj0wO2Zvcig7Oyl7Zm9yKGk9TWF0aC5taW4oZS5sZW5ndGgtbiw2NC1yKTtpLS07KXRbcisrXT1lW24rK107aWYocjw2NClicmVhazt0aGlzLl9kYXRhTGVuZ3RoKz02NCxDLl9tZDVjeWNsZSh0aGlzLl9zdGF0ZSxzKSxyPTB9cmV0dXJuIHRoaXMuX2J1ZmZlckxlbmd0aD1yLHRoaXN9Z2V0U3RhdGUoKXtjb25zdCBlPXRoaXMuX3N0YXRlO3JldHVybntidWZmZXI6U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHRoaXMuX2J1ZmZlcjgpLGJ1Zmxlbjp0aGlzLl9idWZmZXJMZW5ndGgsbGVuZ3RoOnRoaXMuX2RhdGFMZW5ndGgsc3RhdGU6W2VbMF0sZVsxXSxlWzJdLGVbM11dfX1zZXRTdGF0ZShlKXtjb25zdCB0PWUuYnVmZmVyLHM9ZS5zdGF0ZSxpPXRoaXMuX3N0YXRlO2xldCByO2Zvcih0aGlzLl9kYXRhTGVuZ3RoPWUubGVuZ3RoLHRoaXMuX2J1ZmZlckxlbmd0aD1lLmJ1ZmxlbixpWzBdPXNbMF0saVsxXT1zWzFdLGlbMl09c1syXSxpWzNdPXNbM10scj0wO3I8dC5sZW5ndGg7cis9MSl0aGlzLl9idWZmZXI4W3JdPXQuY2hhckNvZGVBdChyKX1lbmQoZT0hMSl7Y29uc3QgdD10aGlzLl9idWZmZXJMZW5ndGgscz10aGlzLl9idWZmZXI4LGk9dGhpcy5fYnVmZmVyMzIscj0xKyh0Pj4yKTtsZXQgbjtpZih0aGlzLl9kYXRhTGVuZ3RoKz10LHNbdF09MTI4LHNbdCsxXT1zW3QrMl09c1t0KzNdPTAsaS5zZXQoQy5idWZmZXIzMklkZW50aXR5LnN1YmFycmF5KHIpLHIpLHQ+NTUmJihDLl9tZDVjeWNsZSh0aGlzLl9zdGF0ZSxpKSxpLnNldChDLmJ1ZmZlcjMySWRlbnRpdHkpKSxuPTgqdGhpcy5fZGF0YUxlbmd0aCxuPD00Mjk0OTY3Mjk1KWlbMTRdPW47ZWxzZXtjb25zdCBlPW4udG9TdHJpbmcoMTYpLm1hdGNoKC8oLio/KSguezAsOH0pJC8pO2lmKG51bGw9PT1lKXJldHVybjtjb25zdCB0PXBhcnNlSW50KGVbMl0sMTYpLHM9cGFyc2VJbnQoZVsxXSwxNil8fDA7aVsxNF09dCxpWzE1XT1zfXJldHVybiBDLl9tZDVjeWNsZSh0aGlzLl9zdGF0ZSxpKSxlP3RoaXMuX3N0YXRlOkMuX2hleCh0aGlzLl9zdGF0ZSl9fWZ1bmN0aW9uIEEoZSl7cmV0dXJuIEMuaGFzaFN0cihlKX1DLnN0YXRlSWRlbnRpdHk9bmV3IEludDMyQXJyYXkoWzE3MzI1ODQxOTMsLTI3MTczMzg3OSwtMTczMjU4NDE5NCwyNzE3MzM4NzhdKSxDLmJ1ZmZlcjMySWRlbnRpdHk9bmV3IEludDMyQXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDBdKSxDLmhleENoYXJzPSIwMTIzNDU2Nzg5YWJjZGVmIixDLmhleE91dD1bXSxDLm9uZVBhc3NIYXNoZXI9bmV3IEMsIjVkNDE0MDJhYmM0YjJhNzZiOTcxOWQ5MTEwMTdjNTkyIiE9PUMuaGFzaFN0cigiaGVsbG8iKSYmY29uc29sZS5lcnJvcigiTWQ1IHNlbGYgdGVzdCBmYWlsZWQuIik7Y2xhc3MgeHtjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy5sb2dnZXI9ZS5nZXRMb2dnZXIoInNpcGpzLmRpZ2VzdGF1dGhlbnRpY2F0aW9uIiksdGhpcy51c2VybmFtZT10LHRoaXMucGFzc3dvcmQ9cyx0aGlzLm5jPTAsdGhpcy5uY0hleD0iMDAwMDAwMDAifWF1dGhlbnRpY2F0ZShlLHQscyl7aWYodGhpcy5hbGdvcml0aG09dC5hbGdvcml0aG0sdGhpcy5yZWFsbT10LnJlYWxtLHRoaXMubm9uY2U9dC5ub25jZSx0aGlzLm9wYXF1ZT10Lm9wYXF1ZSx0aGlzLnN0YWxlPXQuc3RhbGUsdGhpcy5hbGdvcml0aG0pe2lmKCJNRDUiIT09dGhpcy5hbGdvcml0aG0pcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImNoYWxsZW5nZSB3aXRoIERpZ2VzdCBhbGdvcml0aG0gZGlmZmVyZW50IHRoYW4gJ01ENScsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQiKSwhMX1lbHNlIHRoaXMuYWxnb3JpdGhtPSJNRDUiO2lmKCF0aGlzLnJlYWxtKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJjaGFsbGVuZ2Ugd2l0aG91dCBEaWdlc3QgcmVhbG0sIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQiKSwhMTtpZighdGhpcy5ub25jZSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IG5vbmNlLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkIiksITE7aWYodC5xb3ApaWYodC5xb3AuaW5kZXhPZigiYXV0aCIpPi0xKXRoaXMucW9wPSJhdXRoIjtlbHNle2lmKCEodC5xb3AuaW5kZXhPZigiYXV0aC1pbnQiKT4tMSkpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImNoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCBxb3AgZGlmZmVyZW50IHRoYW4gJ2F1dGgnIG9yICdhdXRoLWludCcsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQiKSwhMTt0aGlzLnFvcD0iYXV0aC1pbnQifWVsc2UgdGhpcy5xb3A9dm9pZCAwO3JldHVybiB0aGlzLm1ldGhvZD1lLm1ldGhvZCx0aGlzLnVyaT1lLnJ1cmksdGhpcy5jbm9uY2U9cCgxMiksdGhpcy5uYys9MSx0aGlzLnVwZGF0ZU5jSGV4KCksNDI5NDk2NzI5Nj09PXRoaXMubmMmJih0aGlzLm5jPTEsdGhpcy5uY0hleD0iMDAwMDAwMDEiKSx0aGlzLmNhbGN1bGF0ZVJlc3BvbnNlKHMpLCEwfXRvU3RyaW5nKCl7Y29uc3QgZT1bXTtpZighdGhpcy5yZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoInJlc3BvbnNlIGZpZWxkIGRvZXMgbm90IGV4aXN0LCBjYW5ub3QgZ2VuZXJhdGUgQXV0aG9yaXphdGlvbiBoZWFkZXIiKTtyZXR1cm4gZS5wdXNoKCJhbGdvcml0aG09Iit0aGlzLmFsZ29yaXRobSksZS5wdXNoKCd1c2VybmFtZT0iJyt0aGlzLnVzZXJuYW1lKyciJyksZS5wdXNoKCdyZWFsbT0iJyt0aGlzLnJlYWxtKyciJyksZS5wdXNoKCdub25jZT0iJyt0aGlzLm5vbmNlKyciJyksZS5wdXNoKCd1cmk9IicrdGhpcy51cmkrJyInKSxlLnB1c2goJ3Jlc3BvbnNlPSInK3RoaXMucmVzcG9uc2UrJyInKSx0aGlzLm9wYXF1ZSYmZS5wdXNoKCdvcGFxdWU9IicrdGhpcy5vcGFxdWUrJyInKSx0aGlzLnFvcCYmKGUucHVzaCgicW9wPSIrdGhpcy5xb3ApLGUucHVzaCgnY25vbmNlPSInK3RoaXMuY25vbmNlKyciJyksZS5wdXNoKCJuYz0iK3RoaXMubmNIZXgpKSwiRGlnZXN0ICIrZS5qb2luKCIsICIpfXVwZGF0ZU5jSGV4KCl7Y29uc3QgZT1OdW1iZXIodGhpcy5uYykudG9TdHJpbmcoMTYpO3RoaXMubmNIZXg9IjAwMDAwMDAwIi5zdWJzdHIoMCw4LWUubGVuZ3RoKStlfWNhbGN1bGF0ZVJlc3BvbnNlKGUpe2xldCB0O2NvbnN0IHM9QSh0aGlzLnVzZXJuYW1lKyI6Iit0aGlzLnJlYWxtKyI6Iit0aGlzLnBhc3N3b3JkKTsiYXV0aCI9PT10aGlzLnFvcD8odD1BKHRoaXMubWV0aG9kKyI6Iit0aGlzLnVyaSksdGhpcy5yZXNwb25zZT1BKHMrIjoiK3RoaXMubm9uY2UrIjoiK3RoaXMubmNIZXgrIjoiK3RoaXMuY25vbmNlKyI6YXV0aDoiK3QpKToiYXV0aC1pbnQiPT09dGhpcy5xb3A/KHQ9QSh0aGlzLm1ldGhvZCsiOiIrdGhpcy51cmkrIjoiK0EoZXx8IiIpKSx0aGlzLnJlc3BvbnNlPUEocysiOiIrdGhpcy5ub25jZSsiOiIrdGhpcy5uY0hleCsiOiIrdGhpcy5jbm9uY2UrIjphdXRoLWludDoiK3QpKTp2b2lkIDA9PT10aGlzLnFvcCYmKHQ9QSh0aGlzLm1ldGhvZCsiOiIrdGhpcy51cmkpLHRoaXMucmVzcG9uc2U9QShzKyI6Iit0aGlzLm5vbmNlKyI6Iit0KSl9fWZ1bmN0aW9uIHEoZSx0KXtpZih0LnN0YXR1c0NvZGU8MTAwfHx0LnN0YXR1c0NvZGU+Njk5KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgc3RhdHVzQ29kZTogIit0LnN0YXR1c0NvZGUpO2NvbnN0IHM9dC5yZWFzb25QaHJhc2U/dC5yZWFzb25QaHJhc2U6Zih0LnN0YXR1c0NvZGUpO2xldCBpPSJTSVAvMi4wICIrdC5zdGF0dXNDb2RlKyIgIitzKyJcclxuIjt0LnN0YXR1c0NvZGU+PTEwMCYmdC5zdGF0dXNDb2RlLHQuc3RhdHVzQ29kZTtjb25zdCByPSJGcm9tOiAiK2UuZ2V0SGVhZGVyKCJGcm9tIikrIlxyXG4iLG49IkNhbGwtSUQ6ICIrZS5jYWxsSWQrIlxyXG4iLG89IkNTZXE6ICIrZS5jc2VxKyIgIitlLm1ldGhvZCsiXHJcbiIsYT1lLmdldEhlYWRlcnMoInZpYSIpLnJlZHVjZSgoZSx0KT0+ZSsiVmlhOiAiK3QrIlxyXG4iLCIiKTtsZXQgYz0iVG86ICIrZS5nZXRIZWFkZXIoInRvIik7aWYodC5zdGF0dXNDb2RlPjEwMCYmIWUucGFyc2VIZWFkZXIoInRvIikuaGFzUGFyYW0oInRhZyIpKXtsZXQgZT10LnRvVGFnO2V8fChlPW0oKSksYys9Ijt0YWc9IitlfWMrPSJcclxuIjtsZXQgaD0iIjt0LnN1cHBvcnRlZCYmKGg9IlN1cHBvcnRlZDogIit0LnN1cHBvcnRlZC5qb2luKCIsICIpKyJcclxuIik7bGV0IGQ9IiI7dC51c2VyQWdlbnQmJihkPSJVc2VyLUFnZW50OiAiK3QudXNlckFnZW50KyJcclxuIik7bGV0IGc9IiI7cmV0dXJuIHQuZXh0cmFIZWFkZXJzJiYoZz10LmV4dHJhSGVhZGVycy5yZWR1Y2UoKGUsdCk9PmUrdC50cmltKCkrIlxyXG4iLCIiKSksaSs9YSxpKz1yLGkrPWMsaSs9byxpKz1uLGkrPWgsaSs9ZCxpKz1nLHQuYm9keT8oaSs9IkNvbnRlbnQtVHlwZTogIit0LmJvZHkuY29udGVudFR5cGUrIlxyXG4iLGkrPSJDb250ZW50LUxlbmd0aDogIit3KHQuYm9keS5jb250ZW50KSsiXHJcblxyXG4iLGkrPXQuYm9keS5jb250ZW50KTppKz0iQ29udGVudC1MZW5ndGg6IDBcclxuXHJcbiIse21lc3NhZ2U6aX19dmFyIGssXyxQOyFmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7bGV0IHM9dCxpPTAscj0wO2lmKGUuc3Vic3RyaW5nKHMscysyKS5tYXRjaCgvKF5cclxuKS8pKXJldHVybi0yO2Zvcig7MD09PWk7KXtpZihyPWUuaW5kZXhPZigiXHJcbiIscyksLTE9PT1yKXJldHVybiByOyFlLnN1YnN0cmluZyhyKzIscis0KS5tYXRjaCgvKF5cclxuKS8pJiZlLmNoYXJBdChyKzIpLm1hdGNoKC8oXlxzKykvKT9zPXIrMjppPXJ9cmV0dXJuIGl9ZnVuY3Rpb24gcyhlLHQscyxpKXtjb25zdCByPXQuaW5kZXhPZigiOiIscyksbj10LnN1YnN0cmluZyhzLHIpLnRyaW0oKSxvPXQuc3Vic3RyaW5nKHIrMSxpKS50cmltKCk7bGV0IGE7c3dpdGNoKG4udG9Mb3dlckNhc2UoKSl7Y2FzZSJ2aWEiOmNhc2UidiI6ZS5hZGRIZWFkZXIoInZpYSIsbyksMT09PWUuZ2V0SGVhZGVycygidmlhIikubGVuZ3RoPyhhPWUucGFyc2VIZWFkZXIoIlZpYSIpLGEmJihlLnZpYT1hLGUudmlhQnJhbmNoPWEuYnJhbmNoKSk6YT0wO2JyZWFrO2Nhc2UiZnJvbSI6Y2FzZSJmIjplLnNldEhlYWRlcigiZnJvbSIsbyksYT1lLnBhcnNlSGVhZGVyKCJmcm9tIiksYSYmKGUuZnJvbT1hLGUuZnJvbVRhZz1hLmdldFBhcmFtKCJ0YWciKSk7YnJlYWs7Y2FzZSJ0byI6Y2FzZSJ0IjplLnNldEhlYWRlcigidG8iLG8pLGE9ZS5wYXJzZUhlYWRlcigidG8iKSxhJiYoZS50bz1hLGUudG9UYWc9YS5nZXRQYXJhbSgidGFnIikpO2JyZWFrO2Nhc2UicmVjb3JkLXJvdXRlIjppZihhPWQucGFyc2UobywiUmVjb3JkX1JvdXRlIiksLTE9PT1hKXthPXZvaWQgMDticmVha31pZighKGEgaW5zdGFuY2VvZiBBcnJheSkpe2E9dm9pZCAwO2JyZWFrfWEuZm9yRWFjaCh0PT57ZS5hZGRIZWFkZXIoInJlY29yZC1yb3V0ZSIsby5zdWJzdHJpbmcodC5wb3NpdGlvbix0Lm9mZnNldCkpLGUuaGVhZGVyc1siUmVjb3JkLVJvdXRlIl1bZS5nZXRIZWFkZXJzKCJyZWNvcmQtcm91dGUiKS5sZW5ndGgtMV0ucGFyc2VkPXQucGFyc2VkfSk7YnJlYWs7Y2FzZSJjYWxsLWlkIjpjYXNlImkiOmUuc2V0SGVhZGVyKCJjYWxsLWlkIixvKSxhPWUucGFyc2VIZWFkZXIoImNhbGwtaWQiKSxhJiYoZS5jYWxsSWQ9byk7YnJlYWs7Y2FzZSJjb250YWN0IjpjYXNlIm0iOmlmKGE9ZC5wYXJzZShvLCJDb250YWN0IiksLTE9PT1hKXthPXZvaWQgMDticmVha31pZighKGEgaW5zdGFuY2VvZiBBcnJheSkpe2E9dm9pZCAwO2JyZWFrfWEuZm9yRWFjaCh0PT57ZS5hZGRIZWFkZXIoImNvbnRhY3QiLG8uc3Vic3RyaW5nKHQucG9zaXRpb24sdC5vZmZzZXQpKSxlLmhlYWRlcnMuQ29udGFjdFtlLmdldEhlYWRlcnMoImNvbnRhY3QiKS5sZW5ndGgtMV0ucGFyc2VkPXQucGFyc2VkfSk7YnJlYWs7Y2FzZSJjb250ZW50LWxlbmd0aCI6Y2FzZSJsIjplLnNldEhlYWRlcigiY29udGVudC1sZW5ndGgiLG8pLGE9ZS5wYXJzZUhlYWRlcigiY29udGVudC1sZW5ndGgiKTticmVhaztjYXNlImNvbnRlbnQtdHlwZSI6Y2FzZSJjIjplLnNldEhlYWRlcigiY29udGVudC10eXBlIixvKSxhPWUucGFyc2VIZWFkZXIoImNvbnRlbnQtdHlwZSIpO2JyZWFrO2Nhc2UiY3NlcSI6ZS5zZXRIZWFkZXIoImNzZXEiLG8pLGE9ZS5wYXJzZUhlYWRlcigiY3NlcSIpLGEmJihlLmNzZXE9YS52YWx1ZSksZSBpbnN0YW5jZW9mIHkmJihlLm1ldGhvZD1hLm1ldGhvZCk7YnJlYWs7Y2FzZSJtYXgtZm9yd2FyZHMiOmUuc2V0SGVhZGVyKCJtYXgtZm9yd2FyZHMiLG8pLGE9ZS5wYXJzZUhlYWRlcigibWF4LWZvcndhcmRzIik7YnJlYWs7Y2FzZSJ3d3ctYXV0aGVudGljYXRlIjplLnNldEhlYWRlcigid3d3LWF1dGhlbnRpY2F0ZSIsbyksYT1lLnBhcnNlSGVhZGVyKCJ3d3ctYXV0aGVudGljYXRlIik7YnJlYWs7Y2FzZSJwcm94eS1hdXRoZW50aWNhdGUiOmUuc2V0SGVhZGVyKCJwcm94eS1hdXRoZW50aWNhdGUiLG8pLGE9ZS5wYXJzZUhlYWRlcigicHJveHktYXV0aGVudGljYXRlIik7YnJlYWs7Y2FzZSJyZWZlci10byI6Y2FzZSJyIjplLnNldEhlYWRlcigicmVmZXItdG8iLG8pLGE9ZS5wYXJzZUhlYWRlcigicmVmZXItdG8iKSxhJiYoZS5yZWZlclRvPWEpO2JyZWFrO2RlZmF1bHQ6ZS5hZGRIZWFkZXIobi50b0xvd2VyQ2FzZSgpLG8pLGE9MH1yZXR1cm4gdm9pZCAwIT09YXx8e2Vycm9yOiJlcnJvciBwYXJzaW5nIGhlYWRlciAnIituKyInIn19ZS5nZXRIZWFkZXI9dCxlLnBhcnNlSGVhZGVyPXMsZS5wYXJzZU1lc3NhZ2U9ZnVuY3Rpb24oZSxpKXtsZXQgcj0wLG49ZS5pbmRleE9mKCJcclxuIik7aWYoLTE9PT1uKXJldHVybiB2b2lkIGkud2Fybigibm8gQ1JMRiBmb3VuZCwgbm90IGEgU0lQIG1lc3NhZ2UsIGRpc2NhcmRlZCIpO2NvbnN0IG89ZS5zdWJzdHJpbmcoMCxuKSxhPWQucGFyc2UobywiUmVxdWVzdF9SZXNwb25zZSIpO2xldCBjLGg7aWYoLTEhPT1hKXtmb3IoYS5zdGF0dXNfY29kZT8oYz1uZXcgeSxjLnN0YXR1c0NvZGU9YS5zdGF0dXNfY29kZSxjLnJlYXNvblBocmFzZT1hLnJlYXNvbl9waHJhc2UpOihjPW5ldyBULGMubWV0aG9kPWEubWV0aG9kLGMucnVyaT1hLnVyaSksYy5kYXRhPWUscj1uKzI7Oyl7aWYobj10KGUsciksLTI9PT1uKXtoPXIrMjticmVha31pZigtMT09PW4pcmV0dXJuIHZvaWQgaS5lcnJvcigibWFsZm9ybWVkIG1lc3NhZ2UiKTtpZighMCE9PXMoYyxlLHIsbikpcmV0dXJuIHZvaWQgaS5lcnJvcihhLmVycm9yKTtyPW4rMn1yZXR1cm4gYy5oYXNIZWFkZXIoImNvbnRlbnQtbGVuZ3RoIik/Yy5ib2R5PWUuc3Vic3RyKGgsTnVtYmVyKGMuZ2V0SGVhZGVyKCJjb250ZW50LWxlbmd0aCIpKSk6Yy5ib2R5PWUuc3Vic3RyaW5nKGgpLGN9aS53YXJuKCdlcnJvciBwYXJzaW5nIGZpcnN0IGxpbmUgb2YgU0lQIG1lc3NhZ2U6ICInK28rJyInKX19KGt8fChrPXt9KSk7Y2xhc3MgRHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuY29yZT1lLHRoaXMuZGlhbG9nU3RhdGU9dCx0aGlzLmNvcmUuZGlhbG9ncy5zZXQodGhpcy5pZCx0aGlzKX1zdGF0aWMgaW5pdGlhbERpYWxvZ1N0YXRlRm9yVXNlckFnZW50Q2xpZW50KGUsdCl7Y29uc3Qgcz10LmdldEhlYWRlcnMoInJlY29yZC1yb3V0ZSIpLnJldmVyc2UoKSxpPXQucGFyc2VIZWFkZXIoImNvbnRhY3QiKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoIkNvbnRhY3QgdW5kZWZpbmVkLiIpO2lmKCEoaSBpbnN0YW5jZW9mIG8pKXRocm93IG5ldyBFcnJvcigiQ29udGFjdCBub3QgaW5zdGFuY2Ugb2YgTmFtZUFkZHJIZWFkZXIuIik7Y29uc3Qgcj1pLnVyaSxuPWUuY3NlcSxhPWUuY2FsbElkLGM9ZS5mcm9tVGFnLGg9dC50b1RhZztpZighYSl0aHJvdyBuZXcgRXJyb3IoIkNhbGwgaWQgdW5kZWZpbmVkLiIpO2lmKCFjKXRocm93IG5ldyBFcnJvcigiRnJvbSB0YWcgdW5kZWZpbmVkLiIpO2lmKCFoKXRocm93IG5ldyBFcnJvcigiVG8gdGFnIHVuZGVmaW5lZC4iKTtpZighZS5mcm9tKXRocm93IG5ldyBFcnJvcigiRnJvbSB1bmRlZmluZWQuIik7aWYoIWUudG8pdGhyb3cgbmV3IEVycm9yKCJUbyB1bmRlZmluZWQuIik7Y29uc3QgZD1lLmZyb20udXJpLGc9ZS50by51cmk7aWYoIXQuc3RhdHVzQ29kZSl0aHJvdyBuZXcgRXJyb3IoIkluY29taW5nIHJlc3BvbnNlIHN0YXR1cyBjb2RlIHVuZGVmaW5lZC4iKTtyZXR1cm57aWQ6YStjK2gsZWFybHk6dC5zdGF0dXNDb2RlPDIwMCxjYWxsSWQ6YSxsb2NhbFRhZzpjLHJlbW90ZVRhZzpoLGxvY2FsU2VxdWVuY2VOdW1iZXI6bixyZW1vdGVTZXF1ZW5jZU51bWJlcjp2b2lkIDAsbG9jYWxVUkk6ZCxyZW1vdGVVUkk6ZyxyZW1vdGVUYXJnZXQ6cixyb3V0ZVNldDpzLHNlY3VyZTohMX19c3RhdGljIGluaXRpYWxEaWFsb2dTdGF0ZUZvclVzZXJBZ2VudFNlcnZlcihlLHQscz0hMSl7Y29uc3QgaT1lLmdldEhlYWRlcnMoInJlY29yZC1yb3V0ZSIpLHI9ZS5wYXJzZUhlYWRlcigiY29udGFjdCIpO2lmKCFyKXRocm93IG5ldyBFcnJvcigiQ29udGFjdCB1bmRlZmluZWQuIik7aWYoIShyIGluc3RhbmNlb2YgbykpdGhyb3cgbmV3IEVycm9yKCJDb250YWN0IG5vdCBpbnN0YW5jZSBvZiBOYW1lQWRkckhlYWRlci4iKTtjb25zdCBuPXIudXJpLGE9ZS5jc2VxLGM9ZS5jYWxsSWQsaD10LGQ9ZS5mcm9tVGFnLGc9ZS5mcm9tLnVyaTtyZXR1cm57aWQ6YytoK2QsZWFybHk6cyxjYWxsSWQ6Yyxsb2NhbFRhZzpoLHJlbW90ZVRhZzpkLGxvY2FsU2VxdWVuY2VOdW1iZXI6dm9pZCAwLHJlbW90ZVNlcXVlbmNlTnVtYmVyOmEsbG9jYWxVUkk6ZS50by51cmkscmVtb3RlVVJJOmcscmVtb3RlVGFyZ2V0Om4scm91dGVTZXQ6aSxzZWN1cmU6ITF9fWRpc3Bvc2UoKXt0aGlzLmNvcmUuZGlhbG9ncy5kZWxldGUodGhpcy5pZCl9Z2V0IGlkKCl7cmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUuaWR9Z2V0IGVhcmx5KCl7cmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUuZWFybHl9Z2V0IGNhbGxJZCgpe3JldHVybiB0aGlzLmRpYWxvZ1N0YXRlLmNhbGxJZH1nZXQgbG9jYWxUYWcoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFRhZ31nZXQgcmVtb3RlVGFnKCl7cmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUucmVtb3RlVGFnfWdldCBsb2NhbFNlcXVlbmNlTnVtYmVyKCl7cmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUubG9jYWxTZXF1ZW5jZU51bWJlcn1nZXQgcmVtb3RlU2VxdWVuY2VOdW1iZXIoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5yZW1vdGVTZXF1ZW5jZU51bWJlcn1nZXQgbG9jYWxVUkkoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFVSSX1nZXQgcmVtb3RlVVJJKCl7cmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUucmVtb3RlVVJJfWdldCByZW1vdGVUYXJnZXQoKXtyZXR1cm4gdGhpcy5kaWFsb2dTdGF0ZS5yZW1vdGVUYXJnZXR9Z2V0IHJvdXRlU2V0KCl7cmV0dXJuIHRoaXMuZGlhbG9nU3RhdGUucm91dGVTZXR9Z2V0IHNlY3VyZSgpe3JldHVybiB0aGlzLmRpYWxvZ1N0YXRlLnNlY3VyZX1nZXQgdXNlckFnZW50Q29yZSgpe3JldHVybiB0aGlzLmNvcmV9Y29uZmlybSgpe3RoaXMuZGlhbG9nU3RhdGUuZWFybHk9ITF9cmVjZWl2ZVJlcXVlc3QoZSl7aWYoZS5tZXRob2QhPT1sLkFDSyl7aWYodGhpcy5yZW1vdGVTZXF1ZW5jZU51bWJlcil7aWYoZS5jc2VxPD10aGlzLnJlbW90ZVNlcXVlbmNlTnVtYmVyKXRocm93IG5ldyBFcnJvcigiT3V0IG9mIHNlcXVlbmNlIGluIGRpYWxvZyByZXF1ZXN0LiBEaWQgeW91IGZvcmdldCB0byBjYWxsIHNlcXVlbmNlR3VhcmQoKT8iKTt0aGlzLmRpYWxvZ1N0YXRlLnJlbW90ZVNlcXVlbmNlTnVtYmVyPWUuY3NlcX10aGlzLnJlbW90ZVNlcXVlbmNlTnVtYmVyfHwodGhpcy5kaWFsb2dTdGF0ZS5yZW1vdGVTZXF1ZW5jZU51bWJlcj1lLmNzZXEpfX1yZWNvbXB1dGVSb3V0ZVNldChlKXt0aGlzLmRpYWxvZ1N0YXRlLnJvdXRlU2V0PWUuZ2V0SGVhZGVycygicmVjb3JkLXJvdXRlIikucmV2ZXJzZSgpfWNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UoZSx0KXtjb25zdCBzPXRoaXMucmVtb3RlVVJJLGk9dGhpcy5yZW1vdGVUYWcscj10aGlzLmxvY2FsVVJJLG49dGhpcy5sb2NhbFRhZyxvPXRoaXMuY2FsbElkO2xldCBhO2E9dCYmdC5jc2VxP3QuY3NlcTp0aGlzLmRpYWxvZ1N0YXRlLmxvY2FsU2VxdWVuY2VOdW1iZXI/dGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFNlcXVlbmNlTnVtYmVyKz0xOnRoaXMuZGlhbG9nU3RhdGUubG9jYWxTZXF1ZW5jZU51bWJlcj0xO2NvbnN0IGM9dGhpcy5yZW1vdGVUYXJnZXQsaD10aGlzLnJvdXRlU2V0LGQ9dCYmdC5leHRyYUhlYWRlcnMsZz10JiZ0LmJvZHk7cmV0dXJuIHRoaXMudXNlckFnZW50Q29yZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShlLGMscixzLHtjYWxsSWQ6byxjc2VxOmEsZnJvbVRhZzpuLHRvVGFnOmkscm91dGVTZXQ6aH0sZCxnKX1pbmNyZW1lbnRMb2NhbFNlcXVlbmNlTnVtYmVyKCl7aWYoIXRoaXMuZGlhbG9nU3RhdGUubG9jYWxTZXF1ZW5jZU51bWJlcil0aHJvdyBuZXcgRXJyb3IoIkxvY2FsIHNlcXVlbmNlIG51bWJlciB1bmRlZmluZWQuIik7dGhpcy5kaWFsb2dTdGF0ZS5sb2NhbFNlcXVlbmNlTnVtYmVyKz0xfXNlcXVlbmNlR3VhcmQoZSl7cmV0dXJuIGUubWV0aG9kPT09bC5BQ0t8fCghKHRoaXMucmVtb3RlU2VxdWVuY2VOdW1iZXImJmUuY3NlcTw9dGhpcy5yZW1vdGVTZXF1ZW5jZU51bWJlcil8fCh0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo1MDB9KSwhMSkpfX0hZnVuY3Rpb24oZSl7ZS5Jbml0aWFsPSJJbml0aWFsIixlLkVhcmx5PSJFYXJseSIsZS5BY2tXYWl0PSJBY2tXYWl0IixlLkNvbmZpcm1lZD0iQ29uZmlybWVkIixlLlRlcm1pbmF0ZWQ9IlRlcm1pbmF0ZWQifShffHwoXz17fSkpLGZ1bmN0aW9uKGUpe2UuSW5pdGlhbD0iSW5pdGlhbCIsZS5IYXZlTG9jYWxPZmZlcj0iSGF2ZUxvY2FsT2ZmZXIiLGUuSGF2ZVJlbW90ZU9mZmVyPSJIYXZlUmVtb3RlT2ZmZXIiLGUuU3RhYmxlPSJTdGFibGUiLGUuQ2xvc2VkPSJDbG9zZWQifShQfHwoUD17fSkpO2NvbnN0IEg9NTAwLE49e1QxOkgsVDI6NGUzLFQ0OjVlMyxUSU1FUl9COjMyZTMsVElNRVJfRDowLFRJTUVSX0Y6MzJlMyxUSU1FUl9IOjMyZTMsVElNRVJfSTowLFRJTUVSX0o6MCxUSU1FUl9LOjAsVElNRVJfTDozMmUzLFRJTUVSX006MzJlMyxUSU1FUl9OOjMyZTMsUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUw6NmU0fTt2YXIgTyxVLE09cygwKTtjbGFzcyBqIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsbmV3LnRhcmdldC5wcm90b3R5cGUpfX1jbGFzcyBGIGV4dGVuZHMgantjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHwiVHJhbnNhY3Rpb24gc3RhdGUgZXJyb3IuIil9fWNsYXNzIEwgZXh0ZW5kcyBqe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fCJVbnNwZWNpZmllZCB0cmFuc3BvcnQgZXJyb3IuIil9fWNsYXNzIEIgZXh0ZW5kcyBNLkV2ZW50RW1pdHRlcntjb25zdHJ1Y3RvcihlLHQscyxpLHIpe3N1cGVyKCksdGhpcy5fdHJhbnNwb3J0PWUsdGhpcy5fdXNlcj10LHRoaXMuX2lkPXMsdGhpcy5fc3RhdGU9aSx0aGlzLmxvZ2dlcj10LmxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKHIscyksdGhpcy5sb2dnZXIuZGVidWcoYENvbnN0cnVjdGluZyAke3RoaXMudHlwZVRvU3RyaW5nKCl9IHdpdGggaWQgJHt0aGlzLmlkfS5gKX1kaXNwb3NlKCl7dGhpcy5sb2dnZXIuZGVidWcoYERlc3Ryb3llZCAke3RoaXMudHlwZVRvU3RyaW5nKCl9IHdpdGggaWQgJHt0aGlzLmlkfS5gKX1nZXQgaWQoKXtyZXR1cm4gdGhpcy5faWR9Z2V0IGtpbmQoKXt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQga2luZC4iKX1nZXQgc3RhdGUoKXtyZXR1cm4gdGhpcy5fc3RhdGV9Z2V0IHRyYW5zcG9ydCgpe3JldHVybiB0aGlzLl90cmFuc3BvcnR9b24oZSx0KXtyZXR1cm4gc3VwZXIub24oZSx0KX1sb2dUcmFuc3BvcnRFcnJvcihlLHQpe3RoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSksdGhpcy5sb2dnZXIuZXJyb3IoYFRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCBpbiAke3RoaXMudHlwZVRvU3RyaW5nKCl9IHdpdGggaWQgJHt0aGlzLmlkfS5gKSx0aGlzLmxvZ2dlci5lcnJvcih0KX1zZW5kKGUpe3JldHVybiB0aGlzLnRyYW5zcG9ydC5zZW5kKGUpLmNhdGNoKGU9PntpZihlIGluc3RhbmNlb2YgTCl0aHJvdyB0aGlzLm9uVHJhbnNwb3J0RXJyb3IoZSksZTtsZXQgdDt0aHJvdyB0PWUmJiJzdHJpbmciPT10eXBlb2YgZS5tZXNzYWdlP25ldyBMKGUubWVzc2FnZSk6bmV3IEwsdGhpcy5vblRyYW5zcG9ydEVycm9yKHQpLHR9KX1zZXRTdGF0ZShlKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgU3RhdGUgY2hhbmdlIHRvICIke2V9IiBvbiAke3RoaXMudHlwZVRvU3RyaW5nKCl9IHdpdGggaWQgJHt0aGlzLmlkfS5gKSx0aGlzLl9zdGF0ZT1lLHRoaXMuX3VzZXIub25TdGF0ZUNoYW5nZSYmdGhpcy5fdXNlci5vblN0YXRlQ2hhbmdlKGUpLHRoaXMuZW1pdCgic3RhdGVDaGFuZ2VkIil9dHlwZVRvU3RyaW5nKCl7cmV0dXJuIlVua25vd25UeXBlIn19Y2xhc3MgRyBleHRlbmRzIEJ7Y29uc3RydWN0b3IoZSx0LHMsaSxyKXtzdXBlcih0LHMsRy5tYWtlSWQoZSksaSxyKSx0aGlzLl9yZXF1ZXN0PWUsdGhpcy51c2VyPXMsZS5zZXRWaWFIZWFkZXIodGhpcy5pZCx0LnByb3RvY29sKX1zdGF0aWMgbWFrZUlkKGUpe2lmKCJDQU5DRUwiPT09ZS5tZXRob2Qpe2lmKCFlLmJyYW5jaCl0aHJvdyBuZXcgRXJyb3IoIk91dGdvaW5nIENBTkNFTCByZXF1ZXN0IHdpdGhvdXQgYSBicmFuY2guIik7cmV0dXJuIGUuYnJhbmNofXJldHVybiJ6OWhHNGJLIitNYXRoLmZsb29yKDFlNypNYXRoLnJhbmRvbSgpKX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLl9yZXF1ZXN0fW9uUmVxdWVzdFRpbWVvdXQoKXt0aGlzLnVzZXIub25SZXF1ZXN0VGltZW91dCYmdGhpcy51c2VyLm9uUmVxdWVzdFRpbWVvdXQoKX19IWZ1bmN0aW9uKGUpe2UuQWNjZXB0ZWQ9IkFjY2VwdGVkIixlLkNhbGxpbmc9IkNhbGxpbmciLGUuQ29tcGxldGVkPSJDb21wbGV0ZWQiLGUuQ29uZmlybWVkPSJDb25maXJtZWQiLGUuUHJvY2VlZGluZz0iUHJvY2VlZGluZyIsZS5UZXJtaW5hdGVkPSJUZXJtaW5hdGVkIixlLlRyeWluZz0iVHJ5aW5nIn0oT3x8KE89e30pKTtjbGFzcyBWIGV4dGVuZHMgR3tjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoZSx0LHMsTy5DYWxsaW5nLCJzaXAudHJhbnNhY3Rpb24uaWN0IiksdGhpcy5hY2tSZXRyYW5zbWlzc2lvbkNhY2hlPW5ldyBNYXAsdGhpcy5CPXNldFRpbWVvdXQoKCk9PnRoaXMudGltZXJCKCksTi5USU1FUl9CKSx0aGlzLnNlbmQoZS50b1N0cmluZygpKS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCBpbml0aWFsIG91dGdvaW5nIHJlcXVlc3QuIil9KX1kaXNwb3NlKCl7dGhpcy5CJiYoY2xlYXJUaW1lb3V0KHRoaXMuQiksdGhpcy5CPXZvaWQgMCksdGhpcy5EJiYoY2xlYXJUaW1lb3V0KHRoaXMuRCksdGhpcy5EPXZvaWQgMCksdGhpcy5NJiYoY2xlYXJUaW1lb3V0KHRoaXMuTSksdGhpcy5NPXZvaWQgMCksc3VwZXIuZGlzcG9zZSgpfWdldCBraW5kKCl7cmV0dXJuImljdCJ9YWNrUmVzcG9uc2UoZSl7Y29uc3QgdD1lLnRvVGFnO2lmKCF0KXRocm93IG5ldyBFcnJvcigiVG8gdGFnIHVuZGVmaW5lZC4iKTtjb25zdCBzPSJ6OWhHNGJLIitNYXRoLmZsb29yKDFlNypNYXRoLnJhbmRvbSgpKTtlLnNldFZpYUhlYWRlcihzLHRoaXMudHJhbnNwb3J0LnByb3RvY29sKSx0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGUuc2V0KHQsZSksdGhpcy5zZW5kKGUudG9TdHJpbmcoKSkuY2F0Y2goZT0+e3RoaXMubG9nVHJhbnNwb3J0RXJyb3IoZSwiRmFpbGVkIHRvIHNlbmQgQUNLIHRvIDJ4eCByZXNwb25zZS4iKX0pfXJlY2VpdmVSZXNwb25zZShlKXtjb25zdCB0PWUuc3RhdHVzQ29kZTtpZighdHx8dDwxMDB8fHQ+Njk5KXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzdGF0dXMgY29kZSAiK3QpO3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIE8uQ2FsbGluZzppZih0Pj0xMDAmJnQ8PTE5OSlyZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5Qcm9jZWVkaW5nKSx2b2lkKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UmJnRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UoZSkpO2lmKHQ+PTIwMCYmdDw9Mjk5KXJldHVybiB0aGlzLmFja1JldHJhbnNtaXNzaW9uQ2FjaGUuc2V0KGUudG9UYWcsdm9pZCAwKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihPLkFjY2VwdGVkKSx2b2lkKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UmJnRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UoZSkpO2lmKHQ+PTMwMCYmdDw9Njk5KXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihPLkNvbXBsZXRlZCksdGhpcy5hY2soZSksdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTticmVhaztjYXNlIE8uUHJvY2VlZGluZzppZih0Pj0xMDAmJnQ8PTE5OSlyZXR1cm4gdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTtpZih0Pj0yMDAmJnQ8PTI5OSlyZXR1cm4gdGhpcy5hY2tSZXRyYW5zbWlzc2lvbkNhY2hlLnNldChlLnRvVGFnLHZvaWQgMCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5BY2NlcHRlZCksdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTtpZih0Pj0zMDAmJnQ8PTY5OSlyZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5Db21wbGV0ZWQpLHRoaXMuYWNrKGUpLHZvaWQodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSYmdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShlKSk7YnJlYWs7Y2FzZSBPLkFjY2VwdGVkOmlmKHQ+PTIwMCYmdDw9Mjk5KXtpZighdGhpcy5hY2tSZXRyYW5zbWlzc2lvbkNhY2hlLmhhcyhlLnRvVGFnKSlyZXR1cm4gdGhpcy5hY2tSZXRyYW5zbWlzc2lvbkNhY2hlLnNldChlLnRvVGFnLHZvaWQgMCksdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTtjb25zdCB0PXRoaXMuYWNrUmV0cmFuc21pc3Npb25DYWNoZS5nZXQoZS50b1RhZyk7cmV0dXJuIHQ/dm9pZCB0aGlzLnNlbmQodC50b1N0cmluZygpKS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCByZXRyYW5zbWlzc2lvbiBvZiBBQ0sgdG8gMnh4IHJlc3BvbnNlLiIpfSk6dm9pZCAwfWJyZWFrO2Nhc2UgTy5Db21wbGV0ZWQ6aWYodD49MzAwJiZ0PD02OTkpcmV0dXJuIHZvaWQgdGhpcy5hY2soZSk7YnJlYWs7Y2FzZSBPLlRlcm1pbmF0ZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RhdGUgIit0aGlzLnN0YXRlKX1jb25zdCBzPWBSZWNlaXZlZCB1bmV4cGVjdGVkICR7dH0gcmVzcG9uc2Ugd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfS5gO3RoaXMubG9nZ2VyLndhcm4ocyl9b25UcmFuc3BvcnRFcnJvcihlKXt0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvciYmdGhpcy51c2VyLm9uVHJhbnNwb3J0RXJyb3IoZSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5UZXJtaW5hdGVkLCEwKX10eXBlVG9TdHJpbmcoKXtyZXR1cm4iSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiJ9YWNrKGUpe2NvbnN0IHQ9dGhpcy5yZXF1ZXN0LnJ1cmkscz10aGlzLnJlcXVlc3QuY2FsbElkLGk9dGhpcy5yZXF1ZXN0LmNzZXEscj10aGlzLnJlcXVlc3QuZ2V0SGVhZGVyKCJmcm9tIiksbj1lLmdldEhlYWRlcigidG8iKSxvPXRoaXMucmVxdWVzdC5nZXRIZWFkZXIoInZpYSIpLGE9dGhpcy5yZXF1ZXN0LmdldEhlYWRlcigicm91dGUiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoIkZyb20gdW5kZWZpbmVkLiIpO2lmKCFuKXRocm93IG5ldyBFcnJvcigiVG8gdW5kZWZpbmVkLiIpO2lmKCFvKXRocm93IG5ldyBFcnJvcigiVmlhIHVuZGVmaW5lZC4iKTtsZXQgYz1gQUNLICR7dH0gU0lQLzIuMFxyXG5gO2EmJihjKz1gUm91dGU6ICR7YX1cclxuYCksYys9YFZpYTogJHtvfVxyXG5gLGMrPWBUbzogJHtufVxyXG5gLGMrPWBGcm9tOiAke3J9XHJcbmAsYys9YENhbGwtSUQ6ICR7c31cclxuYCxjKz1gQ1NlcTogJHtpfSBBQ0tcclxuYCxjKz0iTWF4LUZvcndhcmRzOiA3MFxyXG4iLGMrPSJDb250ZW50LUxlbmd0aDogMFxyXG5cclxuIix0aGlzLnNlbmQoYykuY2F0Y2goZT0+e3RoaXMubG9nVHJhbnNwb3J0RXJyb3IoZSwiRmFpbGVkIHRvIHNlbmQgQUNLIHRvIG5vbi0yeHggcmVzcG9uc2UuIil9KX1zdGF0ZVRyYW5zaXRpb24oZSx0PSExKXtjb25zdCBzPSgpPT57dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuc3RhdGV9IHRvICR7ZX1gKX07c3dpdGNoKGUpe2Nhc2UgTy5DYWxsaW5nOnMoKTticmVhaztjYXNlIE8uUHJvY2VlZGluZzp0aGlzLnN0YXRlIT09Ty5DYWxsaW5nJiZzKCk7YnJlYWs7Y2FzZSBPLkFjY2VwdGVkOmNhc2UgTy5Db21wbGV0ZWQ6dGhpcy5zdGF0ZSE9PU8uQ2FsbGluZyYmdGhpcy5zdGF0ZSE9PU8uUHJvY2VlZGluZyYmcygpO2JyZWFrO2Nhc2UgTy5UZXJtaW5hdGVkOnRoaXMuc3RhdGUhPT1PLkNhbGxpbmcmJnRoaXMuc3RhdGUhPT1PLkFjY2VwdGVkJiZ0aGlzLnN0YXRlIT09Ty5Db21wbGV0ZWQmJih0fHxzKCkpO2JyZWFrO2RlZmF1bHQ6cygpfXRoaXMuQiYmKGNsZWFyVGltZW91dCh0aGlzLkIpLHRoaXMuQj12b2lkIDApLE8uUHJvY2VlZGluZyxlPT09Ty5Db21wbGV0ZWQmJih0aGlzLkQ9c2V0VGltZW91dCgoKT0+dGhpcy50aW1lckQoKSxOLlRJTUVSX0QpKSxlPT09Ty5BY2NlcHRlZCYmKHRoaXMuTT1zZXRUaW1lb3V0KCgpPT50aGlzLnRpbWVyTSgpLE4uVElNRVJfTSkpLGU9PT1PLlRlcm1pbmF0ZWQmJnRoaXMuZGlzcG9zZSgpLHRoaXMuc2V0U3RhdGUoZSl9dGltZXJBKCl7fXRpbWVyQigpe3RoaXMubG9nZ2VyLmRlYnVnKGBUaW1lciBCIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJHt0aGlzLmlkfS5gKSx0aGlzLnN0YXRlPT09Ty5DYWxsaW5nJiYodGhpcy5vblJlcXVlc3RUaW1lb3V0KCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5UZXJtaW5hdGVkKSl9dGltZXJEKCl7dGhpcy5sb2dnZXIuZGVidWcoYFRpbWVyIEQgZXhwaXJlZCBmb3IgSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApLHRoaXMuc3RhdGU9PT1PLkNvbXBsZXRlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5UZXJtaW5hdGVkKX10aW1lck0oKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgTSBleHBpcmVkIGZvciBJTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCksdGhpcy5zdGF0ZT09PU8uQWNjZXB0ZWQmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKE8uVGVybWluYXRlZCl9fWNsYXNzIEsgZXh0ZW5kcyBCe2NvbnN0cnVjdG9yKGUsdCxzLGkscil7c3VwZXIodCxzLGUudmlhQnJhbmNoLGksciksdGhpcy5fcmVxdWVzdD1lLHRoaXMudXNlcj1zfWdldCByZXF1ZXN0KCl7cmV0dXJuIHRoaXMuX3JlcXVlc3R9fWNsYXNzIFcgZXh0ZW5kcyBLe2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihlLHQscyxPLlByb2NlZWRpbmcsInNpcC50cmFuc2FjdGlvbi5pc3QiKX1kaXNwb3NlKCl7dGhpcy5zdG9wUHJvZ3Jlc3NFeHRlbnNpb25UaW1lcigpLHRoaXMuSCYmKGNsZWFyVGltZW91dCh0aGlzLkgpLHRoaXMuSD12b2lkIDApLHRoaXMuSSYmKGNsZWFyVGltZW91dCh0aGlzLkkpLHRoaXMuST12b2lkIDApLHRoaXMuTCYmKGNsZWFyVGltZW91dCh0aGlzLkwpLHRoaXMuTD12b2lkIDApLHN1cGVyLmRpc3Bvc2UoKX1nZXQga2luZCgpe3JldHVybiJpc3QifXJlY2VpdmVSZXF1ZXN0KGUpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIE8uUHJvY2VlZGluZzppZihlLm1ldGhvZD09PWwuSU5WSVRFKXJldHVybiB2b2lkKHRoaXMubGFzdFByb3Zpc2lvbmFsUmVzcG9uc2UmJnRoaXMuc2VuZCh0aGlzLmxhc3RQcm92aXNpb25hbFJlc3BvbnNlKS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCByZXRyYW5zbWlzc2lvbiBvZiBwcm92aXNpb25hbCByZXNwb25zZS4iKX0pKTticmVhaztjYXNlIE8uQWNjZXB0ZWQ6aWYoZS5tZXRob2Q9PT1sLklOVklURSlyZXR1cm47YnJlYWs7Y2FzZSBPLkNvbXBsZXRlZDppZihlLm1ldGhvZD09PWwuSU5WSVRFKXtpZighdGhpcy5sYXN0RmluYWxSZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoIkxhc3QgZmluYWwgcmVzcG9uc2UgdW5kZWZpbmVkLiIpO3JldHVybiB2b2lkIHRoaXMuc2VuZCh0aGlzLmxhc3RGaW5hbFJlc3BvbnNlKS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCByZXRyYW5zbWlzc2lvbiBvZiBmaW5hbCByZXNwb25zZS4iKX0pfWlmKGUubWV0aG9kPT09bC5BQ0spcmV0dXJuIHZvaWQgdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5Db25maXJtZWQpO2JyZWFrO2Nhc2UgTy5Db25maXJtZWQ6Y2FzZSBPLlRlcm1pbmF0ZWQ6aWYoZS5tZXRob2Q9PT1sLklOVklURXx8ZS5tZXRob2Q9PT1sLkFDSylyZXR1cm47YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RhdGUgIit0aGlzLnN0YXRlKX1jb25zdCB0PWBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uIHJlY2VpdmVkIHVuZXhwZWN0ZWQgJHtlLm1ldGhvZH0gcmVxdWVzdCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LmA7dGhpcy5sb2dnZXIud2Fybih0KX1yZWNlaXZlUmVzcG9uc2UoZSx0KXtpZihlPDEwMHx8ZT42OTkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0YXR1cyBjb2RlICIrZSk7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgTy5Qcm9jZWVkaW5nOmlmKGU+PTEwMCYmZTw9MTk5KXJldHVybiB0aGlzLmxhc3RQcm92aXNpb25hbFJlc3BvbnNlPXQsZT4xMDAmJnRoaXMuc3RhcnRQcm9ncmVzc0V4dGVuc2lvblRpbWVyKCksdm9pZCB0aGlzLnNlbmQodCkuY2F0Y2goZT0+e3RoaXMubG9nVHJhbnNwb3J0RXJyb3IoZSwiRmFpbGVkIHRvIHNlbmQgMXh4IHJlc3BvbnNlLiIpfSk7aWYoZT49MjAwJiZlPD0yOTkpcmV0dXJuIHRoaXMubGFzdEZpbmFsUmVzcG9uc2U9dCx0aGlzLnN0YXRlVHJhbnNpdGlvbihPLkFjY2VwdGVkKSx2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCAyeHggcmVzcG9uc2UuIil9KTtpZihlPj0zMDAmJmU8PTY5OSlyZXR1cm4gdGhpcy5sYXN0RmluYWxSZXNwb25zZT10LHRoaXMuc3RhdGVUcmFuc2l0aW9uKE8uQ29tcGxldGVkKSx2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCBub24tMnh4IGZpbmFsIHJlc3BvbnNlLiIpfSk7YnJlYWs7Y2FzZSBPLkFjY2VwdGVkOmlmKGU+PTIwMCYmZTw9Mjk5KXJldHVybiB2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCAyeHggcmVzcG9uc2UuIil9KTticmVhaztjYXNlIE8uQ29tcGxldGVkOmNhc2UgTy5Db25maXJtZWQ6Y2FzZSBPLlRlcm1pbmF0ZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RhdGUgIit0aGlzLnN0YXRlKX1jb25zdCBzPWBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uIHJlY2VpdmVkIHVuZXhwZWN0ZWQgJHtlfSByZXNwb25zZSBmcm9tIFRVIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0uYDt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihzKSxuZXcgRXJyb3Iocyl9cmV0cmFuc21pdEFjY2VwdGVkUmVzcG9uc2UoKXt0aGlzLnN0YXRlPT09Ty5BY2NlcHRlZCYmdGhpcy5sYXN0RmluYWxSZXNwb25zZSYmdGhpcy5zZW5kKHRoaXMubGFzdEZpbmFsUmVzcG9uc2UpLmNhdGNoKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIDJ4eCByZXNwb25zZS4iKX0pfW9uVHJhbnNwb3J0RXJyb3IoZSl7dGhpcy51c2VyLm9uVHJhbnNwb3J0RXJyb3ImJnRoaXMudXNlci5vblRyYW5zcG9ydEVycm9yKGUpfXR5cGVUb1N0cmluZygpe3JldHVybiJJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uIn1zdGF0ZVRyYW5zaXRpb24oZSl7Y29uc3QgdD0oKT0+e3Rocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLnN0YXRlfSB0byAke2V9YCl9O3N3aXRjaChlKXtjYXNlIE8uUHJvY2VlZGluZzp0KCk7YnJlYWs7Y2FzZSBPLkFjY2VwdGVkOmNhc2UgTy5Db21wbGV0ZWQ6dGhpcy5zdGF0ZSE9PU8uUHJvY2VlZGluZyYmdCgpO2JyZWFrO2Nhc2UgTy5Db25maXJtZWQ6dGhpcy5zdGF0ZSE9PU8uQ29tcGxldGVkJiZ0KCk7YnJlYWs7Y2FzZSBPLlRlcm1pbmF0ZWQ6dGhpcy5zdGF0ZSE9PU8uQWNjZXB0ZWQmJnRoaXMuc3RhdGUhPT1PLkNvbXBsZXRlZCYmdGhpcy5zdGF0ZSE9PU8uQ29uZmlybWVkJiZ0KCk7YnJlYWs7ZGVmYXVsdDp0KCl9dGhpcy5zdG9wUHJvZ3Jlc3NFeHRlbnNpb25UaW1lcigpLGU9PT1PLkFjY2VwdGVkJiYodGhpcy5MPXNldFRpbWVvdXQoKCk9PnRoaXMudGltZXJMKCksTi5USU1FUl9MKSksZT09PU8uQ29tcGxldGVkJiYodGhpcy5IPXNldFRpbWVvdXQoKCk9PnRoaXMudGltZXJIKCksTi5USU1FUl9IKSksZT09PU8uQ29uZmlybWVkJiYodGhpcy5JPXNldFRpbWVvdXQoKCk9PnRoaXMudGltZXJJKCksTi5USU1FUl9JKSksZT09PU8uVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCksdGhpcy5zZXRTdGF0ZShlKX1zdGFydFByb2dyZXNzRXh0ZW5zaW9uVGltZXIoKXt2b2lkIDA9PT10aGlzLnByb2dyZXNzRXh0ZW5zaW9uVGltZXImJih0aGlzLnByb2dyZXNzRXh0ZW5zaW9uVGltZXI9c2V0SW50ZXJ2YWwoKCk9PntpZih0aGlzLmxvZ2dlci5kZWJ1ZyhgUHJvZ3Jlc3MgZXh0ZW5zaW9uIHRpbWVyIGV4cGlyZWQgZm9yIElOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gJHt0aGlzLmlkfS5gKSwhdGhpcy5sYXN0UHJvdmlzaW9uYWxSZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoIkxhc3QgcHJvdmlzaW9uYWwgcmVzcG9uc2UgdW5kZWZpbmVkLiIpO3RoaXMuc2VuZCh0aGlzLmxhc3RQcm92aXNpb25hbFJlc3BvbnNlKS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCByZXRyYW5zbWlzc2lvbiBvZiBwcm92aXNpb25hbCByZXNwb25zZS4iKX0pfSxOLlBST1ZJU0lPTkFMX1JFU1BPTlNFX0lOVEVSVkFMKSl9c3RvcFByb2dyZXNzRXh0ZW5zaW9uVGltZXIoKXt2b2lkIDAhPT10aGlzLnByb2dyZXNzRXh0ZW5zaW9uVGltZXImJihjbGVhckludGVydmFsKHRoaXMucHJvZ3Jlc3NFeHRlbnNpb25UaW1lciksdGhpcy5wcm9ncmVzc0V4dGVuc2lvblRpbWVyPXZvaWQgMCl9dGltZXJHKCl7fXRpbWVySCgpe3RoaXMubG9nZ2VyLmRlYnVnKGBUaW1lciBIIGV4cGlyZWQgZm9yIElOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gJHt0aGlzLmlkfS5gKSx0aGlzLnN0YXRlPT09Ty5Db21wbGV0ZWQmJih0aGlzLmxvZ2dlci53YXJuKCJBQ0sgdG8gbmVnYXRpdmUgZmluYWwgcmVzcG9uc2Ugd2FzIG5ldmVyIHJlY2VpdmVkLCB0ZXJtaW5hdGluZyB0cmFuc2FjdGlvbi4iKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihPLlRlcm1pbmF0ZWQpKX10aW1lckkoKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgSSBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5UZXJtaW5hdGVkKX10aW1lckwoKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgTCBleHBpcmVkIGZvciBJTlZJVEUgc2VydmVyIHRyYW5zYWN0aW9uICR7dGhpcy5pZH0uYCksdGhpcy5zdGF0ZT09PU8uQWNjZXB0ZWQmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKE8uVGVybWluYXRlZCl9fWNsYXNzIFkgZXh0ZW5kcyBHe2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihlLHQscyxPLlRyeWluZywic2lwLnRyYW5zYWN0aW9uLm5pY3QiKSx0aGlzLkY9c2V0VGltZW91dCgoKT0+dGhpcy50aW1lckYoKSxOLlRJTUVSX0YpLHRoaXMuc2VuZChlLnRvU3RyaW5nKCkpLmNhdGNoKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIGluaXRpYWwgb3V0Z29pbmcgcmVxdWVzdC4iKX0pfWRpc3Bvc2UoKXt0aGlzLkYmJihjbGVhclRpbWVvdXQodGhpcy5GKSx0aGlzLkY9dm9pZCAwKSx0aGlzLksmJihjbGVhclRpbWVvdXQodGhpcy5LKSx0aGlzLks9dm9pZCAwKSxzdXBlci5kaXNwb3NlKCl9Z2V0IGtpbmQoKXtyZXR1cm4ibmljdCJ9cmVjZWl2ZVJlc3BvbnNlKGUpe2NvbnN0IHQ9ZS5zdGF0dXNDb2RlO2lmKCF0fHx0PDEwMHx8dD42OTkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0YXR1cyBjb2RlICIrdCk7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgTy5Ucnlpbmc6aWYodD49MTAwJiZ0PD0xOTkpcmV0dXJuIHRoaXMuc3RhdGVUcmFuc2l0aW9uKE8uUHJvY2VlZGluZyksdm9pZCh0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlJiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpKTtpZih0Pj0yMDAmJnQ8PTY5OSlyZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5Db21wbGV0ZWQpLDQwOD09PXQ/dm9pZCB0aGlzLm9uUmVxdWVzdFRpbWVvdXQoKTp2b2lkKHRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UmJnRoaXMudXNlci5yZWNlaXZlUmVzcG9uc2UoZSkpO2JyZWFrO2Nhc2UgTy5Qcm9jZWVkaW5nOmlmKHQ+PTEwMCYmdDw9MTk5JiZ0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKXJldHVybiB0aGlzLnVzZXIucmVjZWl2ZVJlc3BvbnNlKGUpO2lmKHQ+PTIwMCYmdDw9Njk5KXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihPLkNvbXBsZXRlZCksNDA4PT09dD92b2lkIHRoaXMub25SZXF1ZXN0VGltZW91dCgpOnZvaWQodGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZSYmdGhpcy51c2VyLnJlY2VpdmVSZXNwb25zZShlKSk7YnJlYWs7Y2FzZSBPLkNvbXBsZXRlZDpjYXNlIE8uVGVybWluYXRlZDpyZXR1cm47ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RhdGUgIit0aGlzLnN0YXRlKX1jb25zdCBzPWBOb24tSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiByZWNlaXZlZCB1bmV4cGVjdGVkICR7dH0gcmVzcG9uc2Ugd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfS5gO3RoaXMubG9nZ2VyLndhcm4ocyl9b25UcmFuc3BvcnRFcnJvcihlKXt0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvciYmdGhpcy51c2VyLm9uVHJhbnNwb3J0RXJyb3IoZSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5UZXJtaW5hdGVkLCEwKX10eXBlVG9TdHJpbmcoKXtyZXR1cm4ibm9uLUlOVklURSBjbGllbnQgdHJhbnNhY3Rpb24ifXN0YXRlVHJhbnNpdGlvbihlLHQ9ITEpe2NvbnN0IHM9KCk9Pnt0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5zdGF0ZX0gdG8gJHtlfWApfTtzd2l0Y2goZSl7Y2FzZSBPLlRyeWluZzpzKCk7YnJlYWs7Y2FzZSBPLlByb2NlZWRpbmc6dGhpcy5zdGF0ZSE9PU8uVHJ5aW5nJiZzKCk7YnJlYWs7Y2FzZSBPLkNvbXBsZXRlZDp0aGlzLnN0YXRlIT09Ty5UcnlpbmcmJnRoaXMuc3RhdGUhPT1PLlByb2NlZWRpbmcmJnMoKTticmVhaztjYXNlIE8uVGVybWluYXRlZDp0aGlzLnN0YXRlIT09Ty5UcnlpbmcmJnRoaXMuc3RhdGUhPT1PLlByb2NlZWRpbmcmJnRoaXMuc3RhdGUhPT1PLkNvbXBsZXRlZCYmKHR8fHMoKSk7YnJlYWs7ZGVmYXVsdDpzKCl9ZT09PU8uQ29tcGxldGVkJiYodGhpcy5GJiYoY2xlYXJUaW1lb3V0KHRoaXMuRiksdGhpcy5GPXZvaWQgMCksdGhpcy5LPXNldFRpbWVvdXQoKCk9PnRoaXMudGltZXJLKCksTi5USU1FUl9LKSksZT09PU8uVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCksdGhpcy5zZXRTdGF0ZShlKX10aW1lckYoKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgRiBleHBpcmVkIGZvciBub24tSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApLHRoaXMuc3RhdGUhPT1PLlRyeWluZyYmdGhpcy5zdGF0ZSE9PU8uUHJvY2VlZGluZ3x8KHRoaXMub25SZXF1ZXN0VGltZW91dCgpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKE8uVGVybWluYXRlZCkpfXRpbWVySygpe3RoaXMuc3RhdGU9PT1PLkNvbXBsZXRlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5UZXJtaW5hdGVkKX19Y2xhc3MgWiBleHRlbmRzIEt7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKGUsdCxzLE8uVHJ5aW5nLCJzaXAudHJhbnNhY3Rpb24ubmlzdCIpfWRpc3Bvc2UoKXt0aGlzLkomJihjbGVhclRpbWVvdXQodGhpcy5KKSx0aGlzLko9dm9pZCAwKSxzdXBlci5kaXNwb3NlKCl9Z2V0IGtpbmQoKXtyZXR1cm4ibmlzdCJ9cmVjZWl2ZVJlcXVlc3QoZSl7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgTy5Ucnlpbmc6YnJlYWs7Y2FzZSBPLlByb2NlZWRpbmc6aWYoIXRoaXMubGFzdFJlc3BvbnNlKXRocm93IG5ldyBFcnJvcigiTGFzdCByZXNwb25zZSB1bmRlZmluZWQuIik7dGhpcy5zZW5kKHRoaXMubGFzdFJlc3BvbnNlKS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCByZXRyYW5zbWlzc2lvbiBvZiBwcm92aXNpb25hbCByZXNwb25zZS4iKX0pO2JyZWFrO2Nhc2UgTy5Db21wbGV0ZWQ6aWYoIXRoaXMubGFzdFJlc3BvbnNlKXRocm93IG5ldyBFcnJvcigiTGFzdCByZXNwb25zZSB1bmRlZmluZWQuIik7dGhpcy5zZW5kKHRoaXMubGFzdFJlc3BvbnNlKS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCByZXRyYW5zbWlzc2lvbiBvZiBmaW5hbCByZXNwb25zZS4iKX0pO2JyZWFrO2Nhc2UgTy5UZXJtaW5hdGVkOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0YXRlICIrdGhpcy5zdGF0ZSl9fXJlY2VpdmVSZXNwb25zZShlLHQpe2lmKGU8MTAwfHxlPjY5OSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RhdHVzIGNvZGUgIitlKTtpZihlPjEwMCYmZTw9MTk5KXRocm93IG5ldyBFcnJvcigiUHJvdmlzaW9uYWwgcmVzcG9uc2Ugb3RoZXIgdGhhbiAxMDAgbm90IGFsbG93ZWQuIik7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgTy5Ucnlpbmc6aWYodGhpcy5sYXN0UmVzcG9uc2U9dCxlPj0xMDAmJmU8MjAwKXJldHVybiB0aGlzLnN0YXRlVHJhbnNpdGlvbihPLlByb2NlZWRpbmcpLHZvaWQgdGhpcy5zZW5kKHQpLmNhdGNoKGU9Pnt0aGlzLmxvZ1RyYW5zcG9ydEVycm9yKGUsIkZhaWxlZCB0byBzZW5kIHByb3Zpc2lvbmFsIHJlc3BvbnNlLiIpfSk7aWYoZT49MjAwJiZlPD02OTkpcmV0dXJuIHRoaXMuc3RhdGVUcmFuc2l0aW9uKE8uQ29tcGxldGVkKSx2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCBmaW5hbCByZXNwb25zZS4iKX0pO2JyZWFrO2Nhc2UgTy5Qcm9jZWVkaW5nOmlmKHRoaXMubGFzdFJlc3BvbnNlPXQsZT49MjAwJiZlPD02OTkpcmV0dXJuIHRoaXMuc3RhdGVUcmFuc2l0aW9uKE8uQ29tcGxldGVkKSx2b2lkIHRoaXMuc2VuZCh0KS5jYXRjaChlPT57dGhpcy5sb2dUcmFuc3BvcnRFcnJvcihlLCJGYWlsZWQgdG8gc2VuZCBmaW5hbCByZXNwb25zZS4iKX0pO2JyZWFrO2Nhc2UgTy5Db21wbGV0ZWQ6cmV0dXJuO2Nhc2UgTy5UZXJtaW5hdGVkOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0YXRlICIrdGhpcy5zdGF0ZSl9Y29uc3Qgcz1gTm9uLUlOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gcmVjZWl2ZWQgdW5leHBlY3RlZCAke2V9IHJlc3BvbnNlIGZyb20gVFUgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfS5gO3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHMpLG5ldyBFcnJvcihzKX1vblRyYW5zcG9ydEVycm9yKGUpe3RoaXMudXNlci5vblRyYW5zcG9ydEVycm9yJiZ0aGlzLnVzZXIub25UcmFuc3BvcnRFcnJvcihlKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihPLlRlcm1pbmF0ZWQsITApfXR5cGVUb1N0cmluZygpe3JldHVybiJub24tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiJ9c3RhdGVUcmFuc2l0aW9uKGUsdD0hMSl7Y29uc3Qgcz0oKT0+e3Rocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLnN0YXRlfSB0byAke2V9YCl9O3N3aXRjaChlKXtjYXNlIE8uVHJ5aW5nOnMoKTticmVhaztjYXNlIE8uUHJvY2VlZGluZzp0aGlzLnN0YXRlIT09Ty5UcnlpbmcmJnMoKTticmVhaztjYXNlIE8uQ29tcGxldGVkOnRoaXMuc3RhdGUhPT1PLlRyeWluZyYmdGhpcy5zdGF0ZSE9PU8uUHJvY2VlZGluZyYmcygpO2JyZWFrO2Nhc2UgTy5UZXJtaW5hdGVkOnRoaXMuc3RhdGUhPT1PLlByb2NlZWRpbmcmJnRoaXMuc3RhdGUhPT1PLkNvbXBsZXRlZCYmKHR8fHMoKSk7YnJlYWs7ZGVmYXVsdDpzKCl9ZT09PU8uQ29tcGxldGVkJiYodGhpcy5KPXNldFRpbWVvdXQoKCk9PnRoaXMudGltZXJKKCksTi5USU1FUl9KKSksZT09PU8uVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCksdGhpcy5zZXRTdGF0ZShlKX10aW1lckooKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgVGltZXIgSiBleHBpcmVkIGZvciBOT04tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAke3RoaXMuaWR9LmApLHRoaXMuc3RhdGU9PT1PLkNvbXBsZXRlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24oTy5UZXJtaW5hdGVkKX19Y2xhc3MgSntjb25zdHJ1Y3RvcihlLHQscyxpKXt0aGlzLnRyYW5zYWN0aW9uQ29uc3RydWN0b3I9ZSx0aGlzLmNvcmU9dCx0aGlzLm1lc3NhZ2U9cyx0aGlzLmRlbGVnYXRlPWksdGhpcy5jaGFsbGVuZ2VkPSExLHRoaXMuc3RhbGU9ITEsdGhpcy5sb2dnZXI9dGhpcy5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcigic2lwLnVzZXItYWdlbnQtY2xpZW50IiksdGhpcy5pbml0KCl9ZGlzcG9zZSgpe3RoaXMudHJhbnNhY3Rpb24uZGlzcG9zZSgpfWdldCBsb2dnZXJGYWN0b3J5KCl7cmV0dXJuIHRoaXMuY29yZS5sb2dnZXJGYWN0b3J5fWdldCB0cmFuc2FjdGlvbigpe2lmKCF0aGlzLl90cmFuc2FjdGlvbil0aHJvdyBuZXcgRXJyb3IoIlRyYW5zYWN0aW9uIHVuZGVmaW5lZC4iKTtyZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb259Y2FuY2VsKGUsdD17fSl7aWYoIXRoaXMudHJhbnNhY3Rpb24pdGhyb3cgbmV3IEVycm9yKCJUcmFuc2FjdGlvbiB1bmRlZmluZWQuIik7aWYoIXRoaXMubWVzc2FnZS50byl0aHJvdyBuZXcgRXJyb3IoIlRvIHVuZGVmaW5lZC4iKTtpZighdGhpcy5tZXNzYWdlLmZyb20pdGhyb3cgbmV3IEVycm9yKCJGcm9tIHVuZGVmaW5lZC4iKTtjb25zdCBzPXRoaXMuY29yZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShsLkNBTkNFTCx0aGlzLm1lc3NhZ2UucnVyaSx0aGlzLm1lc3NhZ2UuZnJvbS51cmksdGhpcy5tZXNzYWdlLnRvLnVyaSx7dG9UYWc6dGhpcy5tZXNzYWdlLnRvVGFnLGZyb21UYWc6dGhpcy5tZXNzYWdlLmZyb21UYWcsY2FsbElkOnRoaXMubWVzc2FnZS5jYWxsSWQsY3NlcTp0aGlzLm1lc3NhZ2UuY3NlcX0sdC5leHRyYUhlYWRlcnMpO3JldHVybiBzLmJyYW5jaD10aGlzLm1lc3NhZ2UuYnJhbmNoLHRoaXMubWVzc2FnZS5oZWFkZXJzLlJvdXRlJiYocy5oZWFkZXJzLlJvdXRlPXRoaXMubWVzc2FnZS5oZWFkZXJzLlJvdXRlKSxlJiZzLnNldEhlYWRlcigiUmVhc29uIixlKSx0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09Ty5Qcm9jZWVkaW5nP25ldyBKKFksdGhpcy5jb3JlLHMpOnRoaXMudHJhbnNhY3Rpb24ub25jZSgic3RhdGVDaGFuZ2VkIiwoKT0+e3RoaXMudHJhbnNhY3Rpb24mJnRoaXMudHJhbnNhY3Rpb24uc3RhdGU9PT1PLlByb2NlZWRpbmcmJm5ldyBKKFksdGhpcy5jb3JlLHMpfSksc31hdXRoZW50aWNhdGlvbkd1YXJkKGUsdCl7Y29uc3Qgcz1lLnN0YXR1c0NvZGU7aWYoIXMpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuIik7aWYoNDAxIT09cyYmNDA3IT09cylyZXR1cm4hMDtsZXQgaSxyO2lmKDQwMT09PXM/KGk9ZS5wYXJzZUhlYWRlcigid3d3LWF1dGhlbnRpY2F0ZSIpLHI9ImF1dGhvcml6YXRpb24iKTooaT1lLnBhcnNlSGVhZGVyKCJwcm94eS1hdXRoZW50aWNhdGUiKSxyPSJwcm94eS1hdXRob3JpemF0aW9uIiksIWkpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4ocysiIHdpdGggd3Jvbmcgb3IgbWlzc2luZyBjaGFsbGVuZ2UsIGNhbm5vdCBhdXRoZW50aWNhdGUiKSwhMDtpZih0aGlzLmNoYWxsZW5nZWQmJih0aGlzLnN0YWxlfHwhMCE9PWkuc3RhbGUpKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKHMrIiBhcHBhcmVudGx5IGluIGF1dGhlbnRpY2F0aW9uIGxvb3AsIGNhbm5vdCBhdXRoZW50aWNhdGUiKSwhMDtpZighdGhpcy5jcmVkZW50aWFscyYmKHRoaXMuY3JlZGVudGlhbHM9dGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24uYXV0aGVudGljYXRpb25GYWN0b3J5KCksIXRoaXMuY3JlZGVudGlhbHMpKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJVbmFibGUgdG8gb2J0YWluIGNyZWRlbnRpYWxzLCBjYW5ub3QgYXV0aGVudGljYXRlIiksITA7aWYoIXRoaXMuY3JlZGVudGlhbHMuYXV0aGVudGljYXRlKHRoaXMubWVzc2FnZSxpKSlyZXR1cm4hMDt0aGlzLmNoYWxsZW5nZWQ9ITAsaS5zdGFsZSYmKHRoaXMuc3RhbGU9ITApO2xldCBuPXRoaXMubWVzc2FnZS5jc2VxKz0xO3JldHVybiB0JiZ0LmxvY2FsU2VxdWVuY2VOdW1iZXImJih0LmluY3JlbWVudExvY2FsU2VxdWVuY2VOdW1iZXIoKSxuPXRoaXMubWVzc2FnZS5jc2VxPXQubG9jYWxTZXF1ZW5jZU51bWJlciksdGhpcy5tZXNzYWdlLnNldEhlYWRlcigiY3NlcSIsbisiICIrdGhpcy5tZXNzYWdlLm1ldGhvZCksdGhpcy5tZXNzYWdlLnNldEhlYWRlcihyLHRoaXMuY3JlZGVudGlhbHMudG9TdHJpbmcoKSksdGhpcy5pbml0KCksITF9b25SZXF1ZXN0VGltZW91dCgpe3RoaXMubG9nZ2VyLndhcm4oIlVzZXIgYWdlbnQgY2xpZW50IHJlcXVlc3QgdGltZWQgb3V0LiBHZW5lcmF0aW5nIGludGVybmFsIDQwOCBSZXF1ZXN0IFRpbWVvdXQuIik7Y29uc3QgZT1uZXcgeTtlLnN0YXR1c0NvZGU9NDA4LGUucmVhc29uUGhyYXNlPSJSZXF1ZXN0IFRpbWVvdXQiLHRoaXMucmVjZWl2ZVJlc3BvbnNlKGUpfW9uVHJhbnNwb3J0RXJyb3IoZSl7dGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcigiVXNlciBhZ2VudCBjbGllbnQgcmVxdWVzdCB0cmFuc3BvcnQgZXJyb3IuIEdlbmVyYXRpbmcgaW50ZXJuYWwgNTAzIFNlcnZpY2UgVW5hdmFpbGFibGUuIik7Y29uc3QgdD1uZXcgeTt0LnN0YXR1c0NvZGU9NTAzLHQucmVhc29uUGhyYXNlPSJTZXJ2aWNlIFVuYXZhaWxhYmxlIix0aGlzLnJlY2VpdmVSZXNwb25zZSh0KX1yZWNlaXZlUmVzcG9uc2UoZSl7aWYoIXRoaXMuYXV0aGVudGljYXRpb25HdWFyZChlKSlyZXR1cm47Y29uc3QgdD1lLnN0YXR1c0NvZGU/ZS5zdGF0dXNDb2RlLnRvU3RyaW5nKCk6IiI7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuIik7c3dpdGNoKCEwKXtjYXNlL14xMDAkLy50ZXN0KHQpOnRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25UcnlpbmcmJnRoaXMuZGVsZWdhdGUub25Ucnlpbmcoe21lc3NhZ2U6ZX0pO2JyZWFrO2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblByb2dyZXNzJiZ0aGlzLmRlbGVnYXRlLm9uUHJvZ3Jlc3Moe21lc3NhZ2U6ZX0pO2JyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCh7bWVzc2FnZTplfSk7YnJlYWs7Y2FzZS9eM1swLTldezJ9JC8udGVzdCh0KTp0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVkaXJlY3QmJnRoaXMuZGVsZWdhdGUub25SZWRpcmVjdCh7bWVzc2FnZTplfSk7YnJlYWs7Y2FzZS9eWzQtNl1bMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblJlamVjdCYmdGhpcy5kZWxlZ2F0ZS5vblJlamVjdCh7bWVzc2FnZTplfSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RhdHVzIGNvZGUgIit0KX19aW5pdCgpe2NvbnN0IGU9e2xvZ2dlckZhY3Rvcnk6dGhpcy5sb2dnZXJGYWN0b3J5LG9uUmVxdWVzdFRpbWVvdXQ6KCk9PnRoaXMub25SZXF1ZXN0VGltZW91dCgpLG9uU3RhdGVDaGFuZ2U6ZT0+e2U9PT1PLlRlcm1pbmF0ZWQmJih0aGlzLmNvcmUudXNlckFnZW50Q2xpZW50cy5kZWxldGUocyksdD09PXRoaXMuX3RyYW5zYWN0aW9uJiZ0aGlzLmRpc3Bvc2UoKSl9LG9uVHJhbnNwb3J0RXJyb3I6ZT0+dGhpcy5vblRyYW5zcG9ydEVycm9yKGUpLHJlY2VpdmVSZXNwb25zZTplPT50aGlzLnJlY2VpdmVSZXNwb25zZShlKX0sdD1uZXcgdGhpcy50cmFuc2FjdGlvbkNvbnN0cnVjdG9yKHRoaXMubWVzc2FnZSx0aGlzLmNvcmUudHJhbnNwb3J0LGUpO3RoaXMuX3RyYW5zYWN0aW9uPXQ7Y29uc3Qgcz10LmlkK3QucmVxdWVzdC5tZXRob2Q7dGhpcy5jb3JlLnVzZXJBZ2VudENsaWVudHMuc2V0KHMsdGhpcyl9fWNsYXNzIHogZXh0ZW5kcyBKe2NvbnN0cnVjdG9yKGUsdCxzKXtjb25zdCBpPWUuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShsLkJZRSxzKTtzdXBlcihZLGUudXNlckFnZW50Q29yZSxpLHQpLGUuZGlzcG9zZSgpfX1jbGFzcyBYe2NvbnN0cnVjdG9yKGUsdCxzLGkpe3RoaXMudHJhbnNhY3Rpb25Db25zdHJ1Y3Rvcj1lLHRoaXMuY29yZT10LHRoaXMubWVzc2FnZT1zLHRoaXMuZGVsZWdhdGU9aSx0aGlzLmxvZ2dlcj10aGlzLmxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKCJzaXAudXNlci1hZ2VudC1zZXJ2ZXIiKSx0aGlzLnRvVGFnPXMudG9UYWc/cy50b1RhZzptKCksdGhpcy5pbml0KCl9ZGlzcG9zZSgpe3RoaXMudHJhbnNhY3Rpb24uZGlzcG9zZSgpfWdldCBsb2dnZXJGYWN0b3J5KCl7cmV0dXJuIHRoaXMuY29yZS5sb2dnZXJGYWN0b3J5fWdldCB0cmFuc2FjdGlvbigpe2lmKCF0aGlzLl90cmFuc2FjdGlvbil0aHJvdyBuZXcgRXJyb3IoIlRyYW5zYWN0aW9uIHVuZGVmaW5lZC4iKTtyZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb259YWNjZXB0KGU9e3N0YXR1c0NvZGU6MjAwfSl7aWYoIXRoaXMuYWNjZXB0YWJsZSl0aHJvdyBuZXcgRihgJHt0aGlzLm1lc3NhZ2UubWV0aG9kfSBub3QgYWNjZXB0YWJsZSBpbiBzdGF0ZSAke3RoaXMudHJhbnNhY3Rpb24uc3RhdGV9LmApO2NvbnN0IHQ9ZS5zdGF0dXNDb2RlO2lmKHQ8MjAwfHx0PjI5OSl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIHN0YXR1c0NvZGU6ICIrdCk7cmV0dXJuIHRoaXMucmVwbHkoZSl9cHJvZ3Jlc3MoZT17c3RhdHVzQ29kZToxODB9KXtpZighdGhpcy5wcm9ncmVzc2FibGUpdGhyb3cgbmV3IEYoYCR7dGhpcy5tZXNzYWdlLm1ldGhvZH0gbm90IHByb2dyZXNzYWJsZSBpbiBzdGF0ZSAke3RoaXMudHJhbnNhY3Rpb24uc3RhdGV9LmApO2NvbnN0IHQ9ZS5zdGF0dXNDb2RlO2lmKHQ8MTAxfHx0PjE5OSl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIHN0YXR1c0NvZGU6ICIrdCk7cmV0dXJuIHRoaXMucmVwbHkoZSl9cmVkaXJlY3QoZSx0PXtzdGF0dXNDb2RlOjMwMn0pe2lmKCF0aGlzLnJlZGlyZWN0YWJsZSl0aHJvdyBuZXcgRihgJHt0aGlzLm1lc3NhZ2UubWV0aG9kfSBub3QgcmVkaXJlY3RhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7Y29uc3Qgcz10LnN0YXR1c0NvZGU7aWYoczwzMDB8fHM+Mzk5KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgc3RhdHVzQ29kZTogIitzKTtjb25zdCBpPW5ldyBBcnJheTtyZXR1cm4gZS5mb3JFYWNoKGU9PmkucHVzaCgiQ29udGFjdDogIitlLnRvU3RyaW5nKCkpKSx0LmV4dHJhSGVhZGVycz0odC5leHRyYUhlYWRlcnN8fFtdKS5jb25jYXQoaSksdGhpcy5yZXBseSh0KX1yZWplY3QoZT17c3RhdHVzQ29kZTo0ODB9KXtpZighdGhpcy5yZWplY3RhYmxlKXRocm93IG5ldyBGKGAke3RoaXMubWVzc2FnZS5tZXRob2R9IG5vdCByZWplY3RhYmxlIGluIHN0YXRlICR7dGhpcy50cmFuc2FjdGlvbi5zdGF0ZX0uYCk7Y29uc3QgdD1lLnN0YXR1c0NvZGU7aWYodDw0MDB8fHQ+Njk5KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgc3RhdHVzQ29kZTogIit0KTtyZXR1cm4gdGhpcy5yZXBseShlKX10cnlpbmcoZSl7aWYoIXRoaXMudHJ5aW5nYWJsZSl0aHJvdyBuZXcgRihgJHt0aGlzLm1lc3NhZ2UubWV0aG9kfSBub3QgdHJ5aW5nYWJsZSBpbiBzdGF0ZSAke3RoaXMudHJhbnNhY3Rpb24uc3RhdGV9LmApO3JldHVybiB0aGlzLnJlcGx5KHtzdGF0dXNDb2RlOjEwMH0pfXJlY2VpdmVDYW5jZWwoZSl7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkNhbmNlbCYmdGhpcy5kZWxlZ2F0ZS5vbkNhbmNlbChlKX1nZXQgYWNjZXB0YWJsZSgpe2lmKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBXKXJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09Ty5Qcm9jZWVkaW5nfHx0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09Ty5BY2NlcHRlZDtpZih0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgWilyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PU8uVHJ5aW5nfHx0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09Ty5Qcm9jZWVkaW5nO3Rocm93IG5ldyBFcnJvcigiVW5rbm93biB0cmFuc2FjdGlvbiB0eXBlLiIpfWdldCBwcm9ncmVzc2FibGUoKXtpZih0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgVylyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PU8uUHJvY2VlZGluZztpZih0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgWilyZXR1cm4hMTt0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZS4iKX1nZXQgcmVkaXJlY3RhYmxlKCl7aWYodGhpcy50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIFcpcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uc3RhdGU9PT1PLlByb2NlZWRpbmc7aWYodGhpcy50cmFuc2FjdGlvbiBpbnN0YW5jZW9mIFopcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uc3RhdGU9PT1PLlRyeWluZ3x8dGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PU8uUHJvY2VlZGluZzt0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZS4iKX1nZXQgcmVqZWN0YWJsZSgpe2lmKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBXKXJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09Ty5Qcm9jZWVkaW5nO2lmKHRoaXMudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBaKXJldHVybiB0aGlzLnRyYW5zYWN0aW9uLnN0YXRlPT09Ty5Ucnlpbmd8fHRoaXMudHJhbnNhY3Rpb24uc3RhdGU9PT1PLlByb2NlZWRpbmc7dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHRyYW5zYWN0aW9uIHR5cGUuIil9Z2V0IHRyeWluZ2FibGUoKXtpZih0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgVylyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PU8uUHJvY2VlZGluZztpZih0aGlzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgWilyZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PU8uVHJ5aW5nO3Rocm93IG5ldyBFcnJvcigiVW5rbm93biB0cmFuc2FjdGlvbiB0eXBlLiIpfXJlcGx5KGUpe2UudG9UYWd8fDEwMD09PWUuc3RhdHVzQ29kZXx8KGUudG9UYWc9dGhpcy50b1RhZyksZS51c2VyQWdlbnQ9ZS51c2VyQWdlbnR8fHRoaXMuY29yZS5jb25maWd1cmF0aW9uLnVzZXJBZ2VudEhlYWRlckZpZWxkVmFsdWUsZS5zdXBwb3J0ZWQ9ZS5zdXBwb3J0ZWR8fHRoaXMuY29yZS5jb25maWd1cmF0aW9uLnN1cHBvcnRlZE9wdGlvblRhZ3NSZXNwb25zZTtjb25zdCB0PXEodGhpcy5tZXNzYWdlLGUpO3JldHVybiB0aGlzLnRyYW5zYWN0aW9uLnJlY2VpdmVSZXNwb25zZShlLnN0YXR1c0NvZGUsdC5tZXNzYWdlKSx0fWluaXQoKXtjb25zdCBlPXtsb2dnZXJGYWN0b3J5OnRoaXMubG9nZ2VyRmFjdG9yeSxvblN0YXRlQ2hhbmdlOmU9PntlPT09Ty5UZXJtaW5hdGVkJiYodGhpcy5jb3JlLnVzZXJBZ2VudFNlcnZlcnMuZGVsZXRlKHMpLHRoaXMuZGlzcG9zZSgpKX0sb25UcmFuc3BvcnRFcnJvcjplPT57dGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uVHJhbnNwb3J0RXJyb3I/dGhpcy5kZWxlZ2F0ZS5vblRyYW5zcG9ydEVycm9yKGUpOnRoaXMubG9nZ2VyLmVycm9yKCJVc2VyIGFnZW50IHNlcnZlciByZXNwb25zZSB0cmFuc3BvcnQgZXJyb3IuIil9fSx0PW5ldyB0aGlzLnRyYW5zYWN0aW9uQ29uc3RydWN0b3IodGhpcy5tZXNzYWdlLHRoaXMuY29yZS50cmFuc3BvcnQsZSk7dGhpcy5fdHJhbnNhY3Rpb249dDtjb25zdCBzPXQuaWQ7dGhpcy5jb3JlLnVzZXJBZ2VudFNlcnZlcnMuc2V0KHQuaWQsdGhpcyl9fWNsYXNzIFEgZXh0ZW5kcyBYe2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihaLGUudXNlckFnZW50Q29yZSx0LHMpfX1jbGFzcyBlZSBleHRlbmRzIEp7Y29uc3RydWN0b3IoZSx0LHMpe2NvbnN0IGk9ZS5jcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKGwuSU5GTyxzKTtzdXBlcihZLGUudXNlckFnZW50Q29yZSxpLHQpfX1jbGFzcyB0ZSBleHRlbmRzIFh7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKFosZS51c2VyQWdlbnRDb3JlLHQscyl9fWNsYXNzIHNlIGV4dGVuZHMgSntjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoWSxlLHQscyl9fWNsYXNzIGllIGV4dGVuZHMgWHtjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoWixlLHQscyl9fWNsYXNzIHJlIGV4dGVuZHMgSntjb25zdHJ1Y3RvcihlLHQscyl7Y29uc3QgaT1lLmNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UobC5OT1RJRlkscyk7c3VwZXIoWSxlLnVzZXJBZ2VudENvcmUsaSx0KX19Y2xhc3MgbmUgZXh0ZW5kcyBYe2NvbnN0cnVjdG9yKGUsdCxzKXtjb25zdCBpPXZvaWQgMCE9PWUudXNlckFnZW50Q29yZT9lLnVzZXJBZ2VudENvcmU6ZTtzdXBlcihaLGksdCxzKX19Y2xhc3Mgb2UgZXh0ZW5kcyBKe2NvbnN0cnVjdG9yKGUsdCxzKXtjb25zdCBpPWUuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShsLlBSQUNLLHMpO3N1cGVyKFksZS51c2VyQWdlbnRDb3JlLGksdCksZS5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oaSl9fWNsYXNzIGFlIGV4dGVuZHMgWHtjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoWixlLnVzZXJBZ2VudENvcmUsdCxzKSxlLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbih0KSx0aGlzLmRpYWxvZz1lfWFjY2VwdChlPXtzdGF0dXNDb2RlOjIwMH0pe3JldHVybiBlLmJvZHkmJnRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihlLmJvZHkpLHN1cGVyLmFjY2VwdChlKX19Y2xhc3MgY2UgZXh0ZW5kcyBKe2NvbnN0cnVjdG9yKGUsdCxzKXtjb25zdCBpPWUuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShsLklOVklURSxzKTtzdXBlcihWLGUudXNlckFnZW50Q29yZSxpLHQpLHRoaXMuZGVsZWdhdGU9dCxlLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihpKSxlLnJlaW52aXRlVXNlckFnZW50Q2xpZW50PXRoaXMsdGhpcy5kaWFsb2c9ZX1yZWNlaXZlUmVzcG9uc2UoZSl7aWYoIXRoaXMuYXV0aGVudGljYXRpb25HdWFyZChlLHRoaXMuZGlhbG9nKSlyZXR1cm47Y29uc3QgdD1lLnN0YXR1c0NvZGU/ZS5zdGF0dXNDb2RlLnRvU3RyaW5nKCk6IiI7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuIik7c3dpdGNoKCEwKXtjYXNlL14xMDAkLy50ZXN0KHQpOnRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25UcnlpbmcmJnRoaXMuZGVsZWdhdGUub25Ucnlpbmcoe21lc3NhZ2U6ZX0pO2JyZWFrO2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblByb2dyZXNzJiZ0aGlzLmRlbGVnYXRlLm9uUHJvZ3Jlc3Moe21lc3NhZ2U6ZSxzZXNzaW9uOnRoaXMuZGlhbG9nLHByYWNrOmU9Pnt0aHJvdyBuZXcgRXJyb3IoIlVuaW1wbGVtZW50ZWQuIil9fSk7YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdCh0KTp0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZSksdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCYmdGhpcy5kZWxlZ2F0ZS5vbkFjY2VwdCh7bWVzc2FnZTplLHNlc3Npb246dGhpcy5kaWFsb2csYWNrOmU9PnRoaXMuZGlhbG9nLmFjayhlKX0pO2JyZWFrO2Nhc2UvXjNbMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVSb2xsYmFjaygpLHRoaXMuZGlhbG9nLnJlaW52aXRlVXNlckFnZW50Q2xpZW50PXZvaWQgMCx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVkaXJlY3QmJnRoaXMuZGVsZWdhdGUub25SZWRpcmVjdCh7bWVzc2FnZTplfSk7YnJlYWs7Y2FzZS9eWzQtNl1bMC05XXsyfSQvLnRlc3QodCk6dGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGVSb2xsYmFjaygpLHRoaXMuZGlhbG9nLnJlaW52aXRlVXNlckFnZW50Q2xpZW50PXZvaWQgMCx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVqZWN0JiZ0aGlzLmRlbGVnYXRlLm9uUmVqZWN0KHttZXNzYWdlOmV9KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzdGF0dXMgY29kZSAiK3QpfX19Y2xhc3MgaGUgZXh0ZW5kcyBYe2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihXLGUudXNlckFnZW50Q29yZSx0LHMpLGUucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXI9dGhpcyx0aGlzLmRpYWxvZz1lfWFjY2VwdChlPXtzdGF0dXNDb2RlOjIwMH0pe2UuZXh0cmFIZWFkZXJzPWUuZXh0cmFIZWFkZXJzfHxbXSxlLmV4dHJhSGVhZGVycz1lLmV4dHJhSGVhZGVycy5jb25jYXQodGhpcy5kaWFsb2cucm91dGVTZXQubWFwKGU9PiJSZWNvcmQtUm91dGU6ICIrZSkpO2NvbnN0IHQ9c3VwZXIuYWNjZXB0KGUpLHM9dGhpcy5kaWFsb2csaT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse3Nlc3Npb246c30pO3JldHVybiBlLmJvZHkmJnRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihlLmJvZHkpLHRoaXMuZGlhbG9nLnJlQ29uZmlybSgpLGl9cHJvZ3Jlc3MoZT17c3RhdHVzQ29kZToxODB9KXtjb25zdCB0PXN1cGVyLnByb2dyZXNzKGUpLHM9dGhpcy5kaWFsb2csaT1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse3Nlc3Npb246c30pO3JldHVybiBlLmJvZHkmJnRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihlLmJvZHkpLGl9cmVkaXJlY3QoZSx0PXtzdGF0dXNDb2RlOjMwMn0pe3Rocm93IHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlUm9sbGJhY2soKSx0aGlzLmRpYWxvZy5yZWludml0ZVVzZXJBZ2VudFNlcnZlcj12b2lkIDAsbmV3IEVycm9yKCJVbmltcGxlbWVudGVkLiIpfXJlamVjdChlPXtzdGF0dXNDb2RlOjQ4OH0pe3JldHVybiB0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZVJvbGxiYWNrKCksdGhpcy5kaWFsb2cucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXI9dm9pZCAwLHN1cGVyLnJlamVjdChlKX19Y2xhc3MgZGUgZXh0ZW5kcyBKe2NvbnN0cnVjdG9yKGUsdCxzKXtjb25zdCBpPWUuY3JlYXRlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShsLlJFRkVSLHMpO3N1cGVyKFksZS51c2VyQWdlbnRDb3JlLGksdCl9fWNsYXNzIGdlIGV4dGVuZHMgWHtjb25zdHJ1Y3RvcihlLHQscyl7Y29uc3QgaT12b2lkIDAhPT1lLnVzZXJBZ2VudENvcmU/ZS51c2VyQWdlbnRDb3JlOmU7c3VwZXIoWixpLHQscyl9fWNsYXNzIGxlIGV4dGVuZHMgRHtjb25zdHJ1Y3RvcihlLHQscyxpKXtzdXBlcih0LHMpLHRoaXMuaW5pdGlhbFRyYW5zYWN0aW9uPWUsdGhpcy5fc2lnbmFsaW5nU3RhdGU9UC5Jbml0aWFsLHRoaXMuYWNrV2FpdD0hMSx0aGlzLmFja1Byb2Nlc3Npbmc9ITEsdGhpcy5kZWxlZ2F0ZT1pLGUgaW5zdGFuY2VvZiBXJiYodGhpcy5hY2tXYWl0PSEwKSx0aGlzLmVhcmx5fHx0aGlzLnN0YXJ0Mnh4UmV0cmFuc21pc3Npb25UaW1lcigpLHRoaXMuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKGUucmVxdWVzdCksdGhpcy5sb2dnZXI9dC5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcigic2lwLmludml0ZS1kaWFsb2ciKSx0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBjb25zdHJ1Y3RlZGApfWRpc3Bvc2UoKXtzdXBlci5kaXNwb3NlKCksdGhpcy5fc2lnbmFsaW5nU3RhdGU9UC5DbG9zZWQsdGhpcy5fb2ZmZXI9dm9pZCAwLHRoaXMuX2Fuc3dlcj12b2lkIDAsdGhpcy5pbnZpdGUyeHhUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLmludml0ZTJ4eFRpbWVyKSx0aGlzLmludml0ZTJ4eFRpbWVyPXZvaWQgMCksdGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gZGVzdHJveWVkYCl9Z2V0IHNlc3Npb25TdGF0ZSgpe3JldHVybiB0aGlzLmVhcmx5P18uRWFybHk6dGhpcy5hY2tXYWl0P18uQWNrV2FpdDp0aGlzLl9zaWduYWxpbmdTdGF0ZT09PVAuQ2xvc2VkP18uVGVybWluYXRlZDpfLkNvbmZpcm1lZH1nZXQgc2lnbmFsaW5nU3RhdGUoKXtyZXR1cm4gdGhpcy5fc2lnbmFsaW5nU3RhdGV9Z2V0IG9mZmVyKCl7cmV0dXJuIHRoaXMuX29mZmVyfWdldCBhbnN3ZXIoKXtyZXR1cm4gdGhpcy5fYW5zd2VyfWNvbmZpcm0oKXt0aGlzLmVhcmx5JiZ0aGlzLnN0YXJ0Mnh4UmV0cmFuc21pc3Npb25UaW1lcigpLHN1cGVyLmNvbmZpcm0oKX1yZUNvbmZpcm0oKXt0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyJiZ0aGlzLnN0YXJ0UmVJbnZpdGUyeHhSZXRyYW5zbWlzc2lvblRpbWVyKCl9YWNrKGU9e30pe2xldCB0O2lmKHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHNlbmRpbmcgQUNLIHJlcXVlc3RgKSx0aGlzLnJlaW52aXRlVXNlckFnZW50Q2xpZW50KXtpZighKHRoaXMucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQudHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBWKSl0aHJvdyBuZXcgRXJyb3IoIlRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi4iKTt0PXRoaXMucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQudHJhbnNhY3Rpb24sdGhpcy5yZWludml0ZVVzZXJBZ2VudENsaWVudD12b2lkIDB9ZWxzZXtpZighKHRoaXMuaW5pdGlhbFRyYW5zYWN0aW9uIGluc3RhbmNlb2YgVikpdGhyb3cgbmV3IEVycm9yKCJJbml0aWFsIHRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi4iKTt0PXRoaXMuaW5pdGlhbFRyYW5zYWN0aW9ufWNvbnN0IHM9dGhpcy5jcmVhdGVPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKGwuQUNLLHtjc2VxOnQucmVxdWVzdC5jc2VxLGV4dHJhSGVhZGVyczplLmV4dHJhSGVhZGVycyxib2R5OmUuYm9keX0pO3JldHVybiB0LmFja1Jlc3BvbnNlKHMpLHRoaXMuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKHMpLHttZXNzYWdlOnN9fWJ5ZShlLHQpe2lmKHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHNlbmRpbmcgQllFIHJlcXVlc3RgKSx0aGlzLmluaXRpYWxUcmFuc2FjdGlvbiBpbnN0YW5jZW9mIFcpe2lmKHRoaXMuZWFybHkpdGhyb3cgbmV3IEVycm9yKCJVQVMgTVVTVCBOT1Qgc2VuZCBhIEJZRSBvbiBlYXJseSBkaWFsb2dzLiIpO2lmKHRoaXMuYWNrV2FpdCYmdGhpcy5pbml0aWFsVHJhbnNhY3Rpb24uc3RhdGUhPT1PLlRlcm1pbmF0ZWQpdGhyb3cgbmV3IEVycm9yKCJVQVMgTVVTVCBOT1Qgc2VuZCBhIEJZRSBvbiBhIGNvbmZpcm1lZCBkaWFsb2cgdW50aWwgaXQgaGFzIHJlY2VpdmVkIGFuIEFDSyBmb3IgaXRzIDJ4eCByZXNwb25zZSBvciB1bnRpbCB0aGUgc2VydmVyIHRyYW5zYWN0aW9uIHRpbWVzIG91dC4iKX1yZXR1cm4gbmV3IHoodGhpcyxlLHQpfWluZm8oZSx0KXtpZih0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIElORk8gcmVxdWVzdGApLHRoaXMuZWFybHkpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgbm90IGNvbmZpcm1lZC4iKTtyZXR1cm4gbmV3IGVlKHRoaXMsZSx0KX1pbnZpdGUoZSx0KXtpZih0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIElOVklURSByZXF1ZXN0YCksdGhpcy5lYXJseSl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyBub3QgY29uZmlybWVkLiIpO2lmKHRoaXMucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQpdGhyb3cgbmV3IEVycm9yKCJUaGVyZSBpcyBhbiBvbmdvaW5nIHJlLUlOVklURSBjbGllbnQgdHJhbnNhY3Rpb24uIik7aWYodGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlcil0aHJvdyBuZXcgRXJyb3IoIlRoZXJlIGlzIGFuIG9uZ29pbmcgcmUtSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbi4iKTtyZXR1cm4gbmV3IGNlKHRoaXMsZSx0KX1tZXNzYWdlKGUsdCl7aWYodGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBNRVNTQUdFIHJlcXVlc3RgKSx0aGlzLmVhcmx5KXRocm93IG5ldyBFcnJvcigiRGlhbG9nIG5vdCBjb25maXJtZWQuIik7Y29uc3Qgcz10aGlzLmNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UobC5NRVNTQUdFLHQpO3JldHVybiBuZXcgc2UodGhpcy5jb3JlLHMsZSl9bm90aWZ5KGUsdCl7aWYodGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBOT1RJRlkgcmVxdWVzdGApLHRoaXMuZWFybHkpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgbm90IGNvbmZpcm1lZC4iKTtyZXR1cm4gbmV3IHJlKHRoaXMsZSx0KX1wcmFjayhlLHQpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIFBSQUNLIHJlcXVlc3RgKSxuZXcgb2UodGhpcyxlLHQpfXJlZmVyKGUsdCl7aWYodGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gc2VuZGluZyBSRUZFUiByZXF1ZXN0YCksdGhpcy5lYXJseSl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyBub3QgY29uZmlybWVkLiIpO3JldHVybiBuZXcgZGUodGhpcyxlLHQpfXJlY2VpdmVSZXF1ZXN0KGUpe2lmKHRoaXMubG9nZ2VyLmxvZyhgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkICR7ZS5tZXRob2R9IHJlcXVlc3RgKSxlLm1ldGhvZCE9PWwuQUNLKWlmKHRoaXMuc2VxdWVuY2VHdWFyZChlKSl7aWYoc3VwZXIucmVjZWl2ZVJlcXVlc3QoZSksZS5tZXRob2Q9PT1sLklOVklURSl7Y29uc3QgdD0oKT0+e2NvbnN0IGU9dGhpcy5hY2tXYWl0PyJ3YWl0aW5nIGZvciBpbml0aWFsIEFDSyI6InByb2Nlc3NpbmcgaW5pdGlhbCBBQ0siO3RoaXMubG9nZ2VyLndhcm4oYElOVklURSBkaWFsb2cgJHt0aGlzLmlkfSByZWNlaXZlZCByZS1JTlZJVEUgd2hpbGUgJHtlfWApO2xldCB0PSJSRkMgNTQwNyBzdWdnZXN0cyB0aGUgZm9sbG93aW5nIHRvIGF2b2lkIHRoaXMgcmFjZSBjb25kaXRpb24uLi4gIjt0Kz0iIE5vdGU6IEltcGxlbWVudGF0aW9uIGlzc3VlcyBhcmUgb3V0c2lkZSB0aGUgc2NvcGUgb2YgdGhpcyBkb2N1bWVudCwiLHQrPSIgYnV0IHRoZSBmb2xsb3dpbmcgdGlwIGlzIHByb3ZpZGVkIGZvciBhdm9pZGluZyByYWNlIGNvbmRpdGlvbnMgb2YiLHQrPSIgdGhpcyB0eXBlLiAgVGhlIGNhbGxlciBjYW4gZGVsYXkgc2VuZGluZyByZS1JTlZJVEUgRjYgZm9yIHNvbWUgcGVyaW9kIix0Kz0iIG9mIHRpbWUgKDIgc2Vjb25kcywgcGVyaGFwcyksIGFmdGVyIHdoaWNoIHRoZSBjYWxsZXIgY2FuIHJlYXNvbmFibHkiLHQrPSIgYXNzdW1lIHRoYXQgaXRzIEFDSyBoYXMgYmVlbiByZWNlaXZlZC4gIEltcGxlbWVudG9ycyBjYW4gZGVjb3VwbGUgdGhlIix0Kz0iIGFjdGlvbnMgb2YgdGhlIHVzZXIgKGUuZy4sIHByZXNzaW5nIHRoZSBob2xkIGJ1dHRvbikgZnJvbSB0aGUgYWN0aW9ucyIsdCs9IiBvZiB0aGUgcHJvdG9jb2wgKHRoZSBzZW5kaW5nIG9mIHJlLUlOVklURSBGNiksIHNvIHRoYXQgdGhlIFVBIGNhbiIsdCs9IiBiZWhhdmUgbGlrZSB0aGlzLiAgSW4gdGhpcyBjYXNlLCBpdCBpcyB0aGUgaW1wbGVtZW50b3IncyBjaG9pY2UgYXMgdG8iLHQrPSIgaG93IGxvbmcgdG8gd2FpdC4gIEluIG1vc3QgY2FzZXMsIHN1Y2ggYW4gaW1wbGVtZW50YXRpb24gbWF5IGJlIix0Kz0iIHVzZWZ1bCB0byBwcmV2ZW50IHRoZSB0eXBlIG9mIHJhY2UgY29uZGl0aW9uIHNob3duIGluIHRoaXMgc2VjdGlvbi4iLHQrPSIgVGhpcyBkb2N1bWVudCBleHByZXNzZXMgbm8gcHJlZmVyZW5jZSBhYm91dCB3aGV0aGVyIG9yIG5vdCB0aGV5Iix0Kz0iIHNob3VsZCB3YWl0IGZvciBhbiBBQ0sgdG8gYmUgZGVsaXZlcmVkLiAgQWZ0ZXIgY29uc2lkZXJpbmcgdGhlIGltcGFjdCIsdCs9IiBvbiB1c2VyIGV4cGVyaWVuY2UsIGltcGxlbWVudG9ycyBzaG91bGQgZGVjaWRlIHdoZXRoZXIgb3Igbm90IHRvIHdhaXQiLHQrPSIgZm9yIGEgd2hpbGUsIGJlY2F1c2UgdGhlIHVzZXIgZXhwZXJpZW5jZSBkZXBlbmRzIG9uIHRoZSIsdCs9IiBpbXBsZW1lbnRhdGlvbiBhbmQgaGFzIG5vIGRpcmVjdCBiZWFyaW5nIG9uIHByb3RvY29sIGJlaGF2aW9yLiIsdGhpcy5sb2dnZXIud2FybigiUkZDIDU0MDcgc3VnZ2VzdHMgdGhlIGZvbGxvd2luZyB0byBhdm9pZCB0aGlzIHJhY2UgY29uZGl0aW9uLi4uICBOb3RlOiBJbXBsZW1lbnRhdGlvbiBpc3N1ZXMgYXJlIG91dHNpZGUgdGhlIHNjb3BlIG9mIHRoaXMgZG9jdW1lbnQsIGJ1dCB0aGUgZm9sbG93aW5nIHRpcCBpcyBwcm92aWRlZCBmb3IgYXZvaWRpbmcgcmFjZSBjb25kaXRpb25zIG9mIHRoaXMgdHlwZS4gIFRoZSBjYWxsZXIgY2FuIGRlbGF5IHNlbmRpbmcgcmUtSU5WSVRFIEY2IGZvciBzb21lIHBlcmlvZCBvZiB0aW1lICgyIHNlY29uZHMsIHBlcmhhcHMpLCBhZnRlciB3aGljaCB0aGUgY2FsbGVyIGNhbiByZWFzb25hYmx5IGFzc3VtZSB0aGF0IGl0cyBBQ0sgaGFzIGJlZW4gcmVjZWl2ZWQuICBJbXBsZW1lbnRvcnMgY2FuIGRlY291cGxlIHRoZSBhY3Rpb25zIG9mIHRoZSB1c2VyIChlLmcuLCBwcmVzc2luZyB0aGUgaG9sZCBidXR0b24pIGZyb20gdGhlIGFjdGlvbnMgb2YgdGhlIHByb3RvY29sICh0aGUgc2VuZGluZyBvZiByZS1JTlZJVEUgRjYpLCBzbyB0aGF0IHRoZSBVQSBjYW4gYmVoYXZlIGxpa2UgdGhpcy4gIEluIHRoaXMgY2FzZSwgaXQgaXMgdGhlIGltcGxlbWVudG9yJ3MgY2hvaWNlIGFzIHRvIGhvdyBsb25nIHRvIHdhaXQuICBJbiBtb3N0IGNhc2VzLCBzdWNoIGFuIGltcGxlbWVudGF0aW9uIG1heSBiZSB1c2VmdWwgdG8gcHJldmVudCB0aGUgdHlwZSBvZiByYWNlIGNvbmRpdGlvbiBzaG93biBpbiB0aGlzIHNlY3Rpb24uIFRoaXMgZG9jdW1lbnQgZXhwcmVzc2VzIG5vIHByZWZlcmVuY2UgYWJvdXQgd2hldGhlciBvciBub3QgdGhleSBzaG91bGQgd2FpdCBmb3IgYW4gQUNLIHRvIGJlIGRlbGl2ZXJlZC4gIEFmdGVyIGNvbnNpZGVyaW5nIHRoZSBpbXBhY3Qgb24gdXNlciBleHBlcmllbmNlLCBpbXBsZW1lbnRvcnMgc2hvdWxkIGRlY2lkZSB3aGV0aGVyIG9yIG5vdCB0byB3YWl0IGZvciBhIHdoaWxlLCBiZWNhdXNlIHRoZSB1c2VyIGV4cGVyaWVuY2UgZGVwZW5kcyBvbiB0aGUgaW1wbGVtZW50YXRpb24gYW5kIGhhcyBubyBkaXJlY3QgYmVhcmluZyBvbiBwcm90b2NvbCBiZWhhdmlvci4iKX0scz1bIlJldHJ5LUFmdGVyOiAiKyhNYXRoLmZsb29yKDEwKk1hdGgucmFuZG9tKCkpKzEpXTtpZih0aGlzLmFja1Byb2Nlc3NpbmcpcmV0dXJuIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjUwMCxleHRyYUhlYWRlcnM6c30pLHZvaWQgdCgpO2lmKHRoaXMuYWNrV2FpdCYmdGhpcy5zaWduYWxpbmdTdGF0ZSE9PVAuU3RhYmxlKXJldHVybiB0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo1MDAsZXh0cmFIZWFkZXJzOnN9KSx2b2lkIHQoKTtpZih0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyKXJldHVybiB2b2lkIHRoaXMuY29yZS5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjUwMCxleHRyYUhlYWRlcnM6c30pO2lmKHRoaXMucmVpbnZpdGVVc2VyQWdlbnRDbGllbnQpcmV0dXJuIHZvaWQgdGhpcy5jb3JlLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NDkxfSl9aWYoZS5tZXRob2Q9PT1sLklOVklURSl7Y29uc3QgdD1lLnBhcnNlSGVhZGVyKCJjb250YWN0Iik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJDb250YWN0IHVuZGVmaW5lZC4iKTtpZighKHQgaW5zdGFuY2VvZiBvKSl0aHJvdyBuZXcgRXJyb3IoIkNvbnRhY3Qgbm90IGluc3RhbmNlIG9mIE5hbWVBZGRySGVhZGVyLiIpO3RoaXMuZGlhbG9nU3RhdGUucmVtb3RlVGFyZ2V0PXQudXJpfXN3aXRjaChlLm1ldGhvZCl7Y2FzZSBsLkJZRTp7Y29uc3QgdD1uZXcgUSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25CeWU/dGhpcy5kZWxlZ2F0ZS5vbkJ5ZSh0KTp0LmFjY2VwdCgpLHRoaXMuZGlzcG9zZSgpfWJyZWFrO2Nhc2UgbC5JTkZPOntjb25zdCB0PW5ldyB0ZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25JbmZvP3RoaXMuZGVsZWdhdGUub25JbmZvKHQpOnQucmVqZWN0KHtzdGF0dXNDb2RlOjQ2OSxleHRyYUhlYWRlcnM6WyJSZWN2LUluZm8gOiJdfSl9YnJlYWs7Y2FzZSBsLklOVklURTp7Y29uc3QgdD1uZXcgaGUodGhpcyxlKTt0aGlzLnNpZ25hbGluZ1N0YXRlVHJhbnNpdGlvbihlKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uSW52aXRlP3RoaXMuZGVsZWdhdGUub25JbnZpdGUodCk6dC5yZWplY3Qoe3N0YXR1c0NvZGU6NDg4fSl9YnJlYWs7Y2FzZSBsLk1FU1NBR0U6e2NvbnN0IHQ9bmV3IGllKHRoaXMuY29yZSxlKTt0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZT90aGlzLmRlbGVnYXRlLm9uTWVzc2FnZSh0KTp0LmFjY2VwdCgpfWJyZWFrO2Nhc2UgbC5OT1RJRlk6e2NvbnN0IHQ9bmV3IG5lKHRoaXMsZSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeT90aGlzLmRlbGVnYXRlLm9uTm90aWZ5KHQpOnQuYWNjZXB0KCl9YnJlYWs7Y2FzZSBsLlBSQUNLOntjb25zdCB0PW5ldyBhZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25QcmFjaz90aGlzLmRlbGVnYXRlLm9uUHJhY2sodCk6dC5hY2NlcHQoKX1icmVhaztjYXNlIGwuUkVGRVI6e2NvbnN0IHQ9bmV3IGdlKHRoaXMsZSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblJlZmVyP3RoaXMuZGVsZWdhdGUub25SZWZlcih0KTp0LnJlamVjdCgpfWJyZWFrO2RlZmF1bHQ6dGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgdW5pbXBsZW1lbnRlZCAke2UubWV0aG9kfSByZXF1ZXN0YCksdGhpcy5jb3JlLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NTAxfSl9fWVsc2UgdGhpcy5sb2dnZXIubG9nKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVqZWN0ZWQgb3V0IG9mIG9yZGVyICR7ZS5tZXRob2R9IHJlcXVlc3QuYCk7ZWxzZXtpZih0aGlzLmFja1dhaXQpe2lmKHRoaXMuaW5pdGlhbFRyYW5zYWN0aW9uIGluc3RhbmNlb2YgVilyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKGBJTlZJVEUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgdW5leHBlY3RlZCAke2UubWV0aG9kfSByZXF1ZXN0LCBkcm9wcGluZy5gKTtpZih0aGlzLmluaXRpYWxUcmFuc2FjdGlvbi5yZXF1ZXN0LmNzZXEhPT1lLmNzZXEpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybihgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkIHVuZXhwZWN0ZWQgJHtlLm1ldGhvZH0gcmVxdWVzdCwgZHJvcHBpbmcuYCk7dGhpcy5hY2tXYWl0PSExfWVsc2V7aWYoIXRoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXIpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybihgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkIHVuZXhwZWN0ZWQgJHtlLm1ldGhvZH0gcmVxdWVzdCwgZHJvcHBpbmcuYCk7aWYodGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlci50cmFuc2FjdGlvbi5yZXF1ZXN0LmNzZXEhPT1lLmNzZXEpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybihgSU5WSVRFIGRpYWxvZyAke3RoaXMuaWR9IHJlY2VpdmVkIHVuZXhwZWN0ZWQgJHtlLm1ldGhvZH0gcmVxdWVzdCwgZHJvcHBpbmcuYCk7dGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlcj12b2lkIDB9aWYodGhpcy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZSksdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkFjayl7Y29uc3QgdD10aGlzLmRlbGVnYXRlLm9uQWNrKHttZXNzYWdlOmV9KTt0IGluc3RhbmNlb2YgUHJvbWlzZSYmKHRoaXMuYWNrUHJvY2Vzc2luZz0hMCx0LnRoZW4oKCk9PnRoaXMuYWNrUHJvY2Vzc2luZz0hMSkuY2F0Y2goKCk9PnRoaXMuYWNrUHJvY2Vzc2luZz0hMSkpfX19cmVsaWFibGVTZXF1ZW5jZUd1YXJkKGUpe2NvbnN0IHQ9ZS5zdGF0dXNDb2RlO2lmKCF0KXRocm93IG5ldyBFcnJvcigiU3RhdHVzIGNvZGUgdW5kZWZpbmVkIik7aWYodD4xMDAmJnQ8MjAwKXtjb25zdCB0PWUuZ2V0SGVhZGVyKCJyZXF1aXJlIikscz1lLmdldEhlYWRlcigicnNlcSIpLGk9dCYmdC5pbmNsdWRlcygiMTAwcmVsIikmJnM/TnVtYmVyKHMpOnZvaWQgMDtpZihpKXtpZih0aGlzLnJzZXEmJnRoaXMucnNlcSsxIT09aSlyZXR1cm4hMTt0aGlzLnJzZXF8fCh0aGlzLnJzZXE9aSl9fXJldHVybiEwfXNpZ25hbGluZ1N0YXRlUm9sbGJhY2soKXt0aGlzLl9zaWduYWxpbmdTdGF0ZSE9PVAuSGF2ZUxvY2FsT2ZmZXImJnRoaXMuc2lnbmFsaW5nU3RhdGUhPT1QLkhhdmVSZW1vdGVPZmZlcnx8dGhpcy5fcm9sbGJhY2tPZmZlciYmdGhpcy5fcm9sbGJhY2tBbnN3ZXImJih0aGlzLl9zaWduYWxpbmdTdGF0ZT1QLlN0YWJsZSx0aGlzLl9vZmZlcj10aGlzLl9yb2xsYmFja09mZmVyLHRoaXMuX2Fuc3dlcj10aGlzLl9yb2xsYmFja0Fuc3dlcil9c2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKGUpe2NvbnN0IHQ9JChlKTtpZih0JiYic2Vzc2lvbiI9PT10LmNvbnRlbnREaXNwb3NpdGlvbil7aWYodGhpcy5fc2lnbmFsaW5nU3RhdGU9PT1QLlN0YWJsZSYmKHRoaXMuX3JvbGxiYWNrT2ZmZXI9dGhpcy5fb2ZmZXIsdGhpcy5fcm9sbGJhY2tBbnN3ZXI9dGhpcy5fYW5zd2VyKSxlIGluc3RhbmNlb2YgVClzd2l0Y2godGhpcy5fc2lnbmFsaW5nU3RhdGUpe2Nhc2UgUC5Jbml0aWFsOmNhc2UgUC5TdGFibGU6dGhpcy5fc2lnbmFsaW5nU3RhdGU9UC5IYXZlUmVtb3RlT2ZmZXIsdGhpcy5fb2ZmZXI9dCx0aGlzLl9hbnN3ZXI9dm9pZCAwO2JyZWFrO2Nhc2UgUC5IYXZlTG9jYWxPZmZlcjp0aGlzLl9zaWduYWxpbmdTdGF0ZT1QLlN0YWJsZSx0aGlzLl9hbnN3ZXI9dDticmVhaztjYXNlIFAuSGF2ZVJlbW90ZU9mZmVyOmNhc2UgUC5DbG9zZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgc2lnbmFsaW5nIHN0YXRlLiIpfWlmKGUgaW5zdGFuY2VvZiB5KXN3aXRjaCh0aGlzLl9zaWduYWxpbmdTdGF0ZSl7Y2FzZSBQLkluaXRpYWw6Y2FzZSBQLlN0YWJsZTp0aGlzLl9zaWduYWxpbmdTdGF0ZT1QLkhhdmVSZW1vdGVPZmZlcix0aGlzLl9vZmZlcj10LHRoaXMuX2Fuc3dlcj12b2lkIDA7YnJlYWs7Y2FzZSBQLkhhdmVMb2NhbE9mZmVyOnRoaXMuX3NpZ25hbGluZ1N0YXRlPVAuU3RhYmxlLHRoaXMuX2Fuc3dlcj10O2JyZWFrO2Nhc2UgUC5IYXZlUmVtb3RlT2ZmZXI6Y2FzZSBQLkNsb3NlZDpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5leHBlY3RlZCBzaWduYWxpbmcgc3RhdGUuIil9aWYoZSBpbnN0YW5jZW9mIEUpc3dpdGNoKHRoaXMuX3NpZ25hbGluZ1N0YXRlKXtjYXNlIFAuSW5pdGlhbDpjYXNlIFAuU3RhYmxlOnRoaXMuX3NpZ25hbGluZ1N0YXRlPVAuSGF2ZUxvY2FsT2ZmZXIsdGhpcy5fb2ZmZXI9dCx0aGlzLl9hbnN3ZXI9dm9pZCAwO2JyZWFrO2Nhc2UgUC5IYXZlTG9jYWxPZmZlcjpicmVhaztjYXNlIFAuSGF2ZVJlbW90ZU9mZmVyOnRoaXMuX3NpZ25hbGluZ1N0YXRlPVAuU3RhYmxlLHRoaXMuX2Fuc3dlcj10O2JyZWFrO2Nhc2UgUC5DbG9zZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgc2lnbmFsaW5nIHN0YXRlLiIpfWlmKEkoZSkpc3dpdGNoKHRoaXMuX3NpZ25hbGluZ1N0YXRlKXtjYXNlIFAuSW5pdGlhbDpjYXNlIFAuU3RhYmxlOnRoaXMuX3NpZ25hbGluZ1N0YXRlPVAuSGF2ZUxvY2FsT2ZmZXIsdGhpcy5fb2ZmZXI9dCx0aGlzLl9hbnN3ZXI9dm9pZCAwO2JyZWFrO2Nhc2UgUC5IYXZlTG9jYWxPZmZlcjpicmVhaztjYXNlIFAuSGF2ZVJlbW90ZU9mZmVyOnRoaXMuX3NpZ25hbGluZ1N0YXRlPVAuU3RhYmxlLHRoaXMuX2Fuc3dlcj10O2JyZWFrO2Nhc2UgUC5DbG9zZWQ6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgc2lnbmFsaW5nIHN0YXRlLiIpfX19c3RhcnQyeHhSZXRyYW5zbWlzc2lvblRpbWVyKCl7aWYodGhpcy5pbml0aWFsVHJhbnNhY3Rpb24gaW5zdGFuY2VvZiBXKXtjb25zdCBlPXRoaXMuaW5pdGlhbFRyYW5zYWN0aW9uO2xldCB0PU4uVDE7Y29uc3Qgcz0oKT0+e3RoaXMuYWNrV2FpdD8odGhpcy5sb2dnZXIubG9nKCJObyBBQ0sgZm9yIDJ4eCByZXNwb25zZSByZWNlaXZlZCwgYXR0ZW1wdGluZyByZXRyYW5zbWlzc2lvbiIpLGUucmV0cmFuc21pdEFjY2VwdGVkUmVzcG9uc2UoKSx0PU1hdGgubWluKDIqdCxOLlQyKSx0aGlzLmludml0ZTJ4eFRpbWVyPXNldFRpbWVvdXQocyx0KSk6dGhpcy5pbnZpdGUyeHhUaW1lcj12b2lkIDB9O3RoaXMuaW52aXRlMnh4VGltZXI9c2V0VGltZW91dChzLHQpO2NvbnN0IGk9KCk9PntlLnN0YXRlPT09Ty5UZXJtaW5hdGVkJiYoZS5yZW1vdmVMaXN0ZW5lcigic3RhdGVDaGFuZ2VkIixpKSx0aGlzLmludml0ZTJ4eFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuaW52aXRlMnh4VGltZXIpLHRoaXMuaW52aXRlMnh4VGltZXI9dm9pZCAwKSx0aGlzLmFja1dhaXQmJih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQWNrVGltZW91dD90aGlzLmRlbGVnYXRlLm9uQWNrVGltZW91dCgpOnRoaXMuYnllKCkpKX07ZS5hZGRMaXN0ZW5lcigic3RhdGVDaGFuZ2VkIixpKX19c3RhcnRSZUludml0ZTJ4eFJldHJhbnNtaXNzaW9uVGltZXIoKXtpZih0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyJiZ0aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgVyl7Y29uc3QgZT10aGlzLnJlaW52aXRlVXNlckFnZW50U2VydmVyLnRyYW5zYWN0aW9uO2xldCB0PU4uVDE7Y29uc3Qgcz0oKT0+e3RoaXMucmVpbnZpdGVVc2VyQWdlbnRTZXJ2ZXI/KHRoaXMubG9nZ2VyLmxvZygiTm8gQUNLIGZvciAyeHggcmVzcG9uc2UgcmVjZWl2ZWQsIGF0dGVtcHRpbmcgcmV0cmFuc21pc3Npb24iKSxlLnJldHJhbnNtaXRBY2NlcHRlZFJlc3BvbnNlKCksdD1NYXRoLm1pbigyKnQsTi5UMiksdGhpcy5pbnZpdGUyeHhUaW1lcj1zZXRUaW1lb3V0KHMsdCkpOnRoaXMuaW52aXRlMnh4VGltZXI9dm9pZCAwfTt0aGlzLmludml0ZTJ4eFRpbWVyPXNldFRpbWVvdXQocyx0KTtjb25zdCBpPSgpPT57ZS5zdGF0ZT09PU8uVGVybWluYXRlZCYmKGUucmVtb3ZlTGlzdGVuZXIoInN0YXRlQ2hhbmdlZCIsaSksdGhpcy5pbnZpdGUyeHhUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLmludml0ZTJ4eFRpbWVyKSx0aGlzLmludml0ZTJ4eFRpbWVyPXZvaWQgMCksdGhpcy5yZWludml0ZVVzZXJBZ2VudFNlcnZlcil9O2UuYWRkTGlzdGVuZXIoInN0YXRlQ2hhbmdlZCIsaSl9fX0hZnVuY3Rpb24oZSl7ZS5Jbml0aWFsPSJJbml0aWFsIixlLk5vdGlmeVdhaXQ9Ik5vdGlmeVdhaXQiLGUuUGVuZGluZz0iUGVuZGluZyIsZS5BY3RpdmU9IkFjdGl2ZSIsZS5UZXJtaW5hdGVkPSJUZXJtaW5hdGVkIn0oVXx8KFU9e30pKTtjb25zdCB1ZT1bbC5BQ0ssbC5CWUUsbC5DQU5DRUwsbC5JTkZPLGwuSU5WSVRFLGwuTUVTU0FHRSxsLk5PVElGWSxsLk9QVElPTlMsbC5QUkFDSyxsLlJFRkVSLGwuUkVHSVNURVIsbC5TVUJTQ1JJQkVdO2NsYXNzIHBlIGV4dGVuZHMgSntjb25zdHJ1Y3RvcihlLHQscyl7Y29uc3QgaT1lLmNyZWF0ZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UobC5TVUJTQ1JJQkUscyk7c3VwZXIoWSxlLnVzZXJBZ2VudENvcmUsaSx0KSx0aGlzLmRpYWxvZz1lfXdhaXROb3RpZnlTdG9wKCl7fXJlY2VpdmVSZXNwb25zZShlKXtpZihlLnN0YXR1c0NvZGUmJmUuc3RhdHVzQ29kZT49MjAwJiZlLnN0YXR1c0NvZGU8MzAwKXtjb25zdCB0PWUuZ2V0SGVhZGVyKCJFeHBpcmVzIik7aWYodCl7Y29uc3QgZT1OdW1iZXIodCk7dGhpcy5kaWFsb2cuc3Vic2NyaXB0aW9uRXhwaXJlcz5lJiYodGhpcy5kaWFsb2cuc3Vic2NyaXB0aW9uRXhwaXJlcz1lKX1lbHNlIHRoaXMubG9nZ2VyLndhcm4oIkV4cGlyZXMgaGVhZGVyIG1pc3NpbmcgaW4gYSAyMDAtY2xhc3MgcmVzcG9uc2UgdG8gU1VCU0NSSUJFIil9aWYoZS5zdGF0dXNDb2RlJiZlLnN0YXR1c0NvZGU+PTQwMCYmZS5zdGF0dXNDb2RlPDcwMCl7WzQwNCw0MDUsNDEwLDQxNiw0ODAsNDgxLDQ4Miw0ODMsNDg0LDQ4NSw0ODksNTAxLDYwNF0uaW5jbHVkZXMoZS5zdGF0dXNDb2RlKSYmdGhpcy5kaWFsb2cudGVybWluYXRlKCl9c3VwZXIucmVjZWl2ZVJlc3BvbnNlKGUpfX1jbGFzcyBmZSBleHRlbmRzIER7Y29uc3RydWN0b3IoZSx0LHMsaSxyLG4pe3N1cGVyKGksciksdGhpcy5kZWxlZ2F0ZT1uLHRoaXMuX2F1dG9SZWZyZXNoPSExLHRoaXMuX3N1YnNjcmlwdGlvbkV2ZW50PWUsdGhpcy5fc3Vic2NyaXB0aW9uRXhwaXJlcz10LHRoaXMuX3N1YnNjcmlwdGlvbkV4cGlyZXNJbml0aWFsPXQsdGhpcy5fc3Vic2NyaXB0aW9uRXhwaXJlc0xhc3RTZXQ9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyksdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaD12b2lkIDAsdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQ9dm9pZCAwLHRoaXMuX3N1YnNjcmlwdGlvblN0YXRlPXMsdGhpcy5sb2dnZXI9aS5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcigic2lwLnN1YnNjcmliZS1kaWFsb2ciKSx0aGlzLmxvZ2dlci5sb2coYFNVQlNDUklCRSBkaWFsb2cgJHt0aGlzLmlkfSBjb25zdHJ1Y3RlZGApfXN0YXRpYyBpbml0aWFsRGlhbG9nU3RhdGVGb3JTdWJzY3JpcHRpb24oZSx0KXtjb25zdCBzPXQuZ2V0SGVhZGVycygicmVjb3JkLXJvdXRlIiksaT10LnBhcnNlSGVhZGVyKCJjb250YWN0Iik7aWYoIWkpdGhyb3cgbmV3IEVycm9yKCJDb250YWN0IHVuZGVmaW5lZC4iKTtpZighKGkgaW5zdGFuY2VvZiBvKSl0aHJvdyBuZXcgRXJyb3IoIkNvbnRhY3Qgbm90IGluc3RhbmNlIG9mIE5hbWVBZGRySGVhZGVyLiIpO2NvbnN0IHI9aS51cmksbj1lLmNzZXEsYT1lLmNhbGxJZCxjPWUuZnJvbVRhZyxoPXQuZnJvbVRhZztpZighYSl0aHJvdyBuZXcgRXJyb3IoIkNhbGwgaWQgdW5kZWZpbmVkLiIpO2lmKCFjKXRocm93IG5ldyBFcnJvcigiRnJvbSB0YWcgdW5kZWZpbmVkLiIpO2lmKCFoKXRocm93IG5ldyBFcnJvcigiVG8gdGFnIHVuZGVmaW5lZC4iKTtpZighZS5mcm9tKXRocm93IG5ldyBFcnJvcigiRnJvbSB1bmRlZmluZWQuIik7aWYoIWUudG8pdGhyb3cgbmV3IEVycm9yKCJUbyB1bmRlZmluZWQuIik7cmV0dXJue2lkOmErYytoLGVhcmx5OiExLGNhbGxJZDphLGxvY2FsVGFnOmMscmVtb3RlVGFnOmgsbG9jYWxTZXF1ZW5jZU51bWJlcjpuLHJlbW90ZVNlcXVlbmNlTnVtYmVyOnZvaWQgMCxsb2NhbFVSSTplLmZyb20udXJpLHJlbW90ZVVSSTplLnRvLnVyaSxyZW1vdGVUYXJnZXQ6cixyb3V0ZVNldDpzLHNlY3VyZTohMX19ZGlzcG9zZSgpe3N1cGVyLmRpc3Bvc2UoKSx0aGlzLk4mJihjbGVhclRpbWVvdXQodGhpcy5OKSx0aGlzLk49dm9pZCAwKSx0aGlzLnJlZnJlc2hUaW1lckNsZWFyKCksdGhpcy5sb2dnZXIubG9nKGBTVUJTQ1JJQkUgZGlhbG9nICR7dGhpcy5pZH0gZGVzdHJveWVkYCl9Z2V0IGF1dG9SZWZyZXNoKCl7cmV0dXJuIHRoaXMuX2F1dG9SZWZyZXNofXNldCBhdXRvUmVmcmVzaChlKXt0aGlzLl9hdXRvUmVmcmVzaD0hMCx0aGlzLnJlZnJlc2hUaW1lclNldCgpfWdldCBzdWJzY3JpcHRpb25FdmVudCgpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25FdmVudH1nZXQgc3Vic2NyaXB0aW9uRXhwaXJlcygpe2NvbnN0IGU9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyktdGhpcy5fc3Vic2NyaXB0aW9uRXhwaXJlc0xhc3RTZXQsdD10aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzLWU7cmV0dXJuIE1hdGgubWF4KHQsMCl9c2V0IHN1YnNjcmlwdGlvbkV4cGlyZXMoZSl7aWYoZTwwKXRocm93IG5ldyBFcnJvcigiRXhwaXJlcyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB6ZXJvLiIpO2lmKHRoaXMuX3N1YnNjcmlwdGlvbkV4cGlyZXM9ZSx0aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzTGFzdFNldD1NYXRoLmZsb29yKERhdGUubm93KCkvMWUzKSx0aGlzLmF1dG9SZWZyZXNoKXtjb25zdCB0PXRoaXMuc3Vic2NyaXB0aW9uUmVmcmVzaDsodm9pZCAwPT09dHx8dD49ZSkmJnRoaXMucmVmcmVzaFRpbWVyU2V0KCl9fWdldCBzdWJzY3JpcHRpb25FeHBpcmVzSW5pdGlhbCgpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25FeHBpcmVzSW5pdGlhbH1nZXQgc3Vic2NyaXB0aW9uUmVmcmVzaCgpe2lmKHZvaWQgMD09PXRoaXMuX3N1YnNjcmlwdGlvblJlZnJlc2h8fHZvaWQgMD09PXRoaXMuX3N1YnNjcmlwdGlvblJlZnJlc2hMYXN0U2V0KXJldHVybjtjb25zdCBlPU1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpLXRoaXMuX3N1YnNjcmlwdGlvblJlZnJlc2hMYXN0U2V0LHQ9dGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaC1lO3JldHVybiBNYXRoLm1heCh0LDApfWdldCBzdWJzY3JpcHRpb25TdGF0ZSgpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25TdGF0ZX1yZWNlaXZlUmVxdWVzdChlKXtpZih0aGlzLmxvZ2dlci5sb2coYFNVQlNDUklCRSBkaWFsb2cgJHt0aGlzLmlkfSByZWNlaXZlZCAke2UubWV0aG9kfSByZXF1ZXN0YCksdGhpcy5zZXF1ZW5jZUd1YXJkKGUpKXN3aXRjaChzdXBlci5yZWNlaXZlUmVxdWVzdChlKSxlLm1ldGhvZCl7Y2FzZSBsLk5PVElGWTp0aGlzLm9uTm90aWZ5KGUpO2JyZWFrO2RlZmF1bHQ6dGhpcy5sb2dnZXIubG9nKGBTVUJTQ1JJQkUgZGlhbG9nICR7dGhpcy5pZH0gcmVjZWl2ZWQgdW5pbXBsZW1lbnRlZCAke2UubWV0aG9kfSByZXF1ZXN0YCksdGhpcy5jb3JlLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NTAxfSl9ZWxzZSB0aGlzLmxvZ2dlci5sb2coYFNVQlNDUklCRSBkaWFsb2cgJHt0aGlzLmlkfSByZWplY3RlZCBvdXQgb2Ygb3JkZXIgJHtlLm1ldGhvZH0gcmVxdWVzdC5gKX1yZWZyZXNoKCl7Y29uc3QgZT0iQWxsb3c6ICIrdWUudG9TdHJpbmcoKSx0PXt9O3JldHVybiB0LmV4dHJhSGVhZGVycz0odC5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLHQuZXh0cmFIZWFkZXJzLnB1c2goZSksdC5leHRyYUhlYWRlcnMucHVzaCgiRXZlbnQ6ICIrdGhpcy5zdWJzY3JpcHRpb25FdmVudCksdC5leHRyYUhlYWRlcnMucHVzaCgiRXhwaXJlczogIit0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXNJbml0aWFsKSx0LmV4dHJhSGVhZGVycy5wdXNoKCJDb250YWN0OiAiK3RoaXMuY29yZS5jb25maWd1cmF0aW9uLmNvbnRhY3QudG9TdHJpbmcoKSksdGhpcy5zdWJzY3JpYmUodm9pZCAwLHQpfXN1YnNjcmliZShlLHQ9e30pe2lmKHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUhPT1VLlBlbmRpbmcmJnRoaXMuc3Vic2NyaXB0aW9uU3RhdGUhPT1VLkFjdGl2ZSl0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgJHt0aGlzLnN1YnNjcmlwdGlvblN0YXRlfS4gTWF5IG9ubHkgcmUtc3Vic2NyaWJlIHdoaWxlIGluIHN0YXRlICJwZW5kaW5nIiBvciAiYWN0aXZlIi5gKTt0aGlzLmxvZ2dlci5sb2coYFNVQlNDUklCRSBkaWFsb2cgJHt0aGlzLmlkfSBzZW5kaW5nIFNVQlNDUklCRSByZXF1ZXN0YCk7Y29uc3Qgcz1uZXcgcGUodGhpcyxlLHQpO3JldHVybiB0aGlzLk4mJihjbGVhclRpbWVvdXQodGhpcy5OKSx0aGlzLk49dm9pZCAwKSx0aGlzLk49c2V0VGltZW91dCgoKT0+dGhpcy50aW1lck4oKSxOLlRJTUVSX04pLHN9dGVybWluYXRlKCl7dGhpcy5zdGF0ZVRyYW5zaXRpb24oVS5UZXJtaW5hdGVkKSx0aGlzLm9uVGVybWluYXRlZCgpfXVuc3Vic2NyaWJlKCl7Y29uc3QgZT0iQWxsb3c6ICIrdWUudG9TdHJpbmcoKSx0PXt9O3JldHVybiB0LmV4dHJhSGVhZGVycz0odC5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLHQuZXh0cmFIZWFkZXJzLnB1c2goZSksdC5leHRyYUhlYWRlcnMucHVzaCgiRXZlbnQ6ICIrdGhpcy5zdWJzY3JpcHRpb25FdmVudCksdC5leHRyYUhlYWRlcnMucHVzaCgiRXhwaXJlczogMCIpLHQuZXh0cmFIZWFkZXJzLnB1c2goIkNvbnRhY3Q6ICIrdGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24uY29udGFjdC50b1N0cmluZygpKSx0aGlzLnN1YnNjcmliZSh2b2lkIDAsdCl9b25Ob3RpZnkoZSl7Y29uc3QgdD1lLnBhcnNlSGVhZGVyKCJFdmVudCIpLmV2ZW50O2lmKCF0fHx0IT09dGhpcy5zdWJzY3JpcHRpb25FdmVudClyZXR1cm4gdm9pZCB0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0ODl9KTt0aGlzLk4mJihjbGVhclRpbWVvdXQodGhpcy5OKSx0aGlzLk49dm9pZCAwKTtjb25zdCBzPWUucGFyc2VIZWFkZXIoIlN1YnNjcmlwdGlvbi1TdGF0ZSIpO2lmKCFzfHwhcy5zdGF0ZSlyZXR1cm4gdm9pZCB0aGlzLmNvcmUucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0ODl9KTtjb25zdCBpPXMuc3RhdGUscj1zLmV4cGlyZXM/TWF0aC5tYXgocy5leHBpcmVzLDApOnZvaWQgMDtzd2l0Y2goaSl7Y2FzZSJwZW5kaW5nIjp0aGlzLnN0YXRlVHJhbnNpdGlvbihVLlBlbmRpbmcscik7YnJlYWs7Y2FzZSJhY3RpdmUiOnRoaXMuc3RhdGVUcmFuc2l0aW9uKFUuQWN0aXZlLHIpO2JyZWFrO2Nhc2UidGVybWluYXRlZCI6dGhpcy5zdGF0ZVRyYW5zaXRpb24oVS5UZXJtaW5hdGVkLHIpO2JyZWFrO2RlZmF1bHQ6dGhpcy5sb2dnZXIud2FybigiVW5yZWNvZ25pemVkIHN1YnNjcmlwdGlvbiBzdGF0ZS4iKX1jb25zdCBuPW5ldyBuZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25Ob3RpZnk/dGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeShuKTpuLmFjY2VwdCgpfW9uUmVmcmVzaChlKXt0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVmcmVzaCYmdGhpcy5kZWxlZ2F0ZS5vblJlZnJlc2goZSl9b25UZXJtaW5hdGVkKCl7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblRlcm1pbmF0ZWQmJnRoaXMuZGVsZWdhdGUub25UZXJtaW5hdGVkKCl9cmVmcmVzaFRpbWVyQ2xlYXIoKXt0aGlzLnJlZnJlc2hUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnJlZnJlc2hUaW1lciksdGhpcy5yZWZyZXNoVGltZXI9dm9pZCAwKX1yZWZyZXNoVGltZXJTZXQoKXtpZih0aGlzLnJlZnJlc2hUaW1lckNsZWFyKCksdGhpcy5hdXRvUmVmcmVzaCYmdGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzPjApe2NvbnN0IGU9OTAwKnRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlczt0aGlzLl9zdWJzY3JpcHRpb25SZWZyZXNoPU1hdGguZmxvb3IoZS8xZTMpLHRoaXMuX3N1YnNjcmlwdGlvblJlZnJlc2hMYXN0U2V0PU1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpLHRoaXMucmVmcmVzaFRpbWVyPXNldFRpbWVvdXQoKCk9Pnt0aGlzLnJlZnJlc2hUaW1lcj12b2lkIDAsdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaD12b2lkIDAsdGhpcy5fc3Vic2NyaXB0aW9uUmVmcmVzaExhc3RTZXQ9dm9pZCAwLHRoaXMub25SZWZyZXNoKHRoaXMucmVmcmVzaCgpKX0sZSl9fXN0YXRlVHJhbnNpdGlvbihlLHQpe2NvbnN0IHM9KCk9Pnt0aGlzLmxvZ2dlci53YXJuKGBJbnZhbGlkIHN1YnNjcmlwdGlvbiBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLnN1YnNjcmlwdGlvblN0YXRlfSB0byAke2V9YCl9O3N3aXRjaChlKXtjYXNlIFUuSW5pdGlhbDpjYXNlIFUuTm90aWZ5V2FpdDpyZXR1cm4gdm9pZCBzKCk7Y2FzZSBVLlBlbmRpbmc6aWYodGhpcy5zdWJzY3JpcHRpb25TdGF0ZSE9PVUuTm90aWZ5V2FpdCYmdGhpcy5zdWJzY3JpcHRpb25TdGF0ZSE9PVUuUGVuZGluZylyZXR1cm4gdm9pZCBzKCk7YnJlYWs7Y2FzZSBVLkFjdGl2ZTpjYXNlIFUuVGVybWluYXRlZDppZih0aGlzLnN1YnNjcmlwdGlvblN0YXRlIT09VS5Ob3RpZnlXYWl0JiZ0aGlzLnN1YnNjcmlwdGlvblN0YXRlIT09VS5QZW5kaW5nJiZ0aGlzLnN1YnNjcmlwdGlvblN0YXRlIT09VS5BY3RpdmUpcmV0dXJuIHZvaWQgcygpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIHZvaWQgcygpfWU9PT1VLlBlbmRpbmcmJnQmJih0aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXM9dCksZT09PVUuQWN0aXZlJiZ0JiYodGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzPXQpLGU9PT1VLlRlcm1pbmF0ZWQmJnRoaXMuZGlzcG9zZSgpLHRoaXMuX3N1YnNjcmlwdGlvblN0YXRlPWV9dGltZXJOKCl7dGhpcy5sb2dnZXIud2FybigiVGltZXIgTiBleHBpcmVkIGZvciBTVUJTQ1JJQkUgZGlhbG9nLiBUaW1lZCBvdXQgd2FpdGluZyBmb3IgTk9USUZZLiIpLHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUhPT1VLlRlcm1pbmF0ZWQmJih0aGlzLnN0YXRlVHJhbnNpdGlvbihVLlRlcm1pbmF0ZWQpLHRoaXMub25UZXJtaW5hdGVkKCkpfX12YXIgbWU7IWZ1bmN0aW9uKGUpe2VbZS5lcnJvcj0wXT0iZXJyb3IiLGVbZS53YXJuPTFdPSJ3YXJuIixlW2UubG9nPTJdPSJsb2ciLGVbZS5kZWJ1Zz0zXT0iZGVidWcifShtZXx8KG1lPXt9KSk7Y2xhc3MgdmV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMubG9nZ2VyPWUsdGhpcy5jYXRlZ29yeT10LHRoaXMubGFiZWw9c31lcnJvcihlKXt0aGlzLmdlbmVyaWNMb2cobWUuZXJyb3IsZSl9d2FybihlKXt0aGlzLmdlbmVyaWNMb2cobWUud2FybixlKX1sb2coZSl7dGhpcy5nZW5lcmljTG9nKG1lLmxvZyxlKX1kZWJ1ZyhlKXt0aGlzLmdlbmVyaWNMb2cobWUuZGVidWcsZSl9Z2VuZXJpY0xvZyhlLHQpe3RoaXMubG9nZ2VyLmdlbmVyaWNMb2coZSx0aGlzLmNhdGVnb3J5LHRoaXMubGFiZWwsdCl9fWNsYXNzIHdle2NvbnN0cnVjdG9yKCl7dGhpcy5idWlsdGluRW5hYmxlZD0hMCx0aGlzLl9sZXZlbD1tZS5sb2csdGhpcy5sb2dnZXJzPXt9LHRoaXMubG9nZ2VyPXRoaXMuZ2V0TG9nZ2VyKCJzaXA6bG9nZ2VyZmFjdG9yeSIpfWdldCBsZXZlbCgpe3JldHVybiB0aGlzLl9sZXZlbH1zZXQgbGV2ZWwoZSl7ZT49MCYmZTw9Mz90aGlzLl9sZXZlbD1lOmU+Mz90aGlzLl9sZXZlbD0zOm1lLmhhc093blByb3BlcnR5KGUpP3RoaXMuX2xldmVsPWU6dGhpcy5sb2dnZXIuZXJyb3IoImludmFsaWQgJ2xldmVsJyBwYXJhbWV0ZXIgdmFsdWU6ICIrSlNPTi5zdHJpbmdpZnkoZSkpfWdldCBjb25uZWN0b3IoKXtyZXR1cm4gdGhpcy5fY29ubmVjdG9yfXNldCBjb25uZWN0b3IoZSl7ZT8iZnVuY3Rpb24iPT10eXBlb2YgZT90aGlzLl9jb25uZWN0b3I9ZTp0aGlzLmxvZ2dlci5lcnJvcigiaW52YWxpZCAnY29ubmVjdG9yJyBwYXJhbWV0ZXIgdmFsdWU6ICIrSlNPTi5zdHJpbmdpZnkoZSkpOnRoaXMuX2Nvbm5lY3Rvcj12b2lkIDB9Z2V0TG9nZ2VyKGUsdCl7aWYodCYmMz09PXRoaXMubGV2ZWwpcmV0dXJuIG5ldyB2ZSh0aGlzLGUsdCk7aWYodGhpcy5sb2dnZXJzW2VdKXJldHVybiB0aGlzLmxvZ2dlcnNbZV07e2NvbnN0IHQ9bmV3IHZlKHRoaXMsZSk7cmV0dXJuIHRoaXMubG9nZ2Vyc1tlXT10LHR9fWdlbmVyaWNMb2coZSx0LHMsaSl7dGhpcy5sZXZlbD49ZSYmdGhpcy5idWlsdGluRW5hYmxlZCYmdGhpcy5wcmludChlLHQscyxpKSx0aGlzLmNvbm5lY3RvciYmdGhpcy5jb25uZWN0b3IobWVbZV0sdCxzLGkpfXByaW50KGUsdCxzLGkpe2lmKCJzdHJpbmciPT10eXBlb2YgaSl7Y29uc3QgZT1bbmV3IERhdGUsdF07cyYmZS5wdXNoKHMpLGk9ZS5jb25jYXQoaSkuam9pbigiIHwgIil9c3dpdGNoKGUpe2Nhc2UgbWUuZXJyb3I6Y29uc29sZS5lcnJvcihpKTticmVhaztjYXNlIG1lLndhcm46Y29uc29sZS53YXJuKGkpO2JyZWFrO2Nhc2UgbWUubG9nOmNvbnNvbGUubG9nKGkpO2JyZWFrO2Nhc2UgbWUuZGVidWc6Y29uc29sZS5kZWJ1ZyhpKX19fWNsYXNzIGJlIGV4dGVuZHMgSntjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoWSxlLHQscyl9fWNsYXNzIFRlIGV4dGVuZHMgSntjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoVixlLHQscyksdGhpcy5jb25maXJtZWREaWFsb2dBY2tzPW5ldyBNYXAsdGhpcy5jb25maXJtZWREaWFsb2dzPW5ldyBNYXAsdGhpcy5lYXJseURpYWxvZ3M9bmV3IE1hcCx0aGlzLmRlbGVnYXRlPXN9ZGlzcG9zZSgpe3RoaXMuZWFybHlEaWFsb2dzLmZvckVhY2goZT0+ZS5kaXNwb3NlKCkpLHRoaXMuZWFybHlEaWFsb2dzLmNsZWFyKCksc3VwZXIuZGlzcG9zZSgpfW9uVHJhbnNwb3J0RXJyb3IoZSl7aWYodGhpcy50cmFuc2FjdGlvbi5zdGF0ZT09PU8uQ2FsbGluZylyZXR1cm4gc3VwZXIub25UcmFuc3BvcnRFcnJvcihlKTt0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLHRoaXMubG9nZ2VyLmVycm9yKCJVc2VyIGFnZW50IGNsaWVudCByZXF1ZXN0IHRyYW5zcG9ydCBlcnJvciB3aGlsZSBzZW5kaW5nIEFDSy4iKX1yZWNlaXZlUmVzcG9uc2UoZSl7aWYoIXRoaXMuYXV0aGVudGljYXRpb25HdWFyZChlKSlyZXR1cm47Y29uc3QgdD1lLnN0YXR1c0NvZGU/ZS5zdGF0dXNDb2RlLnRvU3RyaW5nKCk6IiI7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBzdGF0dXMgY29kZSB1bmRlZmluZWQuIik7c3dpdGNoKCEwKXtjYXNlL14xMDAkLy50ZXN0KHQpOnJldHVybiB2b2lkKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25UcnlpbmcmJnRoaXMuZGVsZWdhdGUub25Ucnlpbmcoe21lc3NhZ2U6ZX0pKTtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KHQpOntpZighZS50b1RhZylyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKCJOb24tMTAwIDF4eCBJTlZJVEUgcmVzcG9uc2UgcmVjZWl2ZWQgd2l0aG91dCBhIHRvIHRhZywgZHJvcHBpbmcuIik7Y29uc3QgdD1ELmluaXRpYWxEaWFsb2dTdGF0ZUZvclVzZXJBZ2VudENsaWVudCh0aGlzLm1lc3NhZ2UsZSk7bGV0IHM9dGhpcy5lYXJseURpYWxvZ3MuZ2V0KHQuaWQpO2lmKCFzKXtjb25zdCBlPXRoaXMudHJhbnNhY3Rpb247aWYoIShlIGluc3RhbmNlb2YgVikpdGhyb3cgbmV3IEVycm9yKCJUcmFuc2FjdGlvbiBub3QgaW5zdGFuY2Ugb2YgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24uIik7cz1uZXcgbGUoZSx0aGlzLmNvcmUsdCksdGhpcy5lYXJseURpYWxvZ3Muc2V0KHMuaWQscyl9aWYoIXMucmVsaWFibGVTZXF1ZW5jZUd1YXJkKGUpKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oIjF4eCBJTlZJVEUgcmVsaWFibGUgcmVzcG9uc2UgcmVjZWl2ZWQgb3V0IG9mIG9yZGVyLCBkcm9wcGluZy4iKTtzLnNpZ25hbGluZ1N0YXRlIT09UC5Jbml0aWFsJiZzLnNpZ25hbGluZ1N0YXRlIT09UC5IYXZlTG9jYWxPZmZlcnx8cy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZSk7Y29uc3QgaT1zO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25Qcm9ncmVzcyYmdGhpcy5kZWxlZ2F0ZS5vblByb2dyZXNzKHttZXNzYWdlOmUsc2Vzc2lvbjppLHByYWNrOmU9PmkucHJhY2sodm9pZCAwLGUpfSl9cmV0dXJuO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QodCk6e2NvbnN0IHQ9RC5pbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRDbGllbnQodGhpcy5tZXNzYWdlLGUpO2xldCBzPXRoaXMuY29uZmlybWVkRGlhbG9ncy5nZXQodC5pZCk7aWYocyl7Y29uc3QgZT10aGlzLmNvbmZpcm1lZERpYWxvZ0Fja3MuZ2V0KHQuaWQpO2lmKGUpe2NvbnN0IHQ9dGhpcy50cmFuc2FjdGlvbjtpZighKHQgaW5zdGFuY2VvZiBWKSl0aHJvdyBuZXcgRXJyb3IoIkNsaWVudCB0cmFuc2FjdGlvbiBub3QgaW5zdGFuY2Ugb2YgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24uIik7dC5hY2tSZXNwb25zZShlLm1lc3NhZ2UpfXJldHVybn1pZihzPXRoaXMuZWFybHlEaWFsb2dzLmdldCh0LmlkKSxzKXMuY29uZmlybSgpLHMucmVjb21wdXRlUm91dGVTZXQoZSksdGhpcy5lYXJseURpYWxvZ3MuZGVsZXRlKHMuaWQpLHRoaXMuY29uZmlybWVkRGlhbG9ncy5zZXQocy5pZCxzKTtlbHNle2NvbnN0IGU9dGhpcy50cmFuc2FjdGlvbjtpZighKGUgaW5zdGFuY2VvZiBWKSl0aHJvdyBuZXcgRXJyb3IoIlRyYW5zYWN0aW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi4iKTtzPW5ldyBsZShlLHRoaXMuY29yZSx0KSx0aGlzLmNvbmZpcm1lZERpYWxvZ3Muc2V0KHMuaWQscyl9cy5zaWduYWxpbmdTdGF0ZSE9PVAuSW5pdGlhbCYmcy5zaWduYWxpbmdTdGF0ZSE9PVAuSGF2ZUxvY2FsT2ZmZXJ8fHMuc2lnbmFsaW5nU3RhdGVUcmFuc2l0aW9uKGUpO2NvbnN0IGk9cztpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQWNjZXB0KXRoaXMuZGVsZWdhdGUub25BY2NlcHQoe21lc3NhZ2U6ZSxzZXNzaW9uOmksYWNrOmU9Pntjb25zdCB0PWkuYWNrKGUpO3JldHVybiB0aGlzLmNvbmZpcm1lZERpYWxvZ0Fja3Muc2V0KGkuaWQsdCksdH19KTtlbHNle2NvbnN0IGU9aS5hY2soKTt0aGlzLmNvbmZpcm1lZERpYWxvZ0Fja3Muc2V0KGkuaWQsZSl9fXJldHVybjtjYXNlL14zWzAtOV17Mn0kLy50ZXN0KHQpOnJldHVybiB0aGlzLmVhcmx5RGlhbG9ncy5mb3JFYWNoKGU9PmUuZGlzcG9zZSgpKSx0aGlzLmVhcmx5RGlhbG9ncy5jbGVhcigpLHZvaWQodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblJlZGlyZWN0JiZ0aGlzLmRlbGVnYXRlLm9uUmVkaXJlY3Qoe21lc3NhZ2U6ZX0pKTtjYXNlL15bNC02XVswLTldezJ9JC8udGVzdCh0KTpyZXR1cm4gdGhpcy5lYXJseURpYWxvZ3MuZm9yRWFjaChlPT5lLmRpc3Bvc2UoKSksdGhpcy5lYXJseURpYWxvZ3MuY2xlYXIoKSx2b2lkKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWplY3QmJnRoaXMuZGVsZWdhdGUub25SZWplY3Qoe21lc3NhZ2U6ZX0pKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzdGF0dXMgY29kZSAiK3QpfXRocm93IG5ldyBFcnJvcihgRXhlY3V0aW5nIHdoYXQgc2hvdWxkIGJlIGFuIHVucmVhY2hhYmxlIGNvZGUgcGF0aCByZWNlaXZpbmcgJHt0fSByZXNwb25zZS5gKX19Y2xhc3MgeWUgZXh0ZW5kcyBYe2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihXLGUsdCxzKSx0aGlzLmNvcmU9ZX1kaXNwb3NlKCl7dGhpcy5lYXJseURpYWxvZyYmdGhpcy5lYXJseURpYWxvZy5kaXNwb3NlKCksc3VwZXIuZGlzcG9zZSgpfWFjY2VwdChlPXtzdGF0dXNDb2RlOjIwMH0pe2lmKCF0aGlzLmFjY2VwdGFibGUpdGhyb3cgbmV3IEYoYCR7dGhpcy5tZXNzYWdlLm1ldGhvZH0gbm90IGFjY2VwdGFibGUgaW4gc3RhdGUgJHt0aGlzLnRyYW5zYWN0aW9uLnN0YXRlfS5gKTtpZighdGhpcy5jb25maXJtZWREaWFsb2cpaWYodGhpcy5lYXJseURpYWxvZyl0aGlzLmVhcmx5RGlhbG9nLmNvbmZpcm0oKSx0aGlzLmNvbmZpcm1lZERpYWxvZz10aGlzLmVhcmx5RGlhbG9nLHRoaXMuZWFybHlEaWFsb2c9dm9pZCAwO2Vsc2V7Y29uc3QgZT10aGlzLnRyYW5zYWN0aW9uO2lmKCEoZSBpbnN0YW5jZW9mIFcpKXRocm93IG5ldyBFcnJvcigiVHJhbnNhY3Rpb24gbm90IGluc3RhbmNlIG9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uLiIpO2NvbnN0IHQ9RC5pbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRTZXJ2ZXIodGhpcy5tZXNzYWdlLHRoaXMudG9UYWcpO3RoaXMuY29uZmlybWVkRGlhbG9nPW5ldyBsZShlLHRoaXMuY29yZSx0KX1jb25zdCB0PXRoaXMubWVzc2FnZS5nZXRIZWFkZXJzKCJyZWNvcmQtcm91dGUiKS5tYXAoZT0+IlJlY29yZC1Sb3V0ZTogIitlKSxzPSJDb250YWN0OiAiK3RoaXMuY29yZS5jb25maWd1cmF0aW9uLmNvbnRhY3QudG9TdHJpbmcoKSxpPSJBbGxvdzogIit1ZS50b1N0cmluZygpO2lmKCFlLmJvZHkpaWYodGhpcy5jb25maXJtZWREaWFsb2cuc2lnbmFsaW5nU3RhdGU9PT1QLlN0YWJsZSllLmJvZHk9dGhpcy5jb25maXJtZWREaWFsb2cuYW5zd2VyO2Vsc2UgaWYodGhpcy5jb25maXJtZWREaWFsb2cuc2lnbmFsaW5nU3RhdGU9PT1QLkluaXRpYWx8fHRoaXMuY29uZmlybWVkRGlhbG9nLnNpZ25hbGluZ1N0YXRlPT09UC5IYXZlUmVtb3RlT2ZmZXIpdGhyb3cgbmV3IEVycm9yKCJSZXNwb25zZSBtdXN0IGhhdmUgYSBib2R5LiIpO2Uuc3RhdHVzQ29kZT1lLnN0YXR1c0NvZGV8fDIwMCxlLmV4dHJhSGVhZGVycz1lLmV4dHJhSGVhZGVyc3x8W10sZS5leHRyYUhlYWRlcnM9ZS5leHRyYUhlYWRlcnMuY29uY2F0KHQpLGUuZXh0cmFIZWFkZXJzLnB1c2goaSksZS5leHRyYUhlYWRlcnMucHVzaChzKTtjb25zdCByPXN1cGVyLmFjY2VwdChlKSxuPXRoaXMuY29uZmlybWVkRGlhbG9nLG89T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLHtzZXNzaW9uOm59KTtyZXR1cm4gZS5ib2R5JiZ0aGlzLmNvbmZpcm1lZERpYWxvZy5zaWduYWxpbmdTdGF0ZSE9PVAuU3RhYmxlJiZ0aGlzLmNvbmZpcm1lZERpYWxvZy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZS5ib2R5KSxvfXByb2dyZXNzKGU9e3N0YXR1c0NvZGU6MTgwfSl7aWYoIXRoaXMucHJvZ3Jlc3NhYmxlKXRocm93IG5ldyBGKGAke3RoaXMubWVzc2FnZS5tZXRob2R9IG5vdCBwcm9ncmVzc2FibGUgaW4gc3RhdGUgJHt0aGlzLnRyYW5zYWN0aW9uLnN0YXRlfS5gKTtpZighdGhpcy5lYXJseURpYWxvZyl7Y29uc3QgZT10aGlzLnRyYW5zYWN0aW9uO2lmKCEoZSBpbnN0YW5jZW9mIFcpKXRocm93IG5ldyBFcnJvcigiVHJhbnNhY3Rpb24gbm90IGluc3RhbmNlIG9mIEludml0ZUNsaWVudFRyYW5zYWN0aW9uLiIpO2NvbnN0IHQ9RC5pbml0aWFsRGlhbG9nU3RhdGVGb3JVc2VyQWdlbnRTZXJ2ZXIodGhpcy5tZXNzYWdlLHRoaXMudG9UYWcsITApO3RoaXMuZWFybHlEaWFsb2c9bmV3IGxlKGUsdGhpcy5jb3JlLHQpfWNvbnN0IHQ9dGhpcy5tZXNzYWdlLmdldEhlYWRlcnMoInJlY29yZC1yb3V0ZSIpLm1hcChlPT4iUmVjb3JkLVJvdXRlOiAiK2UpLHM9IkNvbnRhY3Q6ICIrdGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24uY29udGFjdDtlLmV4dHJhSGVhZGVycz1lLmV4dHJhSGVhZGVyc3x8W10sZS5leHRyYUhlYWRlcnM9ZS5leHRyYUhlYWRlcnMuY29uY2F0KHQpLGUuZXh0cmFIZWFkZXJzLnB1c2gocyk7Y29uc3QgaT1zdXBlci5wcm9ncmVzcyhlKSxyPXRoaXMuZWFybHlEaWFsb2csbj1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSkse3Nlc3Npb246cn0pO3JldHVybiBlLmJvZHkmJnRoaXMuZWFybHlEaWFsb2cuc2lnbmFsaW5nU3RhdGUhPT1QLlN0YWJsZSYmdGhpcy5lYXJseURpYWxvZy5zaWduYWxpbmdTdGF0ZVRyYW5zaXRpb24oZS5ib2R5KSxufXJlZGlyZWN0KGUsdD17c3RhdHVzQ29kZTozMDJ9KXtyZXR1cm4gc3VwZXIucmVkaXJlY3QoZSx0KX1yZWplY3QoZT17c3RhdHVzQ29kZTo0ODZ9KXtyZXR1cm4gc3VwZXIucmVqZWN0KGUpfX1jbGFzcyBFZSBleHRlbmRzIEp7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKFksZSx0LHMpfX1jbGFzcyBSZSBleHRlbmRzIFh7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKFosZS51c2VyQWdlbnRDb3JlLHQscyl9fWNsYXNzIFNlIGV4dGVuZHMgSntjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoWSxlLHQscyl9fWNsYXNzIEllIGV4dGVuZHMgWHtjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoWixlLHQscyksdGhpcy5jb3JlPWV9fWNsYXNzICRlIGV4dGVuZHMgSntjb25zdHJ1Y3RvcihlLHQscyl7Y29uc3QgaT10LmdldEhlYWRlcigiRXZlbnQiKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoIkV2ZW50IHVuZGVmaW5lZCIpO2NvbnN0IHI9dC5nZXRIZWFkZXIoIkV4cGlyZXMiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoIkV4cGlyZXMgdW5kZWZpbmVkIik7c3VwZXIoWSxlLHQscyksdGhpcy5kZWxlZ2F0ZT1zLHRoaXMuc3Vic2NyaWJlcklkPXQuY2FsbElkK3QuZnJvbVRhZytpLHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlc1JlcXVlc3RlZD10aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXM9TnVtYmVyKHIpLHRoaXMuc3Vic2NyaXB0aW9uRXZlbnQ9aSx0aGlzLnN1YnNjcmlwdGlvblN0YXRlPVUuTm90aWZ5V2FpdCx0aGlzLndhaXROb3RpZnlTdGFydCgpfWRpc3Bvc2UoKXtzdXBlci5kaXNwb3NlKCl9b25Ob3RpZnkoZSl7Y29uc3QgdD1lLm1lc3NhZ2UucGFyc2VIZWFkZXIoIkV2ZW50IikuZXZlbnQ7aWYoIXR8fHQhPT10aGlzLnN1YnNjcmlwdGlvbkV2ZW50KXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJGYWlsZWQgdG8gcGFyc2UgZXZlbnQuIiksdm9pZCBlLnJlamVjdCh7c3RhdHVzQ29kZTo0ODl9KTtjb25zdCBzPWUubWVzc2FnZS5wYXJzZUhlYWRlcigiU3Vic2NyaXB0aW9uLVN0YXRlIik7aWYoIXN8fCFzLnN0YXRlKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJGYWlsZWQgdG8gcGFyc2Ugc3Vic2NyaXB0aW9uIHN0YXRlLiIpLHZvaWQgZS5yZWplY3Qoe3N0YXR1c0NvZGU6NDg5fSk7Y29uc3QgaT1zLnN0YXRlO3N3aXRjaChpKXtjYXNlInBlbmRpbmciOmNhc2UiYWN0aXZlIjpjYXNlInRlcm1pbmF0ZWQiOmJyZWFrO2RlZmF1bHQ6cmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oIkludmFsaWQgc3Vic2NyaXB0aW9uIHN0YXRlICIraSksdm9pZCBlLnJlamVjdCh7c3RhdHVzQ29kZTo0ODl9KX1pZigidGVybWluYXRlZCIhPT1pKXtpZighZS5tZXNzYWdlLnBhcnNlSGVhZGVyKCJjb250YWN0IikpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oIkZhaWxlZCB0byBwYXJzZSBjb250YWN0LiIpLHZvaWQgZS5yZWplY3Qoe3N0YXR1c0NvZGU6NDg5fSl9aWYodGhpcy5kaWFsb2cpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgYWxyZWFkeSBjcmVhdGVkLiBUaGlzIGltcGxlbWVudGF0aW9uIG9ubHkgc3VwcG9ydHMgaW5zdGFsbCBvZiBzaW5nbGUgc3Vic2NyaXB0aW9ucy4iKTtzd2l0Y2godGhpcy53YWl0Tm90aWZ5U3RvcCgpLHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcz1zLmV4cGlyZXM/TWF0aC5taW4odGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzLE1hdGgubWF4KHMuZXhwaXJlcywwKSk6dGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzLGkpe2Nhc2UicGVuZGluZyI6dGhpcy5zdWJzY3JpcHRpb25TdGF0ZT1VLlBlbmRpbmc7YnJlYWs7Y2FzZSJhY3RpdmUiOnRoaXMuc3Vic2NyaXB0aW9uU3RhdGU9VS5BY3RpdmU7YnJlYWs7Y2FzZSJ0ZXJtaW5hdGVkIjp0aGlzLnN1YnNjcmlwdGlvblN0YXRlPVUuVGVybWluYXRlZDticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIHN0YXRlICR7aX0uYCl9aWYodGhpcy5zdWJzY3JpcHRpb25TdGF0ZSE9PVUuVGVybWluYXRlZCl7Y29uc3QgdD1mZS5pbml0aWFsRGlhbG9nU3RhdGVGb3JTdWJzY3JpcHRpb24odGhpcy5tZXNzYWdlLGUubWVzc2FnZSk7dGhpcy5kaWFsb2c9bmV3IGZlKHRoaXMuc3Vic2NyaXB0aW9uRXZlbnQsdGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzLHRoaXMuc3Vic2NyaXB0aW9uU3RhdGUsdGhpcy5jb3JlLHQpfWlmKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25Ob3RpZnkpe2NvbnN0IHQ9ZSxzPXRoaXMuZGlhbG9nO3RoaXMuZGVsZWdhdGUub25Ob3RpZnkoe3JlcXVlc3Q6dCxzdWJzY3JpcHRpb246c30pfWVsc2UgZS5hY2NlcHQoKX13YWl0Tm90aWZ5U3RhcnQoKXt0aGlzLk58fCh0aGlzLmNvcmUuc3Vic2NyaWJlcnMuc2V0KHRoaXMuc3Vic2NyaWJlcklkLHRoaXMpLHRoaXMuTj1zZXRUaW1lb3V0KCgpPT50aGlzLnRpbWVyTigpLE4uVElNRVJfTikpfXdhaXROb3RpZnlTdG9wKCl7dGhpcy5OJiYodGhpcy5jb3JlLnN1YnNjcmliZXJzLmRlbGV0ZSh0aGlzLnN1YnNjcmliZXJJZCksY2xlYXJUaW1lb3V0KHRoaXMuTiksdGhpcy5OPXZvaWQgMCl9cmVjZWl2ZVJlc3BvbnNlKGUpe2lmKHRoaXMuYXV0aGVudGljYXRpb25HdWFyZChlKSl7aWYoZS5zdGF0dXNDb2RlJiZlLnN0YXR1c0NvZGU+PTIwMCYmZS5zdGF0dXNDb2RlPDMwMCl7Y29uc3QgdD1lLmdldEhlYWRlcigiRXhwaXJlcyIpO2lmKHQpe2NvbnN0IGU9TnVtYmVyKHQpO2U+dGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzUmVxdWVzdGVkJiZ0aGlzLmxvZ2dlci53YXJuKCJFeHBpcmVzIGhlYWRlciBpbiBhIDIwMC1jbGFzcyByZXNwb25zZSB0byBTVUJTQ1JJQkUgd2l0aCBhIGhpZ2hlciB2YWx1ZSB0aGFuIHRoZSBvbmUgaW4gdGhlIHJlcXVlc3QiKSxlPHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcyYmKHRoaXMuc3Vic2NyaXB0aW9uRXhwaXJlcz1lKX1lbHNlIHRoaXMubG9nZ2VyLndhcm4oIkV4cGlyZXMgaGVhZGVyIG1pc3NpbmcgaW4gYSAyMDAtY2xhc3MgcmVzcG9uc2UgdG8gU1VCU0NSSUJFIik7dGhpcy5kaWFsb2cmJnRoaXMuZGlhbG9nLnN1YnNjcmlwdGlvbkV4cGlyZXM+dGhpcy5zdWJzY3JpcHRpb25FeHBpcmVzJiYodGhpcy5kaWFsb2cuc3Vic2NyaXB0aW9uRXhwaXJlcz10aGlzLnN1YnNjcmlwdGlvbkV4cGlyZXMpfWUuc3RhdHVzQ29kZSYmZS5zdGF0dXNDb2RlPj0zMDAmJmUuc3RhdHVzQ29kZTw3MDAmJnRoaXMud2FpdE5vdGlmeVN0b3AoKSxzdXBlci5yZWNlaXZlUmVzcG9uc2UoZSl9fXRpbWVyTigpe3RoaXMubG9nZ2VyLndhcm4oIlRpbWVyIE4gZXhwaXJlZCBmb3IgU1VCU0NSSUJFIHVzZXIgYWdlbnQgY2xpZW50LiBUaW1lZCBvdXQgd2FpdGluZyBmb3IgTk9USUZZLiIpLHRoaXMud2FpdE5vdGlmeVN0b3AoKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTm90aWZ5VGltZW91dCYmdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeVRpbWVvdXQoKX19Y2xhc3MgQ2UgZXh0ZW5kcyBYe2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcihaLGUsdCxzKSx0aGlzLmNvcmU9ZX19Y29uc3QgQWU9WyJhcHBsaWNhdGlvbi9zZHAiLCJhcHBsaWNhdGlvbi9kdG1mLXJlbGF5Il07Y2xhc3MgeGV7Y29uc3RydWN0b3IoZSx0PXt9KXt0aGlzLnVzZXJBZ2VudENsaWVudHM9bmV3IE1hcCx0aGlzLnVzZXJBZ2VudFNlcnZlcnM9bmV3IE1hcCx0aGlzLmNvbmZpZ3VyYXRpb249ZSx0aGlzLmRlbGVnYXRlPXQsdGhpcy5kaWFsb2dzPW5ldyBNYXAsdGhpcy5zdWJzY3JpYmVycz1uZXcgTWFwLHRoaXMubG9nZ2VyPWUubG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoInNpcC51c2VyLWFnZW50LWNvcmUiKX1kaXNwb3NlKCl7dGhpcy5yZXNldCgpfXJlc2V0KCl7dGhpcy5kaWFsb2dzLmZvckVhY2goZT0+ZS5kaXNwb3NlKCkpLHRoaXMuZGlhbG9ncy5jbGVhcigpLHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaChlPT5lLmRpc3Bvc2UoKSksdGhpcy5zdWJzY3JpYmVycy5jbGVhcigpLHRoaXMudXNlckFnZW50Q2xpZW50cy5mb3JFYWNoKGU9PmUuZGlzcG9zZSgpKSx0aGlzLnVzZXJBZ2VudENsaWVudHMuY2xlYXIoKSx0aGlzLnVzZXJBZ2VudFNlcnZlcnMuZm9yRWFjaChlPT5lLmRpc3Bvc2UoKSksdGhpcy51c2VyQWdlbnRTZXJ2ZXJzLmNsZWFyKCl9Z2V0IGxvZ2dlckZhY3RvcnkoKXtyZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLmxvZ2dlckZhY3Rvcnl9Z2V0IHRyYW5zcG9ydCgpe2NvbnN0IGU9dGhpcy5jb25maWd1cmF0aW9uLnRyYW5zcG9ydEFjY2Vzc29yKCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJUcmFuc3BvcnQgdW5kZWZpbmVkLiIpO3JldHVybiBlfWludml0ZShlLHQpe3JldHVybiBuZXcgVGUodGhpcyxlLHQpfW1lc3NhZ2UoZSx0KXtyZXR1cm4gbmV3IHNlKHRoaXMsZSx0KX1wdWJsaXNoKGUsdCl7cmV0dXJuIG5ldyBFZSh0aGlzLGUsdCl9cmVnaXN0ZXIoZSx0KXtyZXR1cm4gbmV3IFNlKHRoaXMsZSx0KX1zdWJzY3JpYmUoZSx0KXtyZXR1cm4gbmV3ICRlKHRoaXMsZSx0KX1yZXF1ZXN0KGUsdCl7cmV0dXJuIG5ldyBKKFksdGhpcyxlLHQpfW1ha2VPdXRnb2luZ1JlcXVlc3RNZXNzYWdlKGUsdCxzLGkscixuLG8pe2NvbnN0IGE9dGhpcy5jb25maWd1cmF0aW9uLnNpcGpzSWQsYz10aGlzLmNvbmZpZ3VyYXRpb24uZGlzcGxheU5hbWUsaD10aGlzLmNvbmZpZ3VyYXRpb24udmlhRm9yY2VScG9ydCxkPXRoaXMuY29uZmlndXJhdGlvbi5oYWNrVmlhVGNwLGc9dGhpcy5jb25maWd1cmF0aW9uLnN1cHBvcnRlZE9wdGlvblRhZ3Muc2xpY2UoKTtlPT09bC5SRUdJU1RFUiYmZy5wdXNoKCJwYXRoIiwiZ3J1dSIpLGU9PT1sLklOVklURSYmKHRoaXMuY29uZmlndXJhdGlvbi5jb250YWN0LnB1YkdydXV8fHRoaXMuY29uZmlndXJhdGlvbi5jb250YWN0LnRlbXBHcnV1KSYmZy5wdXNoKCJncnV1Iik7Y29uc3QgdT17Y2FsbElkUHJlZml4OmEsZm9yY2VScG9ydDpoLGZyb21EaXNwbGF5TmFtZTpjLGhhY2tWaWFUY3A6ZCxvcHRpb25UYWdzOmcscm91dGVTZXQ6dGhpcy5jb25maWd1cmF0aW9uLnJvdXRlU2V0LHVzZXJBZ2VudFN0cmluZzp0aGlzLmNvbmZpZ3VyYXRpb24udXNlckFnZW50SGVhZGVyRmllbGRWYWx1ZSx2aWFIb3N0OnRoaXMuY29uZmlndXJhdGlvbi52aWFIb3N0fSxwPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx1KSxyKTtyZXR1cm4gbmV3IEUoZSx0LHMsaSxwLG4sbyl9cmVjZWl2ZUluY29taW5nUmVxdWVzdEZyb21UcmFuc3BvcnQoZSl7dGhpcy5yZWNlaXZlUmVxdWVzdEZyb21UcmFuc3BvcnQoZSl9cmVjZWl2ZUluY29taW5nUmVzcG9uc2VGcm9tVHJhbnNwb3J0KGUpe3RoaXMucmVjZWl2ZVJlc3BvbnNlRnJvbVRyYW5zcG9ydChlKX1yZXBseVN0YXRlbGVzcyhlLHQpe2NvbnN0IHM9dGhpcy5jb25maWd1cmF0aW9uLnVzZXJBZ2VudEhlYWRlckZpZWxkVmFsdWUsaT10aGlzLmNvbmZpZ3VyYXRpb24uc3VwcG9ydGVkT3B0aW9uVGFnc1Jlc3BvbnNlO3Q9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHt1c2VyQWdlbnQ6cyxzdXBwb3J0ZWQ6aX0pO2NvbnN0IHI9cShlLHQpO3JldHVybiB0aGlzLnRyYW5zcG9ydC5zZW5kKHIubWVzc2FnZSkuY2F0Y2godD0+e3QgaW5zdGFuY2VvZiBFcnJvciYmdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcihgVHJhbnNwb3J0IGVycm9yIG9jY3VycmVkIHNlbmRpbmcgc3RhdGVsZXNzIHJlcGx5IHRvICR7ZS5tZXRob2R9IHJlcXVlc3QuYCl9KSxyfXJlY2VpdmVSZXF1ZXN0RnJvbVRyYW5zcG9ydChlKXtjb25zdCB0PWUudmlhQnJhbmNoLHM9dGhpcy51c2VyQWdlbnRTZXJ2ZXJzLmdldCh0KTtlLm1ldGhvZD09PWwuQUNLJiZzJiZzLnRyYW5zYWN0aW9uLnN0YXRlPT09Ty5BY2NlcHRlZCYmcyBpbnN0YW5jZW9mIHllP3RoaXMubG9nZ2VyLndhcm4oYERpc2NhcmRpbmcgb3V0IG9mIGRpYWxvZyBBQ0sgYWZ0ZXIgMnh4IHJlc3BvbnNlIHNlbnQgb24gdHJhbnNhY3Rpb24gJHt0fS5gKTplLm1ldGhvZCE9PWwuQ0FOQ0VMP3M/cy50cmFuc2FjdGlvbi5yZWNlaXZlUmVxdWVzdChlKTp0aGlzLnJlY2VpdmVSZXF1ZXN0KGUpOnM/KHRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZToyMDB9KSxzLnRyYW5zYWN0aW9uIGluc3RhbmNlb2YgVyYmcy50cmFuc2FjdGlvbi5zdGF0ZT09PU8uUHJvY2VlZGluZyYmcyBpbnN0YW5jZW9mIHllJiZzLnJlY2VpdmVDYW5jZWwoZSkpOnRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0ODF9KX1yZWNlaXZlUmVxdWVzdChlKXtpZighdWUuaW5jbHVkZXMoZS5tZXRob2QpKXtjb25zdCB0PSJBbGxvdzogIit1ZS50b1N0cmluZygpO3JldHVybiB2b2lkIHRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0MDUsZXh0cmFIZWFkZXJzOlt0XX0pfWlmKCFlLnJ1cmkpdGhyb3cgbmV3IEVycm9yKCJSZXF1ZXN0LVVSSSB1bmRlZmluZWQuIik7aWYoInNpcCIhPT1lLnJ1cmkuc2NoZW1lKXJldHVybiB2b2lkIHRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0MTZ9KTtjb25zdCB0PWUucnVyaSxzPWU9PiEhZSYmZS51c2VyPT09dC51c2VyO2lmKCFzKHRoaXMuY29uZmlndXJhdGlvbi5hb3IpJiYhKHModGhpcy5jb25maWd1cmF0aW9uLmNvbnRhY3QudXJpKXx8cyh0aGlzLmNvbmZpZ3VyYXRpb24uY29udGFjdC5wdWJHcnV1KXx8cyh0aGlzLmNvbmZpZ3VyYXRpb24uY29udGFjdC50ZW1wR3J1dSkpKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJSZXF1ZXN0LVVSSSBkb2VzIG5vdCBwb2ludCB0byB1cy4iKSx2b2lkKGUubWV0aG9kIT09bC5BQ0smJnRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0MDR9KSk7aWYoZS5tZXRob2QhPT1sLklOVklURXx8ZS5oYXNIZWFkZXIoIkNvbnRhY3QiKSl7aWYoIWUudG9UYWcpe2NvbnN0IHQ9ZS52aWFCcmFuY2g7aWYoIXRoaXMudXNlckFnZW50U2VydmVycy5oYXModCkpe2lmKEFycmF5LmZyb20odGhpcy51c2VyQWdlbnRTZXJ2ZXJzLnZhbHVlcygpKS5zb21lKHQ9PnQudHJhbnNhY3Rpb24ucmVxdWVzdC5mcm9tVGFnPT09ZS5mcm9tVGFnJiZ0LnRyYW5zYWN0aW9uLnJlcXVlc3QuY2FsbElkPT09ZS5jYWxsSWQmJnQudHJhbnNhY3Rpb24ucmVxdWVzdC5jc2VxPT09ZS5jc2VxKSlyZXR1cm4gdm9pZCB0aGlzLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NDgyfSl9fWUudG9UYWc/dGhpcy5yZWNlaXZlSW5zaWRlRGlhbG9nUmVxdWVzdChlKTp0aGlzLnJlY2VpdmVPdXRzaWRlRGlhbG9nUmVxdWVzdChlKX1lbHNlIHRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0MDAscmVhc29uUGhyYXNlOiJNaXNzaW5nIENvbnRhY3QgSGVhZGVyIn0pfXJlY2VpdmVJbnNpZGVEaWFsb2dSZXF1ZXN0KGUpe2lmKGUubWV0aG9kPT09bC5OT1RJRlkpe2NvbnN0IHQ9ZS5wYXJzZUhlYWRlcigiRXZlbnQiKTtpZighdHx8IXQuZXZlbnQpcmV0dXJuIHZvaWQgdGhpcy5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjQ4OX0pO2NvbnN0IHM9ZS5jYWxsSWQrZS50b1RhZyt0LmV2ZW50LGk9dGhpcy5zdWJzY3JpYmVycy5nZXQocyk7aWYoaSl7Y29uc3QgdD1uZXcgbmUodGhpcyxlKTtyZXR1cm4gdm9pZCBpLm9uTm90aWZ5KHQpfX1jb25zdCB0PWUuY2FsbElkK2UudG9UYWcrZS5mcm9tVGFnLHM9dGhpcy5kaWFsb2dzLmdldCh0KTtpZihzKXtpZihlLm1ldGhvZD09PWwuT1BUSU9OUyl7Y29uc3QgdD0iQWxsb3c6ICIrdWUudG9TdHJpbmcoKSxzPSJBY2NlcHQ6ICIrQWUudG9TdHJpbmcoKTtyZXR1cm4gdm9pZCB0aGlzLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6MjAwLGV4dHJhSGVhZGVyczpbdCxzXX0pfXMucmVjZWl2ZVJlcXVlc3QoZSl9ZWxzZSBlLm1ldGhvZCE9PWwuQUNLJiZ0aGlzLnJlcGx5U3RhdGVsZXNzKGUse3N0YXR1c0NvZGU6NDgxfSl9cmVjZWl2ZU91dHNpZGVEaWFsb2dSZXF1ZXN0KGUpe3N3aXRjaChlLm1ldGhvZCl7Y2FzZSBsLkFDSzpicmVhaztjYXNlIGwuQllFOnRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0ODF9KTticmVhaztjYXNlIGwuQ0FOQ0VMOnRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBvdXQgb2YgZGlhbG9nIHJlcXVlc3QgbWV0aG9kICR7ZS5tZXRob2R9LmApO2Nhc2UgbC5JTkZPOnRoaXMucmVwbHlTdGF0ZWxlc3MoZSx7c3RhdHVzQ29kZTo0MDV9KTticmVhaztjYXNlIGwuSU5WSVRFOntjb25zdCB0PW5ldyB5ZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUub25JbnZpdGU/dGhpcy5kZWxlZ2F0ZS5vbkludml0ZSh0KTp0LnJlamVjdCgpfWJyZWFrO2Nhc2UgbC5NRVNTQUdFOntjb25zdCB0PW5ldyBpZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUub25NZXNzYWdlP3RoaXMuZGVsZWdhdGUub25NZXNzYWdlKHQpOnQuYWNjZXB0KCl9YnJlYWs7Y2FzZSBsLk5PVElGWTp7Y29uc3QgdD1uZXcgbmUodGhpcyxlKTt0aGlzLmRlbGVnYXRlLm9uTm90aWZ5P3RoaXMuZGVsZWdhdGUub25Ob3RpZnkodCk6dC5yZWplY3Qoe3N0YXR1c0NvZGU6NDA1fSl9YnJlYWs7Y2FzZSBsLk9QVElPTlM6e2NvbnN0IHQ9IkFsbG93OiAiK3VlLnRvU3RyaW5nKCkscz0iQWNjZXB0OiAiK0FlLnRvU3RyaW5nKCk7dGhpcy5yZXBseVN0YXRlbGVzcyhlLHtzdGF0dXNDb2RlOjIwMCxleHRyYUhlYWRlcnM6W3Qsc119KX1icmVhaztjYXNlIGwuUkVGRVI6e2NvbnN0IHQ9bmV3IGdlKHRoaXMsZSk7dGhpcy5kZWxlZ2F0ZS5vblJlZmVyP3RoaXMuZGVsZWdhdGUub25SZWZlcih0KTp0LnJlamVjdCh7c3RhdHVzQ29kZTo0MDV9KX1icmVhaztjYXNlIGwuUkVHSVNURVI6e2NvbnN0IHQ9bmV3IEllKHRoaXMsZSk7dGhpcy5kZWxlZ2F0ZS5vblJlZ2lzdGVyP3RoaXMuZGVsZWdhdGUub25SZWdpc3Rlcih0KTp0LnJlamVjdCh7c3RhdHVzQ29kZTo0MDV9KX1icmVhaztjYXNlIGwuU1VCU0NSSUJFOntjb25zdCB0PW5ldyBDZSh0aGlzLGUpO3RoaXMuZGVsZWdhdGUub25TdWJzY3JpYmU/dGhpcy5kZWxlZ2F0ZS5vblN1YnNjcmliZSh0KTp0LnJlamVjdCh7c3RhdHVzQ29kZTo0ODB9KX1icmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBvdXQgb2YgZGlhbG9nIHJlcXVlc3QgbWV0aG9kICR7ZS5tZXRob2R9LmApfX1yZWNlaXZlUmVzcG9uc2VGcm9tVHJhbnNwb3J0KGUpe2lmKGUuZ2V0SGVhZGVycygidmlhIikubGVuZ3RoPjEpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybigiTW9yZSB0aGFuIG9uZSBWaWEgaGVhZGVyIGZpZWxkIHByZXNlbnQgaW4gdGhlIHJlc3BvbnNlLCBkcm9wcGluZyIpO2NvbnN0IHQ9ZS52aWFCcmFuY2grZS5tZXRob2Qscz10aGlzLnVzZXJBZ2VudENsaWVudHMuZ2V0KHQpO3M/cy50cmFuc2FjdGlvbi5yZWNlaXZlUmVzcG9uc2UoZSk6dGhpcy5sb2dnZXIud2FybihgRGlzY2FyZGluZyB1bm1hdGNoZWQgJHtlLnN0YXR1c0NvZGV9IHJlc3BvbnNlIHRvICR7ZS5tZXRob2R9ICR7dH0uYCl9fWNsYXNzIHFlIGV4dGVuZHMgantjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHwiVW5zdXBwb3J0ZWQgY29udGVudCB0eXBlLiIpfX1jbGFzcyBrZSBleHRlbmRzIGp7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8IlJlcXVlc3QgcGVuZGluZy4iKX19Y2xhc3MgX2UgZXh0ZW5kcyBqe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fCJVbnNwZWNpZmllZCBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgZXJyb3IuIil9fWNsYXNzIFBlIGV4dGVuZHMgantjb25zdHJ1Y3Rvcigpe3N1cGVyKCJUaGUgc2Vzc2lvbiBoYXMgdGVybWluYXRlZC4iKX19Y2xhc3MgRGUgZXh0ZW5kcyBqe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fCJBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgc3RhdGUgdHJhbnNpdGlvbi4iKX19Y2xhc3MgSGV7Y29uc3RydWN0b3IoZSl7dGhpcy5pbmNvbWluZ0J5ZVJlcXVlc3Q9ZX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLmluY29taW5nQnllUmVxdWVzdC5tZXNzYWdlfWFjY2VwdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ0J5ZVJlcXVlc3QuYWNjZXB0KGUpLFByb21pc2UucmVzb2x2ZSgpfXJlamVjdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ0J5ZVJlcXVlc3QucmVqZWN0KGUpLFByb21pc2UucmVzb2x2ZSgpfX1mdW5jdGlvbiBOZShlLHQ9ImV2ZW50Iil7cmV0dXJue2FkZExpc3RlbmVyOihzLGk9e30pPT57aS5vbmNlP2Uub25jZSh0LHMpOmUuYWRkTGlzdGVuZXIodCxzKX0scmVtb3ZlTGlzdGVuZXI6cz0+e2UucmVtb3ZlTGlzdGVuZXIodCxzKX0sb246cz0+e2Uub24odCxzKX0sb2ZmOnM9PntlLnJlbW92ZUxpc3RlbmVyKHQscyl9LG9uY2U6cz0+e2Uub25jZSh0LHMpfX19Y2xhc3MgT2V7Y29uc3RydWN0b3IoZSl7dGhpcy5pbmNvbWluZ0luZm9SZXF1ZXN0PWV9Z2V0IHJlcXVlc3QoKXtyZXR1cm4gdGhpcy5pbmNvbWluZ0luZm9SZXF1ZXN0Lm1lc3NhZ2V9YWNjZXB0KGUpe3JldHVybiB0aGlzLmluY29taW5nSW5mb1JlcXVlc3QuYWNjZXB0KGUpLFByb21pc2UucmVzb2x2ZSgpfXJlamVjdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ0luZm9SZXF1ZXN0LnJlamVjdChlKSxQcm9taXNlLnJlc29sdmUoKX19Y2xhc3MgVWV7Y29uc3RydWN0b3IoZSl7dGhpcy5pbmNvbWluZ01lc3NhZ2VSZXF1ZXN0PWV9Z2V0IHJlcXVlc3QoKXtyZXR1cm4gdGhpcy5pbmNvbWluZ01lc3NhZ2VSZXF1ZXN0Lm1lc3NhZ2V9YWNjZXB0KGUpe3JldHVybiB0aGlzLmluY29taW5nTWVzc2FnZVJlcXVlc3QuYWNjZXB0KGUpLFByb21pc2UucmVzb2x2ZSgpfXJlamVjdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ01lc3NhZ2VSZXF1ZXN0LnJlamVjdChlKSxQcm9taXNlLnJlc29sdmUoKX19Y2xhc3MgTWV7Y29uc3RydWN0b3IoZSl7dGhpcy5pbmNvbWluZ05vdGlmeVJlcXVlc3Q9ZX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLmluY29taW5nTm90aWZ5UmVxdWVzdC5tZXNzYWdlfWFjY2VwdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ05vdGlmeVJlcXVlc3QuYWNjZXB0KGUpLFByb21pc2UucmVzb2x2ZSgpfXJlamVjdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ05vdGlmeVJlcXVlc3QucmVqZWN0KGUpLFByb21pc2UucmVzb2x2ZSgpfX1jbGFzcyBqZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuaW5jb21pbmdSZWZlclJlcXVlc3Q9ZSx0aGlzLnNlc3Npb249dH1nZXQgcmVmZXJUbygpe2NvbnN0IGU9dGhpcy5pbmNvbWluZ1JlZmVyUmVxdWVzdC5tZXNzYWdlLnBhcnNlSGVhZGVyKCJyZWZlci10byIpO2lmKCEoZSBpbnN0YW5jZW9mIG8pKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIHBhcnNlIFJlZmVyLVRvIGhlYWRlci4iKTtyZXR1cm4gZX1nZXQgcmVmZXJyZWRCeSgpe3JldHVybiB0aGlzLmluY29taW5nUmVmZXJSZXF1ZXN0Lm1lc3NhZ2UuZ2V0SGVhZGVyKCJyZWZlcnJlZC1ieSIpfWdldCByZXBsYWNlcygpe3JldHVybiB0aGlzLnJlZmVyVG8udXJpLmdldEhlYWRlcigicmVwbGFjZXMiKX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLmluY29taW5nUmVmZXJSZXF1ZXN0Lm1lc3NhZ2V9YWNjZXB0KGU9e3N0YXR1c0NvZGU6MjAyfSl7cmV0dXJuIHRoaXMuaW5jb21pbmdSZWZlclJlcXVlc3QuYWNjZXB0KGUpLFByb21pc2UucmVzb2x2ZSgpfXJlamVjdChlKXtyZXR1cm4gdGhpcy5pbmNvbWluZ1JlZmVyUmVxdWVzdC5yZWplY3QoZSksUHJvbWlzZS5yZXNvbHZlKCl9bWFrZUludml0ZXIoZSl7aWYodGhpcy5pbnZpdGVyKXJldHVybiB0aGlzLmludml0ZXI7Y29uc3QgdD10aGlzLnJlZmVyVG8udXJpLmNsb25lKCk7dC5jbGVhckhlYWRlcnMoKTtjb25zdCBzPSgoZT1lfHx7fSkuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSxpPXRoaXMucmVwbGFjZXM7aSYmcy5wdXNoKCJSZXBsYWNlczogIitkZWNvZGVVUklDb21wb25lbnQoaSkpO2NvbnN0IHI9dGhpcy5yZWZlcnJlZEJ5O3JldHVybiByJiZzLnB1c2goIlJlZmVycmVkLUJ5OiAiK3IpLGUuZXh0cmFIZWFkZXJzPXMsdGhpcy5pbnZpdGVyPXRoaXMuc2Vzc2lvbi51c2VyQWdlbnQuX21ha2VJbnZpdGVyKHQsZSksdGhpcy5pbnZpdGVyLl9yZWZlcnJlZD10aGlzLnNlc3Npb24sdGhpcy5zZXNzaW9uLl9yZWZlcnJhbD10aGlzLmludml0ZXIsdGhpcy5pbnZpdGVyfX12YXIgRmUsTGU7IWZ1bmN0aW9uKGUpe2UuSW5pdGlhbD0iSW5pdGlhbCIsZS5Fc3RhYmxpc2hpbmc9IkVzdGFibGlzaGluZyIsZS5Fc3RhYmxpc2hlZD0iRXN0YWJsaXNoZWQiLGUuVGVybWluYXRpbmc9IlRlcm1pbmF0aW5nIixlLlRlcm1pbmF0ZWQ9IlRlcm1pbmF0ZWQifShGZXx8KEZlPXt9KSk7Y2xhc3MgQmV7Y29uc3RydWN0b3IoZSx0PXt9KXt0aGlzLnBlbmRpbmdSZWludml0ZT0hMSx0aGlzLl9zdGF0ZT1GZS5Jbml0aWFsLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyPW5ldyBNLkV2ZW50RW1pdHRlcix0aGlzLmRlbGVnYXRlPXQuZGVsZWdhdGUsdGhpcy5fdXNlckFnZW50PWV9ZGlzcG9zZSgpe3N3aXRjaCh0aGlzLmxvZ2dlci5sb2coYFNlc3Npb24gJHt0aGlzLmlkfSBpbiBzdGF0ZSAke3RoaXMuX3N0YXRlfSBpcyBiZWluZyBkaXNwb3NlZGApLGRlbGV0ZSB0aGlzLnVzZXJBZ2VudC5fc2Vzc2lvbnNbdGhpcy5pZF0sdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlciYmdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci5jbG9zZSgpLHRoaXMuc3RhdGUpe2Nhc2UgRmUuSW5pdGlhbDpjYXNlIEZlLkVzdGFibGlzaGluZzpicmVhaztjYXNlIEZlLkVzdGFibGlzaGVkOnJldHVybiBuZXcgUHJvbWlzZShlPT57dGhpcy5fYnllKHtvbkFjY2VwdDooKT0+ZSgpLG9uUmVkaXJlY3Q6KCk9PmUoKSxvblJlamVjdDooKT0+ZSgpfSl9KTtjYXNlIEZlLlRlcm1pbmF0aW5nOmNhc2UgRmUuVGVybWluYXRlZDpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biBzdGF0ZS4iKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9Z2V0IGFzc2VydGVkSWRlbnRpdHkoKXtyZXR1cm4gdGhpcy5fYXNzZXJ0ZWRJZGVudGl0eX1nZXQgZGlhbG9nKCl7cmV0dXJuIHRoaXMuX2RpYWxvZ31nZXQgaWQoKXtyZXR1cm4gdGhpcy5faWR9Z2V0IHJlcGxhY2VlKCl7cmV0dXJuIHRoaXMuX3JlcGxhY2VlfWdldCBzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCl7cmV0dXJuIHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJ9Z2V0IHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5KCl7cmV0dXJuIHRoaXMudXNlckFnZW50LmNvbmZpZ3VyYXRpb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3Rvcnl9Z2V0IHN0YXRlKCl7cmV0dXJuIHRoaXMuX3N0YXRlfWdldCBzdGF0ZUNoYW5nZSgpe3JldHVybiBOZSh0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcil9Z2V0IHVzZXJBZ2VudCgpe3JldHVybiB0aGlzLl91c2VyQWdlbnR9YnllKGU9e30pe2xldCB0PSJTZXNzaW9uLmJ5ZSgpIG1heSBvbmx5IGJlIGNhbGxlZCBpZiBlc3RhYmxpc2hlZCBzZXNzaW9uLiI7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgRmUuSW5pdGlhbDoiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5jYW5jZWw/KHQrPSIgSG93ZXZlciBJbnZpdGVyLmludml0ZSgpIGhhcyBub3QgeWV0IGJlZW4gY2FsbGVkLiIsdCs9IiBQZXJoYXBzIHlvdSBzaG91bGQgaGF2ZSBjYWxsZWQgSW52aXRlci5jYW5jZWwoKT8iKToiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZWplY3QmJih0Kz0iIEhvd2V2ZXIgSW52aXRhdGlvbi5hY2NlcHQoKSBoYXMgbm90IHlldCBiZWVuIGNhbGxlZC4iLHQrPSIgUGVyaGFwcyB5b3Ugc2hvdWxkIGhhdmUgY2FsbGVkIEludml0YXRpb24ucmVqZWN0KCk/Iik7YnJlYWs7Y2FzZSBGZS5Fc3RhYmxpc2hpbmc6ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuY2FuY2VsPyh0Kz0iIEhvd2V2ZXIgYSBkaWFsb2cgZG9lcyBub3QgeWV0IGV4aXN0LiIsdCs9IiBQZXJoYXBzIHlvdSBzaG91bGQgaGF2ZSBjYWxsZWQgSW52aXRlci5jYW5jZWwoKT8iKToiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZWplY3QmJih0Kz0iIEhvd2V2ZXIgSW52aXRhdGlvbi5hY2NlcHQoKSBoYXMgbm90IHlldCBiZWVuIGNhbGxlZCAob3Igbm90IHlldCByZXNvbHZlZCkuIix0Kz0iIFBlcmhhcHMgeW91IHNob3VsZCBoYXZlIGNhbGxlZCBJbnZpdGF0aW9uLnJlamVjdCgpPyIpO2JyZWFrO2Nhc2UgRmUuRXN0YWJsaXNoZWQ6e2NvbnN0IHQ9ZS5yZXF1ZXN0RGVsZWdhdGUscz10aGlzLmNvcHlSZXF1ZXN0T3B0aW9ucyhlLnJlcXVlc3RPcHRpb25zKTtyZXR1cm4gdGhpcy5fYnllKHQscyl9Y2FzZSBGZS5UZXJtaW5hdGluZzp0Kz0iIEhvd2V2ZXIgdGhpcyBzZXNzaW9uIGlzIGFscmVhZHkgdGVybWluYXRpbmcuIiwiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5jYW5jZWw/dCs9IiBQZXJoYXBzIHlvdSBoYXZlIGFscmVhZHkgY2FsbGVkIEludml0ZXIuY2FuY2VsKCk/IjoiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZWplY3QmJih0Kz0iIFBlcmhhcHMgeW91IGhhdmUgYWxyZWFkeSBjYWxsZWQgU2Vzc2lvbi5ieWUoKT8iKTticmVhaztjYXNlIEZlLlRlcm1pbmF0ZWQ6dCs9IiBIb3dldmVyIHRoaXMgc2Vzc2lvbiBpcyBhbHJlYWR5IHRlcm1pbmF0ZWQuIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biBzdGF0ZSIpfXJldHVybiB0aGlzLmxvZ2dlci5lcnJvcih0KSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgc2Vzc2lvbiBzdGF0ZSAiK3RoaXMuc3RhdGUpKX1pbmZvKGU9e30pe2lmKHRoaXMuc3RhdGUhPT1GZS5Fc3RhYmxpc2hlZCl7Y29uc3QgZT0iU2Vzc2lvbi5pbmZvKCkgbWF5IG9ubHkgYmUgY2FsbGVkIGlmIGVzdGFibGlzaGVkIHNlc3Npb24uIjtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZSksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHNlc3Npb24gc3RhdGUgIit0aGlzLnN0YXRlKSl9Y29uc3QgdD1lLnJlcXVlc3REZWxlZ2F0ZSxzPXRoaXMuY29weVJlcXVlc3RPcHRpb25zKGUucmVxdWVzdE9wdGlvbnMpO3JldHVybiB0aGlzLl9pbmZvKHQscyl9aW52aXRlKGU9e30pe2lmKHRoaXMubG9nZ2VyLmxvZygiU2Vzc2lvbi5pbnZpdGUiKSx0aGlzLnN0YXRlIT09RmUuRXN0YWJsaXNoZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiSW52YWxpZCBzZXNzaW9uIHN0YXRlICIrdGhpcy5zdGF0ZSkpO2lmKHRoaXMucGVuZGluZ1JlaW52aXRlKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcga2UoIlJlaW52aXRlIGluIHByb2dyZXNzLiBQbGVhc2Ugd2FpdCB1bnRpbCBjb21wbGV0ZSwgdGhlbiB0cnkgYWdhaW4uIikpO3RoaXMucGVuZGluZ1JlaW52aXRlPSEwO2NvbnN0IHQ9e29uQWNjZXB0OnQ9Pntjb25zdCBzPSQodC5tZXNzYWdlKTtpZighcylyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoIlJlY2VpdmVkIDJ4eCByZXNwb25zZSB0byByZS1JTlZJVEUgd2l0aG91dCBhIHNlc3Npb24gZGVzY3JpcHRpb24iKSx0aGlzLmFja0FuZEJ5ZSh0LDQwMCwiTWlzc2luZyBzZXNzaW9uIGRlc2NyaXB0aW9uIiksdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCksdm9pZCh0aGlzLnBlbmRpbmdSZWludml0ZT0hMSk7aWYoZS53aXRob3V0U2RwKXtjb25zdCBpPXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczplLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6ZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzfTt0aGlzLnNldE9mZmVyQW5kR2V0QW5zd2VyKHMsaSkudGhlbihlPT57dC5hY2soe2JvZHk6ZX0pfSkuY2F0Y2goZT0+e3RoaXMubG9nZ2VyLmVycm9yKCJGYWlsZWQgdG8gaGFuZGxlIG9mZmVyIGluIDJ4eCByZXNwb25zZSB0byByZS1JTlZJVEUiKSx0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLHRoaXMuc3RhdGU9PT1GZS5UZXJtaW5hdGVkP3QuYWNrKCk6KHRoaXMuYWNrQW5kQnllKHQsNDg4LCJCYWQgTWVkaWEgRGVzY3JpcHRpb24iKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKSl9KS50aGVuKCgpPT57dGhpcy5wZW5kaW5nUmVpbnZpdGU9ITEsZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCh0KX0pfWVsc2V7Y29uc3QgaT17c2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6dGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczp0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzfTt0aGlzLnNldEFuc3dlcihzLGkpLnRoZW4oKCk9Pnt0LmFjaygpfSkuY2F0Y2goZT0+e3RoaXMubG9nZ2VyLmVycm9yKCJGYWlsZWQgdG8gaGFuZGxlIGFuc3dlciBpbiAyeHggcmVzcG9uc2UgdG8gcmUtSU5WSVRFIiksdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSx0aGlzLnN0YXRlIT09RmUuVGVybWluYXRlZD8odGhpcy5hY2tBbmRCeWUodCw0ODgsIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpKTp0LmFjaygpfSkudGhlbigoKT0+e3RoaXMucGVuZGluZ1JlaW52aXRlPSExLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCYmZS5yZXF1ZXN0RGVsZWdhdGUub25BY2NlcHQodCl9KX19LG9uUHJvZ3Jlc3M6ZT0+e30sb25SZWRpcmVjdDplPT57fSxvblJlamVjdDp0PT57dGhpcy5sb2dnZXIud2FybigiUmVjZWl2ZWQgYSBub24tMnh4IHJlc3BvbnNlIHRvIHJlLUlOVklURSIpLHRoaXMucGVuZGluZ1JlaW52aXRlPSExLGUud2l0aG91dFNkcD9lLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0KHQpOnRoaXMucm9sbGJhY2tPZmZlcigpLmNhdGNoKGU9PntpZih0aGlzLmxvZ2dlci5lcnJvcigiRmFpbGVkIHRvIHJvbGxiYWNrIG9mZmVyIG9uIG5vbi0yeHggcmVzcG9uc2UgdG8gcmUtSU5WSVRFIiksdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSx0aGlzLnN0YXRlIT09RmUuVGVybWluYXRlZCl7aWYoIXRoaXMuZGlhbG9nKXRocm93IG5ldyBFcnJvcigiRGlhbG9nIHVuZGVmaW5lZC4iKTtjb25zdCBlPVtdO2UucHVzaCgiUmVhc29uOiAiK3RoaXMuZ2V0UmVhc29uSGVhZGVyVmFsdWUoNTAwLCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiKSksdGhpcy5kaWFsb2cuYnllKHZvaWQgMCx7ZXh0cmFIZWFkZXJzOmV9KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKX19KS50aGVuKCgpPT57ZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlamVjdCh0KX0pfSxvblRyeWluZzplPT57fX0scz1lLnJlcXVlc3RPcHRpb25zfHx7fTtpZihzLmV4dHJhSGVhZGVycz0ocy5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLHMuZXh0cmFIZWFkZXJzLnB1c2goIkFsbG93OiAiK3VlLnRvU3RyaW5nKCkpLHMuZXh0cmFIZWFkZXJzLnB1c2goIkNvbnRhY3Q6ICIrdGhpcy5fY29udGFjdCksZS53aXRob3V0U2RwKXtpZighdGhpcy5kaWFsb2cpdGhyb3cgdGhpcy5wZW5kaW5nUmVpbnZpdGU9ITEsbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5kaWFsb2cuaW52aXRlKHQscykpfWNvbnN0IGk9e3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOmUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczplLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnN9O3JldHVybiB0aGlzLmdldE9mZmVyKGkpLnRoZW4oZT0+e2lmKCF0aGlzLmRpYWxvZyl0aHJvdyB0aGlzLnBlbmRpbmdSZWludml0ZT0hMSxuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7cmV0dXJuIHMuYm9keT1lLHRoaXMuZGlhbG9nLmludml0ZSh0LHMpfSkuY2F0Y2goZT0+e3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSksdGhpcy5sb2dnZXIuZXJyb3IoIkZhaWxlZCB0byBzZW5kIHJlLUlOVklURSIpLHRoaXMucGVuZGluZ1JlaW52aXRlPSExLGV9KX1tZXNzYWdlKGU9e30pe2lmKHRoaXMuc3RhdGUhPT1GZS5Fc3RhYmxpc2hlZCl7Y29uc3QgZT0iU2Vzc2lvbi5tZXNzYWdlKCkgbWF5IG9ubHkgYmUgY2FsbGVkIGlmIGVzdGFibGlzaGVkIHNlc3Npb24uIjtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZSksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHNlc3Npb24gc3RhdGUgIit0aGlzLnN0YXRlKSl9Y29uc3QgdD1lLnJlcXVlc3REZWxlZ2F0ZSxzPXRoaXMuY29weVJlcXVlc3RPcHRpb25zKGUucmVxdWVzdE9wdGlvbnMpO3JldHVybiB0aGlzLl9tZXNzYWdlKHQscyl9cmVmZXIoZSx0PXt9KXtpZih0aGlzLnN0YXRlIT09RmUuRXN0YWJsaXNoZWQpe2NvbnN0IGU9IlNlc3Npb24ucmVmZXIoKSBtYXkgb25seSBiZSBjYWxsZWQgaWYgZXN0YWJsaXNoZWQgc2Vzc2lvbi4iO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcihlKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgc2Vzc2lvbiBzdGF0ZSAiK3RoaXMuc3RhdGUpKX1jb25zdCBzPXQucmVxdWVzdERlbGVnYXRlLGk9dGhpcy5jb3B5UmVxdWVzdE9wdGlvbnModC5yZXF1ZXN0T3B0aW9ucyk7cmV0dXJuIGkuZXh0cmFIZWFkZXJzPWkuZXh0cmFIZWFkZXJzP2kuZXh0cmFIZWFkZXJzLmNvbmNhdCh0aGlzLnJlZmVyRXh0cmFIZWFkZXJzKHRoaXMucmVmZXJUb1N0cmluZyhlKSkpOnRoaXMucmVmZXJFeHRyYUhlYWRlcnModGhpcy5yZWZlclRvU3RyaW5nKGUpKSx0aGlzLl9yZWZlcih0Lm9uTm90aWZ5LHMsaSl9X2J5ZShlLHQpe2lmKCF0aGlzLmRpYWxvZylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTZXNzaW9uIGRpYWxvZyB1bmRlZmluZWQuIikpO2NvbnN0IHM9dGhpcy5kaWFsb2c7c3dpdGNoKHMuc2Vzc2lvblN0YXRlKXtjYXNlIF8uSW5pdGlhbDpjYXNlIF8uRWFybHk6dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGRpYWxvZyBzdGF0ZSAiK3Muc2Vzc2lvblN0YXRlKTtjYXNlIF8uQWNrV2FpdDpyZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRpbmcpLG5ldyBQcm9taXNlKGk9PntzLmRlbGVnYXRlPXtvbkFjazooKT0+e2NvbnN0IHI9cy5ieWUoZSx0KTtyZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCksaShyKSxQcm9taXNlLnJlc29sdmUoKX0sb25BY2tUaW1lb3V0OigpPT57Y29uc3Qgcj1zLmJ5ZShlLHQpO3RoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpLGkocil9fX0pO2Nhc2UgXy5Db25maXJtZWQ6e2NvbnN0IGk9cy5ieWUoZSx0KTtyZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCksUHJvbWlzZS5yZXNvbHZlKGkpfWNhc2UgXy5UZXJtaW5hdGVkOnRocm93IG5ldyBFcnJvcigiSW52YWxpZCBkaWFsb2cgc3RhdGUgIitzLnNlc3Npb25TdGF0ZSk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVucmVjb2duaXplZCBzdGF0ZS4iKX19X2luZm8oZSx0KXtyZXR1cm4gdGhpcy5kaWFsb2c/UHJvbWlzZS5yZXNvbHZlKHRoaXMuZGlhbG9nLmluZm8oZSx0KSk6UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTZXNzaW9uIGRpYWxvZyB1bmRlZmluZWQuIikpfV9tZXNzYWdlKGUsdCl7cmV0dXJuIHRoaXMuZGlhbG9nP1Byb21pc2UucmVzb2x2ZSh0aGlzLmRpYWxvZy5tZXNzYWdlKGUsdCkpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiU2Vzc2lvbiBkaWFsb2cgdW5kZWZpbmVkLiIpKX1fcmVmZXIoZSx0LHMpe3JldHVybiB0aGlzLmRpYWxvZz8odGhpcy5vbk5vdGlmeT1lLFByb21pc2UucmVzb2x2ZSh0aGlzLmRpYWxvZy5yZWZlcih0LHMpKSk6UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTZXNzaW9uIGRpYWxvZyB1bmRlZmluZWQuIikpfWFja0FuZEJ5ZShlLHQscyl7ZS5hY2soKTtjb25zdCBpPVtdO3QmJmkucHVzaCgiUmVhc29uOiAiK3RoaXMuZ2V0UmVhc29uSGVhZGVyVmFsdWUodCxzKSksZS5zZXNzaW9uLmJ5ZSh2b2lkIDAse2V4dHJhSGVhZGVyczppfSl9b25BY2tSZXF1ZXN0KGUpe2lmKHRoaXMubG9nZ2VyLmxvZygiU2Vzc2lvbi5vbkFja1JlcXVlc3QiKSx0aGlzLnN0YXRlIT09RmUuRXN0YWJsaXNoZWQmJnRoaXMuc3RhdGUhPT1GZS5UZXJtaW5hdGluZylyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoYEFDSyByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCksUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3QgdD10aGlzLmRpYWxvZztpZighdCl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7c3dpdGNoKHQuc2lnbmFsaW5nU3RhdGUpe2Nhc2UgUC5Jbml0aWFsOnt0aGlzLmxvZ2dlci5lcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0LnNpZ25hbGluZ1N0YXRlfS5gKTtjb25zdCBlPVsiUmVhc29uOiAiK3RoaXMuZ2V0UmVhc29uSGVhZGVyVmFsdWUoNDg4LCJCYWQgTWVkaWEgRGVzY3JpcHRpb24iKV07cmV0dXJuIHQuYnllKHZvaWQgMCx7ZXh0cmFIZWFkZXJzOmV9KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKSxQcm9taXNlLnJlc29sdmUoKX1jYXNlIFAuU3RhYmxlOntjb25zdCBzPSQoZS5tZXNzYWdlKTtpZighcylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7aWYoInJlbmRlciI9PT1zLmNvbnRlbnREaXNwb3NpdGlvbilyZXR1cm4gdGhpcy5fcmVuZGVyYm9keT1zLmNvbnRlbnQsdGhpcy5fcmVuZGVydHlwZT1zLmNvbnRlbnRUeXBlLFByb21pc2UucmVzb2x2ZSgpO2lmKCJzZXNzaW9uIiE9PXMuY29udGVudERpc3Bvc2l0aW9uKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtjb25zdCBpPXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczp0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOnRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnN9O3JldHVybiB0aGlzLnNldEFuc3dlcihzLGkpLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpO2NvbnN0IHM9WyJSZWFzb246ICIrdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg0ODgsIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpXTt0LmJ5ZSh2b2lkIDAse2V4dHJhSGVhZGVyczpzfSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCl9KX1jYXNlIFAuSGF2ZUxvY2FsT2ZmZXI6e3RoaXMubG9nZ2VyLmVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke3Quc2lnbmFsaW5nU3RhdGV9LmApO2NvbnN0IGU9WyJSZWFzb246ICIrdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg0ODgsIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpXTtyZXR1cm4gdC5ieWUodm9pZCAwLHtleHRyYUhlYWRlcnM6ZX0pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpLFByb21pc2UucmVzb2x2ZSgpfWNhc2UgUC5IYXZlUmVtb3RlT2ZmZXI6e3RoaXMubG9nZ2VyLmVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke3Quc2lnbmFsaW5nU3RhdGV9LmApO2NvbnN0IGU9WyJSZWFzb246ICIrdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg0ODgsIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpXTtyZXR1cm4gdC5ieWUodm9pZCAwLHtleHRyYUhlYWRlcnM6ZX0pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpLFByb21pc2UucmVzb2x2ZSgpfWNhc2UgUC5DbG9zZWQ6ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2lnbmFsaW5nIHN0YXRlICR7dC5zaWduYWxpbmdTdGF0ZX0uYCl9fW9uQnllUmVxdWVzdChlKXtpZih0aGlzLmxvZ2dlci5sb2coIlNlc3Npb24ub25CeWVSZXF1ZXN0IiksdGhpcy5zdGF0ZT09PUZlLkVzdGFibGlzaGVkKXtpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQnllKXtjb25zdCB0PW5ldyBIZShlKTt0aGlzLmRlbGVnYXRlLm9uQnllKHQpfWVsc2UgZS5hY2NlcHQoKTt0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKX1lbHNlIHRoaXMubG9nZ2VyLmVycm9yKGBCWUUgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVxdWVzdGApfW9uSW5mb1JlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uSW5mb1JlcXVlc3QiKSx0aGlzLnN0YXRlPT09RmUuRXN0YWJsaXNoZWQpaWYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkluZm8pe2NvbnN0IHQ9bmV3IE9lKGUpO3RoaXMuZGVsZWdhdGUub25JbmZvKHQpfWVsc2UgZS5hY2NlcHQoKTtlbHNlIHRoaXMubG9nZ2VyLmVycm9yKGBJTkZPIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlcXVlc3RgKX1vbkludml0ZVJlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uSW52aXRlUmVxdWVzdCIpLHRoaXMuc3RhdGUhPT1GZS5Fc3RhYmxpc2hlZClyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci5lcnJvcihgSU5WSVRFIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlcXVlc3RgKTtjb25zdCB0PVsiQ29udGFjdDogIit0aGlzLl9jb250YWN0XTtpZihlLm1lc3NhZ2UuaGFzSGVhZGVyKCJQLUFzc2VydGVkLUlkZW50aXR5Iikpe2NvbnN0IHQ9ZS5tZXNzYWdlLmdldEhlYWRlcigiUC1Bc3NlcnRlZC1JZGVudGl0eSIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigiSGVhZGVyIHVuZGVmaW5lZC4iKTt0aGlzLl9hc3NlcnRlZElkZW50aXR5PWQubmFtZUFkZHJIZWFkZXJQYXJzZSh0KX1jb25zdCBzPXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczp0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOnRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnN9O3RoaXMuZ2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VySW5EaWFsb2cocykudGhlbihzPT57Y29uc3QgaT1lLmFjY2VwdCh7c3RhdHVzQ29kZToyMDAsZXh0cmFIZWFkZXJzOnQsYm9keTpzfSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkludml0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkludml0ZShlLm1lc3NhZ2UsaS5tZXNzYWdlLDIwMCl9KS5jYXRjaChzPT57aWYodGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcigiRmFpbGVkIHRvIGhhbmRsZSB0byByZS1JTlZJVEUgcmVxdWVzdCIpLCF0aGlzLmRpYWxvZyl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7aWYodGhpcy5sb2dnZXIuZXJyb3IodGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGUpLHRoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlIT09UC5TdGFibGUpdGhpcy5yb2xsYmFja09mZmVyKCkudGhlbigoKT0+e2NvbnN0IHQ9ZS5yZWplY3Qoe3N0YXR1c0NvZGU6NDg4fSk7dGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkludml0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkludml0ZShlLm1lc3NhZ2UsdC5tZXNzYWdlLDQ4OCl9KS5jYXRjaChzPT57dGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSx0aGlzLmxvZ2dlci5lcnJvcigiRmFpbGVkIHRvIHJvbGxiYWNrIG9mZmVyIG9uIHJlLUlOVklURSByZXF1ZXN0Iik7Y29uc3QgaT1lLnJlamVjdCh7c3RhdHVzQ29kZTo0ODh9KTtpZih0aGlzLnN0YXRlIT09RmUuVGVybWluYXRlZCl7aWYoIXRoaXMuZGlhbG9nKXRocm93IG5ldyBFcnJvcigiRGlhbG9nIHVuZGVmaW5lZC4iKTtbXS5wdXNoKCJSZWFzb246ICIrdGhpcy5nZXRSZWFzb25IZWFkZXJWYWx1ZSg1MDAsIkludGVybmFsIFNlcnZlciBFcnJvciIpKSx0aGlzLmRpYWxvZy5ieWUodm9pZCAwLHtleHRyYUhlYWRlcnM6dH0pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpfXRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25JbnZpdGUmJnRoaXMuZGVsZWdhdGUub25JbnZpdGUoZS5tZXNzYWdlLGkubWVzc2FnZSw0ODgpfSk7ZWxzZXtjb25zdCB0PWUucmVqZWN0KHtzdGF0dXNDb2RlOjQ4OH0pO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25JbnZpdGUmJnRoaXMuZGVsZWdhdGUub25JbnZpdGUoZS5tZXNzYWdlLHQubWVzc2FnZSw0ODgpfX0pfW9uTWVzc2FnZVJlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uTWVzc2FnZVJlcXVlc3QiKSx0aGlzLnN0YXRlPT09RmUuRXN0YWJsaXNoZWQpaWYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbk1lc3NhZ2Upe2NvbnN0IHQ9bmV3IFVlKGUpO3RoaXMuZGVsZWdhdGUub25NZXNzYWdlKHQpfWVsc2UgZS5hY2NlcHQoKTtlbHNlIHRoaXMubG9nZ2VyLmVycm9yKGBNRVNTQUdFIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlcXVlc3RgKX1vbk5vdGlmeVJlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uTm90aWZ5UmVxdWVzdCIpLHRoaXMuc3RhdGU9PT1GZS5Fc3RhYmxpc2hlZClpZih0aGlzLm9uTm90aWZ5KXtjb25zdCB0PW5ldyBNZShlKTt0aGlzLm9uTm90aWZ5KHQpfWVsc2UgaWYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeSl7Y29uc3QgdD1uZXcgTWUoZSk7dGhpcy5kZWxlZ2F0ZS5vbk5vdGlmeSh0KX1lbHNlIGUuYWNjZXB0KCk7ZWxzZSB0aGlzLmxvZ2dlci5lcnJvcihgTk9USUZZIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlcXVlc3RgKX1vblByYWNrUmVxdWVzdChlKXtpZih0aGlzLmxvZ2dlci5sb2coIlNlc3Npb24ub25QcmFja1JlcXVlc3QiKSx0aGlzLnN0YXRlPT09RmUuRXN0YWJsaXNoZWQpdGhyb3cgbmV3IEVycm9yKCJVbmltcGxlbWVudGVkLiIpO3RoaXMubG9nZ2VyLmVycm9yKGBQUkFDSyByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCl9b25SZWZlclJlcXVlc3QoZSl7aWYodGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uLm9uUmVmZXJSZXF1ZXN0IiksdGhpcy5zdGF0ZSE9PUZlLkVzdGFibGlzaGVkKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLmVycm9yKGBSRUZFUiByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCk7aWYoIWUubWVzc2FnZS5oYXNIZWFkZXIoInJlZmVyLXRvIikpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oIkludmFsaWQgUkVGRVIgcGFja2V0LiBBIHJlZmVyLXRvIGhlYWRlciBpcyByZXF1aXJlZC4gUmVqZWN0aW5nLiIpLHZvaWQgZS5yZWplY3QoKTtjb25zdCB0PW5ldyBqZShlLHRoaXMpO3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWZlcj90aGlzLmRlbGVnYXRlLm9uUmVmZXIodCk6KHRoaXMubG9nZ2VyLmxvZygiTm8gZGVsZWdhdGUgYXZhaWxhYmxlIHRvIGhhbmRsZSBSRUZFUiwgYXV0b21hdGljYWxseSBhY2NlcHRpbmcgYW5kIGZvbGxvd2luZy4iKSx0LmFjY2VwdCgpLnRoZW4oKCk9PnQubWFrZUludml0ZXIodGhpcy5fcmVmZXJyYWxJbnZpdGVyT3B0aW9ucykuaW52aXRlKCkpLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpfSkpfWdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlcihlLHQpe2lmKHRoaXMuZGlhbG9nKXJldHVybiB0aGlzLmdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlckluRGlhbG9nKHQpO2NvbnN0IHM9JChlLm1lc3NhZ2UpO3JldHVybiBzJiYic2Vzc2lvbiI9PT1zLmNvbnRlbnREaXNwb3NpdGlvbj90aGlzLnNldE9mZmVyQW5kR2V0QW5zd2VyKHMsdCk6dGhpcy5nZXRPZmZlcih0KX1nZW5lcmF0ZVJlc3BvbnNlT2ZmZXJBbnN3ZXJJbkRpYWxvZyhlKXtpZighdGhpcy5kaWFsb2cpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO3N3aXRjaCh0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZSl7Y2FzZSBQLkluaXRpYWw6cmV0dXJuIHRoaXMuZ2V0T2ZmZXIoZSk7Y2FzZSBQLkhhdmVMb2NhbE9mZmVyOnJldHVybiBQcm9taXNlLnJlc29sdmUodm9pZCAwKTtjYXNlIFAuSGF2ZVJlbW90ZU9mZmVyOmlmKCF0aGlzLmRpYWxvZy5vZmZlcil0aHJvdyBuZXcgRXJyb3IoYFNlc3Npb24gb2ZmZXIgdW5kZWZpbmVkIGluIHNpZ25hbGluZyBzdGF0ZSAke3RoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKTtyZXR1cm4gdGhpcy5zZXRPZmZlckFuZEdldEFuc3dlcih0aGlzLmRpYWxvZy5vZmZlcixlKTtjYXNlIFAuU3RhYmxlOnJldHVybiB0aGlzLnN0YXRlIT09RmUuRXN0YWJsaXNoZWQ/UHJvbWlzZS5yZXNvbHZlKHZvaWQgMCk6dGhpcy5nZXRPZmZlcihlKTtjYXNlIFAuQ2xvc2VkOmRlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNpZ25hbGluZyBzdGF0ZSAke3RoaXMuZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKX19Z2V0T2ZmZXIoZSl7Y29uc3QgdD10aGlzLnNldHVwU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcigpLHM9ZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucyxpPWUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczt0cnl7cmV0dXJuIHQuZ2V0RGVzY3JpcHRpb24ocyxpKS50aGVuKGU9PlMoZSkpLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5nZXRPZmZlcjogU0RIIGdldERlc2NyaXB0aW9uIHJlamVjdGVkLi4uIik7Y29uc3QgdD1lIGluc3RhbmNlb2YgRXJyb3I/ZTpuZXcgRXJyb3IoIlNlc3Npb24uZ2V0T2ZmZXIgdW5rbm93biBlcnJvci4iKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHR9KX1jYXRjaChlKXt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5nZXRPZmZlcjogU0RIIGdldERlc2NyaXB0aW9uIHRocmV3Li4uIik7Y29uc3QgdD1lIGluc3RhbmNlb2YgRXJyb3I/ZTpuZXcgRXJyb3IoZSk7cmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksUHJvbWlzZS5yZWplY3QodCl9fXJvbGxiYWNrT2ZmZXIoKXtjb25zdCBlPXRoaXMuc2V0dXBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCk7aWYodm9pZCAwPT09ZS5yb2xsYmFja0Rlc2NyaXB0aW9uKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTt0cnl7cmV0dXJuIGUucm9sbGJhY2tEZXNjcmlwdGlvbigpLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5yb2xsYmFja09mZmVyOiBTREggcm9sbGJhY2tEZXNjcmlwdGlvbiByZWplY3RlZC4uLiIpO2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVycm9yP2U6bmV3IEVycm9yKCJTZXNzaW9uLnJvbGxiYWNrT2ZmZXIgdW5rbm93biBlcnJvci4iKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHR9KX1jYXRjaChlKXt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5yb2xsYmFja09mZmVyOiBTREggcm9sbGJhY2tEZXNjcmlwdGlvbiB0aHJldy4uLiIpO2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVycm9yP2U6bmV3IEVycm9yKGUpO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLFByb21pc2UucmVqZWN0KHQpfX1zZXRBbnN3ZXIoZSx0KXtjb25zdCBzPXRoaXMuc2V0dXBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKCksaT10LnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHI9dC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzO3RyeXtpZighcy5oYXNEZXNjcmlwdGlvbihlLmNvbnRlbnRUeXBlKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHFlKX1jYXRjaChlKXt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5zZXRBbnN3ZXI6IFNESCBoYXNEZXNjcmlwdGlvbiB0aHJldy4uLiIpO2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVycm9yP2U6bmV3IEVycm9yKGUpO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLFByb21pc2UucmVqZWN0KHQpfXRyeXtyZXR1cm4gcy5zZXREZXNjcmlwdGlvbihlLmNvbnRlbnQsaSxyKS5jYXRjaChlPT57dGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb24uc2V0QW5zd2VyOiBTREggc2V0RGVzY3JpcHRpb24gcmVqZWN0ZWQuLi4iKTtjb25zdCB0PWUgaW5zdGFuY2VvZiBFcnJvcj9lOm5ldyBFcnJvcigiU2Vzc2lvbi5zZXRBbnN3ZXIgdW5rbm93biBlcnJvci4iKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHR9KX1jYXRjaChlKXt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5zZXRBbnN3ZXI6IFNESCBzZXREZXNjcmlwdGlvbiB0aHJldy4uLiIpO2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVycm9yP2U6bmV3IEVycm9yKGUpO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLFByb21pc2UucmVqZWN0KHQpfX1zZXRPZmZlckFuZEdldEFuc3dlcihlLHQpe2NvbnN0IHM9dGhpcy5zZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoKSxpPXQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMscj10LnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM7dHJ5e2lmKCFzLmhhc0Rlc2NyaXB0aW9uKGUuY29udGVudFR5cGUpKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgcWUpfWNhdGNoKGUpe3RoaXMubG9nZ2VyLmVycm9yKCJTZXNzaW9uLnNldE9mZmVyQW5kR2V0QW5zd2VyOiBTREggaGFzRGVzY3JpcHRpb24gdGhyZXcuLi4iKTtjb25zdCB0PWUgaW5zdGFuY2VvZiBFcnJvcj9lOm5ldyBFcnJvcihlKTtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSxQcm9taXNlLnJlamVjdCh0KX10cnl7cmV0dXJuIHMuc2V0RGVzY3JpcHRpb24oZS5jb250ZW50LGkscikudGhlbigoKT0+cy5nZXREZXNjcmlwdGlvbihpLHIpKS50aGVuKGU9PlMoZSkpLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5zZXRPZmZlckFuZEdldEFuc3dlcjogU0RIIHNldERlc2NyaXB0aW9uIG9yIGdldERlc2NyaXB0aW9uIHJlamVjdGVkLi4uIik7Y29uc3QgdD1lIGluc3RhbmNlb2YgRXJyb3I/ZTpuZXcgRXJyb3IoIlNlc3Npb24uc2V0T2ZmZXJBbmRHZXRBbnN3ZXIgdW5rbm93biBlcnJvci4iKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHR9KX1jYXRjaChlKXt0aGlzLmxvZ2dlci5lcnJvcigiU2Vzc2lvbi5zZXRPZmZlckFuZEdldEFuc3dlcjogU0RIIHNldERlc2NyaXB0aW9uIG9yIGdldERlc2NyaXB0aW9uIHRocmV3Li4uIik7Y29uc3QgdD1lIGluc3RhbmNlb2YgRXJyb3I/ZTpuZXcgRXJyb3IoZSk7cmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksUHJvbWlzZS5yZWplY3QodCl9fXNldFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoZSl7aWYodGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcil0aHJvdyBuZXcgRXJyb3IoIlNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBkZWZpbmVkLiIpO3RoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI9ZX1zZXR1cFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIoKXtyZXR1cm4gdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcnx8KHRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI9dGhpcy5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyRmFjdG9yeSh0aGlzLHRoaXMudXNlckFnZW50LmNvbmZpZ3VyYXRpb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnlPcHRpb25zKSksdGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcn1zdGF0ZVRyYW5zaXRpb24oZSl7Y29uc3QgdD0oKT0+e3Rocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLl9zdGF0ZX0gdG8gJHtlfWApfTtzd2l0Y2godGhpcy5fc3RhdGUpe2Nhc2UgRmUuSW5pdGlhbDplIT09RmUuRXN0YWJsaXNoaW5nJiZlIT09RmUuRXN0YWJsaXNoZWQmJmUhPT1GZS5UZXJtaW5hdGluZyYmZSE9PUZlLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIEZlLkVzdGFibGlzaGluZzplIT09RmUuRXN0YWJsaXNoZWQmJmUhPT1GZS5UZXJtaW5hdGluZyYmZSE9PUZlLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIEZlLkVzdGFibGlzaGVkOmUhPT1GZS5UZXJtaW5hdGluZyYmZSE9PUZlLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIEZlLlRlcm1pbmF0aW5nOmUhPT1GZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBGZS5UZXJtaW5hdGVkOnQoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHN0YXRlLiIpfXRoaXMuX3N0YXRlPWUsdGhpcy5sb2dnZXIubG9nKGBTZXNzaW9uICR7dGhpcy5pZH0gdHJhbnNpdGlvbmVkIHRvIHN0YXRlICR7dGhpcy5fc3RhdGV9YCksdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXIuZW1pdCgiZXZlbnQiLHRoaXMuX3N0YXRlKSxlPT09RmUuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCl9Y29weVJlcXVlc3RPcHRpb25zKGU9e30pe3JldHVybntleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnM/ZS5leHRyYUhlYWRlcnMuc2xpY2UoKTp2b2lkIDAsYm9keTplLmJvZHk/e2NvbnRlbnREaXNwb3NpdGlvbjplLmJvZHkuY29udGVudERpc3Bvc2l0aW9ufHwicmVuZGVyIixjb250ZW50VHlwZTplLmJvZHkuY29udGVudFR5cGV8fCJ0ZXh0L3BsYWluIixjb250ZW50OmUuYm9keS5jb250ZW50fHwiIn06dm9pZCAwfX1nZXRSZWFzb25IZWFkZXJWYWx1ZShlLHQpe2NvbnN0IHM9ZTtsZXQgaT1mKGUpO3JldHVybiFpJiZ0JiYoaT10KSwiU0lQO2NhdXNlPSIrcysnO3RleHQ9IicraSsnIid9cmVmZXJFeHRyYUhlYWRlcnMoZSl7Y29uc3QgdD1bXTtyZXR1cm4gdC5wdXNoKCJSZWZlcnJlZC1CeTogPCIrdGhpcy51c2VyQWdlbnQuY29uZmlndXJhdGlvbi51cmkrIj4iKSx0LnB1c2goIkNvbnRhY3Q6ICIrdGhpcy5fY29udGFjdCksdC5wdXNoKCJBbGxvdzogIitbIkFDSyIsIkNBTkNFTCIsIklOVklURSIsIk1FU1NBR0UiLCJCWUUiLCJPUFRJT05TIiwiSU5GTyIsIk5PVElGWSIsIlJFRkVSIl0udG9TdHJpbmcoKSksdC5wdXNoKCJSZWZlci1UbzogIitlKSx0fXJlZmVyVG9TdHJpbmcoZSl7bGV0IHQ7aWYoZSBpbnN0YW5jZW9mIGEpdD1lLnRvU3RyaW5nKCk7ZWxzZXtpZighZS5kaWFsb2cpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO2NvbnN0IHM9ZS5yZW1vdGVJZGVudGl0eS5mcmllbmRseU5hbWUsaT1lLmRpYWxvZy5yZW1vdGVUYXJnZXQudG9TdHJpbmcoKSxyPWUuZGlhbG9nLmNhbGxJZCxuPWUuZGlhbG9nLnJlbW90ZVRhZyxvPWUuZGlhbG9nLmxvY2FsVGFnO3Q9YCIke3N9IiA8JHtpfT9SZXBsYWNlcz0ke2VuY29kZVVSSUNvbXBvbmVudChgJHtyfTt0by10YWc9JHtufTtmcm9tLXRhZz0ke299YCl9PmB9cmV0dXJuIHR9fSFmdW5jdGlvbihlKXtlLlJlcXVpcmVkPSJSZXF1aXJlZCIsZS5TdXBwb3J0ZWQ9IlN1cHBvcnRlZCIsZS5VbnN1cHBvcnRlZD0iVW5zdXBwb3J0ZWQifShMZXx8KExlPXt9KSk7Y29uc3QgR2U9eyIxMDByZWwiOiEwLDE5OTohMCxhbnN3ZXJtb2RlOiEwLCJlYXJseS1zZXNzaW9uIjohMCxldmVudGxpc3Q6ITAsZXhwbGljaXRzdWI6ITAsImZyb20tY2hhbmdlIjohMCwiZ2VvbG9jYXRpb24taHR0cCI6ITAsImdlb2xvY2F0aW9uLXNpcCI6ITAsZ2luOiEwLGdydXU6ITAsaGlzdGluZm86ITAsaWNlOiEwLGpvaW46ITAsIm11bHRpcGxlLXJlZmVyIjohMCxub3JlZmVyc3ViOiEwLG5vc3ViOiEwLG91dGJvdW5kOiEwLHBhdGg6ITAscG9saWN5OiEwLHByZWNvbmRpdGlvbjohMCxwcmVmOiEwLHByaXZhY3k6ITAsInJlY2lwaWVudC1saXN0LWludml0ZSI6ITAsInJlY2lwaWVudC1saXN0LW1lc3NhZ2UiOiEwLCJyZWNpcGllbnQtbGlzdC1zdWJzY3JpYmUiOiEwLHJlcGxhY2VzOiEwLCJyZXNvdXJjZS1wcmlvcml0eSI6ITAsInNkcC1hbmF0IjohMCwic2VjLWFncmVlIjohMCx0ZGlhbG9nOiEwLHRpbWVyOiEwLHV1aTohMH07Y2xhc3MgVmUgZXh0ZW5kcyBCZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUpLHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0PXQsdGhpcy5kaXNwb3NlZD0hMSx0aGlzLmV4cGlyZXNUaW1lcj12b2lkIDAsdGhpcy5pc0NhbmNlbGVkPSExLHRoaXMucmVsMTAwPSJub25lIix0aGlzLnJzZXE9TWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSksdGhpcy51c2VyTm9BbnN3ZXJUaW1lcj12b2lkIDAsdGhpcy53YWl0aW5nRm9yUHJhY2s9ITEsdGhpcy5sb2dnZXI9ZS5nZXRMb2dnZXIoInNpcC5JbnZpdGF0aW9uIik7Y29uc3Qgcz10aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5tZXNzYWdlLGk9cy5nZXRIZWFkZXIoInJlcXVpcmUiKTtpJiZpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoIjEwMHJlbCIpJiYodGhpcy5yZWwxMDA9InJlcXVpcmVkIik7Y29uc3Qgcj1zLmdldEhlYWRlcigic3VwcG9ydGVkIik7aWYociYmci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCIxMDByZWwiKSYmKHRoaXMucmVsMTAwPSJzdXBwb3J0ZWQiKSxzLnRvVGFnPXQudG9UYWcsInN0cmluZyIhPXR5cGVvZiBzLnRvVGFnKXRocm93IG5ldyBUeXBlRXJyb3IoInRvVGFnIHNob3VsZCBoYXZlIGJlZW4gYSBzdHJpbmcuIik7aWYodGhpcy51c2VyTm9BbnN3ZXJUaW1lcj1zZXRUaW1lb3V0KCgpPT57dC5yZWplY3Qoe3N0YXR1c0NvZGU6NDgwfSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCl9LHRoaXMudXNlckFnZW50LmNvbmZpZ3VyYXRpb24ubm9BbnN3ZXJUaW1lb3V0PzFlMyp0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLm5vQW5zd2VyVGltZW91dDo2ZTQpLHMuaGFzSGVhZGVyKCJleHBpcmVzIikpe2NvbnN0IGU9MWUzKk51bWJlcihzLmdldEhlYWRlcigiZXhwaXJlcyIpfHwwKTt0aGlzLmV4cGlyZXNUaW1lcj1zZXRUaW1lb3V0KCgpPT57dGhpcy5zdGF0ZT09PUZlLkluaXRpYWwmJih0LnJlamVjdCh7c3RhdHVzQ29kZTo0ODd9KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKSl9LGUpfWNvbnN0IG49dGhpcy5yZXF1ZXN0LmdldEhlYWRlcigiUC1Bc3NlcnRlZC1JZGVudGl0eSIpO24mJih0aGlzLl9hc3NlcnRlZElkZW50aXR5PWQubmFtZUFkZHJIZWFkZXJQYXJzZShuKSksdGhpcy5fY29udGFjdD10aGlzLnVzZXJBZ2VudC5jb250YWN0LnRvU3RyaW5nKCk7Y29uc3Qgbz1zLnBhcnNlSGVhZGVyKCJDb250ZW50LURpc3Bvc2l0aW9uIik7byYmInJlbmRlciI9PT1vLnR5cGUmJih0aGlzLl9yZW5kZXJib2R5PXMuYm9keSx0aGlzLl9yZW5kZXJ0eXBlPXMuZ2V0SGVhZGVyKCJDb250ZW50LVR5cGUiKSksdGhpcy5faWQ9cy5jYWxsSWQrcy5mcm9tVGFnLHRoaXMudXNlckFnZW50Ll9zZXNzaW9uc1t0aGlzLl9pZF09dGhpc31kaXNwb3NlKCl7aWYodGhpcy5kaXNwb3NlZClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7c3dpdGNoKHRoaXMuZGlzcG9zZWQ9ITAsdGhpcy5leHBpcmVzVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5leHBpcmVzVGltZXIpLHRoaXMuZXhwaXJlc1RpbWVyPXZvaWQgMCksdGhpcy51c2VyTm9BbnN3ZXJUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnVzZXJOb0Fuc3dlclRpbWVyKSx0aGlzLnVzZXJOb0Fuc3dlclRpbWVyPXZvaWQgMCksdGhpcy5wcmFja05ldmVyQXJyaXZlZCgpLHRoaXMuc3RhdGUpe2Nhc2UgRmUuSW5pdGlhbDpjYXNlIEZlLkVzdGFibGlzaGluZzpyZXR1cm4gdGhpcy5yZWplY3QoKS50aGVuKCgpPT5zdXBlci5kaXNwb3NlKCkpO2Nhc2UgRmUuRXN0YWJsaXNoZWQ6Y2FzZSBGZS5UZXJtaW5hdGluZzpjYXNlIEZlLlRlcm1pbmF0ZWQ6cmV0dXJuIHN1cGVyLmRpc3Bvc2UoKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biBzdGF0ZS4iKX19Z2V0IGF1dG9TZW5kQW5Jbml0aWFsUHJvdmlzaW9uYWxSZXNwb25zZSgpe3JldHVybiJyZXF1aXJlZCIhPT10aGlzLnJlbDEwMH1nZXQgYm9keSgpe3JldHVybiB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5tZXNzYWdlLmJvZHl9Z2V0IGxvY2FsSWRlbnRpdHkoKXtyZXR1cm4gdGhpcy5yZXF1ZXN0LnRvfWdldCByZW1vdGVJZGVudGl0eSgpe3JldHVybiB0aGlzLnJlcXVlc3QuZnJvbX1nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5tZXNzYWdlfWFjY2VwdChlPXt9KXtpZih0aGlzLmxvZ2dlci5sb2coIkludml0YXRpb24uYWNjZXB0IiksdGhpcy5zdGF0ZSE9PUZlLkluaXRpYWwpe2NvbnN0IGU9bmV3IEVycm9yKCJJbnZhbGlkIHNlc3Npb24gc3RhdGUgIit0aGlzLnN0YXRlKTtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSxQcm9taXNlLnJlamVjdChlKX1yZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuRXN0YWJsaXNoaW5nKSx0aGlzLnNlbmRBY2NlcHQoZSkudGhlbigoe21lc3NhZ2U6ZSxzZXNzaW9uOnR9KT0+e3QuZGVsZWdhdGU9e29uQWNrOmU9PnRoaXMub25BY2tSZXF1ZXN0KGUpLG9uQWNrVGltZW91dDooKT0+dGhpcy5vbkFja1RpbWVvdXQoKSxvbkJ5ZTplPT50aGlzLm9uQnllUmVxdWVzdChlKSxvbkluZm86ZT0+dGhpcy5vbkluZm9SZXF1ZXN0KGUpLG9uSW52aXRlOmU9PnRoaXMub25JbnZpdGVSZXF1ZXN0KGUpLG9uTWVzc2FnZTplPT50aGlzLm9uTWVzc2FnZVJlcXVlc3QoZSksb25Ob3RpZnk6ZT0+dGhpcy5vbk5vdGlmeVJlcXVlc3QoZSksb25QcmFjazplPT50aGlzLm9uUHJhY2tSZXF1ZXN0KGUpLG9uUmVmZXI6ZT0+dGhpcy5vblJlZmVyUmVxdWVzdChlKX0sdGhpcy5fZGlhbG9nPXQsdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuRXN0YWJsaXNoZWQpLHRoaXMuX3JlcGxhY2VlJiZ0aGlzLl9yZXBsYWNlZS5fYnllKCl9KS5jYXRjaChlPT50aGlzLmhhbmRsZVJlc3BvbnNlRXJyb3IoZSkpfXByb2dyZXNzKGU9e30pe2lmKHRoaXMubG9nZ2VyLmxvZygiSW52aXRhdGlvbi5wcm9ncmVzcyIpLHRoaXMuc3RhdGUhPT1GZS5Jbml0aWFsKXtjb25zdCBlPW5ldyBFcnJvcigiSW52YWxpZCBzZXNzaW9uIHN0YXRlICIrdGhpcy5zdGF0ZSk7cmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSksUHJvbWlzZS5yZWplY3QoZSl9Y29uc3QgdD1lLnN0YXR1c0NvZGV8fDE4MDtpZih0PDEwMHx8dD4xOTkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBzdGF0dXNDb2RlOiAiK3QpO3JldHVybiB0aGlzLndhaXRpbmdGb3JQcmFjaz8odGhpcy5sb2dnZXIud2FybigiVW5leHBlY3RlZCBjYWxsIGZvciBwcm9ncmVzcyB3aGlsZSB3YWl0aW5nIGZvciBwcmFjaywgaWdub3JpbmciKSxQcm9taXNlLnJlc29sdmUoKSk6MTAwPT09ZS5zdGF0dXNDb2RlP3RoaXMuc2VuZFByb2dyZXNzVHJ5aW5nKCkudGhlbigoKT0+e30pLmNhdGNoKGU9PnRoaXMuaGFuZGxlUmVzcG9uc2VFcnJvcihlKSk6InJlcXVpcmVkIj09PXRoaXMucmVsMTAwfHwic3VwcG9ydGVkIj09PXRoaXMucmVsMTAwJiZlLnJlbDEwMHx8InN1cHBvcnRlZCI9PT10aGlzLnJlbDEwMCYmdGhpcy51c2VyQWdlbnQuY29uZmlndXJhdGlvbi5zaXBFeHRlbnNpb24xMDByZWw9PT1MZS5SZXF1aXJlZD90aGlzLnNlbmRQcm9ncmVzc1JlbGlhYmxlV2FpdEZvclByYWNrKGUpLnRoZW4oKCk9Pnt9KS5jYXRjaChlPT50aGlzLmhhbmRsZVJlc3BvbnNlRXJyb3IoZSkpOnRoaXMuc2VuZFByb2dyZXNzKGUpLnRoZW4oKCk9Pnt9KS5jYXRjaChlPT50aGlzLmhhbmRsZVJlc3BvbnNlRXJyb3IoZSkpfXJlamVjdChlPXt9KXtpZih0aGlzLmxvZ2dlci5sb2coIkludml0YXRpb24ucmVqZWN0IiksdGhpcy5zdGF0ZSE9PUZlLkluaXRpYWwmJnRoaXMuc3RhdGUhPT1GZS5Fc3RhYmxpc2hpbmcpe2NvbnN0IGU9bmV3IEVycm9yKCJJbnZhbGlkIHNlc3Npb24gc3RhdGUgIit0aGlzLnN0YXRlKTtyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSxQcm9taXNlLnJlamVjdChlKX1jb25zdCB0PWUuc3RhdHVzQ29kZXx8NDgwLHM9ZS5yZWFzb25QaHJhc2U/ZS5yZWFzb25QaHJhc2U6Zih0KSxpPWUuZXh0cmFIZWFkZXJzfHxbXTtpZih0PDMwMHx8dD42OTkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBzdGF0dXNDb2RlOiAiK3QpO2NvbnN0IHI9ZS5ib2R5P1MoZS5ib2R5KTp2b2lkIDA7cmV0dXJuIHQ8NDAwP3RoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LnJlZGlyZWN0KFtdLHtzdGF0dXNDb2RlOnQscmVhc29uUGhyYXNlOnMsZXh0cmFIZWFkZXJzOmksYm9keTpyfSk6dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucmVqZWN0KHtzdGF0dXNDb2RlOnQscmVhc29uUGhyYXNlOnMsZXh0cmFIZWFkZXJzOmksYm9keTpyfSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCksUHJvbWlzZS5yZXNvbHZlKCl9X29uQ2FuY2VsKGUpe3RoaXMubG9nZ2VyLmxvZygiSW52aXRhdGlvbi5fb25DYW5jZWwiKSx0aGlzLnN0YXRlPT09RmUuSW5pdGlhbHx8dGhpcy5zdGF0ZT09PUZlLkVzdGFibGlzaGluZz8odGhpcy5pc0NhbmNlbGVkPSEwLHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LnJlamVjdCh7c3RhdHVzQ29kZTo0ODd9KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKSk6dGhpcy5sb2dnZXIuZXJyb3IoYENBTkNFTCByZWNlaXZlZCB3aGlsZSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9LCBkcm9wcGluZyByZXF1ZXN0YCl9aGFuZGxlUHJhY2tPZmZlckFuc3dlcihlLHQpe2lmKCF0aGlzLmRpYWxvZyl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZyB1bmRlZmluZWQuIik7Y29uc3Qgcz0kKGUubWVzc2FnZSk7aWYoIXN8fCJzZXNzaW9uIiE9PXMuY29udGVudERpc3Bvc2l0aW9uKXJldHVybiBQcm9taXNlLnJlc29sdmUodm9pZCAwKTtzd2l0Y2godGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGUpe2Nhc2UgUC5Jbml0aWFsOnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCk7Y2FzZSBQLlN0YWJsZTpyZXR1cm4gdGhpcy5zZXRBbnN3ZXIocyx0KS50aGVuKCgpPT57fSk7Y2FzZSBQLkhhdmVMb2NhbE9mZmVyOnRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzaWduYWxpbmcgc3RhdGUgJHt0aGlzLmRpYWxvZy5zaWduYWxpbmdTdGF0ZX0uYCk7Y2FzZSBQLkhhdmVSZW1vdGVPZmZlcjpyZXR1cm4gdGhpcy5zZXRPZmZlckFuZEdldEFuc3dlcihzLHQpO2Nhc2UgUC5DbG9zZWQ6ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2lnbmFsaW5nIHN0YXRlICR7dGhpcy5kaWFsb2cuc2lnbmFsaW5nU3RhdGV9LmApfX1oYW5kbGVSZXNwb25zZUVycm9yKGUpe2xldCB0PTQ4MDtpZihlIGluc3RhbmNlb2YgRXJyb3I/dGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKTp0aGlzLmxvZ2dlci5lcnJvcihlKSxlIGluc3RhbmNlb2YgcWU/KHRoaXMubG9nZ2VyLmVycm9yKCJBIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBvY2N1cnJlZCB3aGlsZSBzZW5kaW5nIHJlc3BvbnNlIChjb250ZW50IHR5cGUgdW5zdXBwb3J0ZWQiKSx0PTQxNSk6ZSBpbnN0YW5jZW9mIF9lP3RoaXMubG9nZ2VyLmVycm9yKCJBIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBvY2N1cnJlZCB3aGlsZSBzZW5kaW5nIHJlc3BvbnNlIik6ZSBpbnN0YW5jZW9mIFBlP3RoaXMubG9nZ2VyLmVycm9yKCJTZXNzaW9uIGVuZGVkIGJlZm9yZSByZXNwb25zZSBjb3VsZCBiZSBmb3JtdWxhdGVkIGFuZCBzZW50ICh3aGlsZSB3YWl0aW5nIGZvciBQUkFDSykiKTplIGluc3RhbmNlb2YgRiYmdGhpcy5sb2dnZXIuZXJyb3IoIlNlc3Npb24gY2hhbmdlZCBzdGF0ZSBiZWZvcmUgcmVzcG9uc2UgY291bGQgYmUgZm9ybXVsYXRlZCBhbmQgc2VudCIpLHRoaXMuc3RhdGU9PT1GZS5Jbml0aWFsfHx0aGlzLnN0YXRlPT09RmUuRXN0YWJsaXNoaW5nKXRyeXt0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5yZWplY3Qoe3N0YXR1c0NvZGU6dH0pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpfWNhdGNoKGUpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKCJBbiBlcnJvciBvY2N1cnJlZCBhdHRlbXB0aW5nIHRvIHJlamVjdCB0aGUgcmVxdWVzdCB3aGlsZSBoYW5kbGluZyBhbm90aGVyIGVycm9yIiksZX1pZighdGhpcy5pc0NhbmNlbGVkKXRocm93IGU7dGhpcy5sb2dnZXIud2FybigiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYXR0ZW1wdGluZyB0byBmb3JtdWxhdGUgYW5kIHNlbmQgYSByZXNwb25zZSB0byBhbiBpbmNvbWluZyBJTlZJVEUuIEhvd2V2ZXIgYSBDQU5DRUwgd2FzIHJlY2VpdmVkIGFuZCBwcm9jZXNzZWQgd2hpbGUgZG9pbmcgc28gd2hpY2ggY2FuIChhbmQgb2Z0ZW4gZG9lcykgcmVzdWx0IGluIGVycm9ycyBvY2N1cnJpbmcgYXMgdGhlIHNlc3Npb24gdGVybWluYXRlcyBpbiB0aGUgbWVhbnRpbWUuIFNhaWQgZXJyb3IgaXMgYmVpbmcgaWdub3JlZC4iKX1vbkFja1RpbWVvdXQoKXtpZih0aGlzLmxvZ2dlci5sb2coIkludml0YXRpb24ub25BY2tUaW1lb3V0IiksIXRoaXMuZGlhbG9nKXRocm93IG5ldyBFcnJvcigiRGlhbG9nIHVuZGVmaW5lZC4iKTt0aGlzLmxvZ2dlci5sb2coIk5vIEFDSyByZWNlaXZlZCBmb3IgYW4gZXh0ZW5kZWQgcGVyaW9kIG9mIHRpbWUsIHRlcm1pbmF0aW5nIHNlc3Npb24iKSx0aGlzLmRpYWxvZy5ieWUoKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKX1zZW5kQWNjZXB0KGU9e30pe3JldHVybiB0aGlzLndhaXRpbmdGb3JQcmFjaz90aGlzLndhaXRGb3JBcnJpdmFsT2ZQcmFjaygpLnRoZW4oKCk9PmNsZWFyVGltZW91dCh0aGlzLnVzZXJOb0Fuc3dlclRpbWVyKSkudGhlbigoKT0+dGhpcy5nZW5lcmF0ZVJlc3BvbnNlT2ZmZXJBbnN3ZXIodGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QsZSkpLnRoZW4oZT0+dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QuYWNjZXB0KHtzdGF0dXNDb2RlOjIwMCxib2R5OmV9KSk6KGNsZWFyVGltZW91dCh0aGlzLnVzZXJOb0Fuc3dlclRpbWVyKSx0aGlzLmdlbmVyYXRlUmVzcG9uc2VPZmZlckFuc3dlcih0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdCxlKS50aGVuKGU9PnRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LmFjY2VwdCh7c3RhdHVzQ29kZToyMDAsYm9keTplfSkpKX1zZW5kUHJvZ3Jlc3MoZT17fSl7Y29uc3QgdD1lLnN0YXR1c0NvZGV8fDE4MCxzPWUucmVhc29uUGhyYXNlLGk9KGUuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSxyPWUuYm9keT9TKGUuYm9keSk6dm9pZCAwO2lmKDE4Mz09PXQmJiFyKXJldHVybiB0aGlzLnNlbmRQcm9ncmVzc1dpdGhTRFAoZSk7dHJ5e2NvbnN0IGU9dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucHJvZ3Jlc3Moe3N0YXR1c0NvZGU6dCxyZWFzb25QaHJhc2U6cyxleHRyYUhlYWRlcnM6aSxib2R5OnJ9KTtyZXR1cm4gdGhpcy5fZGlhbG9nPWUuc2Vzc2lvbixQcm9taXNlLnJlc29sdmUoZSl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfX1zZW5kUHJvZ3Jlc3NXaXRoU0RQKGU9e30pe2NvbnN0IHQ9ZS5zdGF0dXNDb2RlfHwxODMscz1lLnJlYXNvblBocmFzZSxpPShlLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7cmV0dXJuIHRoaXMuZ2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VyKHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LGUpLnRoZW4oZT0+dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QucHJvZ3Jlc3Moe3N0YXR1c0NvZGU6dCxyZWFzb25QaHJhc2U6cyxleHRyYUhlYWRlcnM6aSxib2R5OmV9KSkudGhlbihlPT4odGhpcy5fZGlhbG9nPWUuc2Vzc2lvbixlKSl9c2VuZFByb2dyZXNzUmVsaWFibGUoZT17fSl7cmV0dXJuIGUuZXh0cmFIZWFkZXJzPShlLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksZS5leHRyYUhlYWRlcnMucHVzaCgiUmVxdWlyZTogMTAwcmVsIiksZS5leHRyYUhlYWRlcnMucHVzaCgiUlNlcTogIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKSksdGhpcy5zZW5kUHJvZ3Jlc3NXaXRoU0RQKGUpfXNlbmRQcm9ncmVzc1JlbGlhYmxlV2FpdEZvclByYWNrKGU9e30pe2NvbnN0IHQ9ZS5zdGF0dXNDb2RlfHwxODMscz1lLnJlYXNvblBocmFzZSxpPShlLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7bGV0IHI7cmV0dXJuIGkucHVzaCgiUmVxdWlyZTogMTAwcmVsIiksaS5wdXNoKCJSU2VxOiAiK3RoaXMucnNlcSsrKSxuZXcgUHJvbWlzZSgobixvKT0+e3RoaXMud2FpdGluZ0ZvclByYWNrPSEwLHRoaXMuZ2VuZXJhdGVSZXNwb25zZU9mZmVyQW5zd2VyKHRoaXMuaW5jb21pbmdJbnZpdGVSZXF1ZXN0LGUpLnRoZW4oZT0+KHI9ZSx0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5wcm9ncmVzcyh7c3RhdHVzQ29kZTp0LHJlYXNvblBocmFzZTpzLGV4dHJhSGVhZGVyczppLGJvZHk6cn0pKSkudGhlbihhPT57bGV0IGMsaDt0aGlzLl9kaWFsb2c9YS5zZXNzaW9uLGEuc2Vzc2lvbi5kZWxlZ2F0ZT17b25QcmFjazp0PT57Yz10LGNsZWFyVGltZW91dChkKSxjbGVhclRpbWVvdXQodSksdGhpcy53YWl0aW5nRm9yUHJhY2smJih0aGlzLndhaXRpbmdGb3JQcmFjaz0hMSx0aGlzLmhhbmRsZVByYWNrT2ZmZXJBbnN3ZXIoYyxlKS50aGVuKGU9Pnt0cnl7aD1jLmFjY2VwdCh7c3RhdHVzQ29kZToyMDAsYm9keTplfSksdGhpcy5wcmFja0Fycml2ZWQoKSxuKHtwcmFja1JlcXVlc3Q6YyxwcmFja1Jlc3BvbnNlOmgscHJvZ3Jlc3NSZXNwb25zZTphfSl9Y2F0Y2goZSl7byhlKX19KS5jYXRjaChlPT5vKGUpKSl9fTtjb25zdCBkPXNldFRpbWVvdXQoKCk9Pnt0aGlzLndhaXRpbmdGb3JQcmFjayYmKHRoaXMud2FpdGluZ0ZvclByYWNrPSExLHRoaXMubG9nZ2VyLndhcm4oIk5vIFBSQUNLIHJlY2VpdmVkLCByZWplY3RpbmcgSU5WSVRFLiIpLGNsZWFyVGltZW91dCh1KSx0aGlzLnJlamVjdCh7c3RhdHVzQ29kZTo1MDR9KS50aGVuKCgpPT5vKG5ldyBQZSkpLmNhdGNoKGU9Pm8oZSkpKX0sNjQqTi5UMSksZz0oKT0+e3RyeXt0aGlzLmluY29taW5nSW52aXRlUmVxdWVzdC5wcm9ncmVzcyh7c3RhdHVzQ29kZTp0LHJlYXNvblBocmFzZTpzLGV4dHJhSGVhZGVyczppLGJvZHk6cn0pfWNhdGNoKGUpe3JldHVybiB0aGlzLndhaXRpbmdGb3JQcmFjaz0hMSx2b2lkIG8oZSl9dT1zZXRUaW1lb3V0KGcsbCo9Mil9O2xldCBsPU4uVDEsdT1zZXRUaW1lb3V0KGcsbCl9KS5jYXRjaChlPT57dGhpcy53YWl0aW5nRm9yUHJhY2s9ITEsbyhlKX0pfSl9c2VuZFByb2dyZXNzVHJ5aW5nKCl7dHJ5e2NvbnN0IGU9dGhpcy5pbmNvbWluZ0ludml0ZVJlcXVlc3QudHJ5aW5nKCk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShlKX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9fXdhaXRGb3JBcnJpdmFsT2ZQcmFjaygpe2lmKHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZSl0aHJvdyBuZXcgRXJyb3IoIkFscmVhZHkgd2FpdGluZyBmb3IgUFJBQ0siKTtyZXR1cm4gdGhpcy53YWl0aW5nRm9yUHJhY2tQcm9taXNlPW5ldyBQcm9taXNlKChlLHQpPT57dGhpcy53YWl0aW5nRm9yUHJhY2tSZXNvbHZlPWUsdGhpcy53YWl0aW5nRm9yUHJhY2tSZWplY3Q9dH0pLHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZX1wcmFja0Fycml2ZWQoKXt0aGlzLndhaXRpbmdGb3JQcmFja1Jlc29sdmUmJnRoaXMud2FpdGluZ0ZvclByYWNrUmVzb2x2ZSgpLHRoaXMud2FpdGluZ0ZvclByYWNrUHJvbWlzZT12b2lkIDAsdGhpcy53YWl0aW5nRm9yUHJhY2tSZXNvbHZlPXZvaWQgMCx0aGlzLndhaXRpbmdGb3JQcmFja1JlamVjdD12b2lkIDB9cHJhY2tOZXZlckFycml2ZWQoKXt0aGlzLndhaXRpbmdGb3JQcmFja1JlamVjdCYmdGhpcy53YWl0aW5nRm9yUHJhY2tSZWplY3QobmV3IFBlKSx0aGlzLndhaXRpbmdGb3JQcmFja1Byb21pc2U9dm9pZCAwLHRoaXMud2FpdGluZ0ZvclByYWNrUmVzb2x2ZT12b2lkIDAsdGhpcy53YWl0aW5nRm9yUHJhY2tSZWplY3Q9dm9pZCAwfX1jbGFzcyBLZSBleHRlbmRzIEJle2NvbnN0cnVjdG9yKGUsdCxzPXt9KXtzdXBlcihlLHMpLHRoaXMuZGlzcG9zZWQ9ITEsdGhpcy5lYXJseU1lZGlhPSExLHRoaXMuZWFybHlNZWRpYVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJzPW5ldyBNYXAsdGhpcy5pc0NhbmNlbGVkPSExLHRoaXMuaW52aXRlV2l0aG91dFNkcD0hMSx0aGlzLmxvZ2dlcj1lLmdldExvZ2dlcigic2lwLkludml0ZXIiKSx0aGlzLmVhcmx5TWVkaWE9dm9pZCAwIT09cy5lYXJseU1lZGlhP3MuZWFybHlNZWRpYTp0aGlzLmVhcmx5TWVkaWEsdGhpcy5mcm9tVGFnPW0oKSx0aGlzLmludml0ZVdpdGhvdXRTZHA9dm9pZCAwIT09cy5pbnZpdGVXaXRob3V0U2RwP3MuaW52aXRlV2l0aG91dFNkcDp0aGlzLmludml0ZVdpdGhvdXRTZHA7Y29uc3QgaT1PYmplY3QuYXNzaWduKHt9LHMpO2kucGFyYW1zPU9iamVjdC5hc3NpZ24oe30scy5wYXJhbXMpO2NvbnN0IHI9cy5hbm9ueW1vdXN8fCExLG49ZS5jb250YWN0LnRvU3RyaW5nKHthbm9ueW1vdXM6cixvdXRib3VuZDpyPyFlLmNvbnRhY3QudGVtcEdydXU6IWUuY29udGFjdC5wdWJHcnV1fSk7ciYmZS5jb25maWd1cmF0aW9uLnVyaSYmKGkucGFyYW1zLmZyb21EaXNwbGF5TmFtZT0iQW5vbnltb3VzIixpLnBhcmFtcy5mcm9tVXJpPSJzaXA6YW5vbnltb3VzQGFub255bW91cy5pbnZhbGlkIik7bGV0IG89ZS51c2VyQWdlbnRDb3JlLmNvbmZpZ3VyYXRpb24uYW9yO2lmKGkucGFyYW1zLmZyb21VcmkmJihvPSJzdHJpbmciPT10eXBlb2YgaS5wYXJhbXMuZnJvbVVyaT9kLlVSSVBhcnNlKGkucGFyYW1zLmZyb21VcmkpOmkucGFyYW1zLmZyb21VcmkpLCFvKXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgZnJvbSBVUkk6ICIraS5wYXJhbXMuZnJvbVVyaSk7bGV0IGE9dDtpZihpLnBhcmFtcy50b1VyaSYmKGE9InN0cmluZyI9PXR5cGVvZiBpLnBhcmFtcy50b1VyaT9kLlVSSVBhcnNlKGkucGFyYW1zLnRvVXJpKTppLnBhcmFtcy50b1VyaSksIWEpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCB0byBVUkk6ICIraS5wYXJhbXMudG9VcmkpO2NvbnN0IGM9T2JqZWN0LmFzc2lnbih7fSxpLnBhcmFtcyk7Yy5mcm9tVGFnPXRoaXMuZnJvbVRhZztjb25zdCBoPShpLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7ciYmZS5jb25maWd1cmF0aW9uLnVyaSYmKGgucHVzaCgiUC1QcmVmZXJyZWQtSWRlbnRpdHk6ICIrZS5jb25maWd1cmF0aW9uLnVyaS50b1N0cmluZygpKSxoLnB1c2goIlByaXZhY3k6IGlkIikpLGgucHVzaCgiQ29udGFjdDogIituKSxoLnB1c2goIkFsbG93OiAiK1siQUNLIiwiQ0FOQ0VMIiwiSU5WSVRFIiwiTUVTU0FHRSIsIkJZRSIsIk9QVElPTlMiLCJJTkZPIiwiTk9USUZZIiwiUkVGRVIiXS50b1N0cmluZygpKSxlLmNvbmZpZ3VyYXRpb24uc2lwRXh0ZW5zaW9uMTAwcmVsPT09TGUuUmVxdWlyZWQmJmgucHVzaCgiUmVxdWlyZTogMTAwcmVsIiksZS5jb25maWd1cmF0aW9uLnNpcEV4dGVuc2lvblJlcGxhY2VzPT09TGUuUmVxdWlyZWQmJmgucHVzaCgiUmVxdWlyZTogcmVwbGFjZXMiKSxpLmV4dHJhSGVhZGVycz1oO3RoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZT1lLnVzZXJBZ2VudENvcmUubWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UobC5JTlZJVEUsdCxvLGEsYyxoLHZvaWQgMCksdGhpcy5fY29udGFjdD1uLHRoaXMuX3JlZmVycmFsSW52aXRlck9wdGlvbnM9aSx0aGlzLl9yZW5kZXJib2R5PXMucmVuZGVyYm9keSx0aGlzLl9yZW5kZXJ0eXBlPXMucmVuZGVydHlwZSx0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzPXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycyx0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucz1zLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHRoaXMuX2lkPXRoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5jYWxsSWQrdGhpcy5mcm9tVGFnLHRoaXMudXNlckFnZW50Ll9zZXNzaW9uc1t0aGlzLl9pZF09dGhpc31kaXNwb3NlKCl7aWYodGhpcy5kaXNwb3NlZClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7c3dpdGNoKHRoaXMuZGlzcG9zZWQ9ITAsdGhpcy5kaXNwb3NlRWFybHlNZWRpYSgpLHRoaXMuc3RhdGUpe2Nhc2UgRmUuSW5pdGlhbDpjYXNlIEZlLkVzdGFibGlzaGluZzpyZXR1cm4gdGhpcy5jYW5jZWwoKS50aGVuKCgpPT5zdXBlci5kaXNwb3NlKCkpO2Nhc2UgRmUuRXN0YWJsaXNoZWQ6Y2FzZSBGZS5UZXJtaW5hdGluZzpjYXNlIEZlLlRlcm1pbmF0ZWQ6cmV0dXJuIHN1cGVyLmRpc3Bvc2UoKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biBzdGF0ZS4iKX19Z2V0IGJvZHkoKXtyZXR1cm4gdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmJvZHl9Z2V0IGxvY2FsSWRlbnRpdHkoKXtyZXR1cm4gdGhpcy5vdXRnb2luZ1JlcXVlc3RNZXNzYWdlLmZyb219Z2V0IHJlbW90ZUlkZW50aXR5KCl7cmV0dXJuIHRoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS50b31nZXQgcmVxdWVzdCgpe3JldHVybiB0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2V9Y2FuY2VsKGU9e30pe2lmKHRoaXMubG9nZ2VyLmxvZygiSW52aXRlci5jYW5jZWwiKSx0aGlzLnN0YXRlIT09RmUuSW5pdGlhbCYmdGhpcy5zdGF0ZSE9PUZlLkVzdGFibGlzaGluZyl7Y29uc3QgZT1uZXcgRXJyb3IoIkludmFsaWQgc2Vzc2lvbiBzdGF0ZSAiK3RoaXMuc3RhdGUpO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLFByb21pc2UucmVqZWN0KGUpfWlmKHRoaXMuaXNDYW5jZWxlZD0hMCx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGluZyksdGhpcy5vdXRnb2luZ0ludml0ZVJlcXVlc3Qpe2xldCB0O2Uuc3RhdHVzQ29kZSYmZS5yZWFzb25QaHJhc2UmJih0PWZ1bmN0aW9uKGUsdCl7aWYoZSYmZTwyMDB8fGU+Njk5KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgc3RhdHVzQ29kZTogIitlKTtpZihlKXtyZXR1cm4iU0lQO2NhdXNlPSIrZSsnO3RleHQ9IicrKGYoZSl8fHQpKyciJ319KGUuc3RhdHVzQ29kZSxlLnJlYXNvblBocmFzZSkpLHRoaXMub3V0Z29pbmdJbnZpdGVSZXF1ZXN0LmNhbmNlbCh0LGUpfWVsc2UgdGhpcy5sb2dnZXIud2FybigiQ2FuY2VsZWQgc2Vzc2lvbiBiZWZvcmUgSU5WSVRFIHdhcyBzZW50IiksdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfWludml0ZShlPXt9KXtpZih0aGlzLmxvZ2dlci5sb2coIkludml0ZXIuaW52aXRlIiksdGhpcy5zdGF0ZSE9PUZlLkluaXRpYWwpcmV0dXJuIHN1cGVyLmludml0ZShlKTtpZihlLndpdGhvdXRTZHB8fHRoaXMuaW52aXRlV2l0aG91dFNkcClyZXR1cm4gdGhpcy5fcmVuZGVyYm9keSYmdGhpcy5fcmVuZGVydHlwZSYmKHRoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5ib2R5PXtjb250ZW50VHlwZTp0aGlzLl9yZW5kZXJ0eXBlLGJvZHk6dGhpcy5fcmVuZGVyYm9keX0pLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLkVzdGFibGlzaGluZyksUHJvbWlzZS5yZXNvbHZlKHRoaXMuc2VuZEludml0ZShlKSk7Y29uc3QgdD17c2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6dGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczp0aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzfTtyZXR1cm4gdGhpcy5nZXRPZmZlcih0KS50aGVuKHQ9Pih0aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2UuYm9keT17Ym9keTp0LmNvbnRlbnQsY29udGVudFR5cGU6dC5jb250ZW50VHlwZX0sdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuRXN0YWJsaXNoaW5nKSx0aGlzLnNlbmRJbnZpdGUoZSkpKS5jYXRjaChlPT57dGhyb3cgdGhpcy5sb2dnZXIubG9nKGUubWVzc2FnZSksdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCksZX0pfXNlbmRJbnZpdGUoZT17fSl7cmV0dXJuIHRoaXMub3V0Z29pbmdJbnZpdGVSZXF1ZXN0PXRoaXMudXNlckFnZW50LnVzZXJBZ2VudENvcmUuaW52aXRlKHRoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZSx7b25BY2NlcHQ6dD0+dGhpcy5kaWFsb2c/KHRoaXMubG9nZ2VyLmxvZygiQWRkaXRpb25hbCBjb25maXJtZWQgZGlhbG9nLCBzZW5kaW5nIEFDSyBhbmQgQllFIiksdm9pZCB0aGlzLmFja0FuZEJ5ZSh0KSk6dGhpcy5pc0NhbmNlbGVkPyh0aGlzLmxvZ2dlci5sb2coIkNhbmNlbGVkIHNlc3Npb24gYWNjZXB0ZWQsIHNlbmRpbmcgQUNLIGFuZCBCWUUiKSx0aGlzLmFja0FuZEJ5ZSh0KSx2b2lkIHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpKToodGhpcy5ub3RpZnlSZWZlcmVyKHQpLHZvaWQgdGhpcy5vbkFjY2VwdCh0KS50aGVuKCgpPT57dGhpcy5kaXNwb3NlRWFybHlNZWRpYSgpfSkuY2F0Y2goKCk9Pnt0aGlzLmRpc3Bvc2VFYXJseU1lZGlhKCl9KS50aGVuKCgpPT57ZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCh0KX0pKSxvblByb2dyZXNzOnQ9Pnt0aGlzLmlzQ2FuY2VsZWR8fCh0aGlzLm5vdGlmeVJlZmVyZXIodCksdGhpcy5vblByb2dyZXNzKHQpLmNhdGNoKCgpPT57dGhpcy5kaXNwb3NlRWFybHlNZWRpYSgpfSkudGhlbigoKT0+e2UucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblByb2dyZXNzJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblByb2dyZXNzKHQpfSkpfSxvblJlZGlyZWN0OnQ9Pnt0aGlzLm5vdGlmeVJlZmVyZXIodCksdGhpcy5vblJlZGlyZWN0KHQpLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlZGlyZWN0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlZGlyZWN0KHQpfSxvblJlamVjdDp0PT57dGhpcy5ub3RpZnlSZWZlcmVyKHQpLHRoaXMub25SZWplY3QodCksZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uUmVqZWN0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlamVjdCh0KX0sb25Ucnlpbmc6dD0+e3RoaXMubm90aWZ5UmVmZXJlcih0KSx0aGlzLm9uVHJ5aW5nKHQpLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblRyeWluZyYmZS5yZXF1ZXN0RGVsZWdhdGUub25UcnlpbmcodCl9fSksdGhpcy5vdXRnb2luZ0ludml0ZVJlcXVlc3R9ZGlzcG9zZUVhcmx5TWVkaWEoKXt0aGlzLmVhcmx5TWVkaWFTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVycy5mb3JFYWNoKGU9PntlLmNsb3NlKCl9KSx0aGlzLmVhcmx5TWVkaWFTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVycy5jbGVhcigpfW5vdGlmeVJlZmVyZXIoZSl7aWYoIXRoaXMuX3JlZmVycmVkKXJldHVybjtpZighKHRoaXMuX3JlZmVycmVkIGluc3RhbmNlb2YgQmUpKXRocm93IG5ldyBFcnJvcigiUmVmZXJyZWQgc2Vzc2lvbiBub3QgaW5zdGFuY2Ugb2Ygc2Vzc2lvbiIpO2lmKCF0aGlzLl9yZWZlcnJlZC5kaWFsb2cpcmV0dXJuO2lmKCFlLm1lc3NhZ2Uuc3RhdHVzQ29kZSl0aHJvdyBuZXcgRXJyb3IoIlN0YXR1cyBjb2RlIHVuZGVmaW5lZC4iKTtpZighZS5tZXNzYWdlLnJlYXNvblBocmFzZSl0aHJvdyBuZXcgRXJyb3IoIlJlYXNvbiBwaHJhc2UgdW5kZWZpbmVkLiIpO2NvbnN0IHQ9YFNJUC8yLjAgJHtlLm1lc3NhZ2Uuc3RhdHVzQ29kZX0gJHtlLm1lc3NhZ2UucmVhc29uUGhyYXNlfWAudHJpbSgpO3RoaXMuX3JlZmVycmVkLmRpYWxvZy5ub3RpZnkodm9pZCAwLHtleHRyYUhlYWRlcnM6WyJFdmVudDogcmVmZXIiLCJTdWJzY3JpcHRpb24tU3RhdGU6IHRlcm1pbmF0ZWQiXSxib2R5Ontjb250ZW50RGlzcG9zaXRpb246InJlbmRlciIsY29udGVudFR5cGU6Im1lc3NhZ2Uvc2lwZnJhZyIsY29udGVudDp0fX0pLmRlbGVnYXRlPXtvblJlamVjdDooKT0+e3RoaXMuX3JlZmVycmVkPXZvaWQgMH19fW9uQWNjZXB0KGUpe2lmKHRoaXMubG9nZ2VyLmxvZygiSW52aXRlci5vbkFjY2VwdCIpLHRoaXMuc3RhdGUhPT1GZS5Fc3RhYmxpc2hpbmcpcmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKGBBY2NlcHQgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVzcG9uc2VgKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgc2Vzc2lvbiBzdGF0ZSAiK3RoaXMuc3RhdGUpKTtjb25zdCB0PWUubWVzc2FnZSxzPWUuc2Vzc2lvbjt0Lmhhc0hlYWRlcigiUC1Bc3NlcnRlZC1JZGVudGl0eSIpJiYodGhpcy5fYXNzZXJ0ZWRJZGVudGl0eT1kLm5hbWVBZGRySGVhZGVyUGFyc2UodC5nZXRIZWFkZXIoIlAtQXNzZXJ0ZWQtSWRlbnRpdHkiKSkpLHMuZGVsZWdhdGU9e29uQWNrOmU9PnRoaXMub25BY2tSZXF1ZXN0KGUpLG9uQnllOmU9PnRoaXMub25CeWVSZXF1ZXN0KGUpLG9uSW5mbzplPT50aGlzLm9uSW5mb1JlcXVlc3QoZSksb25JbnZpdGU6ZT0+dGhpcy5vbkludml0ZVJlcXVlc3QoZSksb25NZXNzYWdlOmU9PnRoaXMub25NZXNzYWdlUmVxdWVzdChlKSxvbk5vdGlmeTplPT50aGlzLm9uTm90aWZ5UmVxdWVzdChlKSxvblByYWNrOmU9PnRoaXMub25QcmFja1JlcXVlc3QoZSksb25SZWZlcjplPT50aGlzLm9uUmVmZXJSZXF1ZXN0KGUpfSx0aGlzLl9kaWFsb2c9cztjb25zdCBpPXRoaXMuX3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLHI9dGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVycztzd2l0Y2gocy5zaWduYWxpbmdTdGF0ZSl7Y2FzZSBQLkluaXRpYWw6Y2FzZSBQLkhhdmVMb2NhbE9mZmVyOnJldHVybiB0aGlzLmxvZ2dlci5lcnJvcigiUmVjZWl2ZWQgMnh4IHJlc3BvbnNlIHRvIElOVklURSB3aXRob3V0IGEgc2Vzc2lvbiBkZXNjcmlwdGlvbiIpLHRoaXMuYWNrQW5kQnllKGUsNDAwLCJNaXNzaW5nIHNlc3Npb24gZGVzY3JpcHRpb24iKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKSxQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkJhZCBNZWRpYSBEZXNjcmlwdGlvbiIpKTtjYXNlIFAuSGF2ZVJlbW90ZU9mZmVyOntpZighdGhpcy5fZGlhbG9nLm9mZmVyKXRocm93IG5ldyBFcnJvcihgU2Vzc2lvbiBvZmZlciB1bmRlZmluZWQgaW4gc2lnbmFsaW5nIHN0YXRlICR7dGhpcy5fZGlhbG9nLnNpZ25hbGluZ1N0YXRlfS5gKTtjb25zdCB0PXtzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczppLHNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM6cn07cmV0dXJuIHRoaXMuc2V0T2ZmZXJBbmRHZXRBbnN3ZXIodGhpcy5fZGlhbG9nLm9mZmVyLHQpLnRoZW4odD0+e2UuYWNrKHtib2R5OnR9KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5Fc3RhYmxpc2hlZCl9KS5jYXRjaCh0PT57dGhyb3cgdGhpcy5hY2tBbmRCeWUoZSw0ODgsIkludmFsaWQgc2Vzc2lvbiBkZXNjcmlwdGlvbiIpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpLHR9KX1jYXNlIFAuU3RhYmxlOntpZih0aGlzLmVhcmx5TWVkaWFTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVycy5zaXplPjApe2NvbnN0IHQ9dGhpcy5lYXJseU1lZGlhU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcnMuZ2V0KHMuaWQpO2lmKCF0KXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIHVuZGVmaW5lZC4iKTtyZXR1cm4gdGhpcy5zZXRTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyKHQpLHRoaXMuZWFybHlNZWRpYVNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJzLmRlbGV0ZShzLmlkKSxlLmFjaygpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLkVzdGFibGlzaGVkKSxQcm9taXNlLnJlc29sdmUoKX1pZih0aGlzLmVhcmx5TWVkaWFEaWFsb2cpe2lmKHRoaXMuZWFybHlNZWRpYURpYWxvZyE9PXMpe2lmKHRoaXMuZWFybHlNZWRpYSl7Y29uc3QgZT0iWW91IGhhdmUgc2V0IHRoZSAnZWFybHlNZWRpYScgb3B0aW9uIHRvICd0cnVlJyB3aGljaCByZXF1aXJlcyB0aGF0IHlvdXIgSU5WSVRFIHJlcXVlc3RzIGRvIG5vdCBmb3JrIGFuZCB5ZXQgdGhpcyBJTlZJVEUgcmVxdWVzdCBkaWQgaW4gZmFjdCBmb3JrLiBDb25zZXF1ZW50aWFsbHkgYW5kIG5vdCBzdXJwcmlzaW5nbHkgdGhlIGVuZCBwb2ludCB3aGljaCBhY2NlcHRlZCB0aGUgSU5WSVRFIChjb25maXJtZWQgZGlhbG9nKSBkb2VzIG5vdCBtYXRjaCB0aGUgZW5kIHBvaW50IHdpdGggd2hpY2ggZWFybHkgbWVkaWEgaGFzIGJlZW4gc2V0dXAgKGVhcmx5IGRpYWxvZykgYW5kIHRodXMgdGhpcyBzZXNzaW9uIGlzIHVuYWJsZSB0byBwcm9jZWVkLiBJbiBhY2NvcmRhbmNlIHdpdGggdGhlIFNJUCBzcGVjaWZpY2F0aW9ucywgdGhlIFNJUCBzZXJ2ZXJzIHlvdXIgZW5kIHBvaW50IGlzIGNvbm5lY3RlZCB0byBkZXRlcm1pbmUgaWYgYW4gSU5WSVRFIGZvcmtzIGFuZCB0aGUgZm9ya2luZyBiZWhhdmlvciBvZiB0aG9zZSBzZXJ2ZXJzIGNhbm5vdCBiZSBjb250cm9sbGVkIGJ5IHRoaXMgbGlicmFyeS4gSWYgeW91IHdpc2ggdG8gdXNlIGVhcmx5IG1lZGlhIHdpdGggdGhpcyBsaWJyYXJ5IHlvdSBtdXN0IGNvbmZpZ3VyZSB0aG9zZSBzZXJ2ZXJzIGFjY29yZGluZ2x5LiBBbHRlcm5hdGl2ZWx5IHlvdSBtYXkgc2V0IHRoZSAnZWFybHlNZWRpYScgdG8gJ2ZhbHNlJyB3aGljaCB3aWxsIGFsbG93IHRoaXMgbGlicmFyeSB0byBmdW5jdGlvbiB3aXRoIGFueSBJTlZJVEUgcmVxdWVzdHMgd2hpY2ggZG8gZm9yay4iO3RoaXMubG9nZ2VyLmVycm9yKGUpfWNvbnN0IHQ9bmV3IEVycm9yKCJFYXJseSBtZWRpYSBkaWFsb2cgZG9lcyBub3QgZXF1YWwgY29uZmlybWVkIGRpYWxvZywgdGVybWluYXRpbmcgc2Vzc2lvbiIpO3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHRoaXMuYWNrQW5kQnllKGUsNDg4LCJOb3QgQWNjZXB0YWJsZSBIZXJlIiksdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCksUHJvbWlzZS5yZWplY3QodCl9cmV0dXJuIGUuYWNrKCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuRXN0YWJsaXNoZWQpLFByb21pc2UucmVzb2x2ZSgpfWNvbnN0IHQ9cy5hbnN3ZXI7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJBbnN3ZXIgaXMgdW5kZWZpbmVkLiIpO2NvbnN0IG49e3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOmksc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck1vZGlmaWVyczpyfTtyZXR1cm4gdGhpcy5zZXRBbnN3ZXIodCxuKS50aGVuKCgpPT57bGV0IHQ7dGhpcy5fcmVuZGVyYm9keSYmdGhpcy5fcmVuZGVydHlwZSYmKHQ9e2JvZHk6e2NvbnRlbnREaXNwb3NpdGlvbjoicmVuZGVyIixjb250ZW50VHlwZTp0aGlzLl9yZW5kZXJ0eXBlLGNvbnRlbnQ6dGhpcy5fcmVuZGVyYm9keX19KSxlLmFjayh0KSx0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5Fc3RhYmxpc2hlZCl9KS5jYXRjaCh0PT57dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSx0aGlzLmFja0FuZEJ5ZShlLDQ4OCwiTm90IEFjY2VwdGFibGUgSGVyZSIpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpLHR9KX1jYXNlIFAuQ2xvc2VkOnJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlRlcm1pbmF0ZWQuIikpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHNlc3Npb24gc2lnbmFsaW5nIHN0YXRlLiIpfX1vblByb2dyZXNzKGUpe2lmKHRoaXMubG9nZ2VyLmxvZygiSW52aXRlci5vblByb2dyZXNzIiksdGhpcy5zdGF0ZSE9PUZlLkVzdGFibGlzaGluZylyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoYFByb2dyZXNzIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlc3BvbnNlYCksUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHNlc3Npb24gc3RhdGUgIit0aGlzLnN0YXRlKSk7aWYoIXRoaXMub3V0Z29pbmdJbnZpdGVSZXF1ZXN0KXRocm93IG5ldyBFcnJvcigiT3V0Z29pbmcgSU5WSVRFIHJlcXVlc3QgdW5kZWZpbmVkLiIpO2NvbnN0IHQ9ZS5tZXNzYWdlLHM9ZS5zZXNzaW9uO3QuaGFzSGVhZGVyKCJQLUFzc2VydGVkLUlkZW50aXR5IikmJih0aGlzLl9hc3NlcnRlZElkZW50aXR5PWQubmFtZUFkZHJIZWFkZXJQYXJzZSh0LmdldEhlYWRlcigiUC1Bc3NlcnRlZC1JZGVudGl0eSIpKSk7Y29uc3QgaT10LmdldEhlYWRlcigicmVxdWlyZSIpLHI9dC5nZXRIZWFkZXIoInJzZXEiKSxuPSEhKGkmJmkuaW5jbHVkZXMoIjEwMHJlbCIpJiZyP051bWJlcihyKTp2b2lkIDApLG89W107biYmby5wdXNoKCJSQWNrOiAiK3QuZ2V0SGVhZGVyKCJyc2VxIikrIiAiK3QuZ2V0SGVhZGVyKCJjc2VxIikpO2NvbnN0IGE9dGhpcy5fc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMsYz10aGlzLl9zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzO3N3aXRjaChzLnNpZ25hbGluZ1N0YXRlKXtjYXNlIFAuSW5pdGlhbDpyZXR1cm4gbiYmKHRoaXMubG9nZ2VyLndhcm4oIkZpcnN0IHJlbGlhYmxlIHByb3Zpc2lvbmFsIHJlc3BvbnNlIHJlY2VpdmVkIE1VU1QgY29udGFpbiBhbiBvZmZlciB3aGVuIElOVklURSBkb2VzIG5vdCBjb250YWluIGFuIG9mZmVyLiIpLGUucHJhY2soe2V4dHJhSGVhZGVyczpvfSkpLFByb21pc2UucmVzb2x2ZSgpO2Nhc2UgUC5IYXZlTG9jYWxPZmZlcjpyZXR1cm4gbiYmZS5wcmFjayh7ZXh0cmFIZWFkZXJzOm99KSxQcm9taXNlLnJlc29sdmUoKTtjYXNlIFAuSGF2ZVJlbW90ZU9mZmVyOmlmKCFuKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJOb24tcmVsaWFibGUgcHJvdmlzaW9uYWwgcmVzcG9uc2UgTVVTVCBOT1QgY29udGFpbiBhbiBpbml0aWFsIG9mZmVyLCBkaXNjYXJkaW5nIHJlc3BvbnNlLiIpLFByb21pc2UucmVzb2x2ZSgpO3tjb25zdCBpPXRoaXMuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnkodGhpcyx0aGlzLnVzZXJBZ2VudC5jb25maWd1cmF0aW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJGYWN0b3J5T3B0aW9uc3x8e30pO3JldHVybiB0aGlzLmVhcmx5TWVkaWFTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVycy5zZXQocy5pZCxpKSxpLnNldERlc2NyaXB0aW9uKHQuYm9keSxhLGMpLnRoZW4oKCk9PmkuZ2V0RGVzY3JpcHRpb24oYSxjKSkudGhlbih0PT57Y29uc3Qgcz17Y29udGVudERpc3Bvc2l0aW9uOiJzZXNzaW9uIixjb250ZW50VHlwZTp0LmNvbnRlbnRUeXBlLGNvbnRlbnQ6dC5ib2R5fTtlLnByYWNrKHtleHRyYUhlYWRlcnM6byxib2R5OnN9KX0pLmNhdGNoKGU9Pnt0aHJvdyB0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKSxlfSl9Y2FzZSBQLlN0YWJsZTppZihuJiZlLnByYWNrKHtleHRyYUhlYWRlcnM6b30pLHRoaXMuZWFybHlNZWRpYSYmIXRoaXMuZWFybHlNZWRpYURpYWxvZyl7dGhpcy5lYXJseU1lZGlhRGlhbG9nPXM7Y29uc3QgZT1zLmFuc3dlcjtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkFuc3dlciBpcyB1bmRlZmluZWQuIik7Y29uc3QgdD17c2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnM6YSxzZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyTW9kaWZpZXJzOmN9O3JldHVybiB0aGlzLnNldEFuc3dlcihlLHQpLmNhdGNoKGU9Pnt0aHJvdyB0aGlzLnN0YXRlVHJhbnNpdGlvbihGZS5UZXJtaW5hdGVkKSxlfSl9cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2Nhc2UgUC5DbG9zZWQ6cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiVGVybWluYXRlZC4iKSk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc2Vzc2lvbiBzaWduYWxpbmcgc3RhdGUuIil9fW9uUmVkaXJlY3QoZSl7dGhpcy5sb2dnZXIubG9nKCJJbnZpdGVyLm9uUmVkaXJlY3QiKSx0aGlzLnN0YXRlPT09RmUuRXN0YWJsaXNoaW5nfHx0aGlzLnN0YXRlPT09RmUuVGVybWluYXRpbmc/dGhpcy5zdGF0ZVRyYW5zaXRpb24oRmUuVGVybWluYXRlZCk6dGhpcy5sb2dnZXIuZXJyb3IoYFJlZGlyZWN0IHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlc3BvbnNlYCl9b25SZWplY3QoZSl7dGhpcy5sb2dnZXIubG9nKCJJbnZpdGVyLm9uUmVqZWN0IiksdGhpcy5zdGF0ZT09PUZlLkVzdGFibGlzaGluZ3x8dGhpcy5zdGF0ZT09PUZlLlRlcm1pbmF0aW5nP3RoaXMuc3RhdGVUcmFuc2l0aW9uKEZlLlRlcm1pbmF0ZWQpOnRoaXMubG9nZ2VyLmVycm9yKGBSZWplY3QgcmVjZWl2ZWQgd2hpbGUgaW4gc3RhdGUgJHt0aGlzLnN0YXRlfSwgZHJvcHBpbmcgcmVzcG9uc2VgKX1vblRyeWluZyhlKXt0aGlzLmxvZ2dlci5sb2coIkludml0ZXIub25UcnlpbmciKSx0aGlzLnN0YXRlPT09RmUuRXN0YWJsaXNoaW5nfHx0aGlzLmxvZ2dlci5lcnJvcihgVHJ5aW5nIHJlY2VpdmVkIHdoaWxlIGluIHN0YXRlICR7dGhpcy5zdGF0ZX0sIGRyb3BwaW5nIHJlc3BvbnNlYCl9fWNsYXNzIFdle2NvbnN0cnVjdG9yKGUsdCxzLGk9InRleHQvcGxhaW4iLHI9e30pe3RoaXMubG9nZ2VyPWUuZ2V0TG9nZ2VyKCJzaXAuTWVzc2FnZXIiKSxyLnBhcmFtcz1yLnBhcmFtc3x8e307bGV0IG49ZS51c2VyQWdlbnRDb3JlLmNvbmZpZ3VyYXRpb24uYW9yO2lmKHIucGFyYW1zLmZyb21VcmkmJihuPSJzdHJpbmciPT10eXBlb2Ygci5wYXJhbXMuZnJvbVVyaT9kLlVSSVBhcnNlKHIucGFyYW1zLmZyb21VcmkpOnIucGFyYW1zLmZyb21VcmkpLCFuKXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgZnJvbSBVUkk6ICIrci5wYXJhbXMuZnJvbVVyaSk7bGV0IG89dDtpZihyLnBhcmFtcy50b1VyaSYmKG89InN0cmluZyI9PXR5cGVvZiByLnBhcmFtcy50b1VyaT9kLlVSSVBhcnNlKHIucGFyYW1zLnRvVXJpKTpyLnBhcmFtcy50b1VyaSksIW8pdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCB0byBVUkk6ICIrci5wYXJhbXMudG9VcmkpO2NvbnN0IGE9ci5wYXJhbXM/T2JqZWN0LmFzc2lnbih7fSxyLnBhcmFtcyk6e30sYz0oci5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLGg9e2NvbnRlbnREaXNwb3NpdGlvbjoicmVuZGVyIixjb250ZW50VHlwZTppLGNvbnRlbnQ6c307dGhpcy5yZXF1ZXN0PWUudXNlckFnZW50Q29yZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShsLk1FU1NBR0UsdCxuLG8sYSxjLGgpLHRoaXMudXNlckFnZW50PWV9bWVzc2FnZShlPXt9KXtyZXR1cm4gdGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5yZXF1ZXN0KHRoaXMucmVxdWVzdCxlLnJlcXVlc3REZWxlZ2F0ZSksUHJvbWlzZS5yZXNvbHZlKCl9fXZhciBZZSxaZSxKZSx6ZSxYZTshZnVuY3Rpb24oZSl7ZS5Jbml0aWFsPSJJbml0aWFsIixlLlB1Ymxpc2hlZD0iUHVibGlzaGVkIixlLlVucHVibGlzaGVkPSJVbnB1Ymxpc2hlZCIsZS5UZXJtaW5hdGVkPSJUZXJtaW5hdGVkIn0oWWV8fChZZT17fSkpO2NsYXNzIFFle2NvbnN0cnVjdG9yKGUsdCxzLGk9e30pe3RoaXMuZGlzcG9zZWQ9ITEsdGhpcy5fc3RhdGU9WWUuSW5pdGlhbCx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcj1uZXcgTS5FdmVudEVtaXR0ZXIsdGhpcy51c2VyQWdlbnQ9ZSxpLmV4dHJhSGVhZGVycz0oaS5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpLGkuY29udGVudFR5cGU9aS5jb250ZW50VHlwZXx8InRleHQvcGxhaW4iLCJudW1iZXIiIT10eXBlb2YgaS5leHBpcmVzfHxpLmV4cGlyZXMlMSE9MD9pLmV4cGlyZXM9MzYwMDppLmV4cGlyZXM9TnVtYmVyKGkuZXhwaXJlcyksImJvb2xlYW4iIT10eXBlb2YgaS51bnB1Ymxpc2hPbkNsb3NlJiYoaS51bnB1Ymxpc2hPbkNsb3NlPSEwKSx0aGlzLnRhcmdldD10LHRoaXMuZXZlbnQ9cyx0aGlzLm9wdGlvbnM9aSx0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPWkuZXhwaXJlcyx0aGlzLmxvZ2dlcj1lLmdldExvZ2dlcigic2lwLlB1Ymxpc2hlciIpO2NvbnN0IHI9aS5wYXJhbXN8fHt9LG49ci5mcm9tVXJpP3IuZnJvbVVyaTplLnVzZXJBZ2VudENvcmUuY29uZmlndXJhdGlvbi5hb3Isbz1yLnRvVXJpP3IudG9Vcmk6dDtsZXQgYTtpZihpLmJvZHkmJmkuY29udGVudFR5cGUpe2E9e2NvbnRlbnREaXNwb3NpdGlvbjoicmVuZGVyIixjb250ZW50VHlwZTppLmNvbnRlbnRUeXBlLGNvbnRlbnQ6aS5ib2R5fX1jb25zdCBjPShpLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7dGhpcy5yZXF1ZXN0PWUudXNlckFnZW50Q29yZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShsLlBVQkxJU0gsdCxuLG8scixjLGEpLHRoaXMuaWQ9dGhpcy50YXJnZXQudG9TdHJpbmcoKSsiOiIrdGhpcy5ldmVudCx0aGlzLnVzZXJBZ2VudC5fcHVibGlzaGVyc1t0aGlzLmlkXT10aGlzfWRpc3Bvc2UoKXtyZXR1cm4gdGhpcy5kaXNwb3NlZD9Qcm9taXNlLnJlc29sdmUoKToodGhpcy5kaXNwb3NlZD0hMCx0aGlzLmxvZ2dlci5sb2coYFB1Ymxpc2hlciAke3RoaXMuaWR9IGluIHN0YXRlICR7dGhpcy5zdGF0ZX0gaXMgYmVpbmcgZGlzcG9zZWRgKSxkZWxldGUgdGhpcy51c2VyQWdlbnQuX3B1Ymxpc2hlcnNbdGhpcy5pZF0sdGhpcy5vcHRpb25zLnVucHVibGlzaE9uQ2xvc2UmJnRoaXMuc3RhdGU9PT1ZZS5QdWJsaXNoZWQ/dGhpcy51bnB1Ymxpc2goKToodGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciksdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXZvaWQgMCksdGhpcy5wdWJSZXF1ZXN0Qm9keT12b2lkIDAsdGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz0wLHRoaXMucHViUmVxdWVzdEV0YWc9dm9pZCAwLFByb21pc2UucmVzb2x2ZSgpKSl9Z2V0IHN0YXRlKCl7cmV0dXJuIHRoaXMuX3N0YXRlfWdldCBzdGF0ZUNoYW5nZSgpe3JldHVybiBOZSh0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcil9cHVibGlzaChlLHQ9e30pe2lmKHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnB1Ymxpc2hSZWZyZXNoVGltZXIpLHRoaXMucHVibGlzaFJlZnJlc2hUaW1lcj12b2lkIDApLHRoaXMub3B0aW9ucy5ib2R5PWUsdGhpcy5wdWJSZXF1ZXN0Qm9keT10aGlzLm9wdGlvbnMuYm9keSwwPT09dGhpcy5wdWJSZXF1ZXN0RXhwaXJlcyl7aWYodm9pZCAwPT09dGhpcy5vcHRpb25zLmV4cGlyZXMpdGhyb3cgbmV3IEVycm9yKCJFeHBpcmVzIHVuZGVmaW5lZC4iKTt0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPXRoaXMub3B0aW9ucy5leHBpcmVzLHRoaXMucHViUmVxdWVzdEV0YWc9dm9pZCAwfXJldHVybiB0aGlzLnNlbmRQdWJsaXNoUmVxdWVzdCgpLFByb21pc2UucmVzb2x2ZSgpfXVucHVibGlzaChlPXt9KXtyZXR1cm4gdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciksdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXZvaWQgMCksdGhpcy5wdWJSZXF1ZXN0Qm9keT12b2lkIDAsdGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz0wLHZvaWQgMCE9PXRoaXMucHViUmVxdWVzdEV0YWcmJnRoaXMuc2VuZFB1Ymxpc2hSZXF1ZXN0KCksUHJvbWlzZS5yZXNvbHZlKCl9cmVjZWl2ZVJlc3BvbnNlKGUpe2NvbnN0IHQ9ZS5zdGF0dXNDb2RlfHwwO3N3aXRjaCghMCl7Y2FzZS9eMVswLTldezJ9JC8udGVzdCh0LnRvU3RyaW5nKCkpOmJyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QodC50b1N0cmluZygpKTppZihlLmhhc0hlYWRlcigiU0lQLUVUYWciKT90aGlzLnB1YlJlcXVlc3RFdGFnPWUuZ2V0SGVhZGVyKCJTSVAtRVRhZyIpOnRoaXMubG9nZ2VyLndhcm4oIlNJUC1FVGFnIGhlYWRlciBtaXNzaW5nIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFBVQkxJU0giKSxlLmhhc0hlYWRlcigiRXhwaXJlcyIpKXtjb25zdCB0PU51bWJlcihlLmdldEhlYWRlcigiRXhwaXJlcyIpKTsibnVtYmVyIj09dHlwZW9mIHQmJnQ+PTAmJnQ8PXRoaXMucHViUmVxdWVzdEV4cGlyZXM/dGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz10OnRoaXMubG9nZ2VyLndhcm4oIkJhZCBFeHBpcmVzIGhlYWRlciBpbiBhIDIwMC1jbGFzcyByZXNwb25zZSB0byBQVUJMSVNIIil9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKCJFeHBpcmVzIGhlYWRlciBtaXNzaW5nIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFBVQkxJU0giKTswIT09dGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz8odGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXNldFRpbWVvdXQoKCk9PnRoaXMucmVmcmVzaFJlcXVlc3QoKSw5MDAqdGhpcy5wdWJSZXF1ZXN0RXhwaXJlcyksdGhpcy5zdGF0ZVRyYW5zaXRpb24oWWUuUHVibGlzaGVkKSk6dGhpcy5zdGF0ZVRyYW5zaXRpb24oWWUuVW5wdWJsaXNoZWQpO2JyZWFrO2Nhc2UvXjQxMiQvLnRlc3QodC50b1N0cmluZygpKTppZih2b2lkIDAhPT10aGlzLnB1YlJlcXVlc3RFdGFnJiYwIT09dGhpcy5wdWJSZXF1ZXN0RXhwaXJlcyl7aWYodGhpcy5sb2dnZXIud2FybigiNDEyIHJlc3BvbnNlIHRvIFBVQkxJU0gsIHJlY292ZXJpbmciKSx0aGlzLnB1YlJlcXVlc3RFdGFnPXZvaWQgMCx2b2lkIDA9PT10aGlzLm9wdGlvbnMuYm9keSl0aHJvdyBuZXcgRXJyb3IoIkJvZHkgdW5kZWZpbmVkLiIpO3RoaXMucHVibGlzaCh0aGlzLm9wdGlvbnMuYm9keSl9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKCI0MTIgcmVzcG9uc2UgdG8gUFVCTElTSCwgcmVjb3ZlcnkgZmFpbGVkIiksdGhpcy5wdWJSZXF1ZXN0RXhwaXJlcz0wLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFllLlVucHVibGlzaGVkKSx0aGlzLnN0YXRlVHJhbnNpdGlvbihZZS5UZXJtaW5hdGVkKTticmVhaztjYXNlL140MjMkLy50ZXN0KHQudG9TdHJpbmcoKSk6aWYoMCE9PXRoaXMucHViUmVxdWVzdEV4cGlyZXMmJmUuaGFzSGVhZGVyKCJNaW4tRXhwaXJlcyIpKXtjb25zdCB0PU51bWJlcihlLmdldEhlYWRlcigiTWluLUV4cGlyZXMiKSk7aWYoIm51bWJlciI9PXR5cGVvZiB0fHx0PnRoaXMucHViUmVxdWVzdEV4cGlyZXMpe2lmKHRoaXMubG9nZ2VyLndhcm4oIjQyMyBjb2RlIGluIHJlc3BvbnNlIHRvIFBVQkxJU0gsIGFkanVzdGluZyB0aGUgRXhwaXJlcyB2YWx1ZSBhbmQgdHJ5aW5nIHRvIHJlY292ZXIiKSx0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPXQsdm9pZCAwPT09dGhpcy5vcHRpb25zLmJvZHkpdGhyb3cgbmV3IEVycm9yKCJCb2R5IHVuZGVmaW5lZC4iKTt0aGlzLnB1Ymxpc2godGhpcy5vcHRpb25zLmJvZHkpfWVsc2UgdGhpcy5sb2dnZXIud2FybigiQmFkIDQyMyByZXNwb25zZSBNaW4tRXhwaXJlcyBoZWFkZXIgcmVjZWl2ZWQgZm9yIFBVQkxJU0giKSx0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPTAsdGhpcy5zdGF0ZVRyYW5zaXRpb24oWWUuVW5wdWJsaXNoZWQpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFllLlRlcm1pbmF0ZWQpfWVsc2UgdGhpcy5sb2dnZXIud2FybigiNDIzIHJlc3BvbnNlIHRvIFBVQkxJU0gsIHJlY292ZXJ5IGZhaWxlZCIpLHRoaXMucHViUmVxdWVzdEV4cGlyZXM9MCx0aGlzLnN0YXRlVHJhbnNpdGlvbihZZS5VbnB1Ymxpc2hlZCksdGhpcy5zdGF0ZVRyYW5zaXRpb24oWWUuVGVybWluYXRlZCk7YnJlYWs7ZGVmYXVsdDp0aGlzLnB1YlJlcXVlc3RFeHBpcmVzPTAsdGhpcy5zdGF0ZVRyYW5zaXRpb24oWWUuVW5wdWJsaXNoZWQpLHRoaXMuc3RhdGVUcmFuc2l0aW9uKFllLlRlcm1pbmF0ZWQpfTA9PT10aGlzLnB1YlJlcXVlc3RFeHBpcmVzJiYodGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciksdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXZvaWQgMCksdGhpcy5wdWJSZXF1ZXN0Qm9keT12b2lkIDAsdGhpcy5wdWJSZXF1ZXN0RXRhZz12b2lkIDApfXNlbmQoKXtyZXR1cm4gdGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5wdWJsaXNoKHRoaXMucmVxdWVzdCx7b25BY2NlcHQ6ZT0+dGhpcy5yZWNlaXZlUmVzcG9uc2UoZS5tZXNzYWdlKSxvblByb2dyZXNzOmU9PnRoaXMucmVjZWl2ZVJlc3BvbnNlKGUubWVzc2FnZSksb25SZWRpcmVjdDplPT50aGlzLnJlY2VpdmVSZXNwb25zZShlLm1lc3NhZ2UpLG9uUmVqZWN0OmU9PnRoaXMucmVjZWl2ZVJlc3BvbnNlKGUubWVzc2FnZSksb25Ucnlpbmc6ZT0+dGhpcy5yZWNlaXZlUmVzcG9uc2UoZS5tZXNzYWdlKX0pfXJlZnJlc2hSZXF1ZXN0KCl7aWYodGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucHVibGlzaFJlZnJlc2hUaW1lciksdGhpcy5wdWJsaXNoUmVmcmVzaFRpbWVyPXZvaWQgMCksdGhpcy5wdWJSZXF1ZXN0Qm9keT12b2lkIDAsdm9pZCAwPT09dGhpcy5wdWJSZXF1ZXN0RXRhZyl0aHJvdyBuZXcgRXJyb3IoIkV0YWcgdW5kZWZpbmVkIik7aWYoMD09PXRoaXMucHViUmVxdWVzdEV4cGlyZXMpdGhyb3cgbmV3IEVycm9yKCJFeHBpcmVzIHplcm8iKTt0aGlzLnNlbmRQdWJsaXNoUmVxdWVzdCgpfXNlbmRQdWJsaXNoUmVxdWVzdCgpe2NvbnN0IGU9T2JqZWN0LmFzc2lnbih7fSx0aGlzLm9wdGlvbnMpO2UuZXh0cmFIZWFkZXJzPSh0aGlzLm9wdGlvbnMuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKSxlLmV4dHJhSGVhZGVycy5wdXNoKCJFdmVudDogIit0aGlzLmV2ZW50KSxlLmV4dHJhSGVhZGVycy5wdXNoKCJFeHBpcmVzOiAiK3RoaXMucHViUmVxdWVzdEV4cGlyZXMpLHZvaWQgMCE9PXRoaXMucHViUmVxdWVzdEV0YWcmJmUuZXh0cmFIZWFkZXJzLnB1c2goIlNJUC1JZi1NYXRjaDogIit0aGlzLnB1YlJlcXVlc3RFdGFnKTtjb25zdCB0PXRoaXMudGFyZ2V0LHM9dGhpcy5vcHRpb25zLnBhcmFtc3x8e307bGV0IGkscjtpZih2b2lkIDAhPT10aGlzLnB1YlJlcXVlc3RCb2R5KXtpZih2b2lkIDA9PT10aGlzLm9wdGlvbnMuY29udGVudFR5cGUpdGhyb3cgbmV3IEVycm9yKCJDb250ZW50IHR5cGUgdW5kZWZpbmVkLiIpO2k9e2JvZHk6dGhpcy5wdWJSZXF1ZXN0Qm9keSxjb250ZW50VHlwZTp0aGlzLm9wdGlvbnMuY29udGVudFR5cGV9fXJldHVybiBpJiYocj1TKGkpKSx0aGlzLnJlcXVlc3Q9dGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5tYWtlT3V0Z29pbmdSZXF1ZXN0TWVzc2FnZShsLlBVQkxJU0gsdCxzLmZyb21Vcmk/cy5mcm9tVXJpOnRoaXMudXNlckFnZW50LnVzZXJBZ2VudENvcmUuY29uZmlndXJhdGlvbi5hb3Iscy50b1VyaT9zLnRvVXJpOnRoaXMudGFyZ2V0LHMsZS5leHRyYUhlYWRlcnMsciksdGhpcy5zZW5kKCl9c3RhdGVUcmFuc2l0aW9uKGUpe2NvbnN0IHQ9KCk9Pnt0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fc3RhdGV9IHRvICR7ZX1gKX07c3dpdGNoKHRoaXMuX3N0YXRlKXtjYXNlIFllLkluaXRpYWw6ZSE9PVllLlB1Ymxpc2hlZCYmZSE9PVllLlVucHVibGlzaGVkJiZlIT09WWUuVGVybWluYXRlZCYmdCgpO2JyZWFrO2Nhc2UgWWUuUHVibGlzaGVkOmUhPT1ZZS5VbnB1Ymxpc2hlZCYmZSE9PVllLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIFllLlVucHVibGlzaGVkOmUhPT1ZZS5QdWJsaXNoZWQmJmUhPT1ZZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBZZS5UZXJtaW5hdGVkOnQoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHN0YXRlLiIpfXRoaXMuX3N0YXRlPWUsdGhpcy5sb2dnZXIubG9nKCJQdWJsaWNhdGlvbiB0cmFuc2l0aW9uZWQgdG8gc3RhdGUgIit0aGlzLl9zdGF0ZSksdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXIuZW1pdCgiZXZlbnQiLHRoaXMuX3N0YXRlKSxlPT09WWUuVGVybWluYXRlZCYmdGhpcy5kaXNwb3NlKCl9fSFmdW5jdGlvbihlKXtlLkluaXRpYWw9IkluaXRpYWwiLGUuUmVnaXN0ZXJlZD0iUmVnaXN0ZXJlZCIsZS5VbnJlZ2lzdGVyZWQ9IlVucmVnaXN0ZXJlZCIsZS5UZXJtaW5hdGVkPSJUZXJtaW5hdGVkIn0oWmV8fChaZT17fSkpO2NsYXNzIGV0e2NvbnN0cnVjdG9yKGUsdD17fSl7dGhpcy5kaXNwb3NlZD0hMSx0aGlzLl9jb250YWN0cz1bXSx0aGlzLl9yZXRyeUFmdGVyPXZvaWQgMCx0aGlzLl9zdGF0ZT1aZS5Jbml0aWFsLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyPW5ldyBNLkV2ZW50RW1pdHRlcix0aGlzLl93YWl0aW5nPSExLHRoaXMuX3dhaXRpbmdFdmVudEVtaXR0ZXI9bmV3IE0uRXZlbnRFbWl0dGVyLHRoaXMudXNlckFnZW50PWU7Y29uc3Qgcz1lLmNvbmZpZ3VyYXRpb24udXJpLmNsb25lKCk7aWYocy51c2VyPXZvaWQgMCx0aGlzLm9wdGlvbnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZXQuZGVmYXVsdE9wdGlvbnMpLHtyZWdpc3RyYXI6c30pLGV0LnN0cmlwVW5kZWZpbmVkUHJvcGVydGllcyh0KSksdGhpcy5vcHRpb25zLmV4dHJhQ29udGFjdEhlYWRlclBhcmFtcz0odGhpcy5vcHRpb25zLmV4dHJhQ29udGFjdEhlYWRlclBhcmFtc3x8W10pLnNsaWNlKCksdGhpcy5vcHRpb25zLmV4dHJhSGVhZGVycz0odGhpcy5vcHRpb25zLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksIXRoaXMub3B0aW9ucy5yZWdpc3RyYXIpdGhyb3cgbmV3IEVycm9yKCJSZWdpc3RyYXIgdW5kZWZpbmVkLiIpO2lmKHRoaXMub3B0aW9ucy5yZWdpc3RyYXI9dGhpcy5vcHRpb25zLnJlZ2lzdHJhci5jbG9uZSgpLHRoaXMub3B0aW9ucy5yZWdJZCYmIXRoaXMub3B0aW9ucy5pbnN0YW5jZUlkP3RoaXMub3B0aW9ucy5pbnN0YW5jZUlkPWV0Lm5ld1VVSUQoKTohdGhpcy5vcHRpb25zLnJlZ0lkJiZ0aGlzLm9wdGlvbnMuaW5zdGFuY2VJZCYmKHRoaXMub3B0aW9ucy5yZWdJZD0xKSx0aGlzLm9wdGlvbnMuaW5zdGFuY2VJZCYmLTE9PT1kLnBhcnNlKHRoaXMub3B0aW9ucy5pbnN0YW5jZUlkLCJ1dWlkIikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGluc3RhbmNlSWQuIik7aWYodGhpcy5vcHRpb25zLnJlZ0lkJiZ0aGlzLm9wdGlvbnMucmVnSWQ8MCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcmVnSWQuIik7Y29uc3QgaT10aGlzLm9wdGlvbnMucmVnaXN0cmFyLHI9dGhpcy5vcHRpb25zLnBhcmFtcyYmdGhpcy5vcHRpb25zLnBhcmFtcy5mcm9tVXJpfHxlLnVzZXJBZ2VudENvcmUuY29uZmlndXJhdGlvbi5hb3Isbj10aGlzLm9wdGlvbnMucGFyYW1zJiZ0aGlzLm9wdGlvbnMucGFyYW1zLnRvVXJpfHxlLmNvbmZpZ3VyYXRpb24udXJpLG89dGhpcy5vcHRpb25zLnBhcmFtc3x8e30sYT0odC5leHRyYUhlYWRlcnN8fFtdKS5zbGljZSgpO2lmKHRoaXMucmVxdWVzdD1lLnVzZXJBZ2VudENvcmUubWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UobC5SRUdJU1RFUixpLHIsbixvLGEsdm9pZCAwKSx0aGlzLmV4cGlyZXM9dGhpcy5vcHRpb25zLmV4cGlyZXN8fGV0LmRlZmF1bHRPcHRpb25zLmV4cGlyZXMsdGhpcy5leHBpcmVzPDApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGV4cGlyZXMuIik7dGhpcy5sb2dnZXI9ZS5nZXRMb2dnZXIoInNpcC5SZWdpc3RlcmVyIiksdGhpcy5vcHRpb25zLmxvZ0NvbmZpZ3VyYXRpb24mJih0aGlzLmxvZ2dlci5sb2coIkNvbmZpZ3VyYXRpb246IiksT2JqZWN0LmtleXModGhpcy5vcHRpb25zKS5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMub3B0aW9uc1tlXTtzd2l0Y2goZSl7Y2FzZSJyZWdpc3RyYXIiOnRoaXMubG9nZ2VyLmxvZygiXHhiNyAiK2UrIjogIit0KTticmVhaztkZWZhdWx0OnRoaXMubG9nZ2VyLmxvZygiXHhiNyAiK2UrIjogIitKU09OLnN0cmluZ2lmeSh0KSl9fSkpLHRoaXMuaWQ9dGhpcy5yZXF1ZXN0LmNhbGxJZCt0aGlzLnJlcXVlc3QuZnJvbS5wYXJhbWV0ZXJzLnRhZyx0aGlzLnVzZXJBZ2VudC5fcmVnaXN0ZXJlcnNbdGhpcy5pZF09dGhpc31zdGF0aWMgbmV3VVVJRCgpe3JldHVybiJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgiLnJlcGxhY2UoL1t4eV0vZyxlPT57Y29uc3QgdD1NYXRoLmZsb29yKDE2Kk1hdGgucmFuZG9tKCkpO3JldHVybigieCI9PT1lP3Q6dCU0KzgpLnRvU3RyaW5nKDE2KX0pfXN0YXRpYyBzdHJpcFVuZGVmaW5lZFByb3BlcnRpZXMoZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZSgodCxzKT0+KHZvaWQgMCE9PWVbc10mJih0W3NdPWVbc10pLHQpLHt9KX1nZXQgY29udGFjdHMoKXtyZXR1cm4gdGhpcy5fY29udGFjdHMuc2xpY2UoKX1nZXQgcmV0cnlBZnRlcigpe3JldHVybiB0aGlzLl9yZXRyeUFmdGVyfWdldCBzdGF0ZSgpe3JldHVybiB0aGlzLl9zdGF0ZX1nZXQgc3RhdGVDaGFuZ2UoKXtyZXR1cm4gTmUodGhpcy5fc3RhdGVFdmVudEVtaXR0ZXIpfWRpc3Bvc2UoKXtyZXR1cm4gdGhpcy5kaXNwb3NlZD9Qcm9taXNlLnJlc29sdmUoKToodGhpcy5kaXNwb3NlZD0hMCx0aGlzLmxvZ2dlci5sb2coYFJlZ2lzdGVyZXIgJHt0aGlzLmlkfSBpbiBzdGF0ZSAke3RoaXMuc3RhdGV9IGlzIGJlaW5nIGRpc3Bvc2VkYCksZGVsZXRlIHRoaXMudXNlckFnZW50Ll9yZWdpc3RlcmVyc1t0aGlzLmlkXSxuZXcgUHJvbWlzZShlPT57Y29uc3QgdD0oKT0+e2lmKCF0aGlzLndhaXRpbmcmJnRoaXMuX3N0YXRlPT09WmUuUmVnaXN0ZXJlZClyZXR1cm4gdGhpcy5zdGF0ZUNoYW5nZS5hZGRMaXN0ZW5lcigoKT0+e3RoaXMudGVybWluYXRlZCgpLGUoKX0se29uY2U6ITB9KSx2b2lkIHRoaXMudW5yZWdpc3RlcigpO3RoaXMudGVybWluYXRlZCgpLGUoKX07dGhpcy53YWl0aW5nP3RoaXMud2FpdGluZ0NoYW5nZS5hZGRMaXN0ZW5lcigoKT0+dCgpLHtvbmNlOiEwfSk6dCgpfSkpfXJlZ2lzdGVyKGU9e30pe2lmKHRoaXMuc3RhdGU9PT1aZS5UZXJtaW5hdGVkKXRocm93IHRoaXMuc3RhdGVFcnJvcigpLG5ldyBFcnJvcigiUmVnaXN0ZXJlciB0ZXJtaW5hdGVkLiBVbmFibGUgdG8gcmVnaXN0ZXIuIik7aWYodGhpcy5kaXNwb3NlZCl0aHJvdyB0aGlzLnN0YXRlRXJyb3IoKSxuZXcgRXJyb3IoIlJlZ2lzdGVyZXIgZGlzcG9zZWQuIFVuYWJsZSB0byByZWdpc3Rlci4iKTtpZih0aGlzLndhaXRpbmcpe3RoaXMud2FpdGluZ1dhcm5pbmcoKTtjb25zdCBlPW5ldyBrZSgiUkVHSVNURVIgcmVxdWVzdCBhbHJlYWR5IGluIHByb2dyZXNzLCB3YWl0aW5nIGZvciBmaW5hbCByZXNwb25zZSIpO3JldHVybiBQcm9taXNlLnJlamVjdChlKX1lLnJlcXVlc3RPcHRpb25zJiYodGhpcy5vcHRpb25zPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLm9wdGlvbnMpLGUucmVxdWVzdE9wdGlvbnMpKTtjb25zdCB0PSh0aGlzLm9wdGlvbnMuZXh0cmFIZWFkZXJzfHxbXSkuc2xpY2UoKTt0LnB1c2goIkNvbnRhY3Q6ICIrdGhpcy5nZW5lcmF0ZUNvbnRhY3RIZWFkZXIodGhpcy5leHBpcmVzKSksdC5wdXNoKCJBbGxvdzogIitbIkFDSyIsIkNBTkNFTCIsIklOVklURSIsIk1FU1NBR0UiLCJCWUUiLCJPUFRJT05TIiwiSU5GTyIsIk5PVElGWSIsIlJFRkVSIl0udG9TdHJpbmcoKSksdGhpcy5yZXF1ZXN0LmNzZXErKyx0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKCJjc2VxIix0aGlzLnJlcXVlc3QuY3NlcSsiIFJFR0lTVEVSIiksdGhpcy5yZXF1ZXN0LmV4dHJhSGVhZGVycz10LHRoaXMud2FpdGluZ1RvZ2dsZSghMCk7Y29uc3Qgcz10aGlzLnVzZXJBZ2VudC51c2VyQWdlbnRDb3JlLnJlZ2lzdGVyKHRoaXMucmVxdWVzdCx7b25BY2NlcHQ6dD0+e2xldCBzO3QubWVzc2FnZS5oYXNIZWFkZXIoImV4cGlyZXMiKSYmKHM9TnVtYmVyKHQubWVzc2FnZS5nZXRIZWFkZXIoImV4cGlyZXMiKSkpLHRoaXMuX2NvbnRhY3RzPXQubWVzc2FnZS5nZXRIZWFkZXJzKCJjb250YWN0Iik7bGV0IGkscj10aGlzLl9jb250YWN0cy5sZW5ndGg7aWYoIXIpcmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKCJObyBDb250YWN0IGhlYWRlciBpbiByZXNwb25zZSB0byBSRUdJU1RFUiwgZHJvcHBpbmcgcmVzcG9uc2UuIiksdm9pZCB0aGlzLnVucmVnaXN0ZXJlZCgpO2Zvcig7ci0tOyl7aWYoaT10Lm1lc3NhZ2UucGFyc2VIZWFkZXIoImNvbnRhY3QiLHIpLCFpKXRocm93IG5ldyBFcnJvcigiQ29udGFjdCB1bmRlZmluZWQiKTtpZihpLnVyaS51c2VyPT09dGhpcy51c2VyQWdlbnQuY29udGFjdC51cmkudXNlcil7cz1OdW1iZXIoaS5nZXRQYXJhbSgiZXhwaXJlcyIpKTticmVha31pPXZvaWQgMH1pZih2b2lkIDA9PT1pKXJldHVybiB0aGlzLmxvZ2dlci5lcnJvcigiTm8gQ29udGFjdCBoZWFkZXIgcG9pbnRpbmcgdG8gdXMsIGRyb3BwaW5nIHJlc3BvbnNlIiksdGhpcy51bnJlZ2lzdGVyZWQoKSx2b2lkIHRoaXMud2FpdGluZ1RvZ2dsZSghMSk7aWYodm9pZCAwPT09cylyZXR1cm4gdGhpcy5sb2dnZXIuZXJyb3IoIkNvbnRhY3QgcG9pbnRpbmcgdG8gdXMgaXMgbWlzc2luZyBleHBpcmVzIHBhcmFtZXRlciwgZHJvcHBpbmcgcmVzcG9uc2UiKSx0aGlzLnVucmVnaXN0ZXJlZCgpLHZvaWQgdGhpcy53YWl0aW5nVG9nZ2xlKCExKTtpZihpLmhhc1BhcmFtKCJ0ZW1wLWdydXUiKSl7Y29uc3QgZT1pLmdldFBhcmFtKCJ0ZW1wLWdydXUiKTtlJiYodGhpcy51c2VyQWdlbnQuY29udGFjdC50ZW1wR3J1dT1kLlVSSVBhcnNlKGUucmVwbGFjZSgvIi9nLCIiKSkpfWlmKGkuaGFzUGFyYW0oInB1Yi1ncnV1Iikpe2NvbnN0IGU9aS5nZXRQYXJhbSgicHViLWdydXUiKTtlJiYodGhpcy51c2VyQWdlbnQuY29udGFjdC5wdWJHcnV1PWQuVVJJUGFyc2UoZS5yZXBsYWNlKC8iL2csIiIpKSl9dGhpcy5yZWdpc3RlcmVkKHMpLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCYmZS5yZXF1ZXN0RGVsZWdhdGUub25BY2NlcHQodCksdGhpcy53YWl0aW5nVG9nZ2xlKCExKX0sb25Qcm9ncmVzczp0PT57ZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uUHJvZ3Jlc3MmJmUucmVxdWVzdERlbGVnYXRlLm9uUHJvZ3Jlc3ModCl9LG9uUmVkaXJlY3Q6dD0+e3RoaXMubG9nZ2VyLmVycm9yKCJSZWRpcmVjdCByZWNlaXZlZC4gTm90IHN1cHBvcnRlZC4iKSx0aGlzLnVucmVnaXN0ZXJlZCgpLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlZGlyZWN0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlZGlyZWN0KHQpLHRoaXMud2FpdGluZ1RvZ2dsZSghMSl9LG9uUmVqZWN0OnQ9PntpZig0MjM9PT10Lm1lc3NhZ2Uuc3RhdHVzQ29kZSlyZXR1cm4gdC5tZXNzYWdlLmhhc0hlYWRlcigibWluLWV4cGlyZXMiKT8odGhpcy5leHBpcmVzPU51bWJlcih0Lm1lc3NhZ2UuZ2V0SGVhZGVyKCJtaW4tZXhwaXJlcyIpKSx0aGlzLndhaXRpbmdUb2dnbGUoITEpLHZvaWQgdGhpcy5yZWdpc3RlcigpKToodGhpcy5sb2dnZXIuZXJyb3IoIjQyMyByZXNwb25zZSByZWNlaXZlZCBmb3IgUkVHSVNURVIgd2l0aG91dCBNaW4tRXhwaXJlcywgZHJvcHBpbmcgcmVzcG9uc2UiKSx0aGlzLnVucmVnaXN0ZXJlZCgpLHZvaWQgdGhpcy53YWl0aW5nVG9nZ2xlKCExKSk7dGhpcy5sb2dnZXIud2FybigiRmFpbGVkIHRvIHJlZ2lzdGVyLCBzdGF0dXMgY29kZSAiK3QubWVzc2FnZS5zdGF0dXNDb2RlKTtsZXQgcz1OYU47aWYoNTAwPT09dC5tZXNzYWdlLnN0YXR1c0NvZGV8fDUwMz09PXQubWVzc2FnZS5zdGF0dXNDb2RlKXtjb25zdCBlPXQubWVzc2FnZS5nZXRIZWFkZXIoInJldHJ5LWFmdGVyIik7ZSYmKHM9TnVtYmVyLnBhcnNlSW50KGUsdm9pZCAwKSl9dGhpcy5fcmV0cnlBZnRlcj1pc05hTihzKT92b2lkIDA6cyx0aGlzLnVucmVnaXN0ZXJlZCgpLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlamVjdCYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QodCksdGhpcy5fcmV0cnlBZnRlcj12b2lkIDAsdGhpcy53YWl0aW5nVG9nZ2xlKCExKX0sb25Ucnlpbmc6dD0+e2UucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblRyeWluZyYmZS5yZXF1ZXN0RGVsZWdhdGUub25UcnlpbmcodCl9fSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShzKX11bnJlZ2lzdGVyKGU9e30pe2lmKHRoaXMuc3RhdGU9PT1aZS5UZXJtaW5hdGVkKXRocm93IHRoaXMuc3RhdGVFcnJvcigpLG5ldyBFcnJvcigiUmVnaXN0ZXJlciB0ZXJtaW5hdGVkLiBVbmFibGUgdG8gcmVnaXN0ZXIuIik7aWYodGhpcy5kaXNwb3NlZCYmdGhpcy5zdGF0ZSE9PVplLlJlZ2lzdGVyZWQpdGhyb3cgdGhpcy5zdGF0ZUVycm9yKCksbmV3IEVycm9yKCJSZWdpc3RlcmVyIGRpc3Bvc2VkLiBVbmFibGUgdG8gcmVnaXN0ZXIuIik7aWYodGhpcy53YWl0aW5nKXt0aGlzLndhaXRpbmdXYXJuaW5nKCk7Y29uc3QgZT1uZXcga2UoIlJFR0lTVEVSIHJlcXVlc3QgYWxyZWFkeSBpbiBwcm9ncmVzcywgd2FpdGluZyBmb3IgZmluYWwgcmVzcG9uc2UiKTtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9dGhpcy5fc3RhdGU9PT1aZS5SZWdpc3RlcmVkfHxlLmFsbHx8dGhpcy5sb2dnZXIud2FybigiTm90IGN1cnJlbnRseSByZWdpc3RlcmVkLCBidXQgc2VuZGluZyBhbiB1bnJlZ2lzdGVyIGFueXdheS4iKTtjb25zdCB0PShlLnJlcXVlc3RPcHRpb25zJiZlLnJlcXVlc3RPcHRpb25zLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7dGhpcy5yZXF1ZXN0LmV4dHJhSGVhZGVycz10LGUuYWxsPyh0LnB1c2goIkNvbnRhY3Q6ICoiKSx0LnB1c2goIkV4cGlyZXM6IDAiKSk6dC5wdXNoKCJDb250YWN0OiAiK3RoaXMuZ2VuZXJhdGVDb250YWN0SGVhZGVyKDApKSx0aGlzLnJlcXVlc3QuY3NlcSsrLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoImNzZXEiLHRoaXMucmVxdWVzdC5jc2VxKyIgUkVHSVNURVIiKSx2b2lkIDAhPT10aGlzLnJlZ2lzdHJhdGlvblRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpLHRoaXMucmVnaXN0cmF0aW9uVGltZXI9dm9pZCAwKSx0aGlzLndhaXRpbmdUb2dnbGUoITApO2NvbnN0IHM9dGhpcy51c2VyQWdlbnQudXNlckFnZW50Q29yZS5yZWdpc3Rlcih0aGlzLnJlcXVlc3Qse29uQWNjZXB0OnQ9Pnt0aGlzLl9jb250YWN0cz10Lm1lc3NhZ2UuZ2V0SGVhZGVycygiY29udGFjdCIpLHRoaXMudW5yZWdpc3RlcmVkKCksZS5yZXF1ZXN0RGVsZWdhdGUmJmUucmVxdWVzdERlbGVnYXRlLm9uQWNjZXB0JiZlLnJlcXVlc3REZWxlZ2F0ZS5vbkFjY2VwdCh0KSx0aGlzLndhaXRpbmdUb2dnbGUoITEpfSxvblByb2dyZXNzOnQ9PntlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25Qcm9ncmVzcyYmZS5yZXF1ZXN0RGVsZWdhdGUub25Qcm9ncmVzcyh0KX0sb25SZWRpcmVjdDp0PT57dGhpcy5sb2dnZXIuZXJyb3IoIlVucmVnaXN0ZXIgcmVkaXJlY3RlZC4gTm90IGN1cnJlbnRseSBzdXBwb3J0ZWQuIiksdGhpcy51bnJlZ2lzdGVyZWQoKSxlLnJlcXVlc3REZWxlZ2F0ZSYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWRpcmVjdCYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWRpcmVjdCh0KSx0aGlzLndhaXRpbmdUb2dnbGUoITEpfSxvblJlamVjdDp0PT57dGhpcy5sb2dnZXIuZXJyb3IoIlVucmVnaXN0ZXIgcmVqZWN0ZWQgd2l0aCBzdGF0dXMgY29kZSAiK3QubWVzc2FnZS5zdGF0dXNDb2RlKSx0aGlzLnVucmVnaXN0ZXJlZCgpLGUucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblJlamVjdCYmZS5yZXF1ZXN0RGVsZWdhdGUub25SZWplY3QodCksdGhpcy53YWl0aW5nVG9nZ2xlKCExKX0sb25Ucnlpbmc6dD0+e2UucmVxdWVzdERlbGVnYXRlJiZlLnJlcXVlc3REZWxlZ2F0ZS5vblRyeWluZyYmZS5yZXF1ZXN0RGVsZWdhdGUub25UcnlpbmcodCl9fSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShzKX1jbGVhclRpbWVycygpe3ZvaWQgMCE9PXRoaXMucmVnaXN0cmF0aW9uVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25UaW1lciksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj12b2lkIDApLHZvaWQgMCE9PXRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyKSx0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lcj12b2lkIDApfWdlbmVyYXRlQ29udGFjdEhlYWRlcihlKXtsZXQgdD10aGlzLnVzZXJBZ2VudC5jb250YWN0LnRvU3RyaW5nKCk7cmV0dXJuIHRoaXMub3B0aW9ucy5yZWdJZCYmdGhpcy5vcHRpb25zLmluc3RhbmNlSWQmJih0Kz0iO3JlZy1pZD0iK3RoaXMub3B0aW9ucy5yZWdJZCx0Kz0nOytzaXAuaW5zdGFuY2U9Ijx1cm46dXVpZDonK3RoaXMub3B0aW9ucy5pbnN0YW5jZUlkKyc+IicpLHRoaXMub3B0aW9ucy5leHRyYUNvbnRhY3RIZWFkZXJQYXJhbXMmJnRoaXMub3B0aW9ucy5leHRyYUNvbnRhY3RIZWFkZXJQYXJhbXMuZm9yRWFjaChlPT57dCs9IjsiK2V9KSx0Kz0iO2V4cGlyZXM9IitlLHR9cmVnaXN0ZXJlZChlKXt0aGlzLmNsZWFyVGltZXJzKCksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1zZXRUaW1lb3V0KCgpPT57dGhpcy5yZWdpc3RyYXRpb25UaW1lcj12b2lkIDAsdGhpcy5yZWdpc3RlcigpfSwxZTMqZS0zZTMpLHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyPXNldFRpbWVvdXQoKCk9Pnt0aGlzLmxvZ2dlci53YXJuKCJSZWdpc3RyYXRpb24gZXhwaXJlZCIpLHRoaXMudW5yZWdpc3RlcmVkKCl9LDFlMyplKSx0aGlzLl9zdGF0ZSE9PVplLlJlZ2lzdGVyZWQmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKFplLlJlZ2lzdGVyZWQpfXVucmVnaXN0ZXJlZCgpe3RoaXMuY2xlYXJUaW1lcnMoKSx0aGlzLl9zdGF0ZSE9PVplLlVucmVnaXN0ZXJlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24oWmUuVW5yZWdpc3RlcmVkKX10ZXJtaW5hdGVkKCl7dGhpcy5jbGVhclRpbWVycygpLHRoaXMuX3N0YXRlIT09WmUuVGVybWluYXRlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24oWmUuVGVybWluYXRlZCl9c3RhdGVUcmFuc2l0aW9uKGUpe2NvbnN0IHQ9KCk9Pnt0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBmcm9tICR7dGhpcy5fc3RhdGV9IHRvICR7ZX1gKX07c3dpdGNoKHRoaXMuX3N0YXRlKXtjYXNlIFplLkluaXRpYWw6ZSE9PVplLlJlZ2lzdGVyZWQmJmUhPT1aZS5VbnJlZ2lzdGVyZWQmJmUhPT1aZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBaZS5SZWdpc3RlcmVkOmUhPT1aZS5VbnJlZ2lzdGVyZWQmJmUhPT1aZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBaZS5VbnJlZ2lzdGVyZWQ6ZSE9PVplLlJlZ2lzdGVyZWQmJmUhPT1aZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBaZS5UZXJtaW5hdGVkOnQoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHN0YXRlLiIpfXRoaXMuX3N0YXRlPWUsdGhpcy5sb2dnZXIubG9nKCJSZWdpc3RyYXRpb24gdHJhbnNpdGlvbmVkIHRvIHN0YXRlICIrdGhpcy5fc3RhdGUpLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyLmVtaXQoImV2ZW50Iix0aGlzLl9zdGF0ZSksZT09PVplLlRlcm1pbmF0ZWQmJnRoaXMuZGlzcG9zZSgpfWdldCB3YWl0aW5nKCl7cmV0dXJuIHRoaXMuX3dhaXRpbmd9Z2V0IHdhaXRpbmdDaGFuZ2UoKXtyZXR1cm4gTmUodGhpcy5fd2FpdGluZ0V2ZW50RW1pdHRlcil9d2FpdGluZ1RvZ2dsZShlKXtpZih0aGlzLl93YWl0aW5nPT09ZSl0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgd2FpdGluZyB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLl93YWl0aW5nfSB0byAke2V9YCk7dGhpcy5fd2FpdGluZz1lLHRoaXMubG9nZ2VyLmxvZygiV2FpdGluZyB0b2dnbGVkIHRvICIrdGhpcy5fd2FpdGluZyksdGhpcy5fd2FpdGluZ0V2ZW50RW1pdHRlci5lbWl0KCJldmVudCIsdGhpcy5fd2FpdGluZyl9d2FpdGluZ1dhcm5pbmcoKXtsZXQgZT0iQW4gYXR0ZW1wdCB3YXMgbWFkZSB0byBzZW5kIGEgUkVHSVNURVIgcmVxdWVzdCB3aGlsZSBhIHByaW9yIG9uZSB3YXMgc3RpbGwgaW4gcHJvZ3Jlc3MuIjtlKz0iIFJGQyAzMjYxIHJlcXVpcmVzIFVBcyBNVVNUIE5PVCBzZW5kIGEgbmV3IHJlZ2lzdHJhdGlvbiB1bnRpbCB0aGV5IGhhdmUgcmVjZWl2ZWQgYSBmaW5hbCByZXNwb25zZSIsZSs9IiBmcm9tIHRoZSByZWdpc3RyYXIgZm9yIHRoZSBwcmV2aW91cyBvbmUgb3IgdGhlIHByZXZpb3VzIFJFR0lTVEVSIHJlcXVlc3QgaGFzIHRpbWVkIG91dC4iLGUrPSIgTm90ZSB0aGF0IGlmIHRoZSB0cmFuc3BvcnQgZGlzY29ubmVjdHMsIHlvdSBzdGlsbCBtdXN0IHdhaXQgZm9yIHRoZSBwcmlvciByZXF1ZXN0IHRvIHRpbWUgb3V0IGJlZm9yZSIsZSs9IiBzZW5kaW5nIGEgbmV3IFJFR0lTVEVSIHJlcXVlc3Qgb3IgYWx0ZXJuYXRpdmVseSBkaXNwb3NlIG9mIHRoZSBjdXJyZW50IFJlZ2lzdGVyZXIgYW5kIGNyZWF0ZSBhIG5ldyBSZWdpc3RlcmVyLiIsdGhpcy5sb2dnZXIud2FybigiQW4gYXR0ZW1wdCB3YXMgbWFkZSB0byBzZW5kIGEgUkVHSVNURVIgcmVxdWVzdCB3aGlsZSBhIHByaW9yIG9uZSB3YXMgc3RpbGwgaW4gcHJvZ3Jlc3MuIFJGQyAzMjYxIHJlcXVpcmVzIFVBcyBNVVNUIE5PVCBzZW5kIGEgbmV3IHJlZ2lzdHJhdGlvbiB1bnRpbCB0aGV5IGhhdmUgcmVjZWl2ZWQgYSBmaW5hbCByZXNwb25zZSBmcm9tIHRoZSByZWdpc3RyYXIgZm9yIHRoZSBwcmV2aW91cyBvbmUgb3IgdGhlIHByZXZpb3VzIFJFR0lTVEVSIHJlcXVlc3QgaGFzIHRpbWVkIG91dC4gTm90ZSB0aGF0IGlmIHRoZSB0cmFuc3BvcnQgZGlzY29ubmVjdHMsIHlvdSBzdGlsbCBtdXN0IHdhaXQgZm9yIHRoZSBwcmlvciByZXF1ZXN0IHRvIHRpbWUgb3V0IGJlZm9yZSBzZW5kaW5nIGEgbmV3IFJFR0lTVEVSIHJlcXVlc3Qgb3IgYWx0ZXJuYXRpdmVseSBkaXNwb3NlIG9mIHRoZSBjdXJyZW50IFJlZ2lzdGVyZXIgYW5kIGNyZWF0ZSBhIG5ldyBSZWdpc3RlcmVyLiIpfXN0YXRlRXJyb3IoKXtsZXQgZT1gQW4gYXR0ZW1wdCB3YXMgbWFkZSB0byBzZW5kIGEgUkVHSVNURVIgcmVxdWVzdCB3aGVuIHRoZSBSZWdpc3RlcmVyICR7dGhpcy5zdGF0ZT09PVplLlRlcm1pbmF0ZWQ/ImlzIGluICdUZXJtaW5hdGVkJyBzdGF0ZSI6ImhhcyBiZWVuIGRpc3Bvc2VkIn0uYDtlKz0iIFRoZSBSZWdpc3RlcmVyIHRyYW5zaXRpb25zIHRvICdUZXJtaW5hdGVkJyB3aGVuIFJlZ2lzdGVyZXIuZGlzcG9zZSgpIGlzIGNhbGxlZC4iLGUrPSIgUGVyaGFwcyB5b3UgY2FsbGVkIFVzZXJBZ2VudC5zdG9wKCkgd2hpY2ggZGlwc29zZXMgb2YgYWxsIFJlZ2lzdGVyZXJzPyIsdGhpcy5sb2dnZXIuZXJyb3IoZSl9fWV0LmRlZmF1bHRPcHRpb25zPXtleHBpcmVzOjYwMCxleHRyYUNvbnRhY3RIZWFkZXJQYXJhbXM6W10sZXh0cmFIZWFkZXJzOltdLGxvZ0NvbmZpZ3VyYXRpb246ITAsaW5zdGFuY2VJZDoiIixwYXJhbXM6e30scmVnSWQ6MCxyZWdpc3RyYXI6bmV3IGEoInNpcCIsImFub255bW91cyIsImFub255bW91cy5pbnZhbGlkIil9LGZ1bmN0aW9uKGUpe2UuSW5pdGlhbD0iSW5pdGlhbCIsZS5Ob3RpZnlXYWl0PSJOb3RpZnlXYWl0IixlLlN1YnNjcmliZWQ9IlN1YnNjcmliZWQiLGUuVGVybWluYXRlZD0iVGVybWluYXRlZCJ9KEplfHwoSmU9e30pKTtjbGFzcyB0dHtjb25zdHJ1Y3RvcihlLHQ9e30pe3RoaXMuX2Rpc3Bvc2VkPSExLHRoaXMuX3N0YXRlPUplLkluaXRpYWwsdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXI9bmV3IE0uRXZlbnRFbWl0dGVyLHRoaXMuX2xvZ2dlcj1lLmdldExvZ2dlcigic2lwLlN1YnNjcmlwdGlvbiIpLHRoaXMuX3VzZXJBZ2VudD1lLHRoaXMuZGVsZWdhdGU9dC5kZWxlZ2F0ZX1kaXNwb3NlKCl7cmV0dXJuIHRoaXMuX2Rpc3Bvc2VkfHwodGhpcy5fZGlzcG9zZWQ9ITAsdGhpcy5fc3RhdGVFdmVudEVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCkpLFByb21pc2UucmVzb2x2ZSgpfWdldCBkaWFsb2coKXtyZXR1cm4gdGhpcy5fZGlhbG9nfWdldCBkaXNwb3NlZCgpe3JldHVybiB0aGlzLl9kaXNwb3NlZH1nZXQgc3RhdGUoKXtyZXR1cm4gdGhpcy5fc3RhdGV9Z2V0IHN0YXRlQ2hhbmdlKCl7cmV0dXJuIE5lKHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyKX1zdGF0ZVRyYW5zaXRpb24oZSl7Y29uc3QgdD0oKT0+e3Rocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLl9zdGF0ZX0gdG8gJHtlfWApfTtzd2l0Y2godGhpcy5fc3RhdGUpe2Nhc2UgSmUuSW5pdGlhbDplIT09SmUuTm90aWZ5V2FpdCYmZSE9PUplLlRlcm1pbmF0ZWQmJnQoKTticmVhaztjYXNlIEplLk5vdGlmeVdhaXQ6ZSE9PUplLlN1YnNjcmliZWQmJmUhPT1KZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBKZS5TdWJzY3JpYmVkOmUhPT1KZS5UZXJtaW5hdGVkJiZ0KCk7YnJlYWs7Y2FzZSBKZS5UZXJtaW5hdGVkOnQoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHN0YXRlLiIpfXRoaXMuX3N0YXRlIT09ZSYmKHRoaXMuX3N0YXRlPWUsdGhpcy5fbG9nZ2VyLmxvZyhgU3Vic2NyaXB0aW9uICR7dGhpcy5fZGlhbG9nP3RoaXMuX2RpYWxvZy5pZDp2b2lkIDB9IHRyYW5zaXRpb25lZCB0byAke3RoaXMuX3N0YXRlfWApLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyLmVtaXQoImV2ZW50Iix0aGlzLl9zdGF0ZSksZT09PUplLlRlcm1pbmF0ZWQmJnRoaXMuZGlzcG9zZSgpKX19Y2xhc3Mgc3QgZXh0ZW5kcyB0dHtjb25zdHJ1Y3RvcihlLHQscyxpPXt9KXtzdXBlcihlLGkpLHRoaXMuYm9keT12b2lkIDAsdGhpcy5sb2dnZXI9ZS5nZXRMb2dnZXIoInNpcC5TdWJzY3JpYmVyIiksaS5ib2R5JiYodGhpcy5ib2R5PXtib2R5OmkuYm9keSxjb250ZW50VHlwZTppLmNvbnRlbnRUeXBlP2kuY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3NkcCJ9KSx0aGlzLnRhcmdldFVSST10LHRoaXMuZXZlbnQ9cyx2b2lkIDA9PT1pLmV4cGlyZXM/dGhpcy5leHBpcmVzPTM2MDA6Im51bWJlciIhPXR5cGVvZiBpLmV4cGlyZXM/KHRoaXMubG9nZ2VyLndhcm4oJ09wdGlvbiAiZXhwaXJlcyIgbXVzdCBiZSBhIG51bWJlci4gVXNpbmcgZGVmYXVsdCBvZiAzNjAwLicpLHRoaXMuZXhwaXJlcz0zNjAwKTp0aGlzLmV4cGlyZXM9aS5leHBpcmVzLHRoaXMuZXh0cmFIZWFkZXJzPShpLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCksdGhpcy5zdWJzY3JpYmVyUmVxdWVzdD10aGlzLmluaXRTdWJzY3JpYmVyUmVxdWVzdCgpLHRoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZT10aGlzLnN1YnNjcmliZXJSZXF1ZXN0Lm1lc3NhZ2UsdGhpcy5pZD10aGlzLm91dGdvaW5nUmVxdWVzdE1lc3NhZ2UuY2FsbElkK3RoaXMub3V0Z29pbmdSZXF1ZXN0TWVzc2FnZS5mcm9tLnBhcmFtZXRlcnMudGFnK3RoaXMuZXZlbnQsdGhpcy5fdXNlckFnZW50Ll9zdWJzY3JpcHRpb25zW3RoaXMuaWRdPXRoaXN9ZGlzcG9zZSgpe3JldHVybiB0aGlzLmRpc3Bvc2VkP1Byb21pc2UucmVzb2x2ZSgpOih0aGlzLmxvZ2dlci5sb2coYFN1YnNjcmlwdGlvbiAke3RoaXMuaWR9IGluIHN0YXRlICR7dGhpcy5zdGF0ZX0gaXMgYmVpbmcgZGlzcG9zZWRgKSxkZWxldGUgdGhpcy5fdXNlckFnZW50Ll9zdWJzY3JpcHRpb25zW3RoaXMuaWRdLHRoaXMucmV0cnlBZnRlclRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlBZnRlclRpbWVyKSx0aGlzLnJldHJ5QWZ0ZXJUaW1lcj12b2lkIDApLHRoaXMuc3Vic2NyaWJlclJlcXVlc3QuZGlzcG9zZSgpLHN1cGVyLmRpc3Bvc2UoKS50aGVuKCgpPT57aWYodGhpcy5zdGF0ZT09PUplLlN1YnNjcmliZWQpe2lmKCF0aGlzLl9kaWFsb2cpdGhyb3cgbmV3IEVycm9yKCJEaWFsb2cgdW5kZWZpbmVkLiIpO2lmKHRoaXMuX2RpYWxvZy5zdWJzY3JpcHRpb25TdGF0ZT09PVUuUGVuZGluZ3x8dGhpcy5fZGlhbG9nLnN1YnNjcmlwdGlvblN0YXRlPT09VS5BY3RpdmUpe2NvbnN0IGU9dGhpcy5fZGlhbG9nO3JldHVybiBuZXcgUHJvbWlzZSgodCxzKT0+e2UuZGVsZWdhdGU9e29uVGVybWluYXRlZDooKT0+dCgpfSxlLnVuc3Vic2NyaWJlKCl9KX19fSkpfXN1YnNjcmliZShlPXt9KXtzd2l0Y2godGhpcy5zdWJzY3JpYmVyUmVxdWVzdC5zdGF0ZSl7Y2FzZSBVLkluaXRpYWw6dGhpcy5zdGF0ZT09PUplLkluaXRpYWwmJnRoaXMuc3RhdGVUcmFuc2l0aW9uKEplLk5vdGlmeVdhaXQpLHRoaXMuc3Vic2NyaWJlclJlcXVlc3Quc3Vic2NyaWJlKCkudGhlbihlPT57ZS5zdWNjZXNzPyhlLnN1Y2Nlc3Muc3Vic2NyaXB0aW9uJiYodGhpcy5fZGlhbG9nPWUuc3VjY2Vzcy5zdWJzY3JpcHRpb24sdGhpcy5fZGlhbG9nLmRlbGVnYXRlPXtvbk5vdGlmeTplPT50aGlzLm9uTm90aWZ5KGUpLG9uUmVmcmVzaDplPT50aGlzLm9uUmVmcmVzaChlKSxvblRlcm1pbmF0ZWQ6KCk9Pnt0aGlzLnN0YXRlIT09SmUuVGVybWluYXRlZCYmdGhpcy5zdGF0ZVRyYW5zaXRpb24oSmUuVGVybWluYXRlZCl9fSksdGhpcy5vbk5vdGlmeShlLnN1Y2Nlc3MucmVxdWVzdCkpOmUuZmFpbHVyZSYmdGhpcy51bnN1YnNjcmliZSgpfSk7YnJlYWs7Y2FzZSBVLk5vdGlmeVdhaXQ6Y2FzZSBVLlBlbmRpbmc6YnJlYWs7Y2FzZSBVLkFjdGl2ZTppZih0aGlzLl9kaWFsb2cpe3RoaXMuX2RpYWxvZy5yZWZyZXNoKCkuZGVsZWdhdGU9e29uQWNjZXB0OmU9PnRoaXMub25BY2NlcHRlZChlKSxvblJlZGlyZWN0OmU9PnRoaXMudW5zdWJzY3JpYmUoKSxvblJlamVjdDplPT50aGlzLnVuc3Vic2NyaWJlKCl9fWJyZWFrO2Nhc2UgVS5UZXJtaW5hdGVkOn1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9dW5zdWJzY3JpYmUoZT17fSl7aWYodGhpcy5kaXNwb3NlZClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7c3dpdGNoKHRoaXMuc3Vic2NyaWJlclJlcXVlc3Quc3RhdGUpe2Nhc2UgVS5Jbml0aWFsOmNhc2UgVS5Ob3RpZnlXYWl0OmJyZWFrO2Nhc2UgVS5QZW5kaW5nOmNhc2UgVS5BY3RpdmU6dGhpcy5fZGlhbG9nJiZ0aGlzLl9kaWFsb2cudW5zdWJzY3JpYmUoKTticmVhaztjYXNlIFUuVGVybWluYXRlZDpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biBzdGF0ZS4iKX1yZXR1cm4gdGhpcy5zdGF0ZVRyYW5zaXRpb24oSmUuVGVybWluYXRlZCksUHJvbWlzZS5yZXNvbHZlKCl9X3JlZnJlc2goKXtyZXR1cm4gdGhpcy5zdWJzY3JpYmVyUmVxdWVzdC5zdGF0ZT09PVUuQWN0aXZlP3RoaXMuc3Vic2NyaWJlKCk6UHJvbWlzZS5yZXNvbHZlKCl9b25BY2NlcHRlZChlKXt9b25Ob3RpZnkoZSl7aWYodGhpcy5kaXNwb3NlZClyZXR1cm4gdm9pZCBlLmFjY2VwdCgpO2lmKHRoaXMuc3RhdGUhPT1KZS5TdWJzY3JpYmVkJiZ0aGlzLnN0YXRlVHJhbnNpdGlvbihKZS5TdWJzY3JpYmVkKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KXtjb25zdCB0PW5ldyBNZShlKTt0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KHQpfWVsc2UgZS5hY2NlcHQoKTtjb25zdCB0PWUubWVzc2FnZS5wYXJzZUhlYWRlcigiU3Vic2NyaXB0aW9uLVN0YXRlIik7aWYodCYmdC5zdGF0ZSlzd2l0Y2godC5zdGF0ZSl7Y2FzZSJ0ZXJtaW5hdGVkIjppZih0LnJlYXNvbilzd2l0Y2godGhpcy5sb2dnZXIubG9nKCJUZXJtaW5hdGVkIHN1YnNjcmlwdGlvbiB3aXRoIHJlYXNvbiAiK3QucmVhc29uKSx0LnJlYXNvbil7Y2FzZSJkZWFjdGl2YXRlZCI6Y2FzZSJ0aW1lb3V0IjpyZXR1cm4gdGhpcy5pbml0U3Vic2NyaWJlclJlcXVlc3QoKSx2b2lkIHRoaXMuc3Vic2NyaWJlKCk7Y2FzZSJwcm9iYXRpb24iOmNhc2UiZ2l2ZXVwIjpyZXR1cm4gdGhpcy5pbml0U3Vic2NyaWJlclJlcXVlc3QoKSx2b2lkKHQucGFyYW1zJiZ0LnBhcmFtc1sicmV0cnktYWZ0ZXIiXT90aGlzLnJldHJ5QWZ0ZXJUaW1lcj1zZXRUaW1lb3V0KCgpPT57dGhpcy5zdWJzY3JpYmUoKX0sdC5wYXJhbXNbInJldHJ5LWFmdGVyIl0pOnRoaXMuc3Vic2NyaWJlKCkpfXRoaXMudW5zdWJzY3JpYmUoKX19b25SZWZyZXNoKGUpe2UuZGVsZWdhdGU9e29uQWNjZXB0OmU9PnRoaXMub25BY2NlcHRlZChlKX19aW5pdFN1YnNjcmliZXJSZXF1ZXN0KCl7Y29uc3QgZT17ZXh0cmFIZWFkZXJzOnRoaXMuZXh0cmFIZWFkZXJzLGJvZHk6dGhpcy5ib2R5P1ModGhpcy5ib2R5KTp2b2lkIDB9O3JldHVybiB0aGlzLnN1YnNjcmliZXJSZXF1ZXN0PW5ldyBpdCh0aGlzLl91c2VyQWdlbnQudXNlckFnZW50Q29yZSx0aGlzLnRhcmdldFVSSSx0aGlzLmV2ZW50LHRoaXMuZXhwaXJlcyxlKSx0aGlzLnN1YnNjcmliZXJSZXF1ZXN0LmRlbGVnYXRlPXtvbkFjY2VwdDplPT50aGlzLm9uQWNjZXB0ZWQoZSl9LHRoaXMuc3Vic2NyaWJlclJlcXVlc3R9fWNsYXNzIGl0e2NvbnN0cnVjdG9yKGUsdCxzLGkscixuKXt0aGlzLmNvcmU9ZSx0aGlzLnRhcmdldD10LHRoaXMuZXZlbnQ9cyx0aGlzLmV4cGlyZXM9aSx0aGlzLnN1YnNjcmliZWQ9ITEsdGhpcy5sb2dnZXI9ZS5sb2dnZXJGYWN0b3J5LmdldExvZ2dlcigic2lwLlN1YnNjcmliZXIiKSx0aGlzLmRlbGVnYXRlPW47Y29uc3Qgbz0iQWxsb3c6ICIrdWUudG9TdHJpbmcoKSxhPShyJiZyLmV4dHJhSGVhZGVyc3x8W10pLnNsaWNlKCk7YS5wdXNoKG8pLGEucHVzaCgiRXZlbnQ6ICIrdGhpcy5ldmVudCksYS5wdXNoKCJFeHBpcmVzOiAiK3RoaXMuZXhwaXJlcyksYS5wdXNoKCJDb250YWN0OiAiK3RoaXMuY29yZS5jb25maWd1cmF0aW9uLmNvbnRhY3QudG9TdHJpbmcoKSk7Y29uc3QgYz1yJiZyLmJvZHk7dGhpcy5tZXNzYWdlPWUubWFrZU91dGdvaW5nUmVxdWVzdE1lc3NhZ2UobC5TVUJTQ1JJQkUsdGhpcy50YXJnZXQsdGhpcy5jb3JlLmNvbmZpZ3VyYXRpb24uYW9yLHRoaXMudGFyZ2V0LHt9LGEsYyl9ZGlzcG9zZSgpe3RoaXMucmVxdWVzdCYmKHRoaXMucmVxdWVzdC53YWl0Tm90aWZ5U3RvcCgpLHRoaXMucmVxdWVzdC5kaXNwb3NlKCksdGhpcy5yZXF1ZXN0PXZvaWQgMCl9Z2V0IHN0YXRlKCl7cmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9uP3RoaXMuc3Vic2NyaXB0aW9uLnN1YnNjcmlwdGlvblN0YXRlOnRoaXMuc3Vic2NyaWJlZD9VLk5vdGlmeVdhaXQ6VS5Jbml0aWFsfXN1YnNjcmliZSgpe3JldHVybiB0aGlzLnN1YnNjcmliZWQ/UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJOb3QgaW4gaW5pdGlhbCBzdGF0ZS4gRGlkIHlvdSBjYWxsIHN1YnNjcmliZSBtb3JlIHRoYW4gb25jZT8iKSk6KHRoaXMuc3Vic2NyaWJlZD0hMCxuZXcgUHJvbWlzZShlPT57aWYoIXRoaXMubWVzc2FnZSl0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgdW5kZWZpbmVkLiIpO3RoaXMucmVxdWVzdD10aGlzLmNvcmUuc3Vic2NyaWJlKHRoaXMubWVzc2FnZSx7b25BY2NlcHQ6ZT0+e3RoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25BY2NlcHQmJnRoaXMuZGVsZWdhdGUub25BY2NlcHQoZSl9LG9uTm90aWZ5OnQ9Pnt0aGlzLnN1YnNjcmlwdGlvbj10LnN1YnNjcmlwdGlvbix0aGlzLnN1YnNjcmlwdGlvbiYmKHRoaXMuc3Vic2NyaXB0aW9uLmF1dG9SZWZyZXNoPSEwKSxlKHtzdWNjZXNzOnR9KX0sb25Ob3RpZnlUaW1lb3V0OigpPT57ZSh7ZmFpbHVyZTp7fX0pfSxvblJlZGlyZWN0OnQ9PntlKHtmYWlsdXJlOntyZXNwb25zZTp0fX0pfSxvblJlamVjdDp0PT57ZSh7ZmFpbHVyZTp7cmVzcG9uc2U6dH19KX19KX0pKX19IWZ1bmN0aW9uKGUpe2UuQ29ubmVjdGluZz0iQ29ubmVjdGluZyIsZS5Db25uZWN0ZWQ9IkNvbm5lY3RlZCIsZS5EaXNjb25uZWN0aW5nPSJEaXNjb25uZWN0aW5nIixlLkRpc2Nvbm5lY3RlZD0iRGlzY29ubmVjdGVkIn0oemV8fCh6ZT17fSkpLGZ1bmN0aW9uKGUpe2UuU3RhcnRlZD0iU3RhcnRlZCIsZS5TdG9wcGVkPSJTdG9wcGVkIn0oWGV8fChYZT17fSkpO2NvbnN0IHJ0PShlLHQpPT57Y29uc3Qgcz1bXSxpPWUuc3BsaXQoL1xyXG4vKTtsZXQgcjtmb3IobGV0IGU9MDtlPGkubGVuZ3RoOyl7Y29uc3Qgbj1pW2VdO2lmKC9ebT0oPzphdWRpb3x2aWRlbykvLnRlc3Qobikpcj17aW5kZXg6ZSxzdHJpcHBlZDpbXX0scy5wdXNoKHIpO2Vsc2UgaWYocil7Y29uc3Qgcz0vXmE9cnRwbWFwOihcZCspIChbXi9dKylcLy8uZXhlYyhuKTtpZihzJiZ0PT09c1syXSl7aS5zcGxpY2UoZSwxKSxyLnN0cmlwcGVkLnB1c2goc1sxXSk7Y29udGludWV9fWUrK31mb3IoY29uc3QgZSBvZiBzKXtjb25zdCB0PWlbZS5pbmRleF0uc3BsaXQoIiAiKTtmb3IobGV0IHM9MztzPHQubGVuZ3RoOyktMT09PWUuc3RyaXBwZWQuaW5kZXhPZih0W3NdKT9zKys6dC5zcGxpY2UocywxKTtpW2UuaW5kZXhdPXQuam9pbigiICIpfXJldHVybiBpLmpvaW4oIlxyXG4iKX07ZnVuY3Rpb24gbnQoZSl7cmV0dXJuIGUuc2RwPShlLnNkcHx8IiIpLnJlcGxhY2UoL15hPWNhbmRpZGF0ZTpcZCsgXGQrIHRjcCAuKj9cclxuL2dpbSwiIiksUHJvbWlzZS5yZXNvbHZlKGUpfWZ1bmN0aW9uIG90KGUpe3JldHVybiBlLnNkcD1ydChlLnNkcHx8IiIsInRlbGVwaG9uZS1ldmVudCIpLFByb21pc2UucmVzb2x2ZShlKX1mdW5jdGlvbiBhdChlKXtyZXR1cm4gZS5zZHA9KGUuc2RwfHwiIikucmVwbGFjZSgvXihhPWltYWdlYXR0cjouKj8pKHh8eSk9XFswLS9nbSwiJDEkMj1bMToiKSxQcm9taXNlLnJlc29sdmUoZSl9ZnVuY3Rpb24gY3QoZSl7cmV0dXJuIGUuc2RwPXJ0KGUuc2RwfHwiIiwiRzcyMiIpLFByb21pc2UucmVzb2x2ZShlKX1mdW5jdGlvbiBodChlKXtyZXR1cm4gdD0+KHQuc2RwPXJ0KHQuc2RwfHwiIixlKSxQcm9taXNlLnJlc29sdmUodCkpfWZ1bmN0aW9uIGR0KGUpe3JldHVybiBlLnNkcD0oKGUsdCk9Pntjb25zdCBzPW5ldyBSZWdFeHAoIm09Iit0KyIuKiQiLCJnbSIpLGk9bmV3IFJlZ0V4cCgiXmE9Z3JvdXA6LiokIiwiZ20iKTtpZihzLnRlc3QoZSkpe2xldCBzO2NvbnN0IHI9KGU9ZS5zcGxpdCgvXm09L2dtKS5maWx0ZXIoZT0+e2lmKGUuc3Vic3RyKDAsdC5sZW5ndGgpPT09dCl7aWYocz1lLm1hdGNoKC9eYT1taWQ6LiokL2dtKSxzKXtjb25zdCBlPXNbMF0ubWF0Y2goLzouKyQvZyk7ZSYmKHM9ZVswXS5zdWJzdHIoMSkpfXJldHVybiExfXJldHVybiEwfSkuam9pbigibT0iKSkubWF0Y2goaSk7aWYociYmMT09PXIubGVuZ3RoKXtsZXQgdD1yWzBdO2NvbnN0IG49bmV3IFJlZ0V4cCgiICoiK3MrIlteIF0qIiwiZyIpO3Q9dC5yZXBsYWNlKG4sIiIpLGU9ZS5zcGxpdChpKS5qb2luKHQpfX1yZXR1cm4gZX0pKGUuc2RwfHwiIiwidmlkZW8iKSxQcm9taXNlLnJlc29sdmUoZSl9ZnVuY3Rpb24gZ3QoZSl7bGV0IHQ9ZS5zZHB8fCIiO2lmKC0xPT09dC5zZWFyY2goL15hPW1pZC4qJC9nbSkpe2NvbnN0IHM9dC5tYXRjaCgvXm09LiokL2dtKSxpPXQuc3BsaXQoL15tPS4qJC9nbSk7cyYmcy5mb3JFYWNoKChlLHQpPT57c1t0XT1lKyJcbmE9bWlkOiIrdH0pLGkuZm9yRWFjaCgoZSx0KT0+e3MmJnNbdF0mJihpW3RdPWUrc1t0XSl9KSx0PWkuam9pbigiIiksZS5zZHA9dH1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGUpfWZ1bmN0aW9uIGx0KGUsdCl7cmV0dXJuIGUucmVkdWNlKChlLHQpPT5lPWUudGhlbih0KSxQcm9taXNlLnJlc29sdmUodCkpfWNsYXNzIHV0IGV4dGVuZHMgTS5FdmVudEVtaXR0ZXJ7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMub3B0aW9ucz10fHx7fSx0aGlzLmxvZ2dlcj1lLHRoaXMuZHRtZlNlbmRlcj12b2lkIDAsdGhpcy5zaG91bGRBY3F1aXJlTWVkaWE9ITAsdGhpcy5DT05URU5UX1RZUEU9ImFwcGxpY2F0aW9uL3NkcCIsdGhpcy5DPXtESVJFQ1RJT046e05VTEw6bnVsbCxTRU5EUkVDVjoic2VuZHJlY3YiLFNFTkRPTkxZOiJzZW5kb25seSIsUkVDVk9OTFk6InJlY3Zvbmx5IixJTkFDVElWRToiaW5hY3RpdmUifX0sdGhpcy5sb2dnZXIubG9nKCJTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9uczogIitKU09OLnN0cmluZ2lmeSh0aGlzLm9wdGlvbnMpKSx0aGlzLmRpcmVjdGlvbj10aGlzLkMuRElSRUNUSU9OLk5VTEwsdGhpcy5tb2RpZmllcnM9dGhpcy5vcHRpb25zLm1vZGlmaWVyc3x8W10sQXJyYXkuaXNBcnJheSh0aGlzLm1vZGlmaWVycyl8fCh0aGlzLm1vZGlmaWVycz1bdGhpcy5tb2RpZmllcnNdKSx0aGlzLmljZUdhdGhlcmluZ1RpbWVvdXQ9ITEsdGhpcy5pbml0UGVlckNvbm5lY3Rpb24odGhpcy5vcHRpb25zLnBlZXJDb25uZWN0aW9uT3B0aW9ucyksdGhpcy5jb25zdHJhaW50cz10aGlzLmNoZWNrQW5kRGVmYXVsdENvbnN0cmFpbnRzKHRoaXMub3B0aW9ucy5jb25zdHJhaW50cyl9c3RhdGljIGRlZmF1bHRGYWN0b3J5KGUsdCl7Y29uc3Qgcz1lLnVzZXJBZ2VudC5nZXRMb2dnZXIoInNpcC5TZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyIixlLmlkKTtyZXR1cm4gbmV3IHV0KHMsdCl9Y2xvc2UoKXt0aGlzLmxvZ2dlci5sb2coImNsb3NpbmcgUGVlckNvbm5lY3Rpb24iKSx0aGlzLnBlZXJDb25uZWN0aW9uJiYiY2xvc2VkIiE9PXRoaXMucGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUmJih0aGlzLnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnM/dGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaChlPT57ZS50cmFjayYmZS50cmFjay5zdG9wKCl9KToodGhpcy5sb2dnZXIud2FybigiVXNpbmcgZ2V0TG9jYWxTdHJlYW1zIHdoaWNoIGlzIGRlcHJlY2F0ZWQiKSx0aGlzLnBlZXJDb25uZWN0aW9uLmdldExvY2FsU3RyZWFtcygpLmZvckVhY2goZT0+e2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChlPT57ZS5zdG9wKCl9KX0pKSx0aGlzLnBlZXJDb25uZWN0aW9uLmdldFJlY2VpdmVycz90aGlzLnBlZXJDb25uZWN0aW9uLmdldFJlY2VpdmVycygpLmZvckVhY2goZT0+e2UudHJhY2smJmUudHJhY2suc3RvcCgpfSk6KHRoaXMubG9nZ2VyLndhcm4oIlVzaW5nIGdldFJlbW90ZVN0cmVhbXMgd2hpY2ggaXMgZGVwcmVjYXRlZCIpLHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0UmVtb3RlU3RyZWFtcygpLmZvckVhY2goZT0+e2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChlPT57ZS5zdG9wKCl9KX0pKSx0aGlzLnJlc2V0SWNlR2F0aGVyaW5nQ29tcGxldGUoKSx0aGlzLnBlZXJDb25uZWN0aW9uLmNsb3NlKCkpfWdldERlc2NyaXB0aW9uKGU9e30sdD1bXSl7ZS5wZWVyQ29ubmVjdGlvbk9wdGlvbnMmJnRoaXMuaW5pdFBlZXJDb25uZWN0aW9uKGUucGVlckNvbm5lY3Rpb25PcHRpb25zKTtsZXQgcz1PYmplY3QuYXNzaWduKHt9LHRoaXMuY29uc3RyYWludHMsZS5jb25zdHJhaW50cyk7cmV0dXJuIHM9dGhpcy5jaGVja0FuZERlZmF1bHRDb25zdHJhaW50cyhzKSxKU09OLnN0cmluZ2lmeShzKSE9PUpTT04uc3RyaW5naWZ5KHRoaXMuY29uc3RyYWludHMpJiYodGhpcy5jb25zdHJhaW50cz1zLHRoaXMuc2hvdWxkQWNxdWlyZU1lZGlhPSEwKSxBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLHQ9dC5jb25jYXQodGhpcy5tb2RpZmllcnMpLFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PntpZih0aGlzLnNob3VsZEFjcXVpcmVNZWRpYSlyZXR1cm4gdGhpcy5hY3F1aXJlKHRoaXMuY29uc3RyYWludHMpLnRoZW4oKCk9Pnt0aGlzLnNob3VsZEFjcXVpcmVNZWRpYT0hMX0pfSkudGhlbigoKT0+dGhpcy5jcmVhdGVPZmZlck9yQW5zd2VyKGUuUlRDT2ZmZXJPcHRpb25zLHQpKS50aGVuKGU9PntpZih2b2lkIDA9PT1lLnNkcCl0aHJvdyBuZXcgX2UoIlNEUCB1bmRlZmluZWQuIik7cmV0dXJuIHRoaXMuZW1pdCgiZ2V0RGVzY3JpcHRpb24iLGUpLHtib2R5OmUuc2RwLGNvbnRlbnRUeXBlOnRoaXMuQ09OVEVOVF9UWVBFfX0pfWhhc0Rlc2NyaXB0aW9uKGUpe3JldHVybiBlPT09dGhpcy5DT05URU5UX1RZUEV9aG9sZE1vZGlmaWVyKGUpe3JldHVybiBlLnNkcD8oL2E9KHNlbmRyZWN2fHNlbmRvbmx5fHJlY3Zvbmx5fGluYWN0aXZlKS8udGVzdChlLnNkcCk/KGUuc2RwPWUuc2RwLnJlcGxhY2UoL2E9c2VuZHJlY3ZcclxuL2csImE9c2VuZG9ubHlcclxuIiksZS5zZHA9ZS5zZHAucmVwbGFjZSgvYT1yZWN2b25seVxyXG4vZywiYT1pbmFjdGl2ZVxyXG4iKSk6ZS5zZHA9ZS5zZHAucmVwbGFjZSgvKG09W15ccl0qXHJcbikvZywiJDFhPXNlbmRvbmx5XHJcbiIpLFByb21pc2UucmVzb2x2ZShlKSk6UHJvbWlzZS5yZXNvbHZlKGUpfXNldERlc2NyaXB0aW9uKGUsdD17fSxzPVtdKXt0LnBlZXJDb25uZWN0aW9uT3B0aW9ucyYmdGhpcy5pbml0UGVlckNvbm5lY3Rpb24odC5wZWVyQ29ubmVjdGlvbk9wdGlvbnMpLEFycmF5LmlzQXJyYXkocyl8fChzPVtzXSkscz1zLmNvbmNhdCh0aGlzLm1vZGlmaWVycyk7Y29uc3QgaT17dHlwZTp0aGlzLmhhc09mZmVyKCJsb2NhbCIpPyJhbnN3ZXIiOiJvZmZlciIsc2RwOmV9O3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT57aWYodGhpcy5zaG91bGRBY3F1aXJlTWVkaWEmJnRoaXMub3B0aW9ucy5hbHdheXNBY3F1aXJlTWVkaWFGaXJzdClyZXR1cm4gdGhpcy5hY3F1aXJlKHRoaXMuY29uc3RyYWludHMpLnRoZW4oKCk9Pnt0aGlzLnNob3VsZEFjcXVpcmVNZWRpYT0hMX0pfSkudGhlbigoKT0+bHQocyxpKSkuY2F0Y2goZT0+e2lmKGUgaW5zdGFuY2VvZiBfZSl0aHJvdyBlO2xldCB0PSJUaGUgbW9kaWZpZXJzIGRpZCBub3QgcmVzb2x2ZSBzdWNjZXNzZnVsbHkuIjtlLm5hbWUmJih0Kz0iICIrZS5uYW1lKSxlLm1lc3NhZ2UmJih0Kz0iICIrZS5tZXNzYWdlKTtjb25zdCBzPW5ldyBfZSh0KTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0KSx0aGlzLmVtaXQoInBlZXJDb25uZWN0aW9uLXNldFJlbW90ZURlc2NyaXB0aW9uRmFpbGVkIixzKSxzfSkudGhlbihlPT4odGhpcy5lbWl0KCJzZXREZXNjcmlwdGlvbiIsZSksdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihlKSkpLmNhdGNoKGk9PntpZigvXm09dmlkZW8uKyQvZ20udGVzdChlKSYmIXQuZGlzYWJsZUF1ZGlvRmFsbGJhY2spcmV0dXJuIHQuZGlzYWJsZUF1ZGlvRmFsbGJhY2s9ITAsdGhpcy5zZXREZXNjcmlwdGlvbihlLHQsW2R0XS5jb25jYXQocykpO2lmKGkgaW5zdGFuY2VvZiBfZSl0aHJvdyBpO2xldCByPSJzZXRSZW1vdGVEZXNjcmlwdGlvbiBmYWlsZWQuIjtpLm5hbWUmJihyKz0iICIraS5uYW1lKSxpLm1lc3NhZ2UmJihyKz0iICIraS5tZXNzYWdlKTtjb25zdCBuPW5ldyBfZShyKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihyKSx0aGlzLmVtaXQoInBlZXJDb25uZWN0aW9uLXNldFJlbW90ZURlc2NyaXB0aW9uRmFpbGVkIixuKSxufSkudGhlbigoKT0+e3RoaXMucGVlckNvbm5lY3Rpb24uZ2V0UmVjZWl2ZXJzP3RoaXMuZW1pdCgic2V0UmVtb3RlRGVzY3JpcHRpb24iLHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0UmVjZWl2ZXJzKCkpOnRoaXMuZW1pdCgic2V0UmVtb3RlRGVzY3JpcHRpb24iLHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0UmVtb3RlU3RyZWFtcygpKSx0aGlzLmVtaXQoImNvbmZpcm1lZCIsdGhpcyl9KX1zZW5kRHRtZihlLHQ9e30pe2lmKCF0aGlzLmR0bWZTZW5kZXImJnRoaXMuaGFzQnJvd3NlckdldFNlbmRlclN1cHBvcnQoKSl7Y29uc3QgZT10aGlzLnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKTtlLmxlbmd0aD4wJiYodGhpcy5kdG1mU2VuZGVyPWVbMF0uZHRtZil9aWYoIXRoaXMuZHRtZlNlbmRlciYmdGhpcy5oYXNCcm93c2VyVHJhY2tTdXBwb3J0KCkpe2NvbnN0IGU9dGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRMb2NhbFN0cmVhbXMoKTtpZihlLmxlbmd0aD4wKXtjb25zdCB0PWVbMF0uZ2V0QXVkaW9UcmFja3MoKTt0Lmxlbmd0aD4wJiYodGhpcy5kdG1mU2VuZGVyPXRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlRFRNRlNlbmRlcih0WzBdKSl9fWlmKCF0aGlzLmR0bWZTZW5kZXIpcmV0dXJuITE7dHJ5e3RoaXMuZHRtZlNlbmRlci5pbnNlcnREVE1GKGUsdC5kdXJhdGlvbix0LmludGVyVG9uZUdhcCl9Y2F0Y2goZSl7aWYoIkludmFsaWRTdGF0ZUVycm9yIj09PWUudHlwZXx8IkludmFsaWRDaGFyYWN0ZXJFcnJvciI9PT1lLnR5cGUpcmV0dXJuIHRoaXMubG9nZ2VyLmVycm9yKGUpLCExO3Rocm93IGV9cmV0dXJuIHRoaXMubG9nZ2VyLmxvZygiRFRNRiBzZW50IHZpYSBSVFA6ICIrZS50b1N0cmluZygpKSwhMH1nZXREaXJlY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJlY3Rpb259b24oZSx0KXtyZXR1cm4gc3VwZXIub24oZSx0KX1nZXRNZWRpYVN0cmVhbShlKXtyZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoZSl9Y3JlYXRlT2ZmZXJPckFuc3dlcihlPXt9LHQ9W10pe2NvbnN0IHM9dGhpcy5oYXNPZmZlcigicmVtb3RlIik/ImNyZWF0ZUFuc3dlciI6ImNyZWF0ZU9mZmVyIixpPXRoaXMucGVlckNvbm5lY3Rpb247cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhzKSwodGhpcy5oYXNPZmZlcigicmVtb3RlIik/aS5jcmVhdGVBbnN3ZXI6aS5jcmVhdGVPZmZlcikuYXBwbHkoaSxlKS5jYXRjaChlPT57aWYoZSBpbnN0YW5jZW9mIF9lKXRocm93IGU7bGV0IHQ9InBlZXJDb25uZWN0aW9uLSIrcysiIGZhaWxlZC4iO2UubmFtZSYmKHQrPSIgIitlLm5hbWUpLGUubWVzc2FnZSYmKHQrPSIgIitlLm1lc3NhZ2UpO2NvbnN0IGk9bmV3IF9lKHQpO3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQpLHRoaXMuZW1pdCgicGVlckNvbm5lY3Rpb24tIitzKyJGYWlsZWQiLGkpLGl9KS50aGVuKGU9Pmx0KHQsdGhpcy5jcmVhdGVSVENTZXNzaW9uRGVzY3JpcHRpb25Jbml0KGUpKSkudGhlbihlPT4odGhpcy5yZXNldEljZUdhdGhlcmluZ0NvbXBsZXRlKCksdGhpcy5sb2dnZXIubG9nKCJTZXR0aW5nIGxvY2FsIHNkcC4iKSx0aGlzLmxvZ2dlci5sb2coInNkcCBpcyAiK2Uuc2RwfHwhMSksaS5zZXRMb2NhbERlc2NyaXB0aW9uKGUpKSkuY2F0Y2goZT0+e2lmKGUgaW5zdGFuY2VvZiBfZSl0aHJvdyBlO2xldCB0PSJwZWVyQ29ubmVjdGlvbi0iK3MrIiBmYWlsZWQuIjtlLm5hbWUmJih0Kz0iICIrZS5uYW1lKSxlLm1lc3NhZ2UmJih0Kz0iICIrZS5tZXNzYWdlKTtjb25zdCBpPW5ldyBfZSh0KTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0KSx0aGlzLmVtaXQoInBlZXJDb25uZWN0aW9uLVNldExvY2FsRGVzY3JpcHRpb25GYWlsZWQiLGkpLGl9KS50aGVuKCgpPT50aGlzLndhaXRGb3JJY2VHYXRoZXJpbmdDb21wbGV0ZSgpKS50aGVuKCgpPT57aWYoIXRoaXMucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbil0aHJvdyBuZXcgX2UoIk1pc3NpbmcgbG9jYWwgZGVzY3JpcHRpb24uIik7Y29uc3QgZT10aGlzLmNyZWF0ZVJUQ1Nlc3Npb25EZXNjcmlwdGlvbkluaXQodGhpcy5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uKTtyZXR1cm4gbHQodCxlKX0pLnRoZW4oZT0+KHRoaXMuc2V0RGlyZWN0aW9uKGUuc2RwfHwiIiksZSkpLmNhdGNoKGU9PntpZihlIGluc3RhbmNlb2YgX2UpdGhyb3cgZTtsZXQgdD0iRXJyb3IuIjtlLm5hbWUmJih0Kz0iICIrZS5uYW1lKSxlLm1lc3NhZ2UmJih0Kz0iICIrZS5tZXNzYWdlKTtjb25zdCBzPW5ldyBfZSh0KTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0KSxzfSl9Y3JlYXRlUlRDU2Vzc2lvbkRlc2NyaXB0aW9uSW5pdChlKXtyZXR1cm57dHlwZTplLnR5cGUsc2RwOmUuc2RwfX1hZGREZWZhdWx0SWNlQ2hlY2tpbmdUaW1lb3V0KGUpe3JldHVybiB2b2lkIDA9PT1lLmljZUNoZWNraW5nVGltZW91dCYmKGUuaWNlQ2hlY2tpbmdUaW1lb3V0PTVlMyksZX1hZGREZWZhdWx0SWNlU2VydmVycyhlKXtyZXR1cm4gZS5pY2VTZXJ2ZXJzfHwoZS5pY2VTZXJ2ZXJzPVt7dXJsczoic3R1bjpzdHVuLmwuZ29vZ2xlLmNvbToxOTMwMiJ9XSksZX1jaGVja0FuZERlZmF1bHRDb25zdHJhaW50cyhlKXtjb25zdCB0PXthdWRpbzohMCx2aWRlbzohdGhpcy5vcHRpb25zLmFsd2F5c0FjcXVpcmVNZWRpYUZpcnN0fTtyZXR1cm4gZT1lfHx0LDA9PT1PYmplY3Qua2V5cyhlKS5sZW5ndGgmJmUuY29uc3RydWN0b3I9PT1PYmplY3Q/dDplfWhhc0Jyb3dzZXJUcmFja1N1cHBvcnQoKXtyZXR1cm4gQm9vbGVhbih0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKX1oYXNCcm93c2VyR2V0U2VuZGVyU3VwcG9ydCgpe3JldHVybiBCb29sZWFuKHRoaXMucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycyl9aW5pdFBlZXJDb25uZWN0aW9uKGU9e30peyhlPXRoaXMuYWRkRGVmYXVsdEljZUNoZWNraW5nVGltZW91dChlKSkucnRjQ29uZmlndXJhdGlvbj1lLnJ0Y0NvbmZpZ3VyYXRpb258fHt9LGUucnRjQ29uZmlndXJhdGlvbj10aGlzLmFkZERlZmF1bHRJY2VTZXJ2ZXJzKGUucnRjQ29uZmlndXJhdGlvbiksdGhpcy5sb2dnZXIubG9nKCJpbml0UGVlckNvbm5lY3Rpb24iKSx0aGlzLnBlZXJDb25uZWN0aW9uJiYodGhpcy5sb2dnZXIubG9nKCJBbHJlYWR5IGhhdmUgYSBwZWVyIGNvbm5lY3Rpb24gZm9yIHRoaXMgc2Vzc2lvbi4gVGVhcmluZyBkb3duLiIpLHRoaXMucmVzZXRJY2VHYXRoZXJpbmdDb21wbGV0ZSgpLHRoaXMucGVlckNvbm5lY3Rpb24uY2xvc2UoKSksdGhpcy5wZWVyQ29ubmVjdGlvbj1uZXcgUlRDUGVlckNvbm5lY3Rpb24oZS5ydGNDb25maWd1cmF0aW9uKSx0aGlzLmxvZ2dlci5sb2coIk5ldyBwZWVyIGNvbm5lY3Rpb24gY3JlYXRlZCIpLCJvbnRyYWNrImluIHRoaXMucGVlckNvbm5lY3Rpb24/dGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKCJ0cmFjayIsZT0+e3RoaXMubG9nZ2VyLmxvZygidHJhY2sgYWRkZWQiKSx0aGlzLmVtaXQoImFkZFRyYWNrIixlKX0pOih0aGlzLmxvZ2dlci53YXJuKCJVc2luZyBvbmFkZHN0cmVhbSB3aGljaCBpcyBkZXByZWNhdGVkIiksdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmFkZHN0cmVhbT1lPT57dGhpcy5sb2dnZXIubG9nKCJzdHJlYW0gYWRkZWQiKSx0aGlzLmVtaXQoImFkZFN0cmVhbSIsZSl9KSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlPWU9Pnt0aGlzLmVtaXQoImljZUNhbmRpZGF0ZSIsZSksZS5jYW5kaWRhdGU/dGhpcy5sb2dnZXIubG9nKCJJQ0UgY2FuZGlkYXRlIHJlY2VpdmVkOiAiKyhudWxsPT09ZS5jYW5kaWRhdGUuY2FuZGlkYXRlP251bGw6ZS5jYW5kaWRhdGUuY2FuZGlkYXRlLnRyaW0oKSkpOm51bGw9PT1lLmNhbmRpZGF0ZSYmKHRoaXMubG9nZ2VyLmxvZygiSUNFIGNhbmRpZGF0ZSBnYXRoZXJpbmcgY29tcGxldGUiKSx0aGlzLnRyaWdnZXJJY2VHYXRoZXJpbmdDb21wbGV0ZSgpKX0sdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlPSgpPT57c3dpdGNoKHRoaXMubG9nZ2VyLmxvZygiUlRDSWNlR2F0aGVyaW5nU3RhdGUgY2hhbmdlZDogIit0aGlzLnBlZXJDb25uZWN0aW9uLmljZUdhdGhlcmluZ1N0YXRlKSx0aGlzLnBlZXJDb25uZWN0aW9uLmljZUdhdGhlcmluZ1N0YXRlKXtjYXNlImdhdGhlcmluZyI6dGhpcy5lbWl0KCJpY2VHYXRoZXJpbmciLHRoaXMpLCF0aGlzLmljZUdhdGhlcmluZ1RpbWVyJiZlLmljZUNoZWNraW5nVGltZW91dCYmKHRoaXMuaWNlR2F0aGVyaW5nVGltZW91dD0hMSx0aGlzLmljZUdhdGhlcmluZ1RpbWVyPXNldFRpbWVvdXQoKCk9Pnt0aGlzLmxvZ2dlci5sb2coIlJUQ0ljZUNoZWNraW5nIFRpbWVvdXQgVHJpZ2dlcmVkIGFmdGVyICIrZS5pY2VDaGVja2luZ1RpbWVvdXQrIiBtaWxsaXNlY29uZHMiKSx0aGlzLmljZUdhdGhlcmluZ1RpbWVvdXQ9ITAsdGhpcy50cmlnZ2VySWNlR2F0aGVyaW5nQ29tcGxldGUoKX0sZS5pY2VDaGVja2luZ1RpbWVvdXQpKTticmVhaztjYXNlImNvbXBsZXRlIjp0aGlzLnRyaWdnZXJJY2VHYXRoZXJpbmdDb21wbGV0ZSgpfX0sdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT0oKT0+e2xldCBlO3N3aXRjaCh0aGlzLnBlZXJDb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZSl7Y2FzZSJuZXciOmU9ImljZUNvbm5lY3Rpb24iO2JyZWFrO2Nhc2UiY2hlY2tpbmciOmU9ImljZUNvbm5lY3Rpb25DaGVja2luZyI7YnJlYWs7Y2FzZSJjb25uZWN0ZWQiOmU9ImljZUNvbm5lY3Rpb25Db25uZWN0ZWQiO2JyZWFrO2Nhc2UiY29tcGxldGVkIjplPSJpY2VDb25uZWN0aW9uQ29tcGxldGVkIjticmVhaztjYXNlImZhaWxlZCI6ZT0iaWNlQ29ubmVjdGlvbkZhaWxlZCI7YnJlYWs7Y2FzZSJkaXNjb25uZWN0ZWQiOmU9ImljZUNvbm5lY3Rpb25EaXNjb25uZWN0ZWQiO2JyZWFrO2Nhc2UiY2xvc2VkIjplPSJpY2VDb25uZWN0aW9uQ2xvc2VkIjticmVhaztkZWZhdWx0OnJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oIlVua25vd24gaWNlQ29ubmVjdGlvbiBzdGF0ZTogIit0aGlzLnBlZXJDb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZSl9dGhpcy5sb2dnZXIubG9nKCJJQ0UgQ29ubmVjdGlvbiBTdGF0ZSBjaGFuZ2VkIHRvICIrZSksdGhpcy5lbWl0KGUsdGhpcyl9fWFjcXVpcmUoZSl7cmV0dXJuIGU9dGhpcy5jaGVja0FuZERlZmF1bHRDb25zdHJhaW50cyhlKSxuZXcgUHJvbWlzZSgodCxzKT0+e3RoaXMubG9nZ2VyLmxvZygiYWNxdWlyaW5nIGxvY2FsIG1lZGlhIiksdGhpcy5lbWl0KCJ1c2VyTWVkaWFSZXF1ZXN0IixlKSxlLmF1ZGlvfHxlLnZpZGVvP3RoaXMuZ2V0TWVkaWFTdHJlYW0oZSkudGhlbihlPT57dGhpcy5lbWl0KCJhZGRUcmFjayIpLHRoaXMuZW1pdCgidXNlck1lZGlhIixlKSx0KGUpfSkuY2F0Y2goZT0+e3RoaXMuZW1pdCgidXNlck1lZGlhRmFpbGVkIixlKSxzKGUpfSk6dChbXSl9KS5jYXRjaChlPT57aWYoZSBpbnN0YW5jZW9mIF9lKXRocm93IGU7bGV0IHQ9IlVuYWJsZSB0byBhY3F1aXJlIHN0cmVhbXMuIjtlLm5hbWUmJih0Kz0iICIrZS5uYW1lKSxlLm1lc3NhZ2UmJih0Kz0iICIrZS5tZXNzYWdlKTtjb25zdCBzPW5ldyBfZSh0KTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0KSxzfSkudGhlbihlPT4odGhpcy5sb2dnZXIubG9nKCJhY3F1aXJlZCBsb2NhbCBtZWRpYSBzdHJlYW1zIiksdGhpcy5wZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayYmdGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaChlPT57dGhpcy5wZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayhlKX0pLGUpKS5jYXRjaChlPT57aWYoZSBpbnN0YW5jZW9mIF9lKXRocm93IGU7bGV0IHQ9IkVycm9yIHJlbW92aW5nIHN0cmVhbXMuIjtlLm5hbWUmJih0Kz0iICIrZS5uYW1lKSxlLm1lc3NhZ2UmJih0Kz0iICIrZS5tZXNzYWdlKTtjb25zdCBzPW5ldyBfZSh0KTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0KSxzfSkudGhlbihlPT4oW10uY29uY2F0KGUpLmZvckVhY2goZT0+e3RoaXMucGVlckNvbm5lY3Rpb24uYWRkVHJhY2s/ZS5nZXRUcmFja3MoKS5mb3JFYWNoKHQ9Pnt0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKHQsZSl9KTp0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShlKX0pLFByb21pc2UucmVzb2x2ZSgpKSkuY2F0Y2goZT0+e2lmKGUgaW5zdGFuY2VvZiBfZSl0aHJvdyBlO2xldCB0PSJFcnJvciBhZGRpbmcgc3RyZWFtcy4iO2UubmFtZSYmKHQrPSIgIitlLm5hbWUpLGUubWVzc2FnZSYmKHQrPSIgIitlLm1lc3NhZ2UpO2NvbnN0IHM9bmV3IF9lKHQpO3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQpLHN9KX1oYXNPZmZlcihlKXtjb25zdCB0PSJoYXZlLSIrZSsiLW9mZmVyIjtyZXR1cm4gdGhpcy5wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZT09PXR9aXNJY2VHYXRoZXJpbmdDb21wbGV0ZSgpe3JldHVybiJjb21wbGV0ZSI9PT10aGlzLnBlZXJDb25uZWN0aW9uLmljZUdhdGhlcmluZ1N0YXRlfHx0aGlzLmljZUdhdGhlcmluZ1RpbWVvdXR9cmVzZXRJY2VHYXRoZXJpbmdDb21wbGV0ZSgpe3RoaXMuaWNlR2F0aGVyaW5nVGltZW91dD0hMSx0aGlzLmxvZ2dlci5sb2coInJlc2V0SWNlR2F0aGVyaW5nQ29tcGxldGUiKSx0aGlzLmljZUdhdGhlcmluZ1RpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuaWNlR2F0aGVyaW5nVGltZXIpLHRoaXMuaWNlR2F0aGVyaW5nVGltZXI9dm9pZCAwKSx0aGlzLmljZUdhdGhlcmluZ0RlZmVycmVkJiYodGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZC5yZWplY3QoKSx0aGlzLmljZUdhdGhlcmluZ0RlZmVycmVkPXZvaWQgMCl9c2V0RGlyZWN0aW9uKGUpe2NvbnN0IHQ9ZS5tYXRjaCgvYT0oc2VuZHJlY3Z8c2VuZG9ubHl8cmVjdm9ubHl8aW5hY3RpdmUpLyk7aWYobnVsbD09PXQpcmV0dXJuIHRoaXMuZGlyZWN0aW9uPXRoaXMuQy5ESVJFQ1RJT04uTlVMTCx2b2lkIHRoaXMuZW1pdCgiZGlyZWN0aW9uQ2hhbmdlZCIpO2NvbnN0IHM9dFsxXTtzd2l0Y2gocyl7Y2FzZSB0aGlzLkMuRElSRUNUSU9OLlNFTkRSRUNWOmNhc2UgdGhpcy5DLkRJUkVDVElPTi5TRU5ET05MWTpjYXNlIHRoaXMuQy5ESVJFQ1RJT04uUkVDVk9OTFk6Y2FzZSB0aGlzLkMuRElSRUNUSU9OLklOQUNUSVZFOnRoaXMuZGlyZWN0aW9uPXM7YnJlYWs7ZGVmYXVsdDp0aGlzLmRpcmVjdGlvbj10aGlzLkMuRElSRUNUSU9OLk5VTEx9dGhpcy5lbWl0KCJkaXJlY3Rpb25DaGFuZ2VkIil9dHJpZ2dlckljZUdhdGhlcmluZ0NvbXBsZXRlKCl7dGhpcy5pc0ljZUdhdGhlcmluZ0NvbXBsZXRlKCkmJih0aGlzLmVtaXQoImljZUdhdGhlcmluZ0NvbXBsZXRlIix0aGlzKSx0aGlzLmljZUdhdGhlcmluZ1RpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuaWNlR2F0aGVyaW5nVGltZXIpLHRoaXMuaWNlR2F0aGVyaW5nVGltZXI9dm9pZCAwKSx0aGlzLmljZUdhdGhlcmluZ0RlZmVycmVkJiYodGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZC5yZXNvbHZlKCksdGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZD12b2lkIDApKX13YWl0Rm9ySWNlR2F0aGVyaW5nQ29tcGxldGUoKXtyZXR1cm4gdGhpcy5sb2dnZXIubG9nKCJ3YWl0Rm9ySWNlR2F0aGVyaW5nQ29tcGxldGUiKSx0aGlzLmlzSWNlR2F0aGVyaW5nQ29tcGxldGUoKT8odGhpcy5sb2dnZXIubG9nKCJJQ0UgaXMgYWxyZWFkeSBjb21wbGV0ZS4gUmV0dXJuIHJlc29sdmVkLiIpLFByb21pc2UucmVzb2x2ZSgpKToodGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZHx8KHRoaXMuaWNlR2F0aGVyaW5nRGVmZXJyZWQ9ZnVuY3Rpb24oKXtjb25zdCBlPXt9O3JldHVybiBlLnByb21pc2U9bmV3IFByb21pc2UoKHQscyk9PntlLnJlc29sdmU9dCxlLnJlamVjdD1zfSksZX0oKSksdGhpcy5sb2dnZXIubG9nKCJJQ0UgaXMgbm90IGNvbXBsZXRlLiBSZXR1cm5pbmcgcHJvbWlzZSIpLHRoaXMuaWNlR2F0aGVyaW5nRGVmZXJyZWQ/dGhpcy5pY2VHYXRoZXJpbmdEZWZlcnJlZC5wcm9taXNlOlByb21pc2UucmVzb2x2ZSgpKX19Y2xhc3MgcHQgZXh0ZW5kcyBNLkV2ZW50RW1pdHRlcntjb25zdHJ1Y3RvcihlLHQpe2lmKHN1cGVyKCksdGhpcy5fc3RhdGU9emUuRGlzY29ubmVjdGVkLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyPW5ldyBNLkV2ZW50RW1pdHRlcix0aGlzLnRyYW5zaXRpb25pbmdTdGF0ZT0hMSx0aGlzLmxvZ2dlcj1lLHQpe2NvbnN0IGU9dCxzPW51bGw9PWU/dm9pZCAwOmUud3NTZXJ2ZXJzLGk9bnVsbD09ZT92b2lkIDA6ZS5tYXhSZWNvbm5lY3Rpb25BdHRlbXB0cztpZih2b2lkIDAhPT1zKXtjb25zdCBlPSdUaGUgdHJhbnNwb3J0IG9wdGlvbiAid3NTZXJ2ZXJzIiBhcyBoYXMgYXBwYXJlbnRseSBiZWVuIHNwZWNpZmllZCBhbmQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gSXQgd2lsbCBubyBsb25nZXIgYmUgYXZhaWxhYmxlIHN0YXJ0aW5nIHdpdGggU0lQLmpzIHJlbGVhc2UgMC4xNi4wLiBQbGVhc2UgdXBkYXRlIGFjY29yZGluZ2x5Lic7dGhpcy5sb2dnZXIud2FybihlKX1pZih2b2lkIDAhPT1pKXtjb25zdCBlPSdUaGUgdHJhbnNwb3J0IG9wdGlvbiAibWF4UmVjb25uZWN0aW9uQXR0ZW1wdHMiIGFzIGhhcyBhcHBhcmVudGx5IGJlZW4gc3BlY2lmaWVkIGFuZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBJdCB3aWxsIG5vIGxvbmdlciBiZSBhdmFpbGFibGUgc3RhcnRpbmcgd2l0aCBTSVAuanMgcmVsZWFzZSAwLjE2LjAuIFBsZWFzZSB1cGRhdGUgYWNjb3JkaW5nbHkuJzt0aGlzLmxvZ2dlci53YXJuKGUpfXMmJiF0LnNlcnZlciYmKCJzdHJpbmciPT10eXBlb2YgcyYmKHQuc2VydmVyPXMpLHMgaW5zdGFuY2VvZiBBcnJheSYmKHQuc2VydmVyPXNbMF0pKX10aGlzLmNvbmZpZ3VyYXRpb249T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHB0LmRlZmF1bHRPcHRpb25zKSx0KTtjb25zdCBzPXRoaXMuY29uZmlndXJhdGlvbi5zZXJ2ZXIsaT1kLnBhcnNlKHMsImFic29sdXRlVVJJIik7aWYoLTE9PT1pKXRocm93IHRoaXMubG9nZ2VyLmVycm9yKGBJbnZhbGlkIFdlYlNvY2tldCBTZXJ2ZXIgVVJMICIke3N9ImApLG5ldyBFcnJvcigiSW52YWxpZCBXZWJTb2NrZXQgU2VydmVyIFVSTCIpO2lmKCFbIndzcyIsIndzIiwidWRwIl0uaW5jbHVkZXMoaS5zY2hlbWUpKXRocm93IHRoaXMubG9nZ2VyLmVycm9yKGBJbnZhbGlkIHNjaGVtZSBpbiBXZWJTb2NrZXQgU2VydmVyIFVSTCAiJHtzfSJgKSxuZXcgRXJyb3IoIkludmFsaWQgc2NoZW1lIGluIFdlYlNvY2tldCBTZXJ2ZXIgVVJMIik7dGhpcy5fcHJvdG9jb2w9aS5zY2hlbWUudG9VcHBlckNhc2UoKX1kaXNwb3NlKCl7cmV0dXJuIHRoaXMuZGlzY29ubmVjdCgpfWdldCBwcm90b2NvbCgpe3JldHVybiB0aGlzLl9wcm90b2NvbH1nZXQgc2VydmVyKCl7cmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5zZXJ2ZXJ9Z2V0IHN0YXRlKCl7cmV0dXJuIHRoaXMuX3N0YXRlfWdldCBzdGF0ZUNoYW5nZSgpe3JldHVybiBOZSh0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcil9Z2V0IHdzKCl7cmV0dXJuIHRoaXMuX3dzfWNvbm5lY3QoKXtyZXR1cm4gdGhpcy5fY29ubmVjdCgpfWRpc2Nvbm5lY3QoKXtyZXR1cm4gdGhpcy5fZGlzY29ubmVjdCgpfWlzQ29ubmVjdGVkKCl7cmV0dXJuIHRoaXMuc3RhdGU9PT16ZS5Db25uZWN0ZWR9c2VuZChlKXtyZXR1cm4gdGhpcy5fc2VuZChlKX1vbihlLHQpe2NvbnN0IHM9YEEgbGlzdGVuZXIgaGFzIGJlZW4gcmVnaXN0ZXJlZCBmb3IgdGhlIHRyYW5zcG9ydCBldmVudCAiJHtlfSIuIFJlZ2lzdGVyaW5nIGxpc3RlbmVycyBmb3IgdHJhbnNwb3J0IGV2ZW50cyBoYXMgYmVlbiBkZXByZWNhdGVkIGFuZCB3aWxsIG5vIGxvbmdlciBiZSBhdmFpbGFibGUgc3RhcnRpbmcgd2l0aCBTSVAuanMgcmVsZWFzZSAwLjE2LjAuIFBsZWFzZSB1c2UgdGhlIG9uQ29ubmVjdGVkLCBvbkRpc2Nvbm5lY3RlZCwgb25NZXNzYWdlIGNhbGxiYWNrcyBhbmQvb3IgdGhlIHN0YXRlQ2hhbmdlIGVtaXR0ZXIgaW5zdGVhZC4gUGxlYXNlIHVwZGF0ZSBhY2NvcmRpbmdseS5gO3JldHVybiB0aGlzLmxvZ2dlci53YXJuKHMpLHN1cGVyLm9uKGUsdCl9X2Nvbm5lY3QoKXtzd2l0Y2godGhpcy5sb2dnZXIubG9nKCJDb25uZWN0aW5nICIrdGhpcy5zZXJ2ZXIpLHRoaXMuc3RhdGUpe2Nhc2UgemUuQ29ubmVjdGluZzppZih0aGlzLnRyYW5zaXRpb25pbmdTdGF0ZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy50cmFuc2l0aW9uTG9vcERldGVjdGVkRXJyb3IoemUuQ29ubmVjdGluZykpO2lmKCF0aGlzLmNvbm5lY3RQcm9taXNlKXRocm93IG5ldyBFcnJvcigiQ29ubmVjdCBwcm9taXNlIG11c3QgYmUgZGVmaW5lZC4iKTtyZXR1cm4gdGhpcy5jb25uZWN0UHJvbWlzZTtjYXNlIHplLkNvbm5lY3RlZDppZih0aGlzLnRyYW5zaXRpb25pbmdTdGF0ZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy50cmFuc2l0aW9uTG9vcERldGVjdGVkRXJyb3IoemUuQ29ubmVjdGluZykpO2lmKHRoaXMuY29ubmVjdFByb21pc2UpdGhyb3cgbmV3IEVycm9yKCJDb25uZWN0IHByb21pc2UgbXVzdCBub3QgYmUgZGVmaW5lZC4iKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Y2FzZSB6ZS5EaXNjb25uZWN0aW5nOmlmKHRoaXMuY29ubmVjdFByb21pc2UpdGhyb3cgbmV3IEVycm9yKCJDb25uZWN0IHByb21pc2UgbXVzdCBub3QgYmUgZGVmaW5lZC4iKTt0cnl7dGhpcy50cmFuc2l0aW9uU3RhdGUoemUuQ29ubmVjdGluZyl9Y2F0Y2goZSl7aWYoZSBpbnN0YW5jZW9mIERlKXJldHVybiBQcm9taXNlLnJlamVjdChlKTt0aHJvdyBlfWJyZWFrO2Nhc2UgemUuRGlzY29ubmVjdGVkOmlmKHRoaXMuY29ubmVjdFByb21pc2UpdGhyb3cgbmV3IEVycm9yKCJDb25uZWN0IHByb21pc2UgbXVzdCBub3QgYmUgZGVmaW5lZC4iKTt0cnl7dGhpcy50cmFuc2l0aW9uU3RhdGUoemUuQ29ubmVjdGluZyl9Y2F0Y2goZSl7aWYoZSBpbnN0YW5jZW9mIERlKXJldHVybiBQcm9taXNlLnJlamVjdChlKTt0aHJvdyBlfWJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlIil9bGV0IGU7dHJ5e2U9bmV3IFdlYlNvY2tldCh0aGlzLnNlcnZlciwic2lwIiksZS5iaW5hcnlUeXBlPSJhcnJheWJ1ZmZlciIsZS5hZGRFdmVudExpc3RlbmVyKCJjbG9zZSIsdD0+dGhpcy5vbldlYlNvY2tldENsb3NlKHQsZSkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLHQ9PnRoaXMub25XZWJTb2NrZXRFcnJvcih0LGUpKSxlLmFkZEV2ZW50TGlzdGVuZXIoIm9wZW4iLHQ9PnRoaXMub25XZWJTb2NrZXRPcGVuKHQsZSkpLGUuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsdD0+dGhpcy5vbldlYlNvY2tldE1lc3NhZ2UodCxlKSksdGhpcy5fd3M9ZX1jYXRjaChlKXtyZXR1cm4gdGhpcy5fd3M9dm9pZCAwLHRoaXMubG9nZ2VyLmVycm9yKCJXZWJTb2NrZXQgY29uc3RydWN0aW9uIGZhaWxlZC4iKSx0aGlzLmxvZ2dlci5lcnJvcihlKSxuZXcgUHJvbWlzZSgodCxzKT0+e3RoaXMuY29ubmVjdFJlc29sdmU9dCx0aGlzLmNvbm5lY3RSZWplY3Q9cyx0aGlzLnRyYW5zaXRpb25TdGF0ZSh6ZS5EaXNjb25uZWN0ZWQsZSl9KX1yZXR1cm4gdGhpcy5jb25uZWN0UHJvbWlzZT1uZXcgUHJvbWlzZSgodCxzKT0+e3RoaXMuY29ubmVjdFJlc29sdmU9dCx0aGlzLmNvbm5lY3RSZWplY3Q9cyx0aGlzLmNvbm5lY3RUaW1lb3V0PXNldFRpbWVvdXQoKCk9Pnt0aGlzLmxvZ2dlci53YXJuKCJDb25uZWN0IHRpbWVkIG91dC4gRXhjZWVkZWQgdGltZSBzZXQgaW4gY29uZmlndXJhdGlvbi5jb25uZWN0aW9uVGltZW91dDogIit0aGlzLmNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblRpbWVvdXQrInMuIiksZS5jbG9zZSgxZTMpfSwxZTMqdGhpcy5jb25maWd1cmF0aW9uLmNvbm5lY3Rpb25UaW1lb3V0KX0pLHRoaXMuY29ubmVjdFByb21pc2V9X2Rpc2Nvbm5lY3QoKXtzd2l0Y2godGhpcy5sb2dnZXIubG9nKCJEaXNjb25uZWN0aW5nICIrdGhpcy5zZXJ2ZXIpLHRoaXMuc3RhdGUpe2Nhc2UgemUuQ29ubmVjdGluZzppZih0aGlzLmRpc2Nvbm5lY3RQcm9taXNlKXRocm93IG5ldyBFcnJvcigiRGlzY29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuIik7dHJ5e3RoaXMudHJhbnNpdGlvblN0YXRlKHplLkRpc2Nvbm5lY3RpbmcpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBEZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7dGhyb3cgZX1icmVhaztjYXNlIHplLkNvbm5lY3RlZDppZih0aGlzLmRpc2Nvbm5lY3RQcm9taXNlKXRocm93IG5ldyBFcnJvcigiRGlzY29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuIik7dHJ5e3RoaXMudHJhbnNpdGlvblN0YXRlKHplLkRpc2Nvbm5lY3RpbmcpfWNhdGNoKGUpe2lmKGUgaW5zdGFuY2VvZiBEZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7dGhyb3cgZX1icmVhaztjYXNlIHplLkRpc2Nvbm5lY3Rpbmc6aWYodGhpcy50cmFuc2l0aW9uaW5nU3RhdGUpcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMudHJhbnNpdGlvbkxvb3BEZXRlY3RlZEVycm9yKHplLkRpc2Nvbm5lY3RpbmcpKTtpZighdGhpcy5kaXNjb25uZWN0UHJvbWlzZSl0aHJvdyBuZXcgRXJyb3IoIkRpc2Nvbm5lY3QgcHJvbWlzZSBtdXN0IGJlIGRlZmluZWQuIik7cmV0dXJuIHRoaXMuZGlzY29ubmVjdFByb21pc2U7Y2FzZSB6ZS5EaXNjb25uZWN0ZWQ6aWYodGhpcy50cmFuc2l0aW9uaW5nU3RhdGUpcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMudHJhbnNpdGlvbkxvb3BEZXRlY3RlZEVycm9yKHplLkRpc2Nvbm5lY3RpbmcpKTtpZih0aGlzLmRpc2Nvbm5lY3RQcm9taXNlKXRocm93IG5ldyBFcnJvcigiRGlzY29ubmVjdCBwcm9taXNlIG11c3Qgbm90IGJlIGRlZmluZWQuIik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlIil9aWYoIXRoaXMuX3dzKXRocm93IG5ldyBFcnJvcigiV2ViU29ja2V0IG11c3QgYmUgZGVmaW5lZC4iKTtjb25zdCBlPXRoaXMuX3dzO3JldHVybiB0aGlzLmRpc2Nvbm5lY3RQcm9taXNlPW5ldyBQcm9taXNlKCh0LHMpPT57dGhpcy5kaXNjb25uZWN0UmVzb2x2ZT10LHRoaXMuZGlzY29ubmVjdFJlamVjdD1zO3RyeXtlLmNsb3NlKDFlMyl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoIldlYlNvY2tldCBjbG9zZSBmYWlsZWQuIiksdGhpcy5sb2dnZXIuZXJyb3IoZSksZX19KSx0aGlzLmRpc2Nvbm5lY3RQcm9taXNlfV9zZW5kKGUpe2lmKCEwPT09dGhpcy5jb25maWd1cmF0aW9uLnRyYWNlU2lwJiZ0aGlzLmxvZ2dlci5sb2coIlNlbmRpbmcgV2ViU29ja2V0IG1lc3NhZ2U6XG5cbiIrZSsiXG4iKSx0aGlzLl9zdGF0ZSE9PXplLkNvbm5lY3RlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJOb3QgY29ubmVjdGVkLiIpKTtpZighdGhpcy5fd3MpdGhyb3cgbmV3IEVycm9yKCJXZWJTb2NrZXQgdW5kZWZpbmVkLiIpO3RyeXt0aGlzLl93cy5zZW5kKGUpfWNhdGNoKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRXJyb3I/UHJvbWlzZS5yZWplY3QoZSk6UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJXZWJTb2NrZXQgc2VuZCBmYWlsZWQuIikpfXJldHVybiBQcm9taXNlLnJlc29sdmUoKX1vbldlYlNvY2tldENsb3NlKGUsdCl7aWYodCE9PXRoaXMuX3dzKXJldHVybjtjb25zdCBzPWBXZWJTb2NrZXQgY2xvc2VkICR7dGhpcy5zZXJ2ZXJ9IChjb2RlOiAke2UuY29kZX0pYCxpPXRoaXMuZGlzY29ubmVjdFByb21pc2U/dm9pZCAwOm5ldyBFcnJvcihzKTtpJiZ0aGlzLmxvZ2dlci53YXJuKCJXZWJTb2NrZXQgY2xvc2VkIHVuZXhwZWN0ZWRseSIpLHRoaXMubG9nZ2VyLmxvZyhzKSx0aGlzLl93cz12b2lkIDAsdGhpcy50cmFuc2l0aW9uU3RhdGUoemUuRGlzY29ubmVjdGVkLGkpfW9uV2ViU29ja2V0RXJyb3IoZSx0KXt0PT09dGhpcy5fd3MmJnRoaXMubG9nZ2VyLmVycm9yKCJXZWJTb2NrZXQgZXJyb3Igb2NjdXJyZWQuIil9b25XZWJTb2NrZXRNZXNzYWdlKGUsdCl7aWYodCE9PXRoaXMuX3dzKXJldHVybjtjb25zdCBzPWUuZGF0YTtsZXQgaTtpZigvXihcclxuKSskLy50ZXN0KHMpKXJldHVybiB0aGlzLmNsZWFyS2VlcEFsaXZlVGltZW91dCgpLHZvaWQoITA9PT10aGlzLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAmJnRoaXMubG9nZ2VyLmxvZygiUmVjZWl2ZWQgV2ViU29ja2V0IG1lc3NhZ2Ugd2l0aCBDUkxGIEtlZXAgQWxpdmUgcmVzcG9uc2UiKSk7aWYocyl7aWYoInN0cmluZyIhPXR5cGVvZiBzKXt0cnl7aT0obmV3IFRleHREZWNvZGVyKS5kZWNvZGUobmV3IFVpbnQ4QXJyYXkocykpfWNhdGNoKGUpe3JldHVybiB0aGlzLmxvZ2dlci5lcnJvcihlKSx2b2lkIHRoaXMubG9nZ2VyLmVycm9yKCJSZWNlaXZlZCBXZWJTb2NrZXQgYmluYXJ5IG1lc3NhZ2UgZmFpbGVkIHRvIGJlIGNvbnZlcnRlZCBpbnRvIHN0cmluZywgbWVzc2FnZSBkaXNjYXJkZWQiKX0hMD09PXRoaXMuY29uZmlndXJhdGlvbi50cmFjZVNpcCYmdGhpcy5sb2dnZXIubG9nKCJSZWNlaXZlZCBXZWJTb2NrZXQgYmluYXJ5IG1lc3NhZ2U6XG5cbiIraSsiXG4iKX1lbHNlIGk9cywhMD09PXRoaXMuY29uZmlndXJhdGlvbi50cmFjZVNpcCYmdGhpcy5sb2dnZXIubG9nKCJSZWNlaXZlZCBXZWJTb2NrZXQgdGV4dCBtZXNzYWdlOlxuXG4iK2krIlxuIik7aWYodGhpcy5zdGF0ZT09PXplLkNvbm5lY3RlZCl7aWYodGhpcy5vbk1lc3NhZ2UpdHJ5e3RoaXMub25NZXNzYWdlKGkpfWNhdGNoKGUpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKGUpLHRoaXMubG9nZ2VyLmVycm9yKCJFeGNlcHRpb24gdGhyb3duIGJ5IG9uTWVzc2FnZSBjYWxsYmFjayIpLGV9dGhpcy5lbWl0KCJtZXNzYWdlIixpKX1lbHNlIHRoaXMubG9nZ2VyLndhcm4oIlJlY2VpdmVkIG1lc3NhZ2Ugd2hpbGUgbm90IGNvbm5lY3RlZCwgZGlzY2FyZGluZy4uLiIpfWVsc2UgdGhpcy5sb2dnZXIud2FybigiUmVjZWl2ZWQgZW1wdHkgbWVzc2FnZSwgZGlzY2FyZGluZy4uLiIpfW9uV2ViU29ja2V0T3BlbihlLHQpe3Q9PT10aGlzLl93cyYmdGhpcy5fc3RhdGU9PT16ZS5Db25uZWN0aW5nJiYodGhpcy5sb2dnZXIubG9nKCJXZWJTb2NrZXQgb3BlbmVkICIrdGhpcy5zZXJ2ZXIpLHRoaXMudHJhbnNpdGlvblN0YXRlKHplLkNvbm5lY3RlZCkpfXRyYW5zaXRpb25Mb29wRGV0ZWN0ZWRFcnJvcihlKXtsZXQgdD0iQSBzdGF0ZSB0cmFuc2l0aW9uIGxvb3AgaGFzIGJlZW4gZGV0ZWN0ZWQuIjtyZXR1cm4gdCs9YCBBbiBhdHRlbXB0IHRvIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuX3N0YXRlfSB0byAke2V9IGJlZm9yZSB0aGUgcHJpb3IgdHJhbnNpdGlvbiBjb21wbGV0ZWQuYCx0Kz0iIFBlcmhhcHMgeW91IGFyZSBzeW5jaHJvbm91c2x5IGNhbGxpbmcgY29ubmVjdCgpIG9yIGRpc2Nvbm5lY3QoKSBmcm9tIGEgY2FsbGJhY2sgb3Igc3RhdGUgY2hhbmdlIGhhbmRsZXI/Iix0aGlzLmxvZ2dlci5lcnJvcih0KSxuZXcgRGUoIkxvb3AgZGV0ZWN0ZWQuIil9dHJhbnNpdGlvblN0YXRlKGUsdCl7Y29uc3Qgcz0oKT0+e3Rocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIGZyb20gJHt0aGlzLl9zdGF0ZX0gdG8gJHtlfWApfTtpZih0aGlzLnRyYW5zaXRpb25pbmdTdGF0ZSl0aHJvdyB0aGlzLnRyYW5zaXRpb25Mb29wRGV0ZWN0ZWRFcnJvcihlKTtzd2l0Y2godGhpcy50cmFuc2l0aW9uaW5nU3RhdGU9ITAsdGhpcy5fc3RhdGUpe2Nhc2UgemUuQ29ubmVjdGluZzplIT09emUuQ29ubmVjdGVkJiZlIT09emUuRGlzY29ubmVjdGluZyYmZSE9PXplLkRpc2Nvbm5lY3RlZCYmcygpO2JyZWFrO2Nhc2UgemUuQ29ubmVjdGVkOmUhPT16ZS5EaXNjb25uZWN0aW5nJiZlIT09emUuRGlzY29ubmVjdGVkJiZzKCk7YnJlYWs7Y2FzZSB6ZS5EaXNjb25uZWN0aW5nOmUhPT16ZS5Db25uZWN0aW5nJiZlIT09emUuRGlzY29ubmVjdGVkJiZzKCk7YnJlYWs7Y2FzZSB6ZS5EaXNjb25uZWN0ZWQ6ZSE9PXplLkNvbm5lY3RpbmcmJnMoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biBzdGF0ZS4iKX1jb25zdCBpPXRoaXMuX3N0YXRlO3RoaXMuX3N0YXRlPWU7dGhpcy5jb25uZWN0UHJvbWlzZTtjb25zdCByPXRoaXMuY29ubmVjdFJlc29sdmUsbj10aGlzLmNvbm5lY3RSZWplY3Q7aT09PXplLkNvbm5lY3RpbmcmJih0aGlzLmNvbm5lY3RQcm9taXNlPXZvaWQgMCx0aGlzLmNvbm5lY3RSZXNvbHZlPXZvaWQgMCx0aGlzLmNvbm5lY3RSZWplY3Q9dm9pZCAwKTt0aGlzLmRpc2Nvbm5lY3RQcm9taXNlO2NvbnN0IG89dGhpcy5kaXNjb25uZWN0UmVzb2x2ZSxhPXRoaXMuZGlzY29ubmVjdFJlamVjdDtpZihpPT09emUuRGlzY29ubmVjdGluZyYmKHRoaXMuZGlzY29ubmVjdFByb21pc2U9dm9pZCAwLHRoaXMuZGlzY29ubmVjdFJlc29sdmU9dm9pZCAwLHRoaXMuZGlzY29ubmVjdFJlamVjdD12b2lkIDApLHRoaXMuY29ubmVjdFRpbWVvdXQmJihjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0VGltZW91dCksdGhpcy5jb25uZWN0VGltZW91dD12b2lkIDApLHRoaXMubG9nZ2VyLmxvZyhgVHJhbnNpdGlvbmVkIGZyb20gJHtpfSB0byAke3RoaXMuX3N0YXRlfWApLHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyLmVtaXQoImV2ZW50Iix0aGlzLl9zdGF0ZSksZT09PXplLkNvbm5lY3RlZCYmKHRoaXMuc3RhcnRTZW5kaW5nS2VlcEFsaXZlcygpLHRoaXMub25Db25uZWN0KSl0cnl7dGhpcy5vbkNvbm5lY3QoKX1jYXRjaChlKXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihlKSx0aGlzLmxvZ2dlci5lcnJvcigiRXhjZXB0aW9uIHRocm93biBieSBvbkNvbm5lY3QgY2FsbGJhY2siKSxlfWlmKGk9PT16ZS5Db25uZWN0ZWQmJih0aGlzLnN0b3BTZW5kaW5nS2VlcEFsaXZlcygpLHRoaXMub25EaXNjb25uZWN0KSl0cnl7dD90aGlzLm9uRGlzY29ubmVjdCh0KTp0aGlzLm9uRGlzY29ubmVjdCgpfWNhdGNoKGUpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKGUpLHRoaXMubG9nZ2VyLmVycm9yKCJFeGNlcHRpb24gdGhyb3duIGJ5IG9uRGlzY29ubmVjdCBjYWxsYmFjayIpLGV9c3dpdGNoKGUpe2Nhc2UgemUuQ29ubmVjdGluZzp0aGlzLmVtaXQoImNvbm5lY3RpbmciKTticmVhaztjYXNlIHplLkNvbm5lY3RlZDp0aGlzLmVtaXQoImNvbm5lY3RlZCIpO2JyZWFrO2Nhc2UgemUuRGlzY29ubmVjdGluZzp0aGlzLmVtaXQoImRpc2Nvbm5lY3RpbmciKTticmVhaztjYXNlIHplLkRpc2Nvbm5lY3RlZDp0aGlzLmVtaXQoImRpc2Nvbm5lY3RlZCIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlLiIpfWlmKGk9PT16ZS5Db25uZWN0aW5nKXtpZighcil0aHJvdyBuZXcgRXJyb3IoIkNvbm5lY3QgcmVzb2x2ZSB1bmRlZmluZWQuIik7aWYoIW4pdGhyb3cgbmV3IEVycm9yKCJDb25uZWN0IHJlamVjdCB1bmRlZmluZWQuIik7ZT09PXplLkNvbm5lY3RlZD9yKCk6bih0fHxuZXcgRXJyb3IoIkNvbm5lY3QgYWJvcnRlZC4iKSl9aWYoaT09PXplLkRpc2Nvbm5lY3Rpbmcpe2lmKCFvKXRocm93IG5ldyBFcnJvcigiRGlzY29ubmVjdCByZXNvbHZlIHVuZGVmaW5lZC4iKTtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkRpc2Nvbm5lY3QgcmVqZWN0IHVuZGVmaW5lZC4iKTtlPT09emUuRGlzY29ubmVjdGVkP28oKTphKHR8fG5ldyBFcnJvcigiRGlzY29ubmVjdCBhYm9ydGVkLiIpKX10aGlzLnRyYW5zaXRpb25pbmdTdGF0ZT0hMX1jbGVhcktlZXBBbGl2ZVRpbWVvdXQoKXt0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMua2VlcEFsaXZlRGVib3VuY2VUaW1lb3V0KSx0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dD12b2lkIDB9c2VuZEtlZXBBbGl2ZSgpe3JldHVybiB0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dD9Qcm9taXNlLnJlc29sdmUoKToodGhpcy5rZWVwQWxpdmVEZWJvdW5jZVRpbWVvdXQ9c2V0VGltZW91dCgoKT0+e3RoaXMuY2xlYXJLZWVwQWxpdmVUaW1lb3V0KCl9LDFlMyp0aGlzLmNvbmZpZ3VyYXRpb24ua2VlcEFsaXZlRGVib3VuY2UpLHRoaXMuc2VuZCgiXHJcblxyXG4iKSl9c3RhcnRTZW5kaW5nS2VlcEFsaXZlcygpe3RoaXMuY29uZmlndXJhdGlvbi5rZWVwQWxpdmVJbnRlcnZhbCYmIXRoaXMua2VlcEFsaXZlSW50ZXJ2YWwmJih0aGlzLmtlZXBBbGl2ZUludGVydmFsPXNldEludGVydmFsKCgpPT57dGhpcy5zZW5kS2VlcEFsaXZlKCksdGhpcy5zdGFydFNlbmRpbmdLZWVwQWxpdmVzKCl9LChlPT57Y29uc3QgdD0uOCplO3JldHVybiAxZTMqKE1hdGgucmFuZG9tKCkqKGUtdCkrdCl9KSh0aGlzLmNvbmZpZ3VyYXRpb24ua2VlcEFsaXZlSW50ZXJ2YWwpKSl9c3RvcFNlbmRpbmdLZWVwQWxpdmVzKCl7dGhpcy5rZWVwQWxpdmVJbnRlcnZhbCYmY2xlYXJJbnRlcnZhbCh0aGlzLmtlZXBBbGl2ZUludGVydmFsKSx0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMua2VlcEFsaXZlRGVib3VuY2VUaW1lb3V0KSx0aGlzLmtlZXBBbGl2ZUludGVydmFsPXZvaWQgMCx0aGlzLmtlZXBBbGl2ZURlYm91bmNlVGltZW91dD12b2lkIDB9fXB0LmRlZmF1bHRPcHRpb25zPXtzZXJ2ZXI6IiIsY29ubmVjdGlvblRpbWVvdXQ6NSxrZWVwQWxpdmVJbnRlcnZhbDowLGtlZXBBbGl2ZURlYm91bmNlOjEwLHRyYWNlU2lwOiEwfTtjbGFzcyBmdHtjb25zdHJ1Y3RvcihlPXt9KXtpZih0aGlzLl9wdWJsaXNoZXJzPXt9LHRoaXMuX3JlZ2lzdGVyZXJzPXt9LHRoaXMuX3Nlc3Npb25zPXt9LHRoaXMuX3N1YnNjcmlwdGlvbnM9e30sdGhpcy5fc3RhdGU9WGUuU3RvcHBlZCx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlcj1uZXcgTS5FdmVudEVtaXR0ZXIsdGhpcy5sb2dnZXJGYWN0b3J5PW5ldyB3ZSx0aGlzLnVubG9hZExpc3RlbmVyPSgpPT57dGhpcy5zdG9wKCl9LHRoaXMuZGVsZWdhdGU9ZS5kZWxlZ2F0ZSx0aGlzLm9wdGlvbnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGZ0LmRlZmF1bHRPcHRpb25zKSx7c2lwanNJZDpwKDUpfSkse3VyaTpuZXcgYSgic2lwIiwiYW5vbnltb3VzLiIrcCg2KSwiYW5vbnltb3VzLmludmFsaWQiKX0pLHt2aWFIb3N0OnAoMTIpKyIuaW52YWxpZCJ9KSxmdC5zdHJpcFVuZGVmaW5lZFByb3BlcnRpZXMoZSkpLHRoaXMub3B0aW9ucy5oYWNrSXBJbkNvbnRhY3QpaWYoImJvb2xlYW4iPT10eXBlb2YgdGhpcy5vcHRpb25zLmhhY2tJcEluQ29udGFjdCYmdGhpcy5vcHRpb25zLmhhY2tJcEluQ29udGFjdCl7Y29uc3QgZT0xLHQ9MjU0LHM9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKih0LWUrMSkrZSk7dGhpcy5vcHRpb25zLnZpYUhvc3Q9IjE5Mi4wLjIuIitzfWVsc2UgdGhpcy5vcHRpb25zLmhhY2tJcEluQ29udGFjdCYmKHRoaXMub3B0aW9ucy52aWFIb3N0PXRoaXMub3B0aW9ucy5oYWNrSXBJbkNvbnRhY3QpO3N3aXRjaCh0aGlzLmxvZ2dlcj10aGlzLmxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKCJzaXAuVXNlckFnZW50IiksdGhpcy5sb2dnZXJGYWN0b3J5LmJ1aWx0aW5FbmFibGVkPXRoaXMub3B0aW9ucy5sb2dCdWlsdGluRW5hYmxlZCx0aGlzLmxvZ2dlckZhY3RvcnkuY29ubmVjdG9yPXRoaXMub3B0aW9ucy5sb2dDb25uZWN0b3IsdGhpcy5vcHRpb25zLmxvZ0xldmVsKXtjYXNlImVycm9yIjp0aGlzLmxvZ2dlckZhY3RvcnkubGV2ZWw9bWUuZXJyb3I7YnJlYWs7Y2FzZSJ3YXJuIjp0aGlzLmxvZ2dlckZhY3RvcnkubGV2ZWw9bWUud2FybjticmVhaztjYXNlImxvZyI6dGhpcy5sb2dnZXJGYWN0b3J5LmxldmVsPW1lLmxvZzticmVhaztjYXNlImRlYnVnIjp0aGlzLmxvZ2dlckZhY3RvcnkubGV2ZWw9bWUuZGVidWd9aWYodGhpcy5vcHRpb25zLmxvZ0NvbmZpZ3VyYXRpb24mJih0aGlzLmxvZ2dlci5sb2coIkNvbmZpZ3VyYXRpb246IiksT2JqZWN0LmtleXModGhpcy5vcHRpb25zKS5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMub3B0aW9uc1tlXTtzd2l0Y2goZSl7Y2FzZSJ1cmkiOmNhc2Uic2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnkiOnRoaXMubG9nZ2VyLmxvZygiXHhiNyAiK2UrIjogIit0KTticmVhaztjYXNlImF1dGhvcml6YXRpb25QYXNzd29yZCI6dGhpcy5sb2dnZXIubG9nKCJceGI3ICIrZSsiOiBOT1QgU0hPV04iKTticmVhaztjYXNlInRyYW5zcG9ydENvbnN0cnVjdG9yIjp0aGlzLmxvZ2dlci5sb2coIlx4YjcgIitlKyI6ICIrdC5uYW1lKTticmVhaztkZWZhdWx0OnRoaXMubG9nZ2VyLmxvZygiXHhiNyAiK2UrIjogIitKU09OLnN0cmluZ2lmeSh0KSl9fSkpLHRoaXMub3B0aW9ucy50cmFuc3BvcnRPcHRpb25zKXtjb25zdCB0PXRoaXMub3B0aW9ucy50cmFuc3BvcnRPcHRpb25zLHM9dC5tYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyxpPXQucmVjb25uZWN0aW9uVGltZW91dDtpZih2b2lkIDAhPT1zKXtjb25zdCBlPSdUaGUgdHJhbnNwb3J0IG9wdGlvbiAibWF4UmVjb25uZWN0aW9uQXR0ZW1wdHMiIGFzIGhhcyBhcHBhcmVudGx5IGJlZW4gc3BlY2lmaWVkIGFuZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBJdCB3aWxsIG5vIGxvbmdlciBiZSBhdmFpbGFibGUgc3RhcnRpbmcgd2l0aCBTSVAuanMgcmVsZWFzZSAwLjE2LjAuIFBsZWFzZSB1cGRhdGUgYWNjb3JkaW5nbHkuJzt0aGlzLmxvZ2dlci53YXJuKGUpfWlmKHZvaWQgMCE9PWkpe2NvbnN0IGU9J1RoZSB0cmFuc3BvcnQgb3B0aW9uICJyZWNvbm5lY3Rpb25UaW1lb3V0IiBhcyBoYXMgYXBwYXJlbnRseSBiZWVuIHNwZWNpZmllZCBhbmQgaGFzIGJlZW4gZGVwcmVjYXRlZC4gSXQgd2lsbCBubyBsb25nZXIgYmUgYXZhaWxhYmxlIHN0YXJ0aW5nIHdpdGggU0lQLmpzIHJlbGVhc2UgMC4xNi4wLiBQbGVhc2UgdXBkYXRlIGFjY29yZGluZ2x5Lic7dGhpcy5sb2dnZXIud2FybihlKX12b2lkIDA9PT1lLnJlY29ubmVjdGlvbkRlbGF5JiZ2b2lkIDAhPT1pJiYodGhpcy5vcHRpb25zLnJlY29ubmVjdGlvbkRlbGF5PWkpLHZvaWQgMD09PWUucmVjb25uZWN0aW9uQXR0ZW1wdHMmJnZvaWQgMCE9PXMmJih0aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uQXR0ZW1wdHM9cyl9aWYodm9pZCAwIT09ZS5yZWNvbm5lY3Rpb25EZWxheSl7Y29uc3QgZT0nVGhlIHVzZXIgYWdlbnQgb3B0aW9uICJyZWNvbm5lY3Rpb25EZWxheSIgYXMgaGFzIGFwcGFyZW50bHkgYmVlbiBzcGVjaWZpZWQgYW5kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIEl0IHdpbGwgbm8gbG9uZ2VyIGJlIGF2YWlsYWJsZSBzdGFydGluZyB3aXRoIFNJUC5qcyByZWxlYXNlIDAuMTYuMC4gUGxlYXNlIHVwZGF0ZSBhY2NvcmRpbmdseS4nO3RoaXMubG9nZ2VyLndhcm4oZSl9aWYodm9pZCAwIT09ZS5yZWNvbm5lY3Rpb25BdHRlbXB0cyl7Y29uc3QgZT0nVGhlIHVzZXIgYWdlbnQgb3B0aW9uICJyZWNvbm5lY3Rpb25BdHRlbXB0cyIgYXMgaGFzIGFwcGFyZW50bHkgYmVlbiBzcGVjaWZpZWQgYW5kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIEl0IHdpbGwgbm8gbG9uZ2VyIGJlIGF2YWlsYWJsZSBzdGFydGluZyB3aXRoIFNJUC5qcyByZWxlYXNlIDAuMTYuMC4gUGxlYXNlIHVwZGF0ZSBhY2NvcmRpbmdseS4nO3RoaXMubG9nZ2VyLndhcm4oZSl9dGhpcy5fdHJhbnNwb3J0PW5ldyB0aGlzLm9wdGlvbnMudHJhbnNwb3J0Q29uc3RydWN0b3IodGhpcy5nZXRMb2dnZXIoInNpcC5UcmFuc3BvcnQiKSx0aGlzLm9wdGlvbnMudHJhbnNwb3J0T3B0aW9ucyksdGhpcy5pbml0VHJhbnNwb3J0Q2FsbGJhY2tzKCksdGhpcy5fY29udGFjdD10aGlzLmluaXRDb250YWN0KCksdGhpcy5fdXNlckFnZW50Q29yZT10aGlzLmluaXRDb3JlKCksdGhpcy5vcHRpb25zLmF1dG9TdGFydCYmdGhpcy5zdGFydCgpfXN0YXRpYyBtYWtlVVJJKGUpe3JldHVybiBkLlVSSVBhcnNlKGUpfXN0YXRpYyBzdHJpcFVuZGVmaW5lZFByb3BlcnRpZXMoZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnJlZHVjZSgodCxzKT0+KHZvaWQgMCE9PWVbc10mJih0W3NdPWVbc10pLHQpLHt9KX1nZXQgY29uZmlndXJhdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnN9Z2V0IGNvbnRhY3QoKXtyZXR1cm4gdGhpcy5fY29udGFjdH1nZXQgc3RhdGUoKXtyZXR1cm4gdGhpcy5fc3RhdGV9Z2V0IHN0YXRlQ2hhbmdlKCl7cmV0dXJuIE5lKHRoaXMuX3N0YXRlRXZlbnRFbWl0dGVyKX1nZXQgdHJhbnNwb3J0KCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydH1nZXQgdXNlckFnZW50Q29yZSgpe3JldHVybiB0aGlzLl91c2VyQWdlbnRDb3JlfWdldExvZ2dlcihlLHQpe3JldHVybiB0aGlzLmxvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKGUsdCl9Z2V0TG9nZ2VyRmFjdG9yeSgpe3JldHVybiB0aGlzLmxvZ2dlckZhY3Rvcnl9aXNDb25uZWN0ZWQoKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuaXNDb25uZWN0ZWQoKX1yZWNvbm5lY3QoKXtyZXR1cm4gdGhpcy5zdGF0ZT09PVhlLlN0b3BwZWQ/UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJVc2VyIGFnZW50IHN0b3BwZWQuIikpOlByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PnRoaXMudHJhbnNwb3J0LmNvbm5lY3QoKSl9c3RhcnQoKXtpZih0aGlzLnN0YXRlPT09WGUuU3RhcnRlZClyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiVXNlciBhZ2VudCBhbHJlYWR5IHN0YXJ0ZWQiKSxQcm9taXNlLnJlc29sdmUoKTtpZih0aGlzLmxvZ2dlci5sb2coIlN0YXJ0aW5nICIrdGhpcy5jb25maWd1cmF0aW9uLnVyaSksdGhpcy50cmFuc2l0aW9uU3RhdGUoWGUuU3RhcnRlZCksdGhpcy5vcHRpb25zLmF1dG9TdG9wKXtjb25zdCBlPSEoInVuZGVmaW5lZCI9PXR5cGVvZiBjaHJvbWV8fCFjaHJvbWUuYXBwfHwhY2hyb21lLmFwcC5ydW50aW1lKTsidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvd3x8ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyfHxlfHx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIix0aGlzLnVubG9hZExpc3RlbmVyKX1yZXR1cm4gdGhpcy50cmFuc3BvcnQuY29ubmVjdCgpfWFzeW5jIHN0b3AoKXtpZih0aGlzLnN0YXRlPT09WGUuU3RvcHBlZClyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiVXNlciBhZ2VudCBhbHJlYWR5IHN0b3BwZWQiKSxQcm9taXNlLnJlc29sdmUoKTtpZih0aGlzLmxvZ2dlci5sb2coIlN0b3BwaW5nICIrdGhpcy5jb25maWd1cmF0aW9uLnVyaSksdGhpcy50cmFuc2l0aW9uU3RhdGUoWGUuU3RvcHBlZCksdGhpcy5vcHRpb25zLmF1dG9TdG9wKXtjb25zdCBlPSEoInVuZGVmaW5lZCI9PXR5cGVvZiBjaHJvbWV8fCFjaHJvbWUuYXBwfHwhY2hyb21lLmFwcC5ydW50aW1lKTsidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXImJiFlJiZ3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigidW5sb2FkIix0aGlzLnVubG9hZExpc3RlbmVyKX1jb25zdCBlPU9iamVjdC5hc3NpZ24oe30sdGhpcy5fcHVibGlzaGVycyksdD1PYmplY3QuYXNzaWduKHt9LHRoaXMuX3JlZ2lzdGVyZXJzKSxzPU9iamVjdC5hc3NpZ24oe30sdGhpcy5fc2Vzc2lvbnMpLGk9T2JqZWN0LmFzc2lnbih7fSx0aGlzLl9zdWJzY3JpcHRpb25zKSxyPXRoaXMudHJhbnNwb3J0LG49dGhpcy51c2VyQWdlbnRDb3JlO3RoaXMubG9nZ2VyLmxvZygiRGlzcG9zZSBvZiByZWdpc3RlcmVycyIpO2Zvcihjb25zdCBlIGluIHQpdFtlXSYmYXdhaXQgdFtlXS5kaXNwb3NlKCkuY2F0Y2godD0+e3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksZGVsZXRlIHRoaXMuX3JlZ2lzdGVyZXJzW2VdLHR9KTt0aGlzLmxvZ2dlci5sb2coIkRpc3Bvc2Ugb2Ygc2Vzc2lvbnMiKTtmb3IoY29uc3QgZSBpbiBzKXNbZV0mJmF3YWl0IHNbZV0uZGlzcG9zZSgpLmNhdGNoKHQ9Pnt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLGRlbGV0ZSB0aGlzLl9zZXNzaW9uc1tlXSx0fSk7dGhpcy5sb2dnZXIubG9nKCJEaXNwb3NlIG9mIHN1YnNjcmlwdGlvbnMiKTtmb3IoY29uc3QgZSBpbiBpKWlbZV0mJmF3YWl0IGlbZV0uZGlzcG9zZSgpLmNhdGNoKHQ9Pnt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLGRlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW2VdLHR9KTt0aGlzLmxvZ2dlci5sb2coIkRpc3Bvc2Ugb2YgcHVibGlzaGVycyIpO2Zvcihjb25zdCB0IGluIGUpZVt0XSYmYXdhaXQgZVt0XS5kaXNwb3NlKCkuY2F0Y2goZT0+e3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSksZGVsZXRlIHRoaXMuX3B1Ymxpc2hlcnNbdF0sZX0pO3RoaXMubG9nZ2VyLmxvZygiRGlzcG9zZSBvZiB0cmFuc3BvcnQiKSxhd2FpdCByLmRpc3Bvc2UoKS5jYXRjaChlPT57dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKSxlfSksdGhpcy5sb2dnZXIubG9nKCJEaXNwb3NlIG9mIGNvcmUiKSxuLmRpc3Bvc2UoKX1fbWFrZUludml0ZXIoZSx0KXtyZXR1cm4gbmV3IEtlKHRoaXMsZSx0KX1hdHRlbXB0UmVjb25uZWN0aW9uKGU9MSl7Y29uc3QgdD10aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uQXR0ZW1wdHMscz10aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uRGVsYXk7ZT50P3RoaXMubG9nZ2VyLmxvZygiTWF4aW11bSByZWNvbm5lY3Rpb24gYXR0ZW1wdHMgcmVhY2hlZCIpOih0aGlzLmxvZ2dlci5sb2coYFJlY29ubmVjdGlvbiBhdHRlbXB0ICR7ZX0gb2YgJHt0fSAtIHRyeWluZ2ApLHNldFRpbWVvdXQoKCk9Pnt0aGlzLnJlY29ubmVjdCgpLnRoZW4oKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFJlY29ubmVjdGlvbiBhdHRlbXB0ICR7ZX0gb2YgJHt0fSAtIHN1Y2NlZWRlZGApfSkuY2F0Y2gocz0+e3RoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksdGhpcy5sb2dnZXIubG9nKGBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke2V9IG9mICR7dH0gLSBmYWlsZWRgKSx0aGlzLmF0dGVtcHRSZWNvbm5lY3Rpb24oKytlKX0pfSwxPT09ZT8wOjFlMypzKSl9aW5pdENvbnRhY3QoKXtjb25zdCBlPXAoOCksdD10aGlzLm9wdGlvbnMuaGFja1dzc0luVHJhbnNwb3J0PyJ3c3MiOiJ3cyI7cmV0dXJue3B1YkdydXU6dm9pZCAwLHRlbXBHcnV1OnZvaWQgMCx1cmk6bmV3IGEoInNpcCIsZSx0aGlzLm9wdGlvbnMudmlhSG9zdCx2b2lkIDAse3RyYW5zcG9ydDp0fSksdG9TdHJpbmc6KGU9e30pPT57Y29uc3Qgcz1lLmFub255bW91c3x8ITEsaT1lLm91dGJvdW5kfHwhMTtsZXQgcj0iPCI7cmV0dXJuIHIrPXM/dGhpcy5jb250YWN0LnRlbXBHcnV1fHwic2lwOmFub255bW91c0Bhbm9ueW1vdXMuaW52YWxpZDt0cmFuc3BvcnQ9Iit0OnRoaXMuY29udGFjdC5wdWJHcnV1fHx0aGlzLmNvbnRhY3QudXJpLGkmJihyKz0iO29iIikscis9Ij4iLHJ9fX1pbml0Q29yZSgpe2xldCBlPVtdO2UucHVzaCgib3V0Ym91bmQiKSx0aGlzLm9wdGlvbnMuc2lwRXh0ZW5zaW9uMTAwcmVsPT09TGUuU3VwcG9ydGVkJiZlLnB1c2goIjEwMHJlbCIpLHRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25SZXBsYWNlcz09PUxlLlN1cHBvcnRlZCYmZS5wdXNoKCJyZXBsYWNlcyIpLHRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25FeHRyYVN1cHBvcnRlZCYmZS5wdXNoKC4uLnRoaXMub3B0aW9ucy5zaXBFeHRlbnNpb25FeHRyYVN1cHBvcnRlZCksdGhpcy5vcHRpb25zLmhhY2tBbGxvd1VucmVnaXN0ZXJlZE9wdGlvblRhZ3N8fChlPWUuZmlsdGVyKGU9PkdlW2VdKSksZT1BcnJheS5mcm9tKG5ldyBTZXQoZSkpO2NvbnN0IHQ9ZS5zbGljZSgpOyh0aGlzLmNvbnRhY3QucHViR3J1dXx8dGhpcy5jb250YWN0LnRlbXBHcnV1KSYmdC5wdXNoKCJncnV1Iik7Y29uc3Qgcz17YW9yOnRoaXMub3B0aW9ucy51cmksY29udGFjdDp0aGlzLmNvbnRhY3QsZGlzcGxheU5hbWU6dGhpcy5vcHRpb25zLmRpc3BsYXlOYW1lLGxvZ2dlckZhY3Rvcnk6dGhpcy5sb2dnZXJGYWN0b3J5LGhhY2tWaWFUY3A6dGhpcy5vcHRpb25zLmhhY2tWaWFUY3Ascm91dGVTZXQ6dGhpcy5vcHRpb25zLnByZWxvYWRlZFJvdXRlU2V0LHN1cHBvcnRlZE9wdGlvblRhZ3M6ZSxzdXBwb3J0ZWRPcHRpb25UYWdzUmVzcG9uc2U6dCxzaXBqc0lkOnRoaXMub3B0aW9ucy5zaXBqc0lkLHVzZXJBZ2VudEhlYWRlckZpZWxkVmFsdWU6dGhpcy5vcHRpb25zLnVzZXJBZ2VudFN0cmluZyx2aWFGb3JjZVJwb3J0OnRoaXMub3B0aW9ucy5mb3JjZVJwb3J0LHZpYUhvc3Q6dGhpcy5vcHRpb25zLnZpYUhvc3QsYXV0aGVudGljYXRpb25GYWN0b3J5OigpPT57Y29uc3QgZT10aGlzLm9wdGlvbnMuYXV0aG9yaXphdGlvblVzZXJuYW1lP3RoaXMub3B0aW9ucy5hdXRob3JpemF0aW9uVXNlcm5hbWU6dGhpcy5vcHRpb25zLnVyaS51c2VyLHQ9dGhpcy5vcHRpb25zLmF1dGhvcml6YXRpb25QYXNzd29yZD90aGlzLm9wdGlvbnMuYXV0aG9yaXphdGlvblBhc3N3b3JkOnZvaWQgMDtyZXR1cm4gbmV3IHgodGhpcy5nZXRMb2dnZXJGYWN0b3J5KCksZSx0KX0sdHJhbnNwb3J0QWNjZXNzb3I6KCk9PnRoaXMudHJhbnNwb3J0fTtyZXR1cm4gbmV3IHhlKHMse29uSW52aXRlOmU9Pnt2YXIgdDtjb25zdCBzPW5ldyBWZSh0aGlzLGUpO2lmKGUuZGVsZWdhdGU9e29uQ2FuY2VsOmU9PntzLl9vbkNhbmNlbChlKX0sb25UcmFuc3BvcnRFcnJvcjplPT57dGhpcy5sb2dnZXIuZXJyb3IoIkEgdHJhbnNwb3J0IGVycm9yIGhhcyBvY2N1cnJlZCB3aGlsZSBoYW5kbGluZyBhbiBpbmNvbWluZyBJTlZJVEUgcmVxdWVzdC4iKX19LGUudHJ5aW5nKCksdGhpcy5vcHRpb25zLnNpcEV4dGVuc2lvblJlcGxhY2VzIT09TGUuVW5zdXBwb3J0ZWQpe2NvbnN0IHQ9ZS5tZXNzYWdlLnBhcnNlSGVhZGVyKCJyZXBsYWNlcyIpO2lmKHQpe2NvbnN0IGU9dC5jYWxsX2lkO2lmKCJzdHJpbmciIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoIlR5cGUgb2YgY2FsbCBpZCBpcyBub3Qgc3RyaW5nIik7Y29uc3QgaT10LnJlcGxhY2VzX3RvX3RhZztpZigic3RyaW5nIiE9dHlwZW9mIGkpdGhyb3cgbmV3IEVycm9yKCJUeXBlIG9mIHRvIHRhZyBpcyBub3Qgc3RyaW5nIik7Y29uc3Qgcj10LnJlcGxhY2VzX2Zyb21fdGFnO2lmKCJzdHJpbmciIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoInR5cGUgb2YgZnJvbSB0YWcgaXMgbm90IHN0cmluZyIpO2NvbnN0IG49ZStpK3Isbz10aGlzLnVzZXJBZ2VudENvcmUuZGlhbG9ncy5nZXQobik7aWYoIW8pcmV0dXJuIHZvaWQgcy5yZWplY3Qoe3N0YXR1c0NvZGU6NDgxfSk7aWYoIW8uZWFybHkmJiEwPT09dC5lYXJseV9vbmx5KXJldHVybiB2b2lkIHMucmVqZWN0KHtzdGF0dXNDb2RlOjQ4Nn0pO2NvbnN0IGE9dGhpcy5fc2Vzc2lvbnNbZStyXXx8dGhpcy5fc2Vzc2lvbnNbZStpXXx8dm9pZCAwO2lmKCFhKXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKTtzLl9yZXBsYWNlZT1hfX1pZihudWxsPT09KHQ9dGhpcy5kZWxlZ2F0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25JbnZpdGUpcmV0dXJuIHMuYXV0b1NlbmRBbkluaXRpYWxQcm92aXNpb25hbFJlc3BvbnNlP3ZvaWQgcy5wcm9ncmVzcygpLnRoZW4oKCk9Pnt2YXIgZTtpZih2b2lkIDA9PT0obnVsbD09PShlPXRoaXMuZGVsZWdhdGUpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm9uSW52aXRlKSl0aHJvdyBuZXcgRXJyb3IoIm9uSW52aXRlIHVuZGVmaW5lZC4iKTt0aGlzLmRlbGVnYXRlLm9uSW52aXRlKHMpfSk6dm9pZCB0aGlzLmRlbGVnYXRlLm9uSW52aXRlKHMpO3MucmVqZWN0KHtzdGF0dXNDb2RlOjQ4Nn0pfSxvbk1lc3NhZ2U6ZT0+e2lmKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25NZXNzYWdlKXtjb25zdCB0PW5ldyBVZShlKTt0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZSh0KX1lbHNlIGUuYWNjZXB0KCl9LG9uTm90aWZ5OmU9PntpZih0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KXtjb25zdCB0PW5ldyBNZShlKTt0aGlzLmRlbGVnYXRlLm9uTm90aWZ5KHQpfWVsc2UgdGhpcy5vcHRpb25zLmFsbG93TGVnYWN5Tm90aWZpY2F0aW9ucz9lLmFjY2VwdCgpOmUucmVqZWN0KHtzdGF0dXNDb2RlOjQ4MX0pfSxvblJlZmVyOmU9Pnt0aGlzLmxvZ2dlci53YXJuKCJSZWNlaXZlZCBhbiBvdXQgb2YgZGlhbG9nIFJFRkVSIHJlcXVlc3QiKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uUmVmZXJSZXF1ZXN0P3RoaXMuZGVsZWdhdGUub25SZWZlclJlcXVlc3QoZSk6ZS5yZWplY3Qoe3N0YXR1c0NvZGU6NDA1fSl9LG9uUmVnaXN0ZXI6ZT0+e3RoaXMubG9nZ2VyLndhcm4oIlJlY2VpdmVkIGFuIG91dCBvZiBkaWFsb2cgUkVHSVNURVIgcmVxdWVzdCIpLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWdpc3RlclJlcXVlc3Q/dGhpcy5kZWxlZ2F0ZS5vblJlZ2lzdGVyUmVxdWVzdChlKTplLnJlamVjdCh7c3RhdHVzQ29kZTo0MDV9KX0sb25TdWJzY3JpYmU6ZT0+e3RoaXMubG9nZ2VyLndhcm4oIlJlY2VpdmVkIGFuIG91dCBvZiBkaWFsb2cgU1VCU0NSSUJFIHJlcXVlc3QiKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uU3Vic2NyaWJlUmVxdWVzdD90aGlzLmRlbGVnYXRlLm9uU3Vic2NyaWJlUmVxdWVzdChlKTplLnJlamVjdCh7c3RhdHVzQ29kZTo0MDV9KX19KX1pbml0VHJhbnNwb3J0Q2FsbGJhY2tzKCl7dGhpcy50cmFuc3BvcnQub25Db25uZWN0PSgpPT50aGlzLm9uVHJhbnNwb3J0Q29ubmVjdCgpLHRoaXMudHJhbnNwb3J0Lm9uRGlzY29ubmVjdD1lPT50aGlzLm9uVHJhbnNwb3J0RGlzY29ubmVjdChlKSx0aGlzLnRyYW5zcG9ydC5vbk1lc3NhZ2U9ZT0+dGhpcy5vblRyYW5zcG9ydE1lc3NhZ2UoZSl9b25UcmFuc3BvcnRDb25uZWN0KCl7dGhpcy5zdGF0ZSE9PVhlLlN0b3BwZWQmJnRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25Db25uZWN0JiZ0aGlzLmRlbGVnYXRlLm9uQ29ubmVjdCgpfW9uVHJhbnNwb3J0RGlzY29ubmVjdChlKXt0aGlzLnN0YXRlIT09WGUuU3RvcHBlZCYmKHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25EaXNjb25uZWN0JiZ0aGlzLmRlbGVnYXRlLm9uRGlzY29ubmVjdChlKSxlJiZ0aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uQXR0ZW1wdHM+MCYmdGhpcy5hdHRlbXB0UmVjb25uZWN0aW9uKCkpfW9uVHJhbnNwb3J0TWVzc2FnZShlKXtjb25zdCB0PWsucGFyc2VNZXNzYWdlKGUsdGhpcy5nZXRMb2dnZXIoInNpcC5QYXJzZXIiKSk7aWYoIXQpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybigiRmFpbGVkIHRvIHBhcnNlIGluY29taW5nIG1lc3NhZ2UuIERyb3BwaW5nLiIpO2lmKHRoaXMuc3RhdGU9PT1YZS5TdG9wcGVkJiZ0IGluc3RhbmNlb2YgVClyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKGBSZWNlaXZlZCAke3QubWV0aG9kfSByZXF1ZXN0IHdoaWxlIHN0b3BwZWQuIERyb3BwaW5nLmApO2NvbnN0IHM9KCk9Pntjb25zdCBlPVsiZnJvbSIsInRvIiwiY2FsbF9pZCIsImNzZXEiLCJ2aWEiXTtmb3IoY29uc3QgcyBvZiBlKWlmKCF0Lmhhc0hlYWRlcihzKSlyZXR1cm4gdGhpcy5sb2dnZXIud2FybihgTWlzc2luZyBtYW5kYXRvcnkgaGVhZGVyIGZpZWxkIDogJHtzfS5gKSwhMTtyZXR1cm4hMH07aWYodCBpbnN0YW5jZW9mIFQpe2lmKCFzKCkpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybigiUmVxdWVzdCBtaXNzaW5nIG1hbmRhdG9yeSBoZWFkZXIgZmllbGQuIERyb3BwaW5nLiIpO2lmKCF0LnRvVGFnJiZ0LmNhbGxJZC5zdWJzdHIoMCw1KT09PXRoaXMub3B0aW9ucy5zaXBqc0lkKXJldHVybiB2b2lkIHRoaXMudXNlckFnZW50Q29yZS5yZXBseVN0YXRlbGVzcyh0LHtzdGF0dXNDb2RlOjQ4Mn0pO2NvbnN0IGU9dyh0LmJvZHkpLGk9dC5nZXRIZWFkZXIoImNvbnRlbnQtbGVuZ3RoIik7aWYoaSYmZTxOdW1iZXIoaSkpcmV0dXJuIHZvaWQgdGhpcy51c2VyQWdlbnRDb3JlLnJlcGx5U3RhdGVsZXNzKHQse3N0YXR1c0NvZGU6NDAwfSl9aWYodCBpbnN0YW5jZW9mIHkpe2lmKCFzKCkpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybigiUmVzcG9uc2UgbWlzc2luZyBtYW5kYXRvcnkgaGVhZGVyIGZpZWxkLiBEcm9wcGluZy4iKTtpZih0LmdldEhlYWRlcnMoInZpYSIpLmxlbmd0aD4xKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oIk1vcmUgdGhhbiBvbmUgVmlhIGhlYWRlciBmaWVsZCBwcmVzZW50IGluIHRoZSByZXNwb25zZS4gRHJvcHBpbmcuIik7aWYodC52aWEuaG9zdCE9PXRoaXMub3B0aW9ucy52aWFIb3N0fHx2b2lkIDAhPT10LnZpYS5wb3J0KXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oIlZpYSBzZW50LWJ5IGluIHRoZSByZXNwb25zZSBkb2VzIG5vdCBtYXRjaCBVQSBWaWEgaG9zdCB2YWx1ZS4gRHJvcHBpbmcuIik7Y29uc3QgZT13KHQuYm9keSksaT10LmdldEhlYWRlcigiY29udGVudC1sZW5ndGgiKTtpZihpJiZlPE51bWJlcihpKSlyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKCJNZXNzYWdlIGJvZHkgbGVuZ3RoIGlzIGxvd2VyIHRoYW4gdGhlIHZhbHVlIGluIENvbnRlbnQtTGVuZ3RoIGhlYWRlciBmaWVsZC4gRHJvcHBpbmcuIil9aWYodCBpbnN0YW5jZW9mIFQpdGhpcy51c2VyQWdlbnRDb3JlLnJlY2VpdmVJbmNvbWluZ1JlcXVlc3RGcm9tVHJhbnNwb3J0KHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgeSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG1lc3NhZ2UgdHlwZS4iKTt0aGlzLnVzZXJBZ2VudENvcmUucmVjZWl2ZUluY29taW5nUmVzcG9uc2VGcm9tVHJhbnNwb3J0KHQpfX10cmFuc2l0aW9uU3RhdGUoZSx0KXtjb25zdCBzPSgpPT57dGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZnJvbSAke3RoaXMuX3N0YXRlfSB0byAke2V9YCl9O3N3aXRjaCh0aGlzLl9zdGF0ZSl7Y2FzZSBYZS5TdGFydGVkOmUhPT1YZS5TdG9wcGVkJiZzKCk7YnJlYWs7Y2FzZSBYZS5TdG9wcGVkOmUhPT1YZS5TdGFydGVkJiZzKCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gc3RhdGUuIil9dGhpcy5sb2dnZXIubG9nKGBUcmFuc2l0aW9uZWQgZnJvbSAke3RoaXMuX3N0YXRlfSB0byAke2V9YCksdGhpcy5fc3RhdGU9ZSx0aGlzLl9zdGF0ZUV2ZW50RW1pdHRlci5lbWl0KCJldmVudCIsdGhpcy5fc3RhdGUpfX1mdC5kZWZhdWx0T3B0aW9ucz17YWxsb3dMZWdhY3lOb3RpZmljYXRpb25zOiExLGF1dGhvcml6YXRpb25QYXNzd29yZDoiIixhdXRob3JpemF0aW9uVXNlcm5hbWU6IiIsYXV0b1N0YXJ0OiExLGF1dG9TdG9wOiEwLGRlbGVnYXRlOnt9LGRpc3BsYXlOYW1lOiIiLGZvcmNlUnBvcnQ6ITEsaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFnczohMSxoYWNrSXBJbkNvbnRhY3Q6ITEsaGFja1ZpYVRjcDohMSxoYWNrV3NzSW5UcmFuc3BvcnQ6ITEsbG9nQnVpbHRpbkVuYWJsZWQ6ITAsbG9nQ29uZmlndXJhdGlvbjohMCxsb2dDb25uZWN0b3I6KCk9Pnt9LGxvZ0xldmVsOiJsb2ciLG5vQW5zd2VyVGltZW91dDo2MCxwcmVsb2FkZWRSb3V0ZVNldDpbXSxyZWNvbm5lY3Rpb25BdHRlbXB0czowLHJlY29ubmVjdGlvbkRlbGF5OjQsc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3Rvcnk6dXQuZGVmYXVsdEZhY3Rvcnksc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlckZhY3RvcnlPcHRpb25zOnt9LHNpcEV4dGVuc2lvbjEwMHJlbDpMZS5VbnN1cHBvcnRlZCxzaXBFeHRlbnNpb25SZXBsYWNlczpMZS5VbnN1cHBvcnRlZCxzaXBFeHRlbnNpb25FeHRyYVN1cHBvcnRlZDpbXSxzaXBqc0lkOiIiLHRyYW5zcG9ydENvbnN0cnVjdG9yOnB0LHRyYW5zcG9ydE9wdGlvbnM6e30sdXJpOm5ldyBhKCJzaXAiLCJhbm9ueW1vdXMiLCJhbm9ueW1vdXMuaW52YWxpZCIpLHVzZXJBZ2VudFN0cmluZzoiU0lQLmpzLzAuMTYuMSIsdmlhSG9zdDoiIn07Y2xhc3MgbXR7Y29uc3RydWN0b3IoZSx0PXt9KXt0aGlzLmF0dGVtcHRpbmdSZWNvbm5lY3Rpb249ITEsdGhpcy5jb25uZWN0UmVxdWVzdGVkPSExLHRoaXMuaGVsZD0hMSx0aGlzLnJlZ2lzdGVyZXI9dm9pZCAwLHRoaXMucmVnaXN0ZXJSZXF1ZXN0ZWQ9ITEsdGhpcy5zZXNzaW9uPXZvaWQgMCx0aGlzLmRlbGVnYXRlPXQuZGVsZWdhdGUsdGhpcy5vcHRpb25zPU9iamVjdC5hc3NpZ24oe30sdCk7Y29uc3Qgcz1PYmplY3QuYXNzaWduKHt9LHQudXNlckFnZW50T3B0aW9ucyk7aWYocy50cmFuc3BvcnRDb25zdHJ1Y3Rvcnx8KHMudHJhbnNwb3J0Q29uc3RydWN0b3I9cHQpLHMudHJhbnNwb3J0T3B0aW9uc3x8KHMudHJhbnNwb3J0T3B0aW9ucz17c2VydmVyOmV9KSwhcy51cmkmJnQuYW9yKXtjb25zdCBlPWZ0Lm1ha2VVUkkodC5hb3IpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGNyZWF0ZSB2YWxpZCBVUkkgZnJvbSAiK3QuYW9yKTtzLnVyaT1lfXRoaXMudXNlckFnZW50PW5ldyBmdChzKSx0aGlzLnVzZXJBZ2VudC5kZWxlZ2F0ZT17b25Db25uZWN0OigpPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gQ29ubmVjdGVkYCksdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vblNlcnZlckNvbm5lY3QmJnRoaXMuZGVsZWdhdGUub25TZXJ2ZXJDb25uZWN0KCksdGhpcy5yZWdpc3RlcmVyJiZ0aGlzLnJlZ2lzdGVyUmVxdWVzdGVkJiYodGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVnaXN0ZXJpbmcuLi5gKSx0aGlzLnJlZ2lzdGVyZXIucmVnaXN0ZXIoKS5jYXRjaChlPT57dGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBFcnJvciBvY2N1cnJlZCByZWdpc3RlcmluZyBhZnRlciBjb25uZWN0aW9uIHdpdGggc2VydmVyIHdhcyBvYnRhaW5lZC5gKSx0aGlzLmxvZ2dlci5lcnJvcihlLnRvU3RyaW5nKCkpfSkpfSxvbkRpc2Nvbm5lY3Q6ZT0+e3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIERpc2Nvbm5lY3RlZGApLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25TZXJ2ZXJEaXNjb25uZWN0JiZ0aGlzLmRlbGVnYXRlLm9uU2VydmVyRGlzY29ubmVjdChlKSx0aGlzLnNlc3Npb24mJih0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBIYW5naW5nIHVwLi4uYCksdGhpcy5oYW5ndXAoKS5jYXRjaChlPT57dGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBFcnJvciBvY2N1cnJlZCBoYW5naW5nIHVwIGNhbGwgYWZ0ZXIgY29ubmVjdGlvbiB3aXRoIHNlcnZlciB3YXMgbG9zdC5gKSx0aGlzLmxvZ2dlci5lcnJvcihlLnRvU3RyaW5nKCkpfSkpLHRoaXMucmVnaXN0ZXJlciYmKHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFVucmVnaXN0ZXJpbmcuLi5gKSx0aGlzLnJlZ2lzdGVyZXIudW5yZWdpc3RlcigpLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEVycm9yIG9jY3VycmVkIHVucmVnaXN0ZXJpbmcgYWZ0ZXIgY29ubmVjdGlvbiB3aXRoIHNlcnZlciB3YXMgbG9zdC5gKSx0aGlzLmxvZ2dlci5lcnJvcihlLnRvU3RyaW5nKCkpfSkpLGUmJnRoaXMuYXR0ZW1wdFJlY29ubmVjdGlvbigpfSxvbkludml0ZTplPT57aWYodGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjZWl2ZWQgSU5WSVRFYCksdGhpcy5zZXNzaW9uKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKGBbJHt0aGlzLmlkfV0gU2Vzc2lvbiBhbHJlYWR5IGluIHByb2dyZXNzLCByZWplY3RpbmcgSU5WSVRFLi4uYCksdm9pZCBlLnJlamVjdCgpLnRoZW4oKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWplY3RlZCBJTlZJVEVgKX0pLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEZhaWxlZCB0byByZWplY3QgSU5WSVRFYCksdGhpcy5sb2dnZXIuZXJyb3IoZS50b1N0cmluZygpKX0pO2NvbnN0IHQ9e3Nlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zOntjb25zdHJhaW50czp0aGlzLmNvbnN0cmFpbnRzfX07dGhpcy5pbml0U2Vzc2lvbihlLHQpLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25DYWxsUmVjZWl2ZWQ/dGhpcy5kZWxlZ2F0ZS5vbkNhbGxSZWNlaXZlZCgpOih0aGlzLmxvZ2dlci53YXJuKGBbJHt0aGlzLmlkfV0gTm8gaGFuZGxlciBhdmFpbGFibGUsIHJlamVjdGluZyBJTlZJVEUuLi5gKSxlLnJlamVjdCgpLnRoZW4oKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWplY3RlZCBJTlZJVEVgKX0pLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEZhaWxlZCB0byByZWplY3QgSU5WSVRFYCksdGhpcy5sb2dnZXIuZXJyb3IoZS50b1N0cmluZygpKX0pKX0sb25NZXNzYWdlOmU9PntlLmFjY2VwdCgpLnRoZW4oKCk9Pnt0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZVJlY2VpdmVkJiZ0aGlzLmRlbGVnYXRlLm9uTWVzc2FnZVJlY2VpdmVkKGUucmVxdWVzdC5ib2R5KX0pfX0sdGhpcy5sb2dnZXI9dGhpcy51c2VyQWdlbnQuZ2V0TG9nZ2VyKCJzaXAuU2ltcGxlVXNlciIpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLCgpPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gT25saW5lYCksdGhpcy5hdHRlbXB0UmVjb25uZWN0aW9uKCl9KX1nZXQgaWQoKXtyZXR1cm4gdGhpcy5vcHRpb25zLnVzZXJBZ2VudE9wdGlvbnMmJnRoaXMub3B0aW9ucy51c2VyQWdlbnRPcHRpb25zLmRpc3BsYXlOYW1lfHwiQW5vbnltb3VzIn1nZXQgbG9jYWxBdWRpb1RyYWNrKCl7cmV0dXJuIHRoaXMuZ2V0U2VuZGVyVHJhY2soImF1ZGlvIil9Z2V0IGxvY2FsVmlkZW9UcmFjaygpe3JldHVybiB0aGlzLmdldFNlbmRlclRyYWNrKCJ2aWRlbyIpfWdldCByZW1vdGVBdWRpb1RyYWNrKCl7cmV0dXJuIHRoaXMuZ2V0UmVjZWl2ZXJUcmFjaygiYXVkaW8iKX1nZXQgcmVtb3RlVmlkZW9UcmFjaygpe3JldHVybiB0aGlzLmdldFJlY2VpdmVyVHJhY2soInZpZGVvIil9Y29ubmVjdCgpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBDb25uZWN0aW5nIFVzZXJBZ2VudC4uLmApLHRoaXMuY29ubmVjdFJlcXVlc3RlZD0hMCx0aGlzLnVzZXJBZ2VudC5zdGF0ZSE9PVhlLlN0YXJ0ZWQ/dGhpcy51c2VyQWdlbnQuc3RhcnQoKTp0aGlzLnVzZXJBZ2VudC5yZWNvbm5lY3QoKX1kaXNjb25uZWN0KCl7cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIERpc2Nvbm5lY3RpbmcgVXNlckFnZW50Li4uYCksdGhpcy5jb25uZWN0UmVxdWVzdGVkPSExLHRoaXMudXNlckFnZW50LnN0b3AoKX1pc0Nvbm5lY3RlZCgpe3JldHVybiB0aGlzLnVzZXJBZ2VudC5pc0Nvbm5lY3RlZCgpfXJlZ2lzdGVyKGUsdCl7cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlZ2lzdGVyaW5nIFVzZXJBZ2VudC4uLmApLHRoaXMucmVnaXN0ZXJSZXF1ZXN0ZWQ9ITAsdGhpcy5yZWdpc3RlcmVyfHwodGhpcy5yZWdpc3RlcmVyPW5ldyBldCh0aGlzLnVzZXJBZ2VudCxlKSx0aGlzLnJlZ2lzdGVyZXIuc3RhdGVDaGFuZ2UuYWRkTGlzdGVuZXIoZT0+e3N3aXRjaChlKXtjYXNlIFplLkluaXRpYWw6YnJlYWs7Y2FzZSBaZS5SZWdpc3RlcmVkOnRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25SZWdpc3RlcmVkJiZ0aGlzLmRlbGVnYXRlLm9uUmVnaXN0ZXJlZCgpO2JyZWFrO2Nhc2UgWmUuVW5yZWdpc3RlcmVkOnRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25VbnJlZ2lzdGVyZWQmJnRoaXMuZGVsZWdhdGUub25VbnJlZ2lzdGVyZWQoKTticmVhaztjYXNlIFplLlRlcm1pbmF0ZWQ6dGhpcy5yZWdpc3RlcmVyPXZvaWQgMDticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biByZWdpc3RlcmVyIHN0YXRlLiIpfX0pKSx0aGlzLnJlZ2lzdGVyZXIucmVnaXN0ZXIodCkudGhlbigoKT0+e30pfXVucmVnaXN0ZXIoZSl7cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFVucmVnaXN0ZXJpbmcgVXNlckFnZW50Li4uYCksdGhpcy5yZWdpc3RlclJlcXVlc3RlZD0hMSx0aGlzLnJlZ2lzdGVyZXI/dGhpcy5yZWdpc3RlcmVyLnVucmVnaXN0ZXIoZSkudGhlbigoKT0+e30pOlByb21pc2UucmVzb2x2ZSgpfWNhbGwoZSx0LHMpe2lmKHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIEJlZ2lubmluZyBTZXNzaW9uLi4uYCksdGhpcy5zZXNzaW9uKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gYWxyZWFkeSBleGlzdHMuIikpO2NvbnN0IGk9ZnQubWFrZVVSSShlKTtpZighaSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGEgdmFsaWQgVVJJIGZyb20gIiR7ZX0iYCkpO3R8fCh0PXt9KSx0LnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zfHwodC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucz17fSksdC5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucy5jb25zdHJhaW50c3x8KHQuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnMuY29uc3RyYWludHM9dGhpcy5jb25zdHJhaW50cyk7Y29uc3Qgcj1uZXcgS2UodGhpcy51c2VyQWdlbnQsaSx0KTtyZXR1cm4gdGhpcy5zZW5kSW52aXRlKHIsdCxzKS50aGVuKCgpPT57fSl9aGFuZ3VwKCl7cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIEhhbmd1cC4uLmApLHRoaXMudGVybWluYXRlKCl9YW5zd2VyKGUpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBBY2NlcHRpbmcgSW52aXRhdGlvbi4uLmApLHRoaXMuc2Vzc2lvbj90aGlzLnNlc3Npb24gaW5zdGFuY2VvZiBWZT8oZXx8KGU9e30pLGUuc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlck9wdGlvbnN8fChlLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zPXt9KSxlLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJPcHRpb25zLmNvbnN0cmFpbnRzfHwoZS5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyT3B0aW9ucy5jb25zdHJhaW50cz10aGlzLmNvbnN0cmFpbnRzKSx0aGlzLnNlc3Npb24uYWNjZXB0KGUpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gbm90IGluc3RhbmNlIG9mIEludml0YXRpb24uIikpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKSl9ZGVjbGluZSgpe3JldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSByZWplY3RpbmcgSW52aXRhdGlvbi4uLmApLHRoaXMuc2Vzc2lvbj90aGlzLnNlc3Npb24gaW5zdGFuY2VvZiBWZT90aGlzLnNlc3Npb24ucmVqZWN0KCk6UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTZXNzaW9uIG5vdCBpbnN0YW5jZSBvZiBJbnZpdGF0aW9uLiIpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlNlc3Npb24gZG9lcyBub3QgZXhpc3QuIikpfWhvbGQoKXtyZXR1cm4gdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gaG9sZGluZyBzZXNzaW9uLi4uYCksdGhpcy5zZXRIb2xkKCEwKX11bmhvbGQoKXtyZXR1cm4gdGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gdW5ob2xkaW5nIHNlc3Npb24uLi5gKSx0aGlzLnNldEhvbGQoITEpfWlzSGVsZCgpe3JldHVybiB0aGlzLmhlbGR9bXV0ZSgpe3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIGRpc2FibGluZyBtZWRpYSB0cmFja3MuLi5gKSx0aGlzLnNldE11dGUoITApfXVubXV0ZSgpe3RoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIGVuYWJsaW5nIG1lZGlhIHRyYWNrcy4uLmApLHRoaXMuc2V0TXV0ZSghMSl9aXNNdXRlZCgpe2NvbnN0IGU9dGhpcy5sb2NhbEF1ZGlvVHJhY2t8fHRoaXMubG9jYWxWaWRlb1RyYWNrO3JldHVybiEhZSYmIWUuZW5hYmxlZH1zZW5kRFRNRihlKXtpZih0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBzZW5kaW5nIERUTUYuLi5gKSwhL15bMC05QS1EIyosXSQvLmV4ZWMoZSkpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiSW52YWxpZCBEVE1GIHRvbmUuIikpO2lmKCF0aGlzLnNlc3Npb24pcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKSk7dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gU2VuZGluZyBEVE1GIHRvbmU6ICR7ZX1gKTtjb25zdCB0PXtib2R5Ontjb250ZW50RGlzcG9zaXRpb246InJlbmRlciIsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL2R0bWYtcmVsYXkiLGNvbnRlbnQ6IlNpZ25hbD0iK2UrIlxyXG5EdXJhdGlvbj0yMDAwIn19O3JldHVybiB0aGlzLnNlc3Npb24uaW5mbyh7cmVxdWVzdE9wdGlvbnM6dH0pLnRoZW4oKCk9Pnt9KX1tZXNzYWdlKGUsdCl7dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gc2VuZGluZyBtZXNzYWdlLi4uYCk7Y29uc3Qgcz1mdC5tYWtlVVJJKGUpO3JldHVybiBzP25ldyBXZSh0aGlzLnVzZXJBZ2VudCxzLHQpLm1lc3NhZ2UoKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgYSB2YWxpZCBVUkkgZnJvbSAiJHtlfSJgKSl9Z2V0IGNvbnN0cmFpbnRzKCl7bGV0IGU9e2F1ZGlvOiEwLHZpZGVvOiExfTtpZih0aGlzLm9wdGlvbnMubWVkaWEmJnRoaXMub3B0aW9ucy5tZWRpYS5jb25zdHJhaW50cyYmKGU9T2JqZWN0LmFzc2lnbih7fSx0aGlzLm9wdGlvbnMubWVkaWEuY29uc3RyYWludHMpLCFlLmF1ZGlvJiYhZS52aWRlbykpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG1lZGlhIGNvbnN0cmFpbnRzIC0gYXVkaW8gYW5kL29yIHZpZGVvIG11c3QgYmUgdHJ1ZS4iKTtyZXR1cm4gZX1hdHRlbXB0UmVjb25uZWN0aW9uKGU9MSl7Y29uc3QgdD10aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uQXR0ZW1wdHN8fDMscz10aGlzLm9wdGlvbnMucmVjb25uZWN0aW9uRGVsYXl8fDQ7dGhpcy5jb25uZWN0UmVxdWVzdGVkPyh0aGlzLmF0dGVtcHRpbmdSZWNvbm5lY3Rpb24mJnRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFJlY29ubmVjdGlvbiBhdHRlbXB0IGFscmVhZHkgaW4gcHJvZ3Jlc3NgKSxlPnQ/dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIG1heGltdW0gYXR0ZW1wdHMgcmVhY2hlZGApOigxPT09ZT90aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke2V9IG9mICR7dH0gLSB0cnlpbmdgKTp0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke2V9IG9mICR7dH0gLSB0cnlpbmcgaW4gJHtzfSBzZWNvbmRzYCksdGhpcy5hdHRlbXB0aW5nUmVjb25uZWN0aW9uPSEwLHNldFRpbWVvdXQoKCk9PntpZighdGhpcy5jb25uZWN0UmVxdWVzdGVkKXJldHVybiB0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke2V9IG9mICR7dH0gLSBhYm9ydGVkYCksdm9pZCh0aGlzLmF0dGVtcHRpbmdSZWNvbm5lY3Rpb249ITEpO3RoaXMudXNlckFnZW50LnJlY29ubmVjdCgpLnRoZW4oKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gYXR0ZW1wdCAke2V9IG9mICR7dH0gLSBzdWNjZWVkZWRgKSx0aGlzLmF0dGVtcHRpbmdSZWNvbm5lY3Rpb249ITF9KS5jYXRjaChzPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gUmVjb25uZWN0aW9uIGF0dGVtcHQgJHtlfSBvZiAke3R9IC0gZmFpbGVkYCksdGhpcy5sb2dnZXIuZXJyb3Iocy5tZXNzYWdlKSx0aGlzLmF0dGVtcHRpbmdSZWNvbm5lY3Rpb249ITEsdGhpcy5hdHRlbXB0UmVjb25uZWN0aW9uKCsrZSl9KX0sMT09PWU/MDoxZTMqcykpKTp0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBSZWNvbm5lY3Rpb24gbm90IGN1cnJlbnRseSBkZXNpcmVkYCl9Y2xlYW51cE1lZGlhKCl7dGhpcy5vcHRpb25zLm1lZGlhJiYodGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsJiZ0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8mJih0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8uc3JjT2JqZWN0PW51bGwsdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsLnZpZGVvLnBhdXNlKCkpLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUmJih0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvJiYodGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS5hdWRpby5zcmNPYmplY3Q9bnVsbCx0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLmF1ZGlvLnBhdXNlKCkpLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8mJih0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLnZpZGVvLnNyY09iamVjdD1udWxsLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8ucGF1c2UoKSkpKX1lbmFibGVTZW5kZXJUcmFja3MoZSl7aWYoIXRoaXMuc2Vzc2lvbil0aHJvdyBuZXcgRXJyb3IoIlNlc3Npb24gZG9lcyBub3QgZXhpc3QuIik7Y29uc3QgdD10aGlzLnNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtpZighKHQgaW5zdGFuY2VvZiB1dCkpdGhyb3cgbmV3IEVycm9yKCJTZXNzaW9uJ3Mgc2Vzc2lvbiBkZXNjcmlwdGlvbiBoYW5kbGVyIG5vdCBpbnN0YW5jZSBvZiBTZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyLiIpO3QucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2godD0+e3QudHJhY2smJih0LnRyYWNrLmVuYWJsZWQ9ZSl9KX1nZXRSZWNlaXZlclRyYWNrKGUpe2lmKCF0aGlzLnNlc3Npb24pcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybihgWyR7dGhpcy5pZH1dIGdldFJlY2VpdmVyVHJhY2sgLSBzZXNzaW9uIHVuZGVmaW5lZGApO2NvbnN0IHQ9dGhpcy5zZXNzaW9uLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXI7aWYoIXQpcmV0dXJuIHZvaWQgdGhpcy5sb2dnZXIud2FybihgWyR7dGhpcy5pZH1dIGdldFJlY2VpdmVyVHJhY2sgLSBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgdW5kZWZpbmVkYCk7aWYoISh0IGluc3RhbmNlb2YgdXQpKXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbidzIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBub3QgaW5zdGFuY2Ugb2YgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci4iKTtjb25zdCBzPXQucGVlckNvbm5lY3Rpb24uZ2V0UmVjZWl2ZXJzKCkuZmluZCh0PT50LnRyYWNrLmtpbmQ9PT1lKTtyZXR1cm4gcz9zLnRyYWNrOnZvaWQgMH1nZXRTZW5kZXJUcmFjayhlKXtpZighdGhpcy5zZXNzaW9uKXJldHVybiB2b2lkIHRoaXMubG9nZ2VyLndhcm4oYFske3RoaXMuaWR9XSBnZXRTZW5kZXJUcmFjayAtIHNlc3Npb24gdW5kZWZpbmVkYCk7Y29uc3QgdD10aGlzLnNlc3Npb24uc2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlcjtpZighdClyZXR1cm4gdm9pZCB0aGlzLmxvZ2dlci53YXJuKGBbJHt0aGlzLmlkfV0gZ2V0U2VuZGVyVHJhY2sgLSBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgdW5kZWZpbmVkYCk7aWYoISh0IGluc3RhbmNlb2YgdXQpKXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbidzIHNlc3Npb24gZGVzY3JpcHRpb24gaGFuZGxlciBub3QgaW5zdGFuY2Ugb2YgU2Vzc2lvbkRlc2NyaXB0aW9uSGFuZGxlci4iKTtjb25zdCBzPXQucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZpbmQodD0+ISghdC50cmFja3x8dC50cmFjay5raW5kIT09ZSkpO3JldHVybiBzJiZzLnRyYWNrP3MudHJhY2s6dm9pZCAwfWluaXRTZXNzaW9uKGUsdCl7dGhpcy5zZXNzaW9uPWUsdGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkNhbGxDcmVhdGVkJiZ0aGlzLmRlbGVnYXRlLm9uQ2FsbENyZWF0ZWQoKSx0aGlzLnNlc3Npb24uc3RhdGVDaGFuZ2UuYWRkTGlzdGVuZXIodD0+e2lmKHRoaXMuc2Vzc2lvbj09PWUpc3dpdGNoKHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIHNlc3Npb24gc3RhdGUgY2hhbmdlZCB0byAke3R9YCksdCl7Y2FzZSBGZS5Jbml0aWFsOmNhc2UgRmUuRXN0YWJsaXNoaW5nOmJyZWFrO2Nhc2UgRmUuRXN0YWJsaXNoZWQ6dGhpcy5zZXR1cExvY2FsTWVkaWEoKSx0aGlzLnNldHVwUmVtb3RlTWVkaWEoKSx0aGlzLmRlbGVnYXRlJiZ0aGlzLmRlbGVnYXRlLm9uQ2FsbEFuc3dlcmVkJiZ0aGlzLmRlbGVnYXRlLm9uQ2FsbEFuc3dlcmVkKCk7YnJlYWs7Y2FzZSBGZS5UZXJtaW5hdGluZzpjYXNlIEZlLlRlcm1pbmF0ZWQ6dGhpcy5zZXNzaW9uPXZvaWQgMCx0aGlzLmNsZWFudXBNZWRpYSgpLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25DYWxsSGFuZ3VwJiZ0aGlzLmRlbGVnYXRlLm9uQ2FsbEhhbmd1cCgpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHNlc3Npb24gc3RhdGUuIil9fSksdGhpcy5zZXNzaW9uLmRlbGVnYXRlPXtvbkluZm86ZT0+e3ZhciB0O2lmKHZvaWQgMD09PShudWxsPT09KHQ9dGhpcy5kZWxlZ2F0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25DYWxsRFRNRlJlY2VpdmVkKSlyZXR1cm4gdm9pZCBlLnJlamVjdCgpO2NvbnN0IHM9ZS5yZXF1ZXN0LmdldEhlYWRlcigiY29udGVudC10eXBlIik7aWYoIXN8fCEvXmFwcGxpY2F0aW9uXC9kdG1mLXJlbGF5L2kuZXhlYyhzKSlyZXR1cm4gdm9pZCBlLnJlamVjdCgpO2NvbnN0IGk9ZS5yZXF1ZXN0LmJvZHkuc3BsaXQoIlxyXG4iLDIpO2lmKDIhPT1pLmxlbmd0aClyZXR1cm4gdm9pZCBlLnJlamVjdCgpO2xldCByO2NvbnN0IG49L14oU2lnbmFsXHMqPz1ccyo/KShbMC05QS1EIypdezF9KShccyk/LiovO2lmKG4udGVzdChpWzBdKSYmKHI9aVswXS5yZXBsYWNlKG4sIiQyIikpLCFyKXJldHVybiB2b2lkIGUucmVqZWN0KCk7bGV0IG87Y29uc3QgYT0vXihEdXJhdGlvblxzPz1ccz8pKFswLTldezEsNH0pKFxzKT8uKi87YS50ZXN0KGlbMV0pJiYobz1wYXJzZUludChpWzFdLnJlcGxhY2UoYSwiJDIiKSwxMCkpLG8/ZS5hY2NlcHQoKS50aGVuKCgpPT57aWYodGhpcy5kZWxlZ2F0ZSYmdGhpcy5kZWxlZ2F0ZS5vbkNhbGxEVE1GUmVjZWl2ZWQpe2lmKCFyfHwhbyl0aHJvdyBuZXcgRXJyb3IoIlRvbmUgb3IgZHVyYXRpb24gdW5kZWZpbmVkLiIpO3RoaXMuZGVsZWdhdGUub25DYWxsRFRNRlJlY2VpdmVkKHIsbyl9fSkuY2F0Y2goZT0+e3RoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSl9KTplLnJlamVjdCgpfSxvblJlZmVyOmU9PntlLmFjY2VwdCgpLnRoZW4oKCk9PnRoaXMuc2VuZEludml0ZShlLm1ha2VJbnZpdGVyKHQpLHQpKS5jYXRjaChlPT57dGhpcy5sb2dnZXIuZXJyb3IoZS5tZXNzYWdlKX0pfX19c2VuZEludml0ZShlLHQscyl7cmV0dXJuIHRoaXMuaW5pdFNlc3Npb24oZSx0KSxlLmludml0ZShzKS50aGVuKCgpPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gc2VudCBJTlZJVEVgKX0pfXNldEhvbGQoZSl7aWYoIXRoaXMuc2Vzc2lvbilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTZXNzaW9uIGRvZXMgbm90IGV4aXN0LiIpKTtpZih0aGlzLmhlbGQ9PT1lKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtjb25zdCB0PXRoaXMuc2Vzc2lvbi5zZXNzaW9uRGVzY3JpcHRpb25IYW5kbGVyO2lmKCEodCBpbnN0YW5jZW9mIHV0KSl0aHJvdyBuZXcgRXJyb3IoIlNlc3Npb24ncyBzZXNzaW9uIGRlc2NyaXB0aW9uIGhhbmRsZXIgbm90IGluc3RhbmNlIG9mIFNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXIuIik7Y29uc3Qgcz17cmVxdWVzdERlbGVnYXRlOntvbkFjY2VwdDooKT0+e3RoaXMuaGVsZD1lLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25DYWxsSG9sZCYmdGhpcy5kZWxlZ2F0ZS5vbkNhbGxIb2xkKHRoaXMuaGVsZCl9LG9uUmVqZWN0OigpPT57dGhpcy5sb2dnZXIud2FybihgWyR7dGhpcy5pZH1dIHJlLWludml0ZSByZXF1ZXN0IHdhcyByZWplY3RlZGApLHRoaXMuZGVsZWdhdGUmJnRoaXMuZGVsZWdhdGUub25DYWxsSG9sZCYmdGhpcy5kZWxlZ2F0ZS5vbkNhbGxIb2xkKHRoaXMuaGVsZCl9fX07cmV0dXJuIGUmJihzLnNlc3Npb25EZXNjcmlwdGlvbkhhbmRsZXJNb2RpZmllcnM9W2U9PnQuaG9sZE1vZGlmaWVyKGUpXSksdGhpcy5zZXNzaW9uLmludml0ZShzKS50aGVuKCgpPT57dGhpcy5lbmFibGVTZW5kZXJUcmFja3MoIWUpfSkuY2F0Y2goZT0+e3Rocm93IGUgaW5zdGFuY2VvZiBrZSYmdGhpcy5sb2dnZXIuZXJyb3IoYFske3RoaXMuaWR9XSBBIGhvbGQgcmVxdWVzdCBpcyBhbHJlYWR5IGluIHByb2dyZXNzLmApLGV9KX1zZXRNdXRlKGUpe3RoaXMuc2Vzc2lvbj90aGlzLnNlc3Npb24uc3RhdGU9PT1GZS5Fc3RhYmxpc2hlZD90aGlzLmVuYWJsZVNlbmRlclRyYWNrcyghZSk6dGhpcy5sb2dnZXIud2FybihgWyR7dGhpcy5pZH1dIEFuIGVzdGFibGlzaGVkIHNlc3Npb24gaXMgcmVxdWlyZWQgdG8gZW5hYmxlL2Rpc2FibGUgbWVkaWEgdHJhY2tzYCk6dGhpcy5sb2dnZXIud2FybihgWyR7dGhpcy5pZH1dIEEgc2Vzc2lvbiBpcyByZXF1aXJlZCB0byBlbmFibGVkL2Rpc2FibGUgbWVkaWEgdHJhY2tzYCl9c2V0dXBMb2NhbE1lZGlhKCl7aWYoIXRoaXMuc2Vzc2lvbil0aHJvdyBuZXcgRXJyb3IoIlNlc3Npb24gZG9lcyBub3QgZXhpc3QuIik7aWYodGhpcy5vcHRpb25zLm1lZGlhJiZ0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwmJnRoaXMub3B0aW9ucy5tZWRpYS5sb2NhbC52aWRlbyl7Y29uc3QgZT10aGlzLmxvY2FsVmlkZW9UcmFjaztpZihlKXtjb25zdCB0PW5ldyBNZWRpYVN0cmVhbShbZV0pO3RoaXMub3B0aW9ucy5tZWRpYS5sb2NhbC52aWRlby5zcmNPYmplY3Q9dCx0aGlzLm9wdGlvbnMubWVkaWEubG9jYWwudmlkZW8udm9sdW1lPTAsdGhpcy5vcHRpb25zLm1lZGlhLmxvY2FsLnZpZGVvLnBsYXkoKX19fXNldHVwUmVtb3RlTWVkaWEoKXtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcigiU2Vzc2lvbiBkb2VzIG5vdCBleGlzdC4iKTtpZih0aGlzLm9wdGlvbnMubWVkaWEmJnRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUpe2NvbnN0IGU9dGhpcy5yZW1vdGVBdWRpb1RyYWNrLHQ9dGhpcy5yZW1vdGVWaWRlb1RyYWNrLHM9bmV3IE1lZGlhU3RyZWFtO3RoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8/KGUmJnMuYWRkVHJhY2soZSksdCYmcy5hZGRUcmFjayh0KSx0aGlzLm9wdGlvbnMubWVkaWEucmVtb3RlLnZpZGVvLnNyY09iamVjdD1zLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUudmlkZW8ucGxheSgpLmNhdGNoKGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihgWyR7dGhpcy5pZH1dIEVycm9yIHBsYXlpbmcgdmlkZW9gKSx0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpfSkpOnRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUuYXVkaW8mJmUmJihzLmFkZFRyYWNrKGUpLHRoaXMub3B0aW9ucy5tZWRpYS5yZW1vdGUuYXVkaW8uc3JjT2JqZWN0PXMsdGhpcy5vcHRpb25zLm1lZGlhLnJlbW90ZS5hdWRpby5wbGF5KCkuY2F0Y2goZT0+e3RoaXMubG9nZ2VyLmVycm9yKGBbJHt0aGlzLmlkfV0gRXJyb3IgcGxheWluZyBhdWRpb2ApLHRoaXMubG9nZ2VyLmVycm9yKGUubWVzc2FnZSl9KSl9fXRlcm1pbmF0ZSgpe2lmKHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFRlcm1pbmF0aW5nLi4uYCksIXRoaXMuc2Vzc2lvbilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTZXNzaW9uIGRvZXMgbm90IGV4aXN0LiIpKTtzd2l0Y2godGhpcy5zZXNzaW9uLnN0YXRlKXtjYXNlIEZlLkluaXRpYWw6aWYodGhpcy5zZXNzaW9uIGluc3RhbmNlb2YgS2UpcmV0dXJuIHRoaXMuc2Vzc2lvbi5jYW5jZWwoKS50aGVuKCgpPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gSW52aXRlciBuZXZlciBzZW50IElOVklURSAoY2FuY2VsZWQpYCl9KTtpZih0aGlzLnNlc3Npb24gaW5zdGFuY2VvZiBWZSlyZXR1cm4gdGhpcy5zZXNzaW9uLnJlamVjdCgpLnRoZW4oKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBJbnZpdGF0aW9uIHJlamVjdGVkIChzZW50IDQ4MClgKX0pO3Rocm93IG5ldyBFcnJvcigiVW5rbm93biBzZXNzaW9uIHR5cGUuIik7Y2FzZSBGZS5Fc3RhYmxpc2hpbmc6aWYodGhpcy5zZXNzaW9uIGluc3RhbmNlb2YgS2UpcmV0dXJuIHRoaXMuc2Vzc2lvbi5jYW5jZWwoKS50aGVuKCgpPT57dGhpcy5sb2dnZXIubG9nKGBbJHt0aGlzLmlkfV0gSW52aXRlciBjYW5jZWxlZCAoc2VudCBDQU5DRUwpYCl9KTtpZih0aGlzLnNlc3Npb24gaW5zdGFuY2VvZiBWZSlyZXR1cm4gdGhpcy5zZXNzaW9uLnJlamVjdCgpLnRoZW4oKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBJbnZpdGF0aW9uIHJlamVjdGVkIChzZW50IDQ4MClgKX0pO3Rocm93IG5ldyBFcnJvcigiVW5rbm93biBzZXNzaW9uIHR5cGUuIik7Y2FzZSBGZS5Fc3RhYmxpc2hlZDpyZXR1cm4gdGhpcy5zZXNzaW9uLmJ5ZSgpLnRoZW4oKCk9Pnt0aGlzLmxvZ2dlci5sb2coYFske3RoaXMuaWR9XSBTZXNzaW9uIGVuZGVkIChzZW50IEJZRSlgKX0pO2Nhc2UgRmUuVGVybWluYXRpbmc6Y2FzZSBGZS5UZXJtaW5hdGVkOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHN0YXRlIil9cmV0dXJuIHRoaXMubG9nZ2VyLmxvZyhgWyR7dGhpcy5pZH1dIFRlcm1pbmF0aW5nIGluIHN0YXRlICR7dGhpcy5zZXNzaW9uLnN0YXRlfSwgbm8gYWN0aW9uIHRha2VuYCksUHJvbWlzZS5yZXNvbHZlKCl9fWNvbnN0IHZ0PSIwLjE2LjEiLHd0PSJzaXAuanMifV0pfSkpOw==`
